(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function My(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rh={exports:{}},Ho={},Nh={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is=Symbol.for("react.element"),Oy=Symbol.for("react.portal"),Fy=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),zy=Symbol.for("react.profiler"),By=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),Uy=Symbol.for("react.suspense"),Hy=Symbol.for("react.memo"),Vy=Symbol.for("react.lazy"),hd=Symbol.iterator;function Gy(t){return t===null||typeof t!="object"?null:(t=hd&&t[hd]||t["@@iterator"],typeof t=="function"?t:null)}var Ph={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bh=Object.assign,Dh={};function Br(t,e,n){this.props=t,this.context=e,this.refs=Dh,this.updater=n||Ph}Br.prototype.isReactComponent={};Br.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Br.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ah(){}Ah.prototype=Br.prototype;function Su(t,e,n){this.props=t,this.context=e,this.refs=Dh,this.updater=n||Ph}var Eu=Su.prototype=new Ah;Eu.constructor=Su;bh(Eu,Br.prototype);Eu.isPureReactComponent=!0;var pd=Array.isArray,Lh=Object.prototype.hasOwnProperty,ku={current:null},Mh={key:!0,ref:!0,__self:!0,__source:!0};function Oh(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Lh.call(e,r)&&!Mh.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:is,type:t,key:s,ref:o,props:i,_owner:ku.current}}function Qy(t,e){return{$$typeof:is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iu(t){return typeof t=="object"&&t!==null&&t.$$typeof===is}function Yy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var md=/\/+/g;function xl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yy(""+t.key):e.toString(36)}function Fs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case is:case Oy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+xl(o,0):r,pd(i)?(n="",t!=null&&(n=t.replace(md,"$&/")+"/"),Fs(i,e,n,"",function(u){return u})):i!=null&&(Iu(i)&&(i=Qy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(md,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pd(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+xl(s,l);o+=Fs(s,e,n,a,i)}else if(a=Gy(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+xl(s,l++),o+=Fs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gs(t,e,n){if(t==null)return t;var r=[],i=0;return Fs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ky(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},js={transition:null},qy={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:js,ReactCurrentOwner:ku};function Fh(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:gs,forEach:function(t,e,n){gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gs(t,function(){e++}),e},toArray:function(t){return gs(t,function(e){return e})||[]},only:function(t){if(!Iu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Br;Y.Fragment=Fy;Y.Profiler=zy;Y.PureComponent=Su;Y.StrictMode=jy;Y.Suspense=Uy;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qy;Y.act=Fh;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ku.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Lh.call(e,a)&&!Mh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:is,type:t.type,key:i,ref:s,props:r,_owner:o}};Y.createContext=function(t){return t={$$typeof:Wy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:By,_context:t},t.Consumer=t};Y.createElement=Oh;Y.createFactory=function(t){var e=Oh.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:$y,render:t}};Y.isValidElement=Iu;Y.lazy=function(t){return{$$typeof:Vy,_payload:{_status:-1,_result:t},_init:Ky}};Y.memo=function(t,e){return{$$typeof:Hy,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=js.transition;js.transition={};try{t()}finally{js.transition=e}};Y.unstable_act=Fh;Y.useCallback=function(t,e){return Ge.current.useCallback(t,e)};Y.useContext=function(t){return Ge.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Ge.current.useEffect(t,e)};Y.useId=function(){return Ge.current.useId()};Y.useImperativeHandle=function(t,e,n){return Ge.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Ge.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Ge.current.useReducer(t,e,n)};Y.useRef=function(t){return Ge.current.useRef(t)};Y.useState=function(t){return Ge.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Ge.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Ge.current.useTransition()};Y.version="18.3.1";Nh.exports=Y;var g=Nh.exports;const Bn=My(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=g,Jy=Symbol.for("react.element"),Zy=Symbol.for("react.fragment"),e_=Object.prototype.hasOwnProperty,t_=Xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n_={key:!0,ref:!0,__self:!0,__source:!0};function jh(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)e_.call(e,r)&&!n_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Jy,type:t,key:s,ref:o,props:i,_owner:t_.current}}Ho.Fragment=Zy;Ho.jsx=jh;Ho.jsxs=jh;Rh.exports=Ho;var x=Rh.exports,oa={},zh={exports:{}},ot={},Bh={exports:{}},Wh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,j){var B=P.length;P.push(j);e:for(;0<B;){var q=B-1>>>1,Z=P[q];if(0<i(Z,j))P[q]=j,P[B]=Z,B=q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var j=P[0],B=P.pop();if(B!==j){P[0]=B;e:for(var q=0,Z=P.length,at=Z>>>1;q<at;){var $e=2*(q+1)-1,ne=P[$e],M=$e+1,F=P[M];if(0>i(ne,B))M<Z&&0>i(F,ne)?(P[q]=F,P[M]=B,q=M):(P[q]=ne,P[$e]=B,q=$e);else if(M<Z&&0>i(F,B))P[q]=F,P[M]=B,q=M;else break e}}return j}function i(P,j){var B=P.sortIndex-j.sortIndex;return B!==0?B:P.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,c=null,d=3,y=!1,_=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=P)r(u),j.sortIndex=j.expirationTime,e(a,j);else break;j=n(u)}}function v(P){if(w=!1,m(P),!_)if(n(a)!==null)_=!0,K(E);else{var j=n(u);j!==null&&Ce(v,j.startTime-P)}}function E(P,j){_=!1,w&&(w=!1,p(I),I=-1),y=!0;var B=d;try{for(m(j),c=n(a);c!==null&&(!(c.expirationTime>j)||P&&!N());){var q=c.callback;if(typeof q=="function"){c.callback=null,d=c.priorityLevel;var Z=q(c.expirationTime<=j);j=t.unstable_now(),typeof Z=="function"?c.callback=Z:c===n(a)&&r(a),m(j)}else r(a);c=n(a)}if(c!==null)var at=!0;else{var $e=n(u);$e!==null&&Ce(v,$e.startTime-j),at=!1}return at}finally{c=null,d=B,y=!1}}var S=!1,k=null,I=-1,$=5,b=-1;function N(){return!(t.unstable_now()-b<$)}function z(){if(k!==null){var P=t.unstable_now();b=P;var j=!0;try{j=k(!0,P)}finally{j?D():(S=!1,k=null)}}else S=!1}var D;if(typeof h=="function")D=function(){h(z)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,H=A.port2;A.port1.onmessage=z,D=function(){H.postMessage(null)}}else D=function(){C(z,0)};function K(P){k=P,S||(S=!0,D())}function Ce(P,j){I=C(function(){P(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,K(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var B=d;d=j;try{return P()}finally{d=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,j){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=d;d=P;try{return j()}finally{d=B}},t.unstable_scheduleCallback=function(P,j,B){var q=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?q+B:q):B=q,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=B+Z,P={id:f++,callback:j,priorityLevel:P,startTime:B,expirationTime:Z,sortIndex:-1},B>q?(P.sortIndex=B,e(u,P),n(a)===null&&P===n(u)&&(w?(p(I),I=-1):w=!0,Ce(v,B-q))):(P.sortIndex=Z,e(a,P),_||y||(_=!0,K(E))),P},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(P){var j=d;return function(){var B=d;d=j;try{return P.apply(this,arguments)}finally{d=B}}}})(Wh);Bh.exports=Wh;var r_=Bh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_=g,st=r_;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $h=new Set,Ni={};function Jn(t,e){Rr(t,e),Rr(t+"Capture",e)}function Rr(t,e){for(Ni[t]=e,t=0;t<e.length;t++)$h.add(e[t])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=Object.prototype.hasOwnProperty,s_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gd={},yd={};function o_(t){return la.call(yd,t)?!0:la.call(gd,t)?!1:s_.test(t)?yd[t]=!0:(gd[t]=!0,!1)}function l_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function a_(t,e,n,r){if(e===null||typeof e>"u"||l_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new Qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new Qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new Qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new Qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new Qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new Qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new Qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new Qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new Qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tu=/[\-:]([a-z])/g;function Ru(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tu,Ru);Le[e]=new Qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tu,Ru);Le[e]=new Qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tu,Ru);Le[e]=new Qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new Qe(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new Qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nu(t,e,n,r){var i=Le.hasOwnProperty(e)?Le[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(a_(e,n,i,r)&&(n=null),r||i===null?o_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tn=i_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ys=Symbol.for("react.element"),ir=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),Pu=Symbol.for("react.strict_mode"),aa=Symbol.for("react.profiler"),Uh=Symbol.for("react.provider"),Hh=Symbol.for("react.context"),bu=Symbol.for("react.forward_ref"),ua=Symbol.for("react.suspense"),ca=Symbol.for("react.suspense_list"),Du=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),Vh=Symbol.for("react.offscreen"),_d=Symbol.iterator;function qr(t){return t===null||typeof t!="object"?null:(t=_d&&t[_d]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,Cl;function ui(t){if(Cl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cl=e&&e[1]||""}return`
`+Cl+t}var Sl=!1;function El(t,e){if(!t||Sl)return"";Sl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Sl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ui(t):""}function u_(t){switch(t.tag){case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return ui("Suspense");case 19:return ui("SuspenseList");case 0:case 2:case 15:return t=El(t.type,!1),t;case 11:return t=El(t.type.render,!1),t;case 1:return t=El(t.type,!0),t;default:return""}}function da(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sr:return"Fragment";case ir:return"Portal";case aa:return"Profiler";case Pu:return"StrictMode";case ua:return"Suspense";case ca:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hh:return(t.displayName||"Context")+".Consumer";case Uh:return(t._context.displayName||"Context")+".Provider";case bu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Du:return e=t.displayName||null,e!==null?e:da(t.type)||"Memo";case sn:e=t._payload,t=t._init;try{return da(t(e))}catch{}}return null}function c_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return da(e);case 8:return e===Pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d_(t){var e=Gh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _s(t){t._valueTracker||(t._valueTracker=d_(t))}function Qh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fa(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yh(t,e){e=e.checked,e!=null&&Nu(t,"checked",e,!1)}function ha(t,e){Yh(t,e);var n=Cn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pa(t,e.type,n):e.hasOwnProperty("defaultValue")&&pa(t,e.type,Cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pa(t,e,n){(e!=="number"||Zs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ci=Array.isArray;function _r(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ma(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(ci(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cn(n)}}function Kh(t,e){var n=Cn(e.value),r=Cn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ga(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vs,Xh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vs=vs||document.createElement("div"),vs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f_=["Webkit","ms","Moz","O"];Object.keys(hi).forEach(function(t){f_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hi[e]=hi[t]})});function Jh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hi.hasOwnProperty(t)&&hi[t]?(""+e).trim():e+"px"}function Zh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var h_=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ya(t,e){if(e){if(h_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function _a(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var va=null;function Au(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wa=null,vr=null,wr=null;function Sd(t){if(t=ls(t)){if(typeof wa!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Ko(e),wa(t.stateNode,t.type,e))}}function ep(t){vr?wr?wr.push(t):wr=[t]:vr=t}function tp(){if(vr){var t=vr,e=wr;if(wr=vr=null,Sd(t),e)for(t=0;t<e.length;t++)Sd(e[t])}}function np(t,e){return t(e)}function rp(){}var kl=!1;function ip(t,e,n){if(kl)return t(e,n);kl=!0;try{return np(t,e,n)}finally{kl=!1,(vr!==null||wr!==null)&&(rp(),tp())}}function bi(t,e){var n=t.stateNode;if(n===null)return null;var r=Ko(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var xa=!1;if(Vt)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){xa=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{xa=!1}function p_(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var pi=!1,eo=null,to=!1,Ca=null,m_={onError:function(t){pi=!0,eo=t}};function g_(t,e,n,r,i,s,o,l,a){pi=!1,eo=null,p_.apply(m_,arguments)}function y_(t,e,n,r,i,s,o,l,a){if(g_.apply(this,arguments),pi){if(pi){var u=eo;pi=!1,eo=null}else throw Error(T(198));to||(to=!0,Ca=u)}}function Zn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ed(t){if(Zn(t)!==t)throw Error(T(188))}function __(t){var e=t.alternate;if(!e){if(e=Zn(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ed(i),t;if(s===r)return Ed(i),e;s=s.sibling}throw Error(T(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function op(t){return t=__(t),t!==null?lp(t):null}function lp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lp(t);if(e!==null)return e;t=t.sibling}return null}var ap=st.unstable_scheduleCallback,kd=st.unstable_cancelCallback,v_=st.unstable_shouldYield,w_=st.unstable_requestPaint,we=st.unstable_now,x_=st.unstable_getCurrentPriorityLevel,Lu=st.unstable_ImmediatePriority,up=st.unstable_UserBlockingPriority,no=st.unstable_NormalPriority,C_=st.unstable_LowPriority,cp=st.unstable_IdlePriority,Vo=null,Dt=null;function S_(t){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Vo,t,void 0,(t.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:I_,E_=Math.log,k_=Math.LN2;function I_(t){return t>>>=0,t===0?32:31-(E_(t)/k_|0)|0}var ws=64,xs=4194304;function di(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ro(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=di(l):(s&=o,s!==0&&(r=di(s)))}else o=n&~i,o!==0?r=di(o):s!==0&&(r=di(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-St(e),i=1<<n,r|=t[n],e&=~i;return r}function T_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-St(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=T_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Sa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dp(){var t=ws;return ws<<=1,!(ws&4194240)&&(ws=64),t}function Il(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ss(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-St(e),t[e]=n}function N_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-St(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Mu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-St(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var re=0;function fp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hp,Ou,pp,mp,gp,Ea=!1,Cs=[],dn=null,fn=null,hn=null,Di=new Map,Ai=new Map,ln=[],P_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Id(t,e){switch(t){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":Di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(e.pointerId)}}function Jr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ls(e),e!==null&&Ou(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function b_(t,e,n,r,i){switch(e){case"focusin":return dn=Jr(dn,t,e,n,r,i),!0;case"dragenter":return fn=Jr(fn,t,e,n,r,i),!0;case"mouseover":return hn=Jr(hn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Di.set(s,Jr(Di.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ai.set(s,Jr(Ai.get(s)||null,t,e,n,r,i)),!0}return!1}function yp(t){var e=Mn(t.target);if(e!==null){var n=Zn(e);if(n!==null){if(e=n.tag,e===13){if(e=sp(n),e!==null){t.blockedOn=e,gp(t.priority,function(){pp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ka(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);va=r,n.target.dispatchEvent(r),va=null}else return e=ls(n),e!==null&&Ou(e),t.blockedOn=n,!1;e.shift()}return!0}function Td(t,e,n){zs(t)&&n.delete(e)}function D_(){Ea=!1,dn!==null&&zs(dn)&&(dn=null),fn!==null&&zs(fn)&&(fn=null),hn!==null&&zs(hn)&&(hn=null),Di.forEach(Td),Ai.forEach(Td)}function Zr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ea||(Ea=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,D_)))}function Li(t){function e(i){return Zr(i,t)}if(0<Cs.length){Zr(Cs[0],t);for(var n=1;n<Cs.length;n++){var r=Cs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dn!==null&&Zr(dn,t),fn!==null&&Zr(fn,t),hn!==null&&Zr(hn,t),Di.forEach(e),Ai.forEach(e),n=0;n<ln.length;n++)r=ln[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ln.length&&(n=ln[0],n.blockedOn===null);)yp(n),n.blockedOn===null&&ln.shift()}var xr=tn.ReactCurrentBatchConfig,io=!0;function A_(t,e,n,r){var i=re,s=xr.transition;xr.transition=null;try{re=1,Fu(t,e,n,r)}finally{re=i,xr.transition=s}}function L_(t,e,n,r){var i=re,s=xr.transition;xr.transition=null;try{re=4,Fu(t,e,n,r)}finally{re=i,xr.transition=s}}function Fu(t,e,n,r){if(io){var i=ka(t,e,n,r);if(i===null)Ol(t,e,r,so,n),Id(t,r);else if(b_(i,t,e,n,r))r.stopPropagation();else if(Id(t,r),e&4&&-1<P_.indexOf(t)){for(;i!==null;){var s=ls(i);if(s!==null&&hp(s),s=ka(t,e,n,r),s===null&&Ol(t,e,r,so,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ol(t,e,r,null,n)}}var so=null;function ka(t,e,n,r){if(so=null,t=Au(r),t=Mn(t),t!==null)if(e=Zn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return so=t,null}function _p(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x_()){case Lu:return 1;case up:return 4;case no:case C_:return 16;case cp:return 536870912;default:return 16}default:return 16}}var un=null,ju=null,Bs=null;function vp(){if(Bs)return Bs;var t,e=ju,n=e.length,r,i="value"in un?un.value:un.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Bs=i.slice(t,1<r?1-r:void 0)}function Ws(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ss(){return!0}function Rd(){return!1}function lt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ss:Rd,this.isPropagationStopped=Rd,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),e}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=lt(Wr),os=ge({},Wr,{view:0,detail:0}),M_=lt(os),Tl,Rl,ei,Go=ge({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(Tl=t.screenX-ei.screenX,Rl=t.screenY-ei.screenY):Rl=Tl=0,ei=t),Tl)},movementY:function(t){return"movementY"in t?t.movementY:Rl}}),Nd=lt(Go),O_=ge({},Go,{dataTransfer:0}),F_=lt(O_),j_=ge({},os,{relatedTarget:0}),Nl=lt(j_),z_=ge({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),B_=lt(z_),W_=ge({},Wr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$_=lt(W_),U_=ge({},Wr,{data:0}),Pd=lt(U_),H_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=G_[t])?!!e[t]:!1}function Bu(){return Q_}var Y_=ge({},os,{key:function(t){if(t.key){var e=H_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ws(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bu,charCode:function(t){return t.type==="keypress"?Ws(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ws(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K_=lt(Y_),q_=ge({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=lt(q_),X_=ge({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bu}),J_=lt(X_),Z_=ge({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ev=lt(Z_),tv=ge({},Go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nv=lt(tv),rv=[9,13,27,32],Wu=Vt&&"CompositionEvent"in window,mi=null;Vt&&"documentMode"in document&&(mi=document.documentMode);var iv=Vt&&"TextEvent"in window&&!mi,wp=Vt&&(!Wu||mi&&8<mi&&11>=mi),Dd=" ",Ad=!1;function xp(t,e){switch(t){case"keyup":return rv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var or=!1;function sv(t,e){switch(t){case"compositionend":return Cp(e);case"keypress":return e.which!==32?null:(Ad=!0,Dd);case"textInput":return t=e.data,t===Dd&&Ad?null:t;default:return null}}function ov(t,e){if(or)return t==="compositionend"||!Wu&&xp(t,e)?(t=vp(),Bs=ju=un=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wp&&e.locale!=="ko"?null:e.data;default:return null}}var lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lv[t.type]:e==="textarea"}function Sp(t,e,n,r){ep(r),e=oo(e,"onChange"),0<e.length&&(n=new zu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gi=null,Mi=null;function av(t){Lp(t,0)}function Qo(t){var e=ur(t);if(Qh(e))return t}function uv(t,e){if(t==="change")return e}var Ep=!1;if(Vt){var Pl;if(Vt){var bl="oninput"in document;if(!bl){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),bl=typeof Md.oninput=="function"}Pl=bl}else Pl=!1;Ep=Pl&&(!document.documentMode||9<document.documentMode)}function Od(){gi&&(gi.detachEvent("onpropertychange",kp),Mi=gi=null)}function kp(t){if(t.propertyName==="value"&&Qo(Mi)){var e=[];Sp(e,Mi,t,Au(t)),ip(av,e)}}function cv(t,e,n){t==="focusin"?(Od(),gi=e,Mi=n,gi.attachEvent("onpropertychange",kp)):t==="focusout"&&Od()}function dv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qo(Mi)}function fv(t,e){if(t==="click")return Qo(e)}function hv(t,e){if(t==="input"||t==="change")return Qo(e)}function pv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:pv;function Oi(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!la.call(e,i)||!It(t[i],e[i]))return!1}return!0}function Fd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jd(t,e){var n=Fd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fd(n)}}function Ip(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ip(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tp(){for(var t=window,e=Zs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zs(t.document)}return e}function $u(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mv(t){var e=Tp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ip(n.ownerDocument.documentElement,n)){if(r!==null&&$u(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jd(n,s);var o=jd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gv=Vt&&"documentMode"in document&&11>=document.documentMode,lr=null,Ia=null,yi=null,Ta=!1;function zd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ta||lr==null||lr!==Zs(r)||(r=lr,"selectionStart"in r&&$u(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yi&&Oi(yi,r)||(yi=r,r=oo(Ia,"onSelect"),0<r.length&&(e=new zu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lr)))}function Es(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ar={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionend:Es("Transition","TransitionEnd")},Dl={},Rp={};Vt&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function Yo(t){if(Dl[t])return Dl[t];if(!ar[t])return t;var e=ar[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rp)return Dl[t]=e[n];return t}var Np=Yo("animationend"),Pp=Yo("animationiteration"),bp=Yo("animationstart"),Dp=Yo("transitionend"),Ap=new Map,Bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(t,e){Ap.set(t,e),Jn(e,[t])}for(var Al=0;Al<Bd.length;Al++){var Ll=Bd[Al],yv=Ll.toLowerCase(),_v=Ll[0].toUpperCase()+Ll.slice(1);In(yv,"on"+_v)}In(Np,"onAnimationEnd");In(Pp,"onAnimationIteration");In(bp,"onAnimationStart");In("dblclick","onDoubleClick");In("focusin","onFocus");In("focusout","onBlur");In(Dp,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(fi));function Wd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,y_(r,e,void 0,t),t.currentTarget=null}function Lp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Wd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Wd(i,l,u),s=a}}}if(to)throw t=Ca,to=!1,Ca=null,t}function ce(t,e){var n=e[Da];n===void 0&&(n=e[Da]=new Set);var r=t+"__bubble";n.has(r)||(Mp(e,t,2,!1),n.add(r))}function Ml(t,e,n){var r=0;e&&(r|=4),Mp(n,t,r,e)}var ks="_reactListening"+Math.random().toString(36).slice(2);function Fi(t){if(!t[ks]){t[ks]=!0,$h.forEach(function(n){n!=="selectionchange"&&(vv.has(n)||Ml(n,!1,t),Ml(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ks]||(e[ks]=!0,Ml("selectionchange",!1,e))}}function Mp(t,e,n,r){switch(_p(e)){case 1:var i=A_;break;case 4:i=L_;break;default:i=Fu}n=i.bind(null,e,n,t),i=void 0,!xa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ol(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Mn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ip(function(){var u=s,f=Au(n),c=[];e:{var d=Ap.get(t);if(d!==void 0){var y=zu,_=t;switch(t){case"keypress":if(Ws(n)===0)break e;case"keydown":case"keyup":y=K_;break;case"focusin":_="focus",y=Nl;break;case"focusout":_="blur",y=Nl;break;case"beforeblur":case"afterblur":y=Nl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=F_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=J_;break;case Np:case Pp:case bp:y=B_;break;case Dp:y=ev;break;case"scroll":y=M_;break;case"wheel":y=nv;break;case"copy":case"cut":case"paste":y=$_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bd}var w=(e&4)!==0,C=!w&&t==="scroll",p=w?d!==null?d+"Capture":null:d;w=[];for(var h=u,m;h!==null;){m=h;var v=m.stateNode;if(m.tag===5&&v!==null&&(m=v,p!==null&&(v=bi(h,p),v!=null&&w.push(ji(h,v,m)))),C)break;h=h.return}0<w.length&&(d=new y(d,_,null,n,f),c.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",d&&n!==va&&(_=n.relatedTarget||n.fromElement)&&(Mn(_)||_[Gt]))break e;if((y||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=u,_=_?Mn(_):null,_!==null&&(C=Zn(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=u),y!==_)){if(w=Nd,v="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(w=bd,v="onPointerLeave",p="onPointerEnter",h="pointer"),C=y==null?d:ur(y),m=_==null?d:ur(_),d=new w(v,h+"leave",y,n,f),d.target=C,d.relatedTarget=m,v=null,Mn(f)===u&&(w=new w(p,h+"enter",_,n,f),w.target=m,w.relatedTarget=C,v=w),C=v,y&&_)t:{for(w=y,p=_,h=0,m=w;m;m=nr(m))h++;for(m=0,v=p;v;v=nr(v))m++;for(;0<h-m;)w=nr(w),h--;for(;0<m-h;)p=nr(p),m--;for(;h--;){if(w===p||p!==null&&w===p.alternate)break t;w=nr(w),p=nr(p)}w=null}else w=null;y!==null&&$d(c,d,y,w,!1),_!==null&&C!==null&&$d(c,C,_,w,!0)}}e:{if(d=u?ur(u):window,y=d.nodeName&&d.nodeName.toLowerCase(),y==="select"||y==="input"&&d.type==="file")var E=uv;else if(Ld(d))if(Ep)E=hv;else{E=dv;var S=cv}else(y=d.nodeName)&&y.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=fv);if(E&&(E=E(t,u))){Sp(c,E,n,f);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&pa(d,"number",d.value)}switch(S=u?ur(u):window,t){case"focusin":(Ld(S)||S.contentEditable==="true")&&(lr=S,Ia=u,yi=null);break;case"focusout":yi=Ia=lr=null;break;case"mousedown":Ta=!0;break;case"contextmenu":case"mouseup":case"dragend":Ta=!1,zd(c,n,f);break;case"selectionchange":if(gv)break;case"keydown":case"keyup":zd(c,n,f)}var k;if(Wu)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else or?xp(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(wp&&n.locale!=="ko"&&(or||I!=="onCompositionStart"?I==="onCompositionEnd"&&or&&(k=vp()):(un=f,ju="value"in un?un.value:un.textContent,or=!0)),S=oo(u,I),0<S.length&&(I=new Pd(I,t,null,n,f),c.push({event:I,listeners:S}),k?I.data=k:(k=Cp(n),k!==null&&(I.data=k)))),(k=iv?sv(t,n):ov(t,n))&&(u=oo(u,"onBeforeInput"),0<u.length&&(f=new Pd("onBeforeInput","beforeinput",null,n,f),c.push({event:f,listeners:u}),f.data=k))}Lp(c,e)})}function ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bi(t,n),s!=null&&r.unshift(ji(t,s,i)),s=bi(t,e),s!=null&&r.push(ji(t,s,i))),t=t.return}return r}function nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $d(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=bi(n,s),a!=null&&o.unshift(ji(n,a,l))):i||(a=bi(n,s),a!=null&&o.push(ji(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wv=/\r\n?/g,xv=/\u0000|\uFFFD/g;function Ud(t){return(typeof t=="string"?t:""+t).replace(wv,`
`).replace(xv,"")}function Is(t,e,n){if(e=Ud(e),Ud(t)!==e&&n)throw Error(T(425))}function lo(){}var Ra=null,Na=null;function Pa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ba=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,Hd=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof Hd<"u"?function(t){return Hd.resolve(null).then(t).catch(Ev)}:ba;function Ev(t){setTimeout(function(){throw t})}function Fl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Li(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Li(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $r=Math.random().toString(36).slice(2),bt="__reactFiber$"+$r,zi="__reactProps$"+$r,Gt="__reactContainer$"+$r,Da="__reactEvents$"+$r,kv="__reactListeners$"+$r,Iv="__reactHandles$"+$r;function Mn(t){var e=t[bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gt]||n[bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vd(t);t!==null;){if(n=t[bt])return n;t=Vd(t)}return e}t=n,n=t.parentNode}return null}function ls(t){return t=t[bt]||t[Gt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Ko(t){return t[zi]||null}var Aa=[],cr=-1;function Tn(t){return{current:t}}function de(t){0>cr||(t.current=Aa[cr],Aa[cr]=null,cr--)}function ue(t,e){cr++,Aa[cr]=t.current,t.current=e}var Sn={},We=Tn(Sn),Je=Tn(!1),Un=Sn;function Nr(t,e){var n=t.type.contextTypes;if(!n)return Sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ze(t){return t=t.childContextTypes,t!=null}function ao(){de(Je),de(We)}function Gd(t,e,n){if(We.current!==Sn)throw Error(T(168));ue(We,e),ue(Je,n)}function Op(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(T(108,c_(t)||"Unknown",i));return ge({},n,r)}function uo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,Un=We.current,ue(We,t),ue(Je,Je.current),!0}function Qd(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=Op(t,e,Un),r.__reactInternalMemoizedMergedChildContext=t,de(Je),de(We),ue(We,t)):de(Je),ue(Je,n)}var jt=null,qo=!1,jl=!1;function Fp(t){jt===null?jt=[t]:jt.push(t)}function Tv(t){qo=!0,Fp(t)}function Rn(){if(!jl&&jt!==null){jl=!0;var t=0,e=re;try{var n=jt;for(re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jt=null,qo=!1}catch(i){throw jt!==null&&(jt=jt.slice(t+1)),ap(Lu,Rn),i}finally{re=e,jl=!1}}return null}var dr=[],fr=0,co=null,fo=0,ut=[],ct=0,Hn=null,zt=1,Bt="";function bn(t,e){dr[fr++]=fo,dr[fr++]=co,co=t,fo=e}function jp(t,e,n){ut[ct++]=zt,ut[ct++]=Bt,ut[ct++]=Hn,Hn=t;var r=zt;t=Bt;var i=32-St(r)-1;r&=~(1<<i),n+=1;var s=32-St(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zt=1<<32-St(e)+i|n<<i|r,Bt=s+t}else zt=1<<s|n<<i|r,Bt=t}function Uu(t){t.return!==null&&(bn(t,1),jp(t,1,0))}function Hu(t){for(;t===co;)co=dr[--fr],dr[fr]=null,fo=dr[--fr],dr[fr]=null;for(;t===Hn;)Hn=ut[--ct],ut[ct]=null,Bt=ut[--ct],ut[ct]=null,zt=ut[--ct],ut[ct]=null}var it=null,rt=null,fe=!1,wt=null;function zp(t,e){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,rt=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hn!==null?{id:zt,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,it=t,rt=null,!0):!1;default:return!1}}function La(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ma(t){if(fe){var e=rt;if(e){var n=e;if(!Yd(t,e)){if(La(t))throw Error(T(418));e=pn(n.nextSibling);var r=it;e&&Yd(t,e)?zp(r,n):(t.flags=t.flags&-4097|2,fe=!1,it=t)}}else{if(La(t))throw Error(T(418));t.flags=t.flags&-4097|2,fe=!1,it=t}}}function Kd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function Ts(t){if(t!==it)return!1;if(!fe)return Kd(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pa(t.type,t.memoizedProps)),e&&(e=rt)){if(La(t))throw Bp(),Error(T(418));for(;e;)zp(t,e),e=pn(e.nextSibling)}if(Kd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rt=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rt=null}}else rt=it?pn(t.stateNode.nextSibling):null;return!0}function Bp(){for(var t=rt;t;)t=pn(t.nextSibling)}function Pr(){rt=it=null,fe=!1}function Vu(t){wt===null?wt=[t]:wt.push(t)}var Rv=tn.ReactCurrentBatchConfig;function ti(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Rs(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qd(t){var e=t._init;return e(t._payload)}function Wp(t){function e(p,h){if(t){var m=p.deletions;m===null?(p.deletions=[h],p.flags|=16):m.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=_n(p,h),p.index=0,p.sibling=null,p}function s(p,h,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<h?(p.flags|=2,h):m):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,m,v){return h===null||h.tag!==6?(h=Vl(m,p.mode,v),h.return=p,h):(h=i(h,m),h.return=p,h)}function a(p,h,m,v){var E=m.type;return E===sr?f(p,h,m.props.children,v,m.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===sn&&qd(E)===h.type)?(v=i(h,m.props),v.ref=ti(p,h,m),v.return=p,v):(v=Ys(m.type,m.key,m.props,null,p.mode,v),v.ref=ti(p,h,m),v.return=p,v)}function u(p,h,m,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=Gl(m,p.mode,v),h.return=p,h):(h=i(h,m.children||[]),h.return=p,h)}function f(p,h,m,v,E){return h===null||h.tag!==7?(h=$n(m,p.mode,v,E),h.return=p,h):(h=i(h,m),h.return=p,h)}function c(p,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Vl(""+h,p.mode,m),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ys:return m=Ys(h.type,h.key,h.props,null,p.mode,m),m.ref=ti(p,null,h),m.return=p,m;case ir:return h=Gl(h,p.mode,m),h.return=p,h;case sn:var v=h._init;return c(p,v(h._payload),m)}if(ci(h)||qr(h))return h=$n(h,p.mode,m,null),h.return=p,h;Rs(p,h)}return null}function d(p,h,m,v){var E=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return E!==null?null:l(p,h,""+m,v);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ys:return m.key===E?a(p,h,m,v):null;case ir:return m.key===E?u(p,h,m,v):null;case sn:return E=m._init,d(p,h,E(m._payload),v)}if(ci(m)||qr(m))return E!==null?null:f(p,h,m,v,null);Rs(p,m)}return null}function y(p,h,m,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(m)||null,l(h,p,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ys:return p=p.get(v.key===null?m:v.key)||null,a(h,p,v,E);case ir:return p=p.get(v.key===null?m:v.key)||null,u(h,p,v,E);case sn:var S=v._init;return y(p,h,m,S(v._payload),E)}if(ci(v)||qr(v))return p=p.get(m)||null,f(h,p,v,E,null);Rs(h,v)}return null}function _(p,h,m,v){for(var E=null,S=null,k=h,I=h=0,$=null;k!==null&&I<m.length;I++){k.index>I?($=k,k=null):$=k.sibling;var b=d(p,k,m[I],v);if(b===null){k===null&&(k=$);break}t&&k&&b.alternate===null&&e(p,k),h=s(b,h,I),S===null?E=b:S.sibling=b,S=b,k=$}if(I===m.length)return n(p,k),fe&&bn(p,I),E;if(k===null){for(;I<m.length;I++)k=c(p,m[I],v),k!==null&&(h=s(k,h,I),S===null?E=k:S.sibling=k,S=k);return fe&&bn(p,I),E}for(k=r(p,k);I<m.length;I++)$=y(k,p,I,m[I],v),$!==null&&(t&&$.alternate!==null&&k.delete($.key===null?I:$.key),h=s($,h,I),S===null?E=$:S.sibling=$,S=$);return t&&k.forEach(function(N){return e(p,N)}),fe&&bn(p,I),E}function w(p,h,m,v){var E=qr(m);if(typeof E!="function")throw Error(T(150));if(m=E.call(m),m==null)throw Error(T(151));for(var S=E=null,k=h,I=h=0,$=null,b=m.next();k!==null&&!b.done;I++,b=m.next()){k.index>I?($=k,k=null):$=k.sibling;var N=d(p,k,b.value,v);if(N===null){k===null&&(k=$);break}t&&k&&N.alternate===null&&e(p,k),h=s(N,h,I),S===null?E=N:S.sibling=N,S=N,k=$}if(b.done)return n(p,k),fe&&bn(p,I),E;if(k===null){for(;!b.done;I++,b=m.next())b=c(p,b.value,v),b!==null&&(h=s(b,h,I),S===null?E=b:S.sibling=b,S=b);return fe&&bn(p,I),E}for(k=r(p,k);!b.done;I++,b=m.next())b=y(k,p,I,b.value,v),b!==null&&(t&&b.alternate!==null&&k.delete(b.key===null?I:b.key),h=s(b,h,I),S===null?E=b:S.sibling=b,S=b);return t&&k.forEach(function(z){return e(p,z)}),fe&&bn(p,I),E}function C(p,h,m,v){if(typeof m=="object"&&m!==null&&m.type===sr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ys:e:{for(var E=m.key,S=h;S!==null;){if(S.key===E){if(E=m.type,E===sr){if(S.tag===7){n(p,S.sibling),h=i(S,m.props.children),h.return=p,p=h;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===sn&&qd(E)===S.type){n(p,S.sibling),h=i(S,m.props),h.ref=ti(p,S,m),h.return=p,p=h;break e}n(p,S);break}else e(p,S);S=S.sibling}m.type===sr?(h=$n(m.props.children,p.mode,v,m.key),h.return=p,p=h):(v=Ys(m.type,m.key,m.props,null,p.mode,v),v.ref=ti(p,h,m),v.return=p,p=v)}return o(p);case ir:e:{for(S=m.key;h!==null;){if(h.key===S)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(p,h.sibling),h=i(h,m.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=Gl(m,p.mode,v),h.return=p,p=h}return o(p);case sn:return S=m._init,C(p,h,S(m._payload),v)}if(ci(m))return _(p,h,m,v);if(qr(m))return w(p,h,m,v);Rs(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,m),h.return=p,p=h):(n(p,h),h=Vl(m,p.mode,v),h.return=p,p=h),o(p)):n(p,h)}return C}var br=Wp(!0),$p=Wp(!1),ho=Tn(null),po=null,hr=null,Gu=null;function Qu(){Gu=hr=po=null}function Yu(t){var e=ho.current;de(ho),t._currentValue=e}function Oa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Cr(t,e){po=t,Gu=hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ke=!0),t.firstContext=null)}function pt(t){var e=t._currentValue;if(Gu!==t)if(t={context:t,memoizedValue:e,next:null},hr===null){if(po===null)throw Error(T(308));hr=t,po.dependencies={lanes:0,firstContext:t}}else hr=hr.next=t;return e}var On=null;function Ku(t){On===null?On=[t]:On.push(t)}function Up(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ku(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qt(t,r)}function Qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qt(t,n)}return i=r.interleaved,i===null?(e.next=e,Ku(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qt(t,n)}function $s(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mu(t,n)}}function Xd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mo(t,e,n,r){var i=t.updateQueue;on=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,f=u=a=null,l=s;do{var d=l.lane,y=l.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,w=l;switch(d=e,y=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){c=_.call(y,c,d);break e}c=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,d=typeof _=="function"?_.call(y,c,d):_,d==null)break e;c=ge({},c,d);break e;case 2:on=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else y={eventTime:y,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,a=c):f=f.next=y,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(f===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gn|=o,t.lanes=o,t.memoizedState=c}}function Jd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(T(191,i));i.call(r)}}}var as={},At=Tn(as),Bi=Tn(as),Wi=Tn(as);function Fn(t){if(t===as)throw Error(T(174));return t}function Xu(t,e){switch(ue(Wi,e),ue(Bi,t),ue(At,as),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ga(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ga(e,t)}de(At),ue(At,e)}function Dr(){de(At),de(Bi),de(Wi)}function Vp(t){Fn(Wi.current);var e=Fn(At.current),n=ga(e,t.type);e!==n&&(ue(Bi,t),ue(At,n))}function Ju(t){Bi.current===t&&(de(At),de(Bi))}var pe=Tn(0);function go(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zl=[];function Zu(){for(var t=0;t<zl.length;t++)zl[t]._workInProgressVersionPrimary=null;zl.length=0}var Us=tn.ReactCurrentDispatcher,Bl=tn.ReactCurrentBatchConfig,Vn=0,me=null,Se=null,Ie=null,yo=!1,_i=!1,$i=0,Nv=0;function Fe(){throw Error(T(321))}function ec(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function tc(t,e,n,r,i,s){if(Vn=s,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Us.current=t===null||t.memoizedState===null?Av:Lv,t=n(r,i),_i){s=0;do{if(_i=!1,$i=0,25<=s)throw Error(T(301));s+=1,Ie=Se=null,e.updateQueue=null,Us.current=Mv,t=n(r,i)}while(_i)}if(Us.current=_o,e=Se!==null&&Se.next!==null,Vn=0,Ie=Se=me=null,yo=!1,e)throw Error(T(300));return t}function nc(){var t=$i!==0;return $i=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?me.memoizedState=Ie=t:Ie=Ie.next=t,Ie}function mt(){if(Se===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=Ie===null?me.memoizedState:Ie.next;if(e!==null)Ie=e,Se=t;else{if(t===null)throw Error(T(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ie===null?me.memoizedState=Ie=t:Ie=Ie.next=t}return Ie}function Ui(t,e){return typeof e=="function"?e(t):e}function Wl(t){var e=mt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=Se,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((Vn&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,me.lanes|=f,Gn|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,It(r,e.memoizedState)||(Ke=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,me.lanes|=s,Gn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $l(t){var e=mt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);It(s,e.memoizedState)||(Ke=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Gp(){}function Qp(t,e){var n=me,r=mt(),i=e(),s=!It(r.memoizedState,i);if(s&&(r.memoizedState=i,Ke=!0),r=r.queue,rc(qp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Hi(9,Kp.bind(null,n,r,i,e),void 0,null),Ne===null)throw Error(T(349));Vn&30||Yp(n,e,i)}return i}function Yp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kp(t,e,n,r){e.value=n,e.getSnapshot=r,Xp(e)&&Jp(t)}function qp(t,e,n){return n(function(){Xp(e)&&Jp(t)})}function Xp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function Jp(t){var e=Qt(t,1);e!==null&&Et(e,t,1,-1)}function Zd(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},e.queue=t,t=t.dispatch=Dv.bind(null,me,t),[e.memoizedState,t]}function Hi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zp(){return mt().memoizedState}function Hs(t,e,n,r){var i=Pt();me.flags|=t,i.memoizedState=Hi(1|e,n,void 0,r===void 0?null:r)}function Xo(t,e,n,r){var i=mt();r=r===void 0?null:r;var s=void 0;if(Se!==null){var o=Se.memoizedState;if(s=o.destroy,r!==null&&ec(r,o.deps)){i.memoizedState=Hi(e,n,s,r);return}}me.flags|=t,i.memoizedState=Hi(1|e,n,s,r)}function ef(t,e){return Hs(8390656,8,t,e)}function rc(t,e){return Xo(2048,8,t,e)}function em(t,e){return Xo(4,2,t,e)}function tm(t,e){return Xo(4,4,t,e)}function nm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rm(t,e,n){return n=n!=null?n.concat([t]):null,Xo(4,4,nm.bind(null,e,t),n)}function ic(){}function im(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ec(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sm(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ec(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function om(t,e,n){return Vn&21?(It(n,e)||(n=dp(),me.lanes|=n,Gn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ke=!0),t.memoizedState=n)}function Pv(t,e){var n=re;re=n!==0&&4>n?n:4,t(!0);var r=Bl.transition;Bl.transition={};try{t(!1),e()}finally{re=n,Bl.transition=r}}function lm(){return mt().memoizedState}function bv(t,e,n){var r=yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},am(t))um(e,n);else if(n=Up(t,e,n,r),n!==null){var i=Ve();Et(n,t,r,i),cm(n,e,r)}}function Dv(t,e,n){var r=yn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(am(t))um(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,It(l,o)){var a=e.interleaved;a===null?(i.next=i,Ku(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Up(t,e,i,r),n!==null&&(i=Ve(),Et(n,t,r,i),cm(n,e,r))}}function am(t){var e=t.alternate;return t===me||e!==null&&e===me}function um(t,e){_i=yo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mu(t,n)}}var _o={readContext:pt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},Av={readContext:pt,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:ef,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hs(4194308,4,nm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hs(4,2,t,e)},useMemo:function(t,e){var n=Pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bv.bind(null,me,t),[r.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Zd,useDebugValue:ic,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Zd(!1),e=t[0];return t=Pv.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=me,i=Pt();if(fe){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Ne===null)throw Error(T(349));Vn&30||Yp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ef(qp.bind(null,r,s,t),[t]),r.flags|=2048,Hi(9,Kp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Pt(),e=Ne.identifierPrefix;if(fe){var n=Bt,r=zt;n=(r&~(1<<32-St(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Nv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lv={readContext:pt,useCallback:im,useContext:pt,useEffect:rc,useImperativeHandle:rm,useInsertionEffect:em,useLayoutEffect:tm,useMemo:sm,useReducer:Wl,useRef:Zp,useState:function(){return Wl(Ui)},useDebugValue:ic,useDeferredValue:function(t){var e=mt();return om(e,Se.memoizedState,t)},useTransition:function(){var t=Wl(Ui)[0],e=mt().memoizedState;return[t,e]},useMutableSource:Gp,useSyncExternalStore:Qp,useId:lm,unstable_isNewReconciler:!1},Mv={readContext:pt,useCallback:im,useContext:pt,useEffect:rc,useImperativeHandle:rm,useInsertionEffect:em,useLayoutEffect:tm,useMemo:sm,useReducer:$l,useRef:Zp,useState:function(){return $l(Ui)},useDebugValue:ic,useDeferredValue:function(t){var e=mt();return Se===null?e.memoizedState=t:om(e,Se.memoizedState,t)},useTransition:function(){var t=$l(Ui)[0],e=mt().memoizedState;return[t,e]},useMutableSource:Gp,useSyncExternalStore:Qp,useId:lm,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jo={isMounted:function(t){return(t=t._reactInternals)?Zn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ve(),i=yn(t),s=$t(r,i);s.payload=e,n!=null&&(s.callback=n),e=mn(t,s,i),e!==null&&(Et(e,t,i,r),$s(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ve(),i=yn(t),s=$t(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=mn(t,s,i),e!==null&&(Et(e,t,i,r),$s(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),r=yn(t),i=$t(n,r);i.tag=2,e!=null&&(i.callback=e),e=mn(t,i,r),e!==null&&(Et(e,t,r,n),$s(e,t,r))}};function tf(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Oi(n,r)||!Oi(i,s):!0}function dm(t,e,n){var r=!1,i=Sn,s=e.contextType;return typeof s=="object"&&s!==null?s=pt(s):(i=Ze(e)?Un:We.current,r=e.contextTypes,s=(r=r!=null)?Nr(t,i):Sn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jo.enqueueReplaceState(e,e.state,null)}function ja(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},qu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pt(s):(s=Ze(e)?Un:We.current,i.context=Nr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fa(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jo.enqueueReplaceState(i,i.state,null),mo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ar(t,e){try{var n="",r=e;do n+=u_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ul(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function za(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ov=typeof WeakMap=="function"?WeakMap:Map;function fm(t,e,n){n=$t(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wo||(wo=!0,Ka=r),za(t,e)},n}function hm(t,e,n){n=$t(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){za(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){za(t,e),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ov;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=qv.bind(null,t,e,n),e.then(t,t))}function sf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function of(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$t(-1,1),e.tag=2,mn(n,e,1))),n.lanes|=1),t)}var Fv=tn.ReactCurrentOwner,Ke=!1;function Ue(t,e,n,r){e.child=t===null?$p(e,null,n,r):br(e,t.child,n,r)}function lf(t,e,n,r,i){n=n.render;var s=e.ref;return Cr(e,i),r=tc(t,e,n,r,s,i),n=nc(),t!==null&&!Ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yt(t,e,i)):(fe&&n&&Uu(e),e.flags|=1,Ue(t,e,r,i),e.child)}function af(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!fc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pm(t,e,s,r,i)):(t=Ys(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(o,r)&&t.ref===e.ref)return Yt(t,e,i)}return e.flags|=1,t=_n(s,r),t.ref=e.ref,t.return=e,e.child=t}function pm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Oi(s,r)&&t.ref===e.ref)if(Ke=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ke=!0);else return e.lanes=t.lanes,Yt(t,e,i)}return Ba(t,e,n,r,i)}function mm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(mr,nt),nt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(mr,nt),nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(mr,nt),nt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(mr,nt),nt|=r;return Ue(t,e,i,n),e.child}function gm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ba(t,e,n,r,i){var s=Ze(n)?Un:We.current;return s=Nr(e,s),Cr(e,i),n=tc(t,e,n,r,s,i),r=nc(),t!==null&&!Ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yt(t,e,i)):(fe&&r&&Uu(e),e.flags|=1,Ue(t,e,n,i),e.child)}function uf(t,e,n,r,i){if(Ze(n)){var s=!0;uo(e)}else s=!1;if(Cr(e,i),e.stateNode===null)Vs(t,e),dm(e,n,r),ja(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pt(u):(u=Ze(n)?Un:We.current,u=Nr(e,u));var f=n.getDerivedStateFromProps,c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&nf(e,o,r,u),on=!1;var d=e.memoizedState;o.state=d,mo(e,r,o,i),a=e.memoizedState,l!==r||d!==a||Je.current||on?(typeof f=="function"&&(Fa(e,n,f,r),a=e.memoizedState),(l=on||tf(e,n,l,r,d,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:_t(e.type,l),o.props=u,c=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=pt(a):(a=Ze(n)?Un:We.current,a=Nr(e,a));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||d!==a)&&nf(e,o,r,a),on=!1,d=e.memoizedState,o.state=d,mo(e,r,o,i);var _=e.memoizedState;l!==c||d!==_||Je.current||on?(typeof y=="function"&&(Fa(e,n,y,r),_=e.memoizedState),(u=on||tf(e,n,u,r,d,_,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Wa(t,e,n,r,s,i)}function Wa(t,e,n,r,i,s){gm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qd(e,n,!1),Yt(t,e,s);r=e.stateNode,Fv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=br(e,t.child,null,s),e.child=br(e,null,l,s)):Ue(t,e,l,s),e.memoizedState=r.state,i&&Qd(e,n,!0),e.child}function ym(t){var e=t.stateNode;e.pendingContext?Gd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gd(t,e.context,!1),Xu(t,e.containerInfo)}function cf(t,e,n,r,i){return Pr(),Vu(i),e.flags|=256,Ue(t,e,n,r),e.child}var $a={dehydrated:null,treeContext:null,retryLane:0};function Ua(t){return{baseLanes:t,cachePool:null,transitions:null}}function _m(t,e,n){var r=e.pendingProps,i=pe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(pe,i&1),t===null)return Ma(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tl(o,r,0,null),t=$n(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ua(n),e.memoizedState=$a,t):sc(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return jv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=_n(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=_n(l,s):(s=$n(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ua(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=$a,r}return s=t.child,t=s.sibling,r=_n(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sc(t,e){return e=tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ns(t,e,n,r){return r!==null&&Vu(r),br(e,t.child,null,n),t=sc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ul(Error(T(422))),Ns(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tl({mode:"visible",children:r.children},i,0,null),s=$n(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&br(e,t.child,null,o),e.child.memoizedState=Ua(o),e.memoizedState=$a,s);if(!(e.mode&1))return Ns(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(T(419)),r=Ul(s,r,void 0),Ns(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ke||l){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qt(t,i),Et(r,t,i,-1))}return dc(),r=Ul(Error(T(421))),Ns(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Xv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,rt=pn(i.nextSibling),it=e,fe=!0,wt=null,t!==null&&(ut[ct++]=zt,ut[ct++]=Bt,ut[ct++]=Hn,zt=t.id,Bt=t.overflow,Hn=e),e=sc(e,r.children),e.flags|=4096,e)}function df(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oa(t.return,e,n)}function Hl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ue(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&df(t,n,e);else if(t.tag===19)df(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&go(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&go(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hl(e,!0,n,null,s);break;case"together":Hl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=_n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zv(t,e,n){switch(e.tag){case 3:ym(e),Pr();break;case 5:Vp(e);break;case 1:Ze(e.type)&&uo(e);break;case 4:Xu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(ho,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?_m(t,e,n):(ue(pe,pe.current&1),t=Yt(t,e,n),t!==null?t.sibling:null);ue(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,mm(t,e,n)}return Yt(t,e,n)}var wm,Ha,xm,Cm;wm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ha=function(){};xm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fn(At.current);var s=null;switch(n){case"input":i=fa(t,i),r=fa(t,r),s=[];break;case"select":i=ge({},i,{value:void 0}),r=ge({},r,{value:void 0}),s=[];break;case"textarea":i=ma(t,i),r=ma(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lo)}ya(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ni.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ce("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Cm=function(t,e,n,r){n!==r&&(e.flags|=4)};function ni(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Bv(t,e,n){var r=e.pendingProps;switch(Hu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return Ze(e.type)&&ao(),je(e),null;case 3:return r=e.stateNode,Dr(),de(Je),de(We),Zu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ts(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wt!==null&&(Ja(wt),wt=null))),Ha(t,e),je(e),null;case 5:Ju(e);var i=Fn(Wi.current);if(n=e.type,t!==null&&e.stateNode!=null)xm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return je(e),null}if(t=Fn(At.current),Ts(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[bt]=e,r[zi]=s,t=(e.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(i=0;i<fi.length;i++)ce(fi[i],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":vd(r,s),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ce("invalid",r);break;case"textarea":xd(r,s),ce("invalid",r)}ya(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Is(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Is(r.textContent,l,t),i=["children",""+l]):Ni.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ce("scroll",r)}switch(n){case"input":_s(r),wd(r,s,!0);break;case"textarea":_s(r),Cd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bt]=e,t[zi]=r,wm(t,e,!1,!1),e.stateNode=t;e:{switch(o=_a(n,r),n){case"dialog":ce("cancel",t),ce("close",t),i=r;break;case"iframe":case"object":case"embed":ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<fi.length;i++)ce(fi[i],t);i=r;break;case"source":ce("error",t),i=r;break;case"img":case"image":case"link":ce("error",t),ce("load",t),i=r;break;case"details":ce("toggle",t),i=r;break;case"input":vd(t,r),i=fa(t,r),ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ge({},r,{value:void 0}),ce("invalid",t);break;case"textarea":xd(t,r),i=ma(t,r),ce("invalid",t);break;default:i=r}ya(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Zh(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xh(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Pi(t,a):typeof a=="number"&&Pi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ni.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ce("scroll",t):a!=null&&Nu(t,s,a,o))}switch(n){case"input":_s(t),wd(t,r,!1);break;case"textarea":_s(t),Cd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_r(t,!!r.multiple,s,!1):r.defaultValue!=null&&_r(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)Cm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=Fn(Wi.current),Fn(At.current),Ts(e)){if(r=e.stateNode,n=e.memoizedProps,r[bt]=e,(s=r.nodeValue!==n)&&(t=it,t!==null))switch(t.tag){case 3:Is(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Is(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=e,e.stateNode=r}return je(e),null;case 13:if(de(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&rt!==null&&e.mode&1&&!(e.flags&128))Bp(),Pr(),e.flags|=98560,s=!1;else if(s=Ts(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[bt]=e}else Pr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),s=!1}else wt!==null&&(Ja(wt),wt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Ee===0&&(Ee=3):dc())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return Dr(),Ha(t,e),t===null&&Fi(e.stateNode.containerInfo),je(e),null;case 10:return Yu(e.type._context),je(e),null;case 17:return Ze(e.type)&&ao(),je(e),null;case 19:if(de(pe),s=e.memoizedState,s===null)return je(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ni(s,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=go(t),o!==null){for(e.flags|=128,ni(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(pe,pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&we()>Lr&&(e.flags|=128,r=!0,ni(s,!1),e.lanes=4194304)}else{if(!r)if(t=go(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ni(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!fe)return je(e),null}else 2*we()-s.renderingStartTime>Lr&&n!==1073741824&&(e.flags|=128,r=!0,ni(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=we(),e.sibling=null,n=pe.current,ue(pe,r?n&1|2:n&1),e):(je(e),null);case 22:case 23:return cc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nt&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Wv(t,e){switch(Hu(e),e.tag){case 1:return Ze(e.type)&&ao(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dr(),de(Je),de(We),Zu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ju(e),null;case 13:if(de(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));Pr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(pe),null;case 4:return Dr(),null;case 10:return Yu(e.type._context),null;case 22:case 23:return cc(),null;case 24:return null;default:return null}}var Ps=!1,Be=!1,$v=typeof WeakSet=="function"?WeakSet:Set,L=null;function pr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(t,e,r)}else n.current=null}function Va(t,e,n){try{n()}catch(r){ye(t,e,r)}}var ff=!1;function Uv(t,e){if(Ra=io,t=Tp(),$u(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,c=t,d=null;t:for(;;){for(var y;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(y=c.firstChild)!==null;)d=c,c=y;for(;;){if(c===t)break t;if(d===n&&++u===i&&(l=o),d===s&&++f===r&&(a=o),(y=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Na={focusedElem:t,selectionRange:n},io=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,C=_.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:_t(e.type,w),C);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(v){ye(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return _=ff,ff=!1,_}function vi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Va(e,n,s)}i=i.next}while(i!==r)}}function Zo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ga(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sm(t){var e=t.alternate;e!==null&&(t.alternate=null,Sm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bt],delete e[zi],delete e[Da],delete e[kv],delete e[Iv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Em(t){return t.tag===5||t.tag===3||t.tag===4}function hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Em(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lo));else if(r!==4&&(t=t.child,t!==null))for(Qa(t,e,n),t=t.sibling;t!==null;)Qa(t,e,n),t=t.sibling}function Ya(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ya(t,e,n),t=t.sibling;t!==null;)Ya(t,e,n),t=t.sibling}var Pe=null,vt=!1;function rn(t,e,n){for(n=n.child;n!==null;)km(t,e,n),n=n.sibling}function km(t,e,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Vo,n)}catch{}switch(n.tag){case 5:Be||pr(n,e);case 6:var r=Pe,i=vt;Pe=null,rn(t,e,n),Pe=r,vt=i,Pe!==null&&(vt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(vt?(t=Pe,n=n.stateNode,t.nodeType===8?Fl(t.parentNode,n):t.nodeType===1&&Fl(t,n),Li(t)):Fl(Pe,n.stateNode));break;case 4:r=Pe,i=vt,Pe=n.stateNode.containerInfo,vt=!0,rn(t,e,n),Pe=r,vt=i;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Va(n,e,o),i=i.next}while(i!==r)}rn(t,e,n);break;case 1:if(!Be&&(pr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ye(n,e,l)}rn(t,e,n);break;case 21:rn(t,e,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,rn(t,e,n),Be=r):rn(t,e,n);break;default:rn(t,e,n)}}function pf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $v),e.forEach(function(r){var i=Jv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,vt=!1;break e;case 3:Pe=l.stateNode.containerInfo,vt=!0;break e;case 4:Pe=l.stateNode.containerInfo,vt=!0;break e}l=l.return}if(Pe===null)throw Error(T(160));km(s,o,i),Pe=null,vt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ye(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Im(e,t),e=e.sibling}function Im(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yt(e,t),Nt(t),r&4){try{vi(3,t,t.return),Zo(3,t)}catch(w){ye(t,t.return,w)}try{vi(5,t,t.return)}catch(w){ye(t,t.return,w)}}break;case 1:yt(e,t),Nt(t),r&512&&n!==null&&pr(n,n.return);break;case 5:if(yt(e,t),Nt(t),r&512&&n!==null&&pr(n,n.return),t.flags&32){var i=t.stateNode;try{Pi(i,"")}catch(w){ye(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Yh(i,s),_a(l,o);var u=_a(l,s);for(o=0;o<a.length;o+=2){var f=a[o],c=a[o+1];f==="style"?Zh(i,c):f==="dangerouslySetInnerHTML"?Xh(i,c):f==="children"?Pi(i,c):Nu(i,f,c,u)}switch(l){case"input":ha(i,s);break;case"textarea":Kh(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?_r(i,!!s.multiple,y,!1):d!==!!s.multiple&&(s.defaultValue!=null?_r(i,!!s.multiple,s.defaultValue,!0):_r(i,!!s.multiple,s.multiple?[]:"",!1))}i[zi]=s}catch(w){ye(t,t.return,w)}}break;case 6:if(yt(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){ye(t,t.return,w)}}break;case 3:if(yt(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Li(e.containerInfo)}catch(w){ye(t,t.return,w)}break;case 4:yt(e,t),Nt(t);break;case 13:yt(e,t),Nt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ac=we())),r&4&&pf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Be=(u=Be)||f,yt(e,t),Be=u):yt(e,t),Nt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(L=t,f=t.child;f!==null;){for(c=L=f;L!==null;){switch(d=L,y=d.child,d.tag){case 0:case 11:case 14:case 15:vi(4,d,d.return);break;case 1:pr(d,d.return);var _=d.stateNode;if(typeof _.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){ye(r,n,w)}}break;case 5:pr(d,d.return);break;case 22:if(d.memoizedState!==null){gf(c);continue}}y!==null?(y.return=d,L=y):gf(c)}f=f.sibling}e:for(f=null,c=t;;){if(c.tag===5){if(f===null){f=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Jh("display",o))}catch(w){ye(t,t.return,w)}}}else if(c.tag===6){if(f===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(w){ye(t,t.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:yt(e,t),Nt(t),r&4&&pf(t);break;case 21:break;default:yt(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Em(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pi(i,""),r.flags&=-33);var s=hf(t);Ya(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=hf(t);Qa(t,l,o);break;default:throw Error(T(161))}}catch(a){ye(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hv(t,e,n){L=t,Tm(t)}function Tm(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ps;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Be;l=Ps;var u=Be;if(Ps=o,(Be=a)&&!u)for(L=i;L!==null;)o=L,a=o.child,o.tag===22&&o.memoizedState!==null?yf(i):a!==null?(a.return=o,L=a):yf(i);for(;s!==null;)L=s,Tm(s),s=s.sibling;L=i,Ps=l,Be=u}mf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):mf(t)}}function mf(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Be||Zo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Be)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_t(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Jd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var c=f.dehydrated;c!==null&&Li(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Be||e.flags&512&&Ga(e)}catch(d){ye(e,e.return,d)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function gf(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function yf(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zo(4,e)}catch(a){ye(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ye(e,i,a)}}var s=e.return;try{Ga(e)}catch(a){ye(e,s,a)}break;case 5:var o=e.return;try{Ga(e)}catch(a){ye(e,o,a)}}}catch(a){ye(e,e.return,a)}if(e===t){L=null;break}var l=e.sibling;if(l!==null){l.return=e.return,L=l;break}L=e.return}}var Vv=Math.ceil,vo=tn.ReactCurrentDispatcher,oc=tn.ReactCurrentOwner,ht=tn.ReactCurrentBatchConfig,J=0,Ne=null,xe=null,Ae=0,nt=0,mr=Tn(0),Ee=0,Vi=null,Gn=0,el=0,lc=0,wi=null,Ye=null,ac=0,Lr=1/0,Ft=null,wo=!1,Ka=null,gn=null,bs=!1,cn=null,xo=0,xi=0,qa=null,Gs=-1,Qs=0;function Ve(){return J&6?we():Gs!==-1?Gs:Gs=we()}function yn(t){return t.mode&1?J&2&&Ae!==0?Ae&-Ae:Rv.transition!==null?(Qs===0&&(Qs=dp()),Qs):(t=re,t!==0||(t=window.event,t=t===void 0?16:_p(t.type)),t):1}function Et(t,e,n,r){if(50<xi)throw xi=0,qa=null,Error(T(185));ss(t,n,r),(!(J&2)||t!==Ne)&&(t===Ne&&(!(J&2)&&(el|=n),Ee===4&&an(t,Ae)),et(t,r),n===1&&J===0&&!(e.mode&1)&&(Lr=we()+500,qo&&Rn()))}function et(t,e){var n=t.callbackNode;R_(t,e);var r=ro(t,t===Ne?Ae:0);if(r===0)n!==null&&kd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kd(n),e===1)t.tag===0?Tv(_f.bind(null,t)):Fp(_f.bind(null,t)),Sv(function(){!(J&6)&&Rn()}),n=null;else{switch(fp(r)){case 1:n=Lu;break;case 4:n=up;break;case 16:n=no;break;case 536870912:n=cp;break;default:n=no}n=Mm(n,Rm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rm(t,e){if(Gs=-1,Qs=0,J&6)throw Error(T(327));var n=t.callbackNode;if(Sr()&&t.callbackNode!==n)return null;var r=ro(t,t===Ne?Ae:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Co(t,r);else{e=r;var i=J;J|=2;var s=Pm();(Ne!==t||Ae!==e)&&(Ft=null,Lr=we()+500,Wn(t,e));do try{Yv();break}catch(l){Nm(t,l)}while(!0);Qu(),vo.current=s,J=i,xe!==null?e=0:(Ne=null,Ae=0,e=Ee)}if(e!==0){if(e===2&&(i=Sa(t),i!==0&&(r=i,e=Xa(t,i))),e===1)throw n=Vi,Wn(t,0),an(t,r),et(t,we()),n;if(e===6)an(t,r);else{if(i=t.current.alternate,!(r&30)&&!Gv(i)&&(e=Co(t,r),e===2&&(s=Sa(t),s!==0&&(r=s,e=Xa(t,s))),e===1))throw n=Vi,Wn(t,0),an(t,r),et(t,we()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:Dn(t,Ye,Ft);break;case 3:if(an(t,r),(r&130023424)===r&&(e=ac+500-we(),10<e)){if(ro(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ve(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ba(Dn.bind(null,t,Ye,Ft),e);break}Dn(t,Ye,Ft);break;case 4:if(an(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-St(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vv(r/1960))-r,10<r){t.timeoutHandle=ba(Dn.bind(null,t,Ye,Ft),r);break}Dn(t,Ye,Ft);break;case 5:Dn(t,Ye,Ft);break;default:throw Error(T(329))}}}return et(t,we()),t.callbackNode===n?Rm.bind(null,t):null}function Xa(t,e){var n=wi;return t.current.memoizedState.isDehydrated&&(Wn(t,e).flags|=256),t=Co(t,e),t!==2&&(e=Ye,Ye=n,e!==null&&Ja(e)),t}function Ja(t){Ye===null?Ye=t:Ye.push.apply(Ye,t)}function Gv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!It(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function an(t,e){for(e&=~lc,e&=~el,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-St(e),r=1<<n;t[n]=-1,e&=~r}}function _f(t){if(J&6)throw Error(T(327));Sr();var e=ro(t,0);if(!(e&1))return et(t,we()),null;var n=Co(t,e);if(t.tag!==0&&n===2){var r=Sa(t);r!==0&&(e=r,n=Xa(t,r))}if(n===1)throw n=Vi,Wn(t,0),an(t,e),et(t,we()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dn(t,Ye,Ft),et(t,we()),null}function uc(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Lr=we()+500,qo&&Rn())}}function Qn(t){cn!==null&&cn.tag===0&&!(J&6)&&Sr();var e=J;J|=1;var n=ht.transition,r=re;try{if(ht.transition=null,re=1,t)return t()}finally{re=r,ht.transition=n,J=e,!(J&6)&&Rn()}}function cc(){nt=mr.current,de(mr)}function Wn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Cv(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(Hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ao();break;case 3:Dr(),de(Je),de(We),Zu();break;case 5:Ju(r);break;case 4:Dr();break;case 13:de(pe);break;case 19:de(pe);break;case 10:Yu(r.type._context);break;case 22:case 23:cc()}n=n.return}if(Ne=t,xe=t=_n(t.current,null),Ae=nt=e,Ee=0,Vi=null,lc=el=Gn=0,Ye=wi=null,On!==null){for(e=0;e<On.length;e++)if(n=On[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}On=null}return t}function Nm(t,e){do{var n=xe;try{if(Qu(),Us.current=_o,yo){for(var r=me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yo=!1}if(Vn=0,Ie=Se=me=null,_i=!1,$i=0,oc.current=null,n===null||n.return===null){Ee=1,Vi=e,xe=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ae,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,c=f.tag;if(!(f.mode&1)&&(c===0||c===11||c===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=sf(o);if(y!==null){y.flags&=-257,of(y,o,l,s,e),y.mode&1&&rf(s,u,e),e=y,a=u;var _=e.updateQueue;if(_===null){var w=new Set;w.add(a),e.updateQueue=w}else _.add(a);break e}else{if(!(e&1)){rf(s,u,e),dc();break e}a=Error(T(426))}}else if(fe&&l.mode&1){var C=sf(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),of(C,o,l,s,e),Vu(Ar(a,l));break e}}s=a=Ar(a,l),Ee!==4&&(Ee=2),wi===null?wi=[s]:wi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=fm(s,a,e);Xd(s,p);break e;case 1:l=a;var h=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gn===null||!gn.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var v=hm(s,l,e);Xd(s,v);break e}}s=s.return}while(s!==null)}Dm(n)}catch(E){e=E,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function Pm(){var t=vo.current;return vo.current=_o,t===null?_o:t}function dc(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Ne===null||!(Gn&268435455)&&!(el&268435455)||an(Ne,Ae)}function Co(t,e){var n=J;J|=2;var r=Pm();(Ne!==t||Ae!==e)&&(Ft=null,Wn(t,e));do try{Qv();break}catch(i){Nm(t,i)}while(!0);if(Qu(),J=n,vo.current=r,xe!==null)throw Error(T(261));return Ne=null,Ae=0,Ee}function Qv(){for(;xe!==null;)bm(xe)}function Yv(){for(;xe!==null&&!v_();)bm(xe)}function bm(t){var e=Lm(t.alternate,t,nt);t.memoizedProps=t.pendingProps,e===null?Dm(t):xe=e,oc.current=null}function Dm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wv(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,xe=null;return}}else if(n=Bv(n,e,nt),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);Ee===0&&(Ee=5)}function Dn(t,e,n){var r=re,i=ht.transition;try{ht.transition=null,re=1,Kv(t,e,n,r)}finally{ht.transition=i,re=r}return null}function Kv(t,e,n,r){do Sr();while(cn!==null);if(J&6)throw Error(T(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(N_(t,s),t===Ne&&(xe=Ne=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bs||(bs=!0,Mm(no,function(){return Sr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ht.transition,ht.transition=null;var o=re;re=1;var l=J;J|=4,oc.current=null,Uv(t,n),Im(n,t),mv(Na),io=!!Ra,Na=Ra=null,t.current=n,Hv(n),w_(),J=l,re=o,ht.transition=s}else t.current=n;if(bs&&(bs=!1,cn=t,xo=i),s=t.pendingLanes,s===0&&(gn=null),S_(n.stateNode),et(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wo)throw wo=!1,t=Ka,Ka=null,t;return xo&1&&t.tag!==0&&Sr(),s=t.pendingLanes,s&1?t===qa?xi++:(xi=0,qa=t):xi=0,Rn(),null}function Sr(){if(cn!==null){var t=fp(xo),e=ht.transition,n=re;try{if(ht.transition=null,re=16>t?16:t,cn===null)var r=!1;else{if(t=cn,cn=null,xo=0,J&6)throw Error(T(331));var i=J;for(J|=4,L=t.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(L=u;L!==null;){var f=L;switch(f.tag){case 0:case 11:case 15:vi(8,f,s)}var c=f.child;if(c!==null)c.return=f,L=c;else for(;L!==null;){f=L;var d=f.sibling,y=f.return;if(Sm(f),f===u){L=null;break}if(d!==null){d.return=y,L=d;break}L=y}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var h=t.current;for(L=h;L!==null;){o=L;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,L=m;else e:for(o=h;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zo(9,l)}}catch(E){ye(l,l.return,E)}if(l===o){L=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,L=v;break e}L=l.return}}if(J=i,Rn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Vo,t)}catch{}r=!0}return r}finally{re=n,ht.transition=e}}return!1}function vf(t,e,n){e=Ar(n,e),e=fm(t,e,1),t=mn(t,e,1),e=Ve(),t!==null&&(ss(t,1,e),et(t,e))}function ye(t,e,n){if(t.tag===3)vf(t,t,n);else for(;e!==null;){if(e.tag===3){vf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){t=Ar(n,t),t=hm(e,t,1),e=mn(e,t,1),t=Ve(),e!==null&&(ss(e,1,t),et(e,t));break}}e=e.return}}function qv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Ae&n)===n&&(Ee===4||Ee===3&&(Ae&130023424)===Ae&&500>we()-ac?Wn(t,0):lc|=n),et(t,e)}function Am(t,e){e===0&&(t.mode&1?(e=xs,xs<<=1,!(xs&130023424)&&(xs=4194304)):e=1);var n=Ve();t=Qt(t,e),t!==null&&(ss(t,e,n),et(t,n))}function Xv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Am(t,n)}function Jv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),Am(t,n)}var Lm;Lm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Ke=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ke=!1,zv(t,e,n);Ke=!!(t.flags&131072)}else Ke=!1,fe&&e.flags&1048576&&jp(e,fo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vs(t,e),t=e.pendingProps;var i=Nr(e,We.current);Cr(e,n),i=tc(null,e,r,t,i,n);var s=nc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ze(r)?(s=!0,uo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qu(e),i.updater=Jo,e.stateNode=i,i._reactInternals=e,ja(e,r,t,n),e=Wa(null,e,r,!0,s,n)):(e.tag=0,fe&&s&&Uu(e),Ue(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=e0(r),t=_t(r,t),i){case 0:e=Ba(null,e,r,t,n);break e;case 1:e=uf(null,e,r,t,n);break e;case 11:e=lf(null,e,r,t,n);break e;case 14:e=af(null,e,r,_t(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),Ba(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),uf(t,e,r,i,n);case 3:e:{if(ym(e),t===null)throw Error(T(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Hp(t,e),mo(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ar(Error(T(423)),e),e=cf(t,e,r,n,i);break e}else if(r!==i){i=Ar(Error(T(424)),e),e=cf(t,e,r,n,i);break e}else for(rt=pn(e.stateNode.containerInfo.firstChild),it=e,fe=!0,wt=null,n=$p(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pr(),r===i){e=Yt(t,e,n);break e}Ue(t,e,r,n)}e=e.child}return e;case 5:return Vp(e),t===null&&Ma(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Pa(r,i)?o=null:s!==null&&Pa(r,s)&&(e.flags|=32),gm(t,e),Ue(t,e,o,n),e.child;case 6:return t===null&&Ma(e),null;case 13:return _m(t,e,n);case 4:return Xu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=br(e,null,r,n):Ue(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),lf(t,e,r,i,n);case 7:return Ue(t,e,e.pendingProps,n),e.child;case 8:return Ue(t,e,e.pendingProps.children,n),e.child;case 12:return Ue(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ue(ho,r._currentValue),r._currentValue=o,s!==null)if(It(s.value,o)){if(s.children===i.children&&!Je.current){e=Yt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=$t(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Oa(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(T(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Oa(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ue(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Cr(e,n),i=pt(i),r=r(i),e.flags|=1,Ue(t,e,r,n),e.child;case 14:return r=e.type,i=_t(r,e.pendingProps),i=_t(r.type,i),af(t,e,r,i,n);case 15:return pm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_t(r,i),Vs(t,e),e.tag=1,Ze(r)?(t=!0,uo(e)):t=!1,Cr(e,n),dm(e,r,i),ja(e,r,i,n),Wa(null,e,r,!0,t,n);case 19:return vm(t,e,n);case 22:return mm(t,e,n)}throw Error(T(156,e.tag))};function Mm(t,e){return ap(t,e)}function Zv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(t,e,n,r){return new Zv(t,e,n,r)}function fc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e0(t){if(typeof t=="function")return fc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bu)return 11;if(t===Du)return 14}return 2}function _n(t,e){var n=t.alternate;return n===null?(n=dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ys(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")fc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sr:return $n(n.children,i,s,e);case Pu:o=8,i|=8;break;case aa:return t=dt(12,n,e,i|2),t.elementType=aa,t.lanes=s,t;case ua:return t=dt(13,n,e,i),t.elementType=ua,t.lanes=s,t;case ca:return t=dt(19,n,e,i),t.elementType=ca,t.lanes=s,t;case Vh:return tl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uh:o=10;break e;case Hh:o=9;break e;case bu:o=11;break e;case Du:o=14;break e;case sn:o=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=dt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $n(t,e,n,r){return t=dt(7,t,r,e),t.lanes=n,t}function tl(t,e,n,r){return t=dt(22,t,r,e),t.elementType=Vh,t.lanes=n,t.stateNode={isHidden:!1},t}function Vl(t,e,n){return t=dt(6,t,null,e),t.lanes=n,t}function Gl(t,e,n){return e=dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function t0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hc(t,e,n,r,i,s,o,l,a){return t=new t0(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qu(s),t}function n0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Om(t){if(!t)return Sn;t=t._reactInternals;e:{if(Zn(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ze(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(Ze(n))return Op(t,n,e)}return e}function Fm(t,e,n,r,i,s,o,l,a){return t=hc(n,r,!0,t,i,s,o,l,a),t.context=Om(null),n=t.current,r=Ve(),i=yn(n),s=$t(r,i),s.callback=e??null,mn(n,s,i),t.current.lanes=i,ss(t,i,r),et(t,r),t}function nl(t,e,n,r){var i=e.current,s=Ve(),o=yn(i);return n=Om(n),e.context===null?e.context=n:e.pendingContext=n,e=$t(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mn(i,e,o),t!==null&&(Et(t,i,o,s),$s(t,i,o)),o}function So(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pc(t,e){wf(t,e),(t=t.alternate)&&wf(t,e)}function r0(){return null}var jm=typeof reportError=="function"?reportError:function(t){console.error(t)};function mc(t){this._internalRoot=t}rl.prototype.render=mc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));nl(t,e,null,null)};rl.prototype.unmount=mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qn(function(){nl(null,t,null,null)}),e[Gt]=null}};function rl(t){this._internalRoot=t}rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=mp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ln.length&&e!==0&&e<ln[n].priority;n++);ln.splice(n,0,t),n===0&&yp(t)}};function gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xf(){}function i0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=So(o);s.call(u)}}var o=Fm(e,r,t,0,null,!1,!1,"",xf);return t._reactRootContainer=o,t[Gt]=o.current,Fi(t.nodeType===8?t.parentNode:t),Qn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=So(a);l.call(u)}}var a=hc(t,0,!1,null,null,!1,!1,"",xf);return t._reactRootContainer=a,t[Gt]=a.current,Fi(t.nodeType===8?t.parentNode:t),Qn(function(){nl(e,a,n,r)}),a}function sl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=So(o);l.call(a)}}nl(e,o,t,i)}else o=i0(n,e,t,i,r);return So(o)}hp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=di(e.pendingLanes);n!==0&&(Mu(e,n|1),et(e,we()),!(J&6)&&(Lr=we()+500,Rn()))}break;case 13:Qn(function(){var r=Qt(t,1);if(r!==null){var i=Ve();Et(r,t,1,i)}}),pc(t,1)}};Ou=function(t){if(t.tag===13){var e=Qt(t,134217728);if(e!==null){var n=Ve();Et(e,t,134217728,n)}pc(t,134217728)}};pp=function(t){if(t.tag===13){var e=yn(t),n=Qt(t,e);if(n!==null){var r=Ve();Et(n,t,e,r)}pc(t,e)}};mp=function(){return re};gp=function(t,e){var n=re;try{return re=t,e()}finally{re=n}};wa=function(t,e,n){switch(e){case"input":if(ha(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ko(r);if(!i)throw Error(T(90));Qh(r),ha(r,i)}}}break;case"textarea":Kh(t,n);break;case"select":e=n.value,e!=null&&_r(t,!!n.multiple,e,!1)}};np=uc;rp=Qn;var s0={usingClientEntryPoint:!1,Events:[ls,ur,Ko,ep,tp,uc]},ri={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o0={bundleType:ri.bundleType,version:ri.version,rendererPackageName:ri.rendererPackageName,rendererConfig:ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=op(t),t===null?null:t.stateNode},findFiberByHostInstance:ri.findFiberByHostInstance||r0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ds=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ds.isDisabled&&Ds.supportsFiber)try{Vo=Ds.inject(o0),Dt=Ds}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s0;ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gc(e))throw Error(T(200));return n0(t,e,null,n)};ot.createRoot=function(t,e){if(!gc(t))throw Error(T(299));var n=!1,r="",i=jm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hc(t,1,!1,null,null,n,!1,r,i),t[Gt]=e.current,Fi(t.nodeType===8?t.parentNode:t),new mc(e)};ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=op(e),t=t===null?null:t.stateNode,t};ot.flushSync=function(t){return Qn(t)};ot.hydrate=function(t,e,n){if(!il(e))throw Error(T(200));return sl(null,t,e,!0,n)};ot.hydrateRoot=function(t,e,n){if(!gc(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Fm(e,null,t,1,n??null,i,!1,s,o),t[Gt]=e.current,Fi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rl(e)};ot.render=function(t,e,n){if(!il(e))throw Error(T(200));return sl(null,t,e,!1,n)};ot.unmountComponentAtNode=function(t){if(!il(t))throw Error(T(40));return t._reactRootContainer?(Qn(function(){sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Gt]=null})}),!0):!1};ot.unstable_batchedUpdates=uc;ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!il(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return sl(t,e,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function zm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zm)}catch(t){console.error(t)}}zm(),zh.exports=ot;var l0=zh.exports,Cf=l0;oa.createRoot=Cf.createRoot,oa.hydrateRoot=Cf.hydrateRoot;var yc={};Object.defineProperty(yc,"__esModule",{value:!0});yc.parse=p0;yc.serialize=m0;const a0=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,u0=/^[\u0021-\u003A\u003C-\u007E]*$/,c0=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,d0=/^[\u0020-\u003A\u003D-\u007E]*$/,f0=Object.prototype.toString,h0=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function p0(t,e){const n=new h0,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||g0;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const l=t.indexOf(";",s),a=l===-1?r:l;if(o>a){s=t.lastIndexOf(";",o-1)+1;continue}const u=Sf(t,s,o),f=Ef(t,o,u),c=t.slice(u,f);if(n[c]===void 0){let d=Sf(t,o+1,a),y=Ef(t,a,d);const _=i(t.slice(d,y));n[c]=_}s=a+1}while(s<r);return n}function Sf(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function Ef(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function m0(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!a0.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!u0.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!c0.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!d0.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!y0(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function g0(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function y0(t){return f0.call(t)==="[object Date]"}var kf="popstate";function _0(t={}){function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Za("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gi(i)}return w0(e,n,null,t)}function he(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v0(){return Math.random().toString(36).substring(2,10)}function If(t,e){return{usr:t.state,key:t.key,idx:e}}function Za(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ur(e):e,state:n,key:e&&e.key||r||v0()}}function Gi({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ur(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function w0(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l="POP",a=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function c(){l="POP";let C=f(),p=C==null?null:C-u;u=C,a&&a({action:l,location:w.location,delta:p})}function d(C,p){l="PUSH";let h=Za(w.location,C,p);u=f()+1;let m=If(h,u),v=w.createHref(h);try{o.pushState(m,"",v)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(v)}s&&a&&a({action:l,location:w.location,delta:1})}function y(C,p){l="REPLACE";let h=Za(w.location,C,p);u=f();let m=If(h,u),v=w.createHref(h);o.replaceState(m,"",v),s&&a&&a({action:l,location:w.location,delta:0})}function _(C){return x0(C)}let w={get action(){return l},get location(){return t(i,o)},listen(C){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(kf,c),a=C,()=>{i.removeEventListener(kf,c),a=null}},createHref(C){return e(i,C)},createURL:_,encodeLocation(C){let p=_(C);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:y,go(C){return o.go(C)}};return w}function x0(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),he(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Gi(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Bm(t,e,n="/"){return C0(t,e,n,!1)}function C0(t,e,n,r){let i=typeof e=="string"?Ur(e):e,s=Kt(i.pathname||"/",n);if(s==null)return null;let o=Wm(t);S0(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=L0(s);l=D0(o[a],u,r)}return l}function Wm(t,e=[],n=[],r=""){let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(he(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let u=Ut([r,a.relativePath]),f=n.concat(a);s.children&&s.children.length>0&&(he(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Wm(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:P0(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of $m(s.path))i(s,o,a)}),e}function $m(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=$m(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function S0(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var E0=/^:[\w-]+$/,k0=3,I0=2,T0=1,R0=10,N0=-2,Tf=t=>t==="*";function P0(t,e){let n=t.split("/"),r=n.length;return n.some(Tf)&&(r+=N0),e&&(r+=I0),n.filter(i=>!Tf(i)).reduce((i,s)=>i+(E0.test(s)?k0:s===""?T0:R0),r)}function b0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function D0(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",c=Eo({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},f),d=a.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=Eo({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},f)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:Ut([s,c.pathname]),pathnameBase:j0(Ut([s,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(s=Ut([s,c.pathnameBase]))}return o}function Eo(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=A0(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:c},d)=>{if(f==="*"){let _=l[d]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=l[d];return c&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function A0(t,e=!1,n=!0){Tt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function L0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function M0(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ur(t):t;return{pathname:n?n.startsWith("/")?n:O0(n,e):e,search:z0(r),hash:B0(i)}}function O0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ql(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _c(t){let e=F0(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function vc(t,e,n,r=!1){let i;typeof t=="string"?i=Ur(t):(i={...t},he(!i.pathname||!i.pathname.includes("?"),Ql("?","pathname","search",i)),he(!i.pathname||!i.pathname.includes("#"),Ql("#","pathname","hash",i)),he(!i.search||!i.search.includes("#"),Ql("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let c=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),c-=1;i.pathname=d.join("/")}l=c>=0?e[c]:"/"}let a=M0(i,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||f)&&(a.pathname+="/"),a}var Ut=t=>t.join("/").replace(/\/\/+/g,"/"),j0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function W0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Um=["POST","PUT","PATCH","DELETE"];new Set(Um);var $0=["GET",...Um];new Set($0);var Hr=g.createContext(null);Hr.displayName="DataRouter";var ol=g.createContext(null);ol.displayName="DataRouterState";var Hm=g.createContext({isTransitioning:!1});Hm.displayName="ViewTransition";var U0=g.createContext(new Map);U0.displayName="Fetchers";var H0=g.createContext(null);H0.displayName="Await";var Rt=g.createContext(null);Rt.displayName="Navigation";var us=g.createContext(null);us.displayName="Location";var Lt=g.createContext({outlet:null,matches:[],isDataRoute:!1});Lt.displayName="Route";var wc=g.createContext(null);wc.displayName="RouteError";function V0(t,{relative:e}={}){he(Vr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(Rt),{hash:i,pathname:s,search:o}=cs(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Ut([n,s])),r.createHref({pathname:l,search:o,hash:i})}function Vr(){return g.useContext(us)!=null}function Nn(){return he(Vr(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(us).location}var Vm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gm(t){g.useContext(Rt).static||g.useLayoutEffect(t)}function Qm(){let{isDataRoute:t}=g.useContext(Lt);return t?iw():G0()}function G0(){he(Vr(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(Hr),{basename:e,navigator:n}=g.useContext(Rt),{matches:r}=g.useContext(Lt),{pathname:i}=Nn(),s=JSON.stringify(_c(r)),o=g.useRef(!1);return Gm(()=>{o.current=!0}),g.useCallback((a,u={})=>{if(Tt(o.current,Vm),!o.current)return;if(typeof a=="number"){n.go(a);return}let f=vc(a,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ut([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,s,i,t])}g.createContext(null);function cs(t,{relative:e}={}){let{matches:n}=g.useContext(Lt),{pathname:r}=Nn(),i=JSON.stringify(_c(n));return g.useMemo(()=>vc(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Q0(t,e){return Ym(t,e)}function Ym(t,e,n,r){var p;he(Vr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(Rt),{matches:s}=g.useContext(Lt),o=s[s.length-1],l=o?o.params:{},a=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let h=f&&f.path||"";Km(a,!f||h.endsWith("*")||h.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${a}" (under <Route path="${h}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${h}"> to <Route path="${h==="/"?"*":`${h}/*`}">.`)}let c=Nn(),d;if(e){let h=typeof e=="string"?Ur(e):e;he(u==="/"||((p=h.pathname)==null?void 0:p.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${h.pathname}" was given in the \`location\` prop.`),d=h}else d=c;let y=d.pathname||"/",_=y;if(u!=="/"){let h=u.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(h.length).join("/")}let w=Bm(t,{pathname:_});Tt(f||w!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Tt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=J0(w&&w.map(h=>Object.assign({},h,{params:Object.assign({},l,h.params),pathname:Ut([u,i.encodeLocation?i.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?u:Ut([u,i.encodeLocation?i.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),s,n,r);return e&&C?g.createElement(us.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},C):C}function Y0(){let t=rw(),e=W0(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,o)}var K0=g.createElement(Y0,null),q0=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?g.createElement(Lt.Provider,{value:this.props.routeContext},g.createElement(wc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function X0({routeContext:t,match:e,children:n}){let r=g.useContext(Hr);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(Lt.Provider,{value:t},n)}function J0(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let a=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);he(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,a+1))}let o=!1,l=-1;if(n)for(let a=0;a<i.length;a++){let u=i[a];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=a),u.route.id){let{loaderData:f,errors:c}=n,d=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!c||c[u.route.id]===void 0);if(u.route.lazy||d){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((a,u,f)=>{let c,d=!1,y=null,_=null;n&&(c=s&&u.route.id?s[u.route.id]:void 0,y=u.route.errorElement||K0,o&&(l<0&&f===0?(Km("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,_=null):l===f&&(d=!0,_=u.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,f+1)),C=()=>{let p;return c?p=y:d?p=_:u.route.Component?p=g.createElement(u.route.Component,null):u.route.element?p=u.route.element:p=a,g.createElement(X0,{match:u,routeContext:{outlet:a,matches:w,isDataRoute:n!=null},children:p})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?g.createElement(q0,{location:n.location,revalidation:n.revalidation,component:y,error:c,children:C(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):C()},null)}function xc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z0(t){let e=g.useContext(Hr);return he(e,xc(t)),e}function ew(t){let e=g.useContext(ol);return he(e,xc(t)),e}function tw(t){let e=g.useContext(Lt);return he(e,xc(t)),e}function Cc(t){let e=tw(t),n=e.matches[e.matches.length-1];return he(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function nw(){return Cc("useRouteId")}function rw(){var r;let t=g.useContext(wc),e=ew("useRouteError"),n=Cc("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function iw(){let{router:t}=Z0("useNavigate"),e=Cc("useNavigate"),n=g.useRef(!1);return Gm(()=>{n.current=!0}),g.useCallback(async(i,s={})=>{Tt(n.current,Vm),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Rf={};function Km(t,e,n){!e&&!Rf[t]&&(Rf[t]=!0,Tt(!1,n))}g.memo(sw);function sw({routes:t,future:e,state:n}){return Ym(t,void 0,n,e)}function ow({to:t,replace:e,state:n,relative:r}){he(Vr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=g.useContext(Rt);Tt(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(Lt),{pathname:o}=Nn(),l=Qm(),a=vc(t,_c(s),o,r==="path"),u=JSON.stringify(a);return g.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function Ks(t){he(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lw({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){he(!Vr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Ur(n));let{pathname:a="/",search:u="",hash:f="",state:c=null,key:d="default"}=n,y=g.useMemo(()=>{let _=Kt(a,o);return _==null?null:{location:{pathname:_,search:u,hash:f,state:c,key:d},navigationType:r}},[o,a,u,f,c,d,r]);return Tt(y!=null,`<Router basename="${o}"> is not able to match the URL "${a}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:g.createElement(Rt.Provider,{value:l},g.createElement(us.Provider,{children:e,value:y}))}function aw({children:t,location:e}){return Q0(eu(t),e)}function eu(t,e=[]){let n=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let s=[...e,i];if(r.type===g.Fragment){n.push.apply(n,eu(r.props.children,s));return}he(r.type===Ks,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),he(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=eu(r.props.children,s)),n.push(o)}),n}var qs="get",Xs="application/x-www-form-urlencoded";function ll(t){return t!=null&&typeof t.tagName=="string"}function uw(t){return ll(t)&&t.tagName.toLowerCase()==="button"}function cw(t){return ll(t)&&t.tagName.toLowerCase()==="form"}function dw(t){return ll(t)&&t.tagName.toLowerCase()==="input"}function fw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hw(t,e){return t.button===0&&(!e||e==="_self")&&!fw(t)}var As=null;function pw(){if(As===null)try{new FormData(document.createElement("form"),0),As=!1}catch{As=!0}return As}var mw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yl(t){return t!=null&&!mw.has(t)?(Tt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xs}"`),null):t}function gw(t,e){let n,r,i,s,o;if(cw(t)){let l=t.getAttribute("action");r=l?Kt(l,e):null,n=t.getAttribute("method")||qs,i=Yl(t.getAttribute("enctype"))||Xs,s=new FormData(t)}else if(uw(t)||dw(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=t.getAttribute("formaction")||l.getAttribute("action");if(r=a?Kt(a,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||qs,i=Yl(t.getAttribute("formenctype"))||Yl(l.getAttribute("enctype"))||Xs,s=new FormData(l,t),!pw()){let{name:u,type:f,value:c}=t;if(f==="image"){let d=u?`${u}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else u&&s.append(u,c)}}else{if(ll(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qs,r=null,i=Xs,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Sc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function yw(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _w(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function vw(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await yw(s,n);return o.links?o.links():[]}return[]}));return Sw(r.flat(1).filter(_w).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Nf(t,e,n,r,i,s){let o=(a,u)=>n[u]?a.route.id!==n[u].route.id:!0,l=(a,u)=>{var f;return n[u].pathname!==a.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==a.params["*"]};return s==="assets"?e.filter((a,u)=>o(a,u)||l(a,u)):s==="data"?e.filter((a,u)=>{var c;let f=r.routes[a.route.id];if(!f||!f.hasLoader)return!1;if(o(a,u)||l(a,u))return!0;if(a.route.shouldRevalidate){let d=a.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((c=n[0])==null?void 0:c.params)||{},nextUrl:new URL(t,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function ww(t,e,{includeHydrateFallback:n}={}){return xw(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function xw(t){return[...new Set(t)]}function Cw(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Sw(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(Cw(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ew=new Set([100,101,204,205]);function kw(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Kt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function qm(){let t=g.useContext(Hr);return Sc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Iw(){let t=g.useContext(ol);return Sc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ec=g.createContext(void 0);Ec.displayName="FrameworkContext";function Xm(){let t=g.useContext(Ec);return Sc(t,"You must render this element inside a <HydratedRouter> element"),t}function Tw(t,e){let n=g.useContext(Ec),[r,i]=g.useState(!1),[s,o]=g.useState(!1),{onFocus:l,onBlur:a,onMouseEnter:u,onMouseLeave:f,onTouchStart:c}=e,d=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=p=>{p.forEach(h=>{o(h.isIntersecting)})},C=new IntersectionObserver(w,{threshold:.5});return d.current&&C.observe(d.current),()=>{C.disconnect()}}},[t]),g.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,d,{}]:[s,d,{onFocus:ii(l,y),onBlur:ii(a,_),onMouseEnter:ii(u,y),onMouseLeave:ii(f,_),onTouchStart:ii(c,y)}]:[!1,d,{}]}function ii(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Rw({page:t,...e}){let{router:n}=qm(),r=g.useMemo(()=>Bm(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?g.createElement(Pw,{page:t,matches:r,...e}):null}function Nw(t){let{manifest:e,routeModules:n}=Xm(),[r,i]=g.useState([]);return g.useEffect(()=>{let s=!1;return vw(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function Pw({page:t,matches:e,...n}){let r=Nn(),{manifest:i,routeModules:s}=Xm(),{basename:o}=qm(),{loaderData:l,matches:a}=Iw(),u=g.useMemo(()=>Nf(t,e,a,i,r,"data"),[t,e,a,i,r]),f=g.useMemo(()=>Nf(t,e,a,i,r,"assets"),[t,e,a,i,r]),c=g.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,w=!1;if(e.forEach(p=>{var m;let h=i.routes[p.route.id];!h||!h.hasLoader||(!u.some(v=>v.route.id===p.route.id)&&p.route.id in l&&((m=s[p.route.id])!=null&&m.shouldRevalidate)||h.hasClientLoader?w=!0:_.add(p.route.id))}),_.size===0)return[];let C=kw(t,o);return w&&_.size>0&&C.searchParams.set("_routes",e.filter(p=>_.has(p.route.id)).map(p=>p.route.id).join(",")),[C.pathname+C.search]},[o,l,r,i,u,e,t,s]),d=g.useMemo(()=>ww(f,i),[f,i]),y=Nw(f);return g.createElement(g.Fragment,null,c.map(_=>g.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),d.map(_=>g.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),y.map(({key:_,link:w})=>g.createElement("link",{key:_,...w})))}function bw(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Jm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jm&&(window.__reactRouterVersion="7.6.2")}catch{}function Dw({basename:t,children:e,window:n}){let r=g.useRef();r.current==null&&(r.current=_0({window:n,v5Compat:!0}));let i=r.current,[s,o]=g.useState({action:i.action,location:i.location}),l=g.useCallback(a=>{g.startTransition(()=>o(a))},[o]);return g.useLayoutEffect(()=>i.listen(l),[i,l]),g.createElement(lw,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var Zm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eg=g.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:f,viewTransition:c,...d},y){let{basename:_}=g.useContext(Rt),w=typeof u=="string"&&Zm.test(u),C,p=!1;if(typeof u=="string"&&w&&(C=u,Jm))try{let $=new URL(window.location.href),b=u.startsWith("//")?new URL($.protocol+u):new URL(u),N=Kt(b.pathname,_);b.origin===$.origin&&N!=null?u=N+b.search+b.hash:p=!0}catch{Tt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let h=V0(u,{relative:i}),[m,v,E]=Tw(r,d),S=Ow(u,{replace:o,state:l,target:a,preventScrollReset:f,relative:i,viewTransition:c});function k($){e&&e($),$.defaultPrevented||S($)}let I=g.createElement("a",{...d,...E,href:C||h,onClick:p||s?e:k,ref:bw(y,v),target:a,"data-discover":!w&&n==="render"?"true":void 0});return m&&!w?g.createElement(g.Fragment,null,I,g.createElement(Rw,{page:h})):I});eg.displayName="Link";var Aw=g.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:l,children:a,...u},f){let c=cs(o,{relative:u.relative}),d=Nn(),y=g.useContext(ol),{navigator:_,basename:w}=g.useContext(Rt),C=y!=null&&Ww(c)&&l===!0,p=_.encodeLocation?_.encodeLocation(c).pathname:c.pathname,h=d.pathname,m=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(h=h.toLowerCase(),m=m?m.toLowerCase():null,p=p.toLowerCase()),m&&w&&(m=Kt(m,w)||m);const v=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=h===p||!i&&h.startsWith(p)&&h.charAt(v)==="/",S=m!=null&&(m===p||!i&&m.startsWith(p)&&m.charAt(p.length)==="/"),k={isActive:E,isPending:S,isTransitioning:C},I=E?e:void 0,$;typeof r=="function"?$=r(k):$=[r,E?"active":null,S?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let b=typeof s=="function"?s(k):s;return g.createElement(eg,{...u,"aria-current":I,className:$,ref:f,style:b,to:o,viewTransition:l},typeof a=="function"?a(k):a)});Aw.displayName="NavLink";var Lw=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=qs,action:l,onSubmit:a,relative:u,preventScrollReset:f,viewTransition:c,...d},y)=>{let _=zw(),w=Bw(l,{relative:u}),C=o.toLowerCase()==="get"?"get":"post",p=typeof l=="string"&&Zm.test(l),h=m=>{if(a&&a(m),m.defaultPrevented)return;m.preventDefault();let v=m.nativeEvent.submitter,E=(v==null?void 0:v.getAttribute("formmethod"))||o;_(v||m.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:i,state:s,relative:u,preventScrollReset:f,viewTransition:c})};return g.createElement("form",{ref:y,method:C,action:w,onSubmit:r?a:h,...d,"data-discover":!p&&t==="render"?"true":void 0})});Lw.displayName="Form";function Mw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tg(t){let e=g.useContext(Hr);return he(e,Mw(t)),e}function Ow(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Qm(),a=Nn(),u=cs(t,{relative:s});return g.useCallback(f=>{if(hw(f,e)){f.preventDefault();let c=n!==void 0?n:Gi(a)===Gi(u);l(t,{replace:c,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[a,l,u,n,r,e,t,i,s,o])}var Fw=0,jw=()=>`__${String(++Fw)}__`;function zw(){let{router:t}=tg("useSubmit"),{basename:e}=g.useContext(Rt),n=nw();return g.useCallback(async(r,i={})=>{let{action:s,method:o,encType:l,formData:a,body:u}=gw(r,e);if(i.navigate===!1){let f=i.fetcherKey||jw();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:a,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:a,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Bw(t,{relative:e}={}){let{basename:n}=g.useContext(Rt),r=g.useContext(Lt);he(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...cs(t||".",{relative:e})},o=Nn();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),a=l.getAll("index");if(a.some(f=>f==="")){l.delete("index"),a.filter(c=>c).forEach(c=>l.append("index",c));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ut([n,s.pathname])),Gi(s)}function Ww(t,e={}){let n=g.useContext(Hm);he(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tg("useViewTransitionState"),i=cs(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Kt(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Kt(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Eo(i.pathname,o)!=null||Eo(i.pathname,s)!=null}[...Ew];const qt=2160,Xt=3840,ng="#000000",rg=2,ig=40,$w="#ffffff",gr="#0066ff",Uw=2e3,Hw="#e0e0e0",Vw=1,Ls=100,Pf=60,Ot=16,Gw="#4a90e2",Qw=()=>{};var bf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=function(t,e){if(!t)throw Gr(e)},Gr=function(t){return new Error("Firebase Database ("+sg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Yw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,f=s>>2,c=(s&3)<<4|l>>4;let d=(l&15)<<2|u>>6,y=u&63;a||(y=64,o||(d=64)),r.push(n[f],n[c],n[d],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(og(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Yw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new Kw;const d=s<<2|l>>4;if(r.push(d),u!==64){const y=l<<4&240|u>>2;if(r.push(y),c!==64){const _=u<<6&192|c;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Kw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lg=function(t){const e=og(t);return kc.encodeByteArray(e,!0)},ko=function(t){return lg(t).replace(/\./g,"")},tu=function(t){try{return kc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){return ag(void 0,t)}function ag(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Xw(n)||(t[n]=ag(t[n],e[n]));return t}function Xw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=()=>Jw().__FIREBASE_DEFAULTS__,e1=()=>{if(typeof process>"u"||typeof bf>"u")return;const t=bf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},t1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tu(t[1]);return e&&JSON.parse(e)},ug=()=>{try{return Qw()||Zw()||e1()||t1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},n1=t=>{var e,n;return(n=(e=ug())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},r1=t=>{const e=n1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cg=()=>{var t;return(t=ug())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t){return t.endsWith(".cloudworkstations.dev")}async function i1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ko(JSON.stringify(n)),ko(JSON.stringify(o)),""].join(".")}const Ci={};function o1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ci))Ci[e]?t.emulator.push(e):t.prod.push(e);return t}function l1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Df=!1;function a1(t,e){if(typeof window>"u"||typeof document>"u"||!Ic(window.location.host)||Ci[t]===e||Ci[t]||Df)return;Ci[t]=e;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",s=o1().prod.length>0;function o(){const d=document.getElementById(r);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,y){d.setAttribute("width","24"),d.setAttribute("id",y),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Df=!0,o()},d}function f(d,y){d.setAttribute("id",y),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function c(){const d=l1(r),y=n("text"),_=document.getElementById(y)||document.createElement("span"),w=n("learnmore"),C=document.getElementById(w)||document.createElement("a"),p=n("preprendIcon"),h=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const m=d.element;l(m),f(C,w);const v=u();a(h,p),m.append(h,_,C,v),document.body.appendChild(m)}s?(_.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",c):c()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u1())}function c1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d1(){return sg.NODE_ADMIN===!0}function f1(){try{return typeof indexedDB=="object"}catch{return!1}}function h1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="FirebaseError";class ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=p1,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fg.prototype.create)}}class fg{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?m1(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ds(i,l,r)}}function m1(t,e){return t.replace(g1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const g1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){return JSON.parse(t)}function Re(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Qi(tu(s[0])||""),n=Qi(tu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},y1=function(t){const e=hg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},_1=function(t){const e=hg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Af(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function To(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Lf(s)&&Lf(o)){if(!To(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,f;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),f=1518500249):(u=s^o^l,f=1859775393):c<60?(u=s&o|l&(s|o),f=2400959708):(u=s^o^l,f=3395469782);const d=(i<<5|i>>>27)+u+a+f+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Tc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,R(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ul=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){return t&&t._delegate?t._delegate:t}class Yi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new al;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E1(e))try{this.getOrInitializeService({instanceIdentifier:An})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=An){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=An){return this.instances.has(e)}getOptions(e=An){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:S1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=An){return this.component?this.component.multipleInstances?e:An:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S1(t){return t===An?void 0:t}function E1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new C1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const I1={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},T1=le.INFO,R1={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},N1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=R1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=T1,this._logHandler=N1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const P1=(t,e)=>e.some(n=>t instanceof n);let Mf,Of;function b1(){return Mf||(Mf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D1(){return Of||(Of=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mg=new WeakMap,nu=new WeakMap,gg=new WeakMap,Kl=new WeakMap,Rc=new WeakMap;function A1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(vn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mg.set(n,t)}).catch(()=>{}),Rc.set(e,t),e}function L1(t){if(nu.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});nu.set(t,e)}let ru={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M1(t){ru=t(ru)}function O1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ql(this),e,...n);return gg.set(r,e.sort?e.sort():[e]),vn(r)}:D1().includes(t)?function(...e){return t.apply(ql(this),e),vn(mg.get(this))}:function(...e){return vn(t.apply(ql(this),e))}}function F1(t){return typeof t=="function"?O1(t):(t instanceof IDBTransaction&&L1(t),P1(t,b1())?new Proxy(t,ru):t)}function vn(t){if(t instanceof IDBRequest)return A1(t);if(Kl.has(t))return Kl.get(t);const e=F1(t);return e!==t&&(Kl.set(t,e),Rc.set(e,t)),e}const ql=t=>Rc.get(t);function j1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=vn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(vn(o.result),a.oldVersion,a.newVersion,vn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const z1=["get","getKey","getAll","getAllKeys","count"],B1=["put","add","delete","clear"],Xl=new Map;function Ff(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xl.get(e))return Xl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=B1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||z1.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return Xl.set(e,s),s}M1(t=>({...t,get:(e,n,r)=>Ff(e,n)||t.get(e,n,r),has:(e,n)=>!!Ff(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iu="@firebase/app",jf="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt=new pg("@firebase/app"),U1="@firebase/app-compat",H1="@firebase/analytics-compat",V1="@firebase/analytics",G1="@firebase/app-check-compat",Q1="@firebase/app-check",Y1="@firebase/auth",K1="@firebase/auth-compat",q1="@firebase/database",X1="@firebase/data-connect",J1="@firebase/database-compat",Z1="@firebase/functions",ex="@firebase/functions-compat",tx="@firebase/installations",nx="@firebase/installations-compat",rx="@firebase/messaging",ix="@firebase/messaging-compat",sx="@firebase/performance",ox="@firebase/performance-compat",lx="@firebase/remote-config",ax="@firebase/remote-config-compat",ux="@firebase/storage",cx="@firebase/storage-compat",dx="@firebase/firestore",fx="@firebase/ai",hx="@firebase/firestore-compat",px="firebase",mx="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="[DEFAULT]",gx={[iu]:"fire-core",[U1]:"fire-core-compat",[V1]:"fire-analytics",[H1]:"fire-analytics-compat",[Q1]:"fire-app-check",[G1]:"fire-app-check-compat",[Y1]:"fire-auth",[K1]:"fire-auth-compat",[q1]:"fire-rtdb",[X1]:"fire-data-connect",[J1]:"fire-rtdb-compat",[Z1]:"fire-fn",[ex]:"fire-fn-compat",[tx]:"fire-iid",[nx]:"fire-iid-compat",[rx]:"fire-fcm",[ix]:"fire-fcm-compat",[sx]:"fire-perf",[ox]:"fire-perf-compat",[lx]:"fire-rc",[ax]:"fire-rc-compat",[ux]:"fire-gcs",[cx]:"fire-gcs-compat",[dx]:"fire-fst",[hx]:"fire-fst-compat",[fx]:"fire-vertex","fire-js":"fire-js",[px]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Map,yx=new Map,ou=new Map;function zf(t,e){try{t.container.addComponent(e)}catch(n){Jt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function No(t){const e=t.name;if(ou.has(e))return Jt.debug(`There were multiple attempts to register component ${e}.`),!1;ou.set(e,t);for(const n of Ro.values())zf(n,t);for(const n of yx.values())zf(n,t);return!0}function _x(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vx(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wn=new fg("app","Firebase",wx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=mx;function yg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:su,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw wn.create("bad-app-name",{appName:String(i)});if(n||(n=cg()),!n)throw wn.create("no-options");const s=Ro.get(i);if(s){if(To(n,s.options)&&To(r,s.config))return s;throw wn.create("duplicate-app",{appName:i})}const o=new k1(i);for(const a of ou.values())o.addComponent(a);const l=new xx(n,r,o);return Ro.set(i,l),l}function Sx(t=su){const e=Ro.get(t);if(!e&&t===su&&cg())return yg();if(!e)throw wn.create("no-app",{appName:t});return e}function Er(t,e,n){var r;let i=(r=gx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jt.warn(l.join(" "));return}No(new Yi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firebase-heartbeat-database",kx=1,Ki="firebase-heartbeat-store";let Jl=null;function _g(){return Jl||(Jl=j1(Ex,kx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ki)}catch(n){console.warn(n)}}}}).catch(t=>{throw wn.create("idb-open",{originalErrorMessage:t.message})})),Jl}async function Ix(t){try{const n=(await _g()).transaction(Ki),r=await n.objectStore(Ki).get(vg(t));return await n.done,r}catch(e){if(e instanceof ds)Jt.warn(e.message);else{const n=wn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jt.warn(n.message)}}}async function Bf(t,e){try{const r=(await _g()).transaction(Ki,"readwrite");await r.objectStore(Ki).put(e,vg(t)),await r.done}catch(n){if(n instanceof ds)Jt.warn(n.message);else{const r=wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jt.warn(r.message)}}}function vg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=1024,Rx=30;class Nx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wf();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Rx){const o=Dx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wf(),{heartbeatsToSend:r,unsentEntries:i}=Px(this._heartbeatsCache.heartbeats),s=ko(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jt.warn(n),""}}}function Wf(){return new Date().toISOString().substring(0,10)}function Px(t,e=Tx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$f(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$f(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f1()?h1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ix(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $f(t){return ko(JSON.stringify({version:2,heartbeats:t})).length}function Dx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){No(new Yi("platform-logger",e=>new W1(e),"PRIVATE")),No(new Yi("heartbeat",e=>new Nx(e),"PRIVATE")),Er(iu,jf,t),Er(iu,jf,"esm2017"),Er("fire-js","")}Ax("");var Lx="firebase",Mx="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(Lx,Mx,"app");var Uf={};const Hf="@firebase/database",Vf="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wg="";function Ox(t){wg=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Re(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Qi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fx(e)}}catch{}return new jx},jn=xg("localStorage"),zx=xg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new pg("@firebase/database"),Bx=function(){let t=1;return function(){return t++}}(),Cg=function(t){const e=x1(t),n=new w1;n.update(e);const r=n.digest();return kc.encodeByteArray(r)},fs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fs.apply(null,r):typeof r=="object"?e+=Re(r):e+=r,e+=" "}return e};let Si=null,Gf=!0;const Wx=function(t,e){R(!0,"Can't turn on custom loggers persistently."),kr.logLevel=le.VERBOSE,Si=kr.log.bind(kr)},be=function(...t){if(Gf===!0&&(Gf=!1,Si===null&&zx.get("logging_enabled")===!0&&Wx()),Si){const e=fs.apply(null,t);Si(e)}},hs=function(t){return function(...e){be(t,...e)}},lu=function(...t){const e="FIREBASE INTERNAL ERROR: "+fs(...t);kr.error(e)},Zt=function(...t){const e=`FIREBASE FATAL ERROR: ${fs(...t)}`;throw kr.error(e),new Error(e)},tt=function(...t){const e="FIREBASE WARNING: "+fs(...t);kr.warn(e)},$x=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Nc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Ux=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Or="[MIN_NAME]",Yn="[MAX_NAME]",er=function(t,e){if(t===e)return 0;if(t===Or||e===Yn)return-1;if(e===Or||t===Yn)return 1;{const n=Qf(t),r=Qf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Hx=function(t,e){return t===e?0:t<e?-1:1},si=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Re(e))},Pc=function(t){if(typeof t!="object"||t===null)return Re(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Re(e[r]),n+=":",n+=Pc(t[e[r]]);return n+="}",n},Sg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Me(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Eg=function(t){R(!Nc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let c="";for(a=0;a<64;a+=8){let d=parseInt(f.substr(a,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},Vx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Gx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Qx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Yx=new RegExp("^-?(0*)\\d{1,10}$"),Kx=-2147483648,qx=2147483647,Qf=function(t){if(Yx.test(t)){const e=Number(t);if(e>=Kx&&e<=qx)return e}return null},Qr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Xx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ei=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,vx(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(e)}}class Js{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Js.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="5",kg="v",Ig="s",Tg="r",Rg="f",Ng=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pg="ls",bg="p",au="ac",Dg="websocket",Ag="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function eC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Mg(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let r;if(e===Dg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ag)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);eC(t)&&(n.ns=t.namespace);const i=[];return Me(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.counters_={}}incrementCounter(e,n=1){Mt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return qw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl={},ea={};function Dc(t){const e=t.toString();return Zl[e]||(Zl[e]=new tC),Zl[e]}function nC(t,e){const n=t.toString();return ea[n]||(ea[n]=e()),ea[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Qr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="start",iC="close",sC="pLPCommand",oC="pRTLPCB",Og="id",Fg="pw",jg="ser",lC="cb",aC="seg",uC="ts",cC="d",dC="dframe",zg=1870,Bg=30,fC=zg-Bg,hC=25e3,pC=3e4;class yr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hs(e),this.stats_=Dc(n),this.urlFn=a=>(this.appCheckToken&&(a[au]=this.appCheckToken),Mg(n,Ag,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new rC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(pC)),Ux(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ac((...s)=>{const[o,l,a,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Yf)this.id=l,this.password=a;else if(o===iC)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Yf]="t",r[jg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[lC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[kg]=bc,this.transportSessionId&&(r[Ig]=this.transportSessionId),this.lastSessionId&&(r[Pg]=this.lastSessionId),this.applicationId&&(r[bg]=this.applicationId),this.appCheckToken&&(r[au]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ng.test(location.hostname)&&(r[Tg]=Rg);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yr.forceAllow_=!0}static forceDisallow(){yr.forceDisallow_=!0}static isAvailable(){return yr.forceAllow_?!0:!yr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Vx()&&!Gx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Re(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lg(n),i=Sg(r,fC);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[dC]="t",r[Og]=e,r[Fg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Re(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ac{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Bx(),window[sC+this.uniqueCallbackIdentifier]=e,window[oC+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ac.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){be("frame writing exception"),l.stack&&be(l.stack),be(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||be("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Og]=this.myID,e[Fg]=this.myPW,e[jg]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Bg+r.length<=zg;){const o=this.pendingSegs.shift();r=r+"&"+aC+i+"="+o.seg+"&"+uC+i+"="+o.ts+"&"+cC+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(hC)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{be("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=16384,gC=45e3;let Po=null;typeof MozWebSocket<"u"?Po=MozWebSocket:typeof WebSocket<"u"&&(Po=WebSocket);class xt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hs(this.connId),this.stats_=Dc(n),this.connURL=xt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[kg]=bc,typeof location<"u"&&location.hostname&&Ng.test(location.hostname)&&(o[Tg]=Rg),n&&(o[Ig]=n),r&&(o[Pg]=r),i&&(o[au]=i),s&&(o[bg]=s),Mg(e,Dg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jn.set("previous_websocket_failure",!0);try{let r;d1(),this.mySock=new Po(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){xt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Po!==null&&!xt.forceDisallow_}static previouslyFailed(){return jn.isInMemoryStorage||jn.get("previous_websocket_failure")===!0}markConnectionHealthy(){jn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Qi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(R(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Re(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Sg(n,mC);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(gC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xt.responsesRequiredToBeHealthy=2;xt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{static get ALL_TRANSPORTS(){return[yr,xt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=xt&&xt.isAvailable();let r=n&&!xt.previouslyFailed();if(e.webSocketOnly&&(n||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xt];else{const i=this.transports_=[];for(const s of qi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);qi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}qi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=6e4,_C=5e3,vC=10*1024,wC=100*1024,ta="t",Kf="d",xC="s",qf="r",CC="e",Xf="o",Jf="a",Zf="n",eh="p",SC="h";class EC{constructor(e,n,r,i,s,o,l,a,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hs("c:"+this.id+":"),this.transportManager_=new qi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ei(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>wC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>vC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ta in e){const n=e[ta];n===Jf?this.upgradeIfSecondaryHealthy_():n===qf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Xf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=si("t",e),r=si("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:eh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=si("t",e),r=si("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=si(ta,e);if(Kf in e){const r=e[Kf];if(n===SC){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Zf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===xC?this.onConnectionShutdown_(r):n===qf?this.onReset_(r):n===CC?lu("Server Error: "+r):n===Xf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),bc!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ei(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(yC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ei(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_C))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:eh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends $g{static getInstance(){return new bo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!dg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=32,nh=768;class se{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function te(){return new se("")}function G(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function En(t){return t.pieces_.length-t.pieceNum_}function ae(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new se(t.pieces_,e)}function Lc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function kC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Xi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ug(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new se(e,0)}function _e(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof se)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new se(n,0)}function Q(t){return t.pieceNum_>=t.pieces_.length}function qe(t,e){const n=G(t),r=G(e);if(n===null)return e;if(n===r)return qe(ae(t),ae(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function IC(t,e){const n=Xi(t,0),r=Xi(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=er(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Mc(t,e){if(En(t)!==En(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ft(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(En(t)>En(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class TC{constructor(e,n){this.errorPrefix_=n,this.parts_=Xi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ul(this.parts_[r]);Hg(this)}}function RC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ul(e),Hg(t)}function NC(t){const e=t.parts_.pop();t.byteLength_-=ul(e),t.parts_.length>0&&(t.byteLength_-=1)}function Hg(t){if(t.byteLength_>nh)throw new Error(t.errorPrefix_+"has a key path longer than "+nh+" bytes ("+t.byteLength_+").");if(t.parts_.length>th)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+th+") or object contains a cycle "+Ln(t))}function Ln(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends $g{static getInstance(){return new Oc}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=1e3,PC=60*5*1e3,rh=30*1e3,bC=1.3,DC=3e4,AC="server_kill",ih=3;class Ht extends Wg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Ht.nextPersistentConnectionId_++,this.log_=hs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oi,this.maxReconnectDelay_=PC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Oc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&bo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Re(s)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new al,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Ht.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Mt(e,"w")){const r=Mr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||_1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=y1(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Re(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lu("Unrecognized action received from server: "+Re(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=oi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>DC&&(this.reconnectDelay_=oi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ht.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){R(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?be("getToken() completed but was canceled"):(be("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,l=new EC(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{tt(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(AC)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&tt(c),a())}}}interrupt(e){be("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){be("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Af(this.interruptReasons_)&&(this.reconnectDelay_=oi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Pc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new se(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){be("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ih&&(this.reconnectDelay_=rh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){be("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ih&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+wg.replace(/\./g,"-")]=1,dg()?e["framework.cordova"]=1:c1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=bo.getInstance().currentlyOnline();return Af(this.interruptReasons_)&&e}}Ht.nextPersistentConnectionId_=0;Ht.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new V(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new V(Or,e),i=new V(Or,n);return this.compare(r,i)!==0}minPost(){return V.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms;class Vg extends dl{static get __EMPTY_NODE(){return Ms}static set __EMPTY_NODE(e){Ms=e}compare(e,n){return er(e.name,n.name)}isDefinedOn(e){throw Gr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return V.MIN}maxPost(){return new V(Yn,Ms)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new V(e,Ms)}toString(){return".key"}}const Ir=new Vg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Te{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Te.RED,this.left=i??Xe.EMPTY_NODE,this.right=s??Xe.EMPTY_NODE}copy(e,n,r,i,s){return new Te(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Xe.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Te.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Te.RED=!0;Te.BLACK=!1;class LC{copy(e,n,r,i,s){return this}insert(e,n,r){return new Te(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xe{constructor(e,n=Xe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Xe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Te.BLACK,null,null))}remove(e){return new Xe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Te.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Os(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Os(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Os(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Os(this.root_,null,this.comparator_,!0,e)}}Xe.EMPTY_NODE=new LC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e){return er(t.name,e.name)}function Fc(t,e){return er(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;function OC(t){uu=t}const Gg=function(t){return typeof t=="number"?"number:"+Eg(t):"string:"+t},Qg=function(t){if(t.isLeafNode()){const e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mt(e,".sv"),"Priority must be a string or number.")}else R(t===uu||t.isEmpty(),"priority of unexpected type.");R(t===uu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh;class ke{static set __childrenNodeConstructor(e){sh=e}static get __childrenNodeConstructor(){return sh}constructor(e,n=ke.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Qg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ke(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Q(e)?this:G(e)===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ke.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=G(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(R(r!==".priority"||En(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ke.__childrenNodeConstructor.EMPTY_NODE.updateChild(ae(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Gg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Eg(this.value_):e+=this.value_,this.lazyHash_=Cg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ke.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ke.__childrenNodeConstructor?-1:(R(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ke.VALUE_TYPE_ORDER.indexOf(n),s=ke.VALUE_TYPE_ORDER.indexOf(r);return R(i>=0,"Unknown leaf type: "+n),R(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ke.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg,Kg;function FC(t){Yg=t}function jC(t){Kg=t}class zC extends dl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?er(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return V.MIN}maxPost(){return new V(Yn,new ke("[PRIORITY-POST]",Kg))}makePost(e,n){const r=Yg(e);return new V(n,new ke("[PRIORITY-POST]",r))}toString(){return".priority"}}const ve=new zC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=Math.log(2);class WC{constructor(e){const n=s=>parseInt(Math.log(s)/BC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Do=function(t,e,n,r){t.sort(e);const i=function(a,u){const f=u-a;let c,d;if(f===0)return null;if(f===1)return c=t[a],d=n?n(c):c,new Te(d,c.node,Te.BLACK,null,null);{const y=parseInt(f/2,10)+a,_=i(a,y),w=i(y+1,u);return c=t[y],d=n?n(c):c,new Te(d,c.node,Te.BLACK,_,w)}},s=function(a){let u=null,f=null,c=t.length;const d=function(_,w){const C=c-_,p=c;c-=_;const h=i(C+1,p),m=t[C],v=n?n(m):m;y(new Te(v,m.node,w,null,h))},y=function(_){u?(u.left=_,u=_):(f=_,u=_)};for(let _=0;_<a.count;++_){const w=a.nextBitIsOne(),C=Math.pow(2,a.count-(_+1));w?d(C,Te.BLACK):(d(C,Te.BLACK),d(C,Te.RED))}return f},o=new WC(t.length),l=s(o);return new Xe(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na;const rr={};class Wt{static get Default(){return R(rr&&ve,"ChildrenNode.ts has not been loaded"),na=na||new Wt({".priority":rr},{".priority":ve}),na}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Mr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xe?n:null}hasIndex(e){return Mt(this.indexSet_,e.toString())}addIndex(e,n){R(e!==Ir,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(V.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Do(r,e.getCompare()):l=rr;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const f=Object.assign({},this.indexes_);return f[a]=l,new Wt(f,u)}addToIndexes(e,n){const r=Io(this.indexes_,(i,s)=>{const o=Mr(this.indexSet_,s);if(R(o,"Missing index implementation for "+s),i===rr)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(V.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Do(l,o.getCompare())}else return rr;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new V(e.name,l))),a.insert(e,e.node)}});return new Wt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Io(this.indexes_,i=>{if(i===rr)return i;{const s=n.get(e.name);return s?i.remove(new V(e.name,s)):i}});return new Wt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let li;class U{static get EMPTY_NODE(){return li||(li=new U(new Xe(Fc),null,Wt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Qg(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||li}updatePriority(e){return this.children_.isEmpty()?this:new U(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?li:n}}getChild(e){const n=G(e);return n===null?this:this.getImmediateChild(n).getChild(ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(R(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new V(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?li:this.priorityNode_;return new U(i,o,s)}}updateChild(e,n){const r=G(e);if(r===null)return n;{R(G(e)!==".priority"||En(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ae(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ve,(o,l)=>{n[o]=l.val(e),r++,s&&U.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Gg(this.getPriority().val())+":"),this.forEachChild(ve,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Cg(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new V(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new V(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new V(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,V.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,V.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ps?-1:0}withIndex(e){if(e===Ir||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new U(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ir||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ve),i=n.getIterator(ve);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ir?null:this.indexMap_.get(e.toString())}}U.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class $C extends U{constructor(){super(new Xe(Fc),U.EMPTY_NODE,Wt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return U.EMPTY_NODE}isEmpty(){return!1}}const ps=new $C;Object.defineProperties(V,{MIN:{value:new V(Or,U.EMPTY_NODE)},MAX:{value:new V(Yn,ps)}});Vg.__EMPTY_NODE=U.EMPTY_NODE;ke.__childrenNodeConstructor=U;OC(ps);jC(ps);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=!0;function De(t,e=null){if(t===null)return U.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ke(n,De(e))}if(!(t instanceof Array)&&UC){const n=[];let r=!1;if(Me(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=De(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new V(o,a)))}}),n.length===0)return U.EMPTY_NODE;const s=Do(n,MC,o=>o.name,Fc);if(r){const o=Do(n,ve.getCompare());return new U(s,De(e),new Wt({".priority":o},{".priority":ve}))}else return new U(s,De(e),Wt.Default)}else{let n=U.EMPTY_NODE;return Me(t,(r,i)=>{if(Mt(t,r)&&r.substring(0,1)!=="."){const s=De(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(De(e))}}FC(De);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC extends dl{constructor(e){super(),this.indexPath_=e,R(!Q(e)&&G(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?er(e.name,n.name):s}makePost(e,n){const r=De(e),i=U.EMPTY_NODE.updateChild(this.indexPath_,r);return new V(n,i)}maxPost(){const e=U.EMPTY_NODE.updateChild(this.indexPath_,ps);return new V(Yn,e)}toString(){return Xi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends dl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?er(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return V.MIN}maxPost(){return V.MAX}makePost(e,n){const r=De(e);return new V(n,r)}toString(){return".value"}}const GC=new VC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){return{type:"value",snapshotNode:t}}function Fr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ji(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function QC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ji(n,l)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Fr(n,r)):o.trackChildChange(Zi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ve,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ji(i,s))}),n.isLeafNode()||n.forEachChild(ve,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Zi(i,s,o))}else r.trackChildChange(Fr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?U.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.indexedFilter_=new jc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=es.getStartPost_(e),this.endPost_=es.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new V(n,r))||(r=U.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=U.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(U.EMPTY_NODE);const s=this;return n.forEachChild(ve,(o,l)=>{s.matches(new V(o,l))||(i=i.updateImmediateChild(o,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new es(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new V(n,r))||(r=U.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=U.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=U.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(U.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(d,y)=>c(y,d)}else o=this.index_.getCompare();const l=e;R(l.numChildren()===this.limit_,"");const a=new V(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(a);if(l.hasChild(n)){const c=l.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||l.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const y=d==null?1:o(d,a);if(f&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(Zi(n,r,c)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ji(n,c));const w=l.updateImmediateChild(n,U.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(Fr(d.name,d.node)),w.updateImmediateChild(d.name,d.node)):w}}else return r.isEmpty()?e:f&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Ji(u.name,u.node)),s.trackChildChange(Fr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,U.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ve}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Or}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ve}copy(){const e=new zc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function KC(t){return t.loadsAllData()?new jc(t.getIndex()):t.hasLimit()?new YC(t):new es(t)}function oh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ve?n="$priority":t.index_===GC?n="$value":t.index_===Ir?n="$key":(R(t.index_ instanceof HC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Re(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Re(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Re(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Re(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Re(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ve&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Wg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hs("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ao.getListenId_(e,r),l={};this.listens_[o]=l;const a=oh(e._queryParams);this.restRequest_(s+".json",a,(u,f)=>{let c=f;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),Mr(this.listens_,o)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=Ao.getListenId_(e,n);delete this.listens_[r]}get(e){const n=oh(e._queryParams),r=e._path.toString(),i=new al;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+v1(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Qi(l.responseText)}catch{tt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&tt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return{value:null,children:new Map}}function Xg(t,e,n){if(Q(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=G(e);t.children.has(r)||t.children.set(r,Lo());const i=t.children.get(r);e=ae(e),Xg(i,e,n)}}function cu(t,e,n){t.value!==null?n(e,t.value):XC(t,(r,i)=>{const s=new se(e.toString()+"/"+r);cu(i,s,n)})}function XC(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Me(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=10*1e3,ZC=30*1e3,eS=5*60*1e3;class tS{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new JC(e);const r=ah+(ZC-ah)*Math.random();Ei(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Me(e,(i,s)=>{s>0&&Mt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ei(this.reportStats_.bind(this),Math.floor(Math.random()*2*eS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ct||(Ct={}));function Bc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Wc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $c(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ct.ACK_USER_WRITE,this.source=Bc()}operationForChild(e){if(Q(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new se(e));return new Mo(te(),n,this.revert)}}else return R(G(this.path)===e,"operationForChild called for unrelated child."),new Mo(ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.source=e,this.path=n,this.type=Ct.LISTEN_COMPLETE}operationForChild(e){return Q(this.path)?new ts(this.source,te()):new ts(this.source,ae(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ct.OVERWRITE}operationForChild(e){return Q(this.path)?new Kn(this.source,te(),this.snap.getImmediateChild(e)):new Kn(this.source,ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ct.MERGE}operationForChild(e){if(Q(this.path)){const n=this.children.subtree(new se(e));return n.isEmpty()?null:n.value?new Kn(this.source,te(),n.value):new jr(this.source,te(),n)}else return R(G(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jr(this.source,ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Q(e))return this.isFullyInitialized()&&!this.filtered_;const n=G(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function rS(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(QC(o.childName,o.snapshotNode))}),ai(t,i,"child_removed",e,r,n),ai(t,i,"child_added",e,r,n),ai(t,i,"child_moved",s,r,n),ai(t,i,"child_changed",e,r,n),ai(t,i,"value",e,r,n),i}function ai(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>sS(t,l,a)),o.forEach(l=>{const a=iS(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function iS(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function sS(t,e,n){if(e.childName==null||n.childName==null)throw Gr("Should only compare child_ events.");const r=new V(e.childName,e.snapshotNode),i=new V(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e){return{eventCache:t,serverCache:e}}function ki(t,e,n,r){return fl(new qn(e,n,r),t.serverCache)}function Jg(t,e,n,r){return fl(t.eventCache,new qn(e,n,r))}function du(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Xn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra;const oS=()=>(ra||(ra=new Xe(Hx)),ra);class oe{static fromObject(e){let n=new oe(null);return Me(e,(r,i)=>{n=n.set(new se(r),i)}),n}constructor(e,n=oS()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:te(),value:this.value};if(Q(e))return null;{const r=G(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ae(e),n);return s!=null?{path:_e(new se(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Q(e))return this;{const n=G(e),r=this.children.get(n);return r!==null?r.subtree(ae(e)):new oe(null)}}set(e,n){if(Q(e))return new oe(n,this.children);{const r=G(e),s=(this.children.get(r)||new oe(null)).set(ae(e),n),o=this.children.insert(r,s);return new oe(this.value,o)}}remove(e){if(Q(e))return this.children.isEmpty()?new oe(null):new oe(null,this.children);{const n=G(e),r=this.children.get(n);if(r){const i=r.remove(ae(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new oe(null):new oe(this.value,s)}else return this}}get(e){if(Q(e))return this.value;{const n=G(e),r=this.children.get(n);return r?r.get(ae(e)):null}}setTree(e,n){if(Q(e))return n;{const r=G(e),s=(this.children.get(r)||new oe(null)).setTree(ae(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new oe(this.value,o)}}fold(e){return this.fold_(te(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(_e(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,te(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Q(e))return null;{const s=G(e),o=this.children.get(s);return o?o.findOnPath_(ae(e),_e(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,te(),n)}foreachOnPath_(e,n,r){if(Q(e))return this;{this.value&&r(n,this.value);const i=G(e),s=this.children.get(i);return s?s.foreachOnPath_(ae(e),_e(n,i),r):new oe(null)}}foreach(e){this.foreach_(te(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(_e(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.writeTree_=e}static empty(){return new kt(new oe(null))}}function Ii(t,e,n){if(Q(e))return new kt(new oe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=qe(i,e);return s=s.updateChild(o,n),new kt(t.writeTree_.set(i,s))}else{const i=new oe(n),s=t.writeTree_.setTree(e,i);return new kt(s)}}}function fu(t,e,n){let r=t;return Me(n,(i,s)=>{r=Ii(r,_e(e,i),s)}),r}function uh(t,e){if(Q(e))return kt.empty();{const n=t.writeTree_.setTree(e,new oe(null));return new kt(n)}}function hu(t,e){return tr(t,e)!=null}function tr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(qe(n.path,e)):null}function ch(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ve,(r,i)=>{e.push(new V(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new V(r,i.value))}),e}function xn(t,e){if(Q(e))return t;{const n=tr(t,e);return n!=null?new kt(new oe(n)):new kt(t.writeTree_.subtree(e))}}function pu(t){return t.writeTree_.isEmpty()}function zr(t,e){return Zg(te(),t.writeTree_,e)}function Zg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(R(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Zg(_e(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(_e(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t,e){return ry(e,t)}function lS(t,e,n,r,i){R(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ii(t.visibleWrites,e,n)),t.lastWriteId=r}function aS(t,e,n,r){R(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=fu(t.visibleWrites,e,n),t.lastWriteId=r}function uS(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function cS(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&dS(l,r.path)?i=!1:ft(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return fS(t),!0;if(r.snap)t.visibleWrites=uh(t.visibleWrites,r.path);else{const l=r.children;Me(l,a=>{t.visibleWrites=uh(t.visibleWrites,_e(r.path,a))})}return!0}else return!1}function dS(t,e){if(t.snap)return ft(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ft(_e(t.path,n),e))return!0;return!1}function fS(t){t.visibleWrites=ey(t.allWrites,hS,te()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function hS(t){return t.visible}function ey(t,e,n){let r=kt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)ft(n,o)?(l=qe(n,o),r=Ii(r,l,s.snap)):ft(o,n)&&(l=qe(o,n),r=Ii(r,te(),s.snap.getChild(l)));else if(s.children){if(ft(n,o))l=qe(n,o),r=fu(r,l,s.children);else if(ft(o,n))if(l=qe(o,n),Q(l))r=fu(r,te(),s.children);else{const a=Mr(s.children,G(l));if(a){const u=a.getChild(ae(l));r=Ii(r,te(),u)}}}else throw Gr("WriteRecord should have .snap or .children")}}return r}function ty(t,e,n,r,i){if(!r&&!i){const s=tr(t.visibleWrites,e);if(s!=null)return s;{const o=xn(t.visibleWrites,e);if(pu(o))return n;if(n==null&&!hu(o,te()))return null;{const l=n||U.EMPTY_NODE;return zr(o,l)}}}else{const s=xn(t.visibleWrites,e);if(!i&&pu(s))return n;if(!i&&n==null&&!hu(s,te()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ft(u.path,e)||ft(e,u.path))},l=ey(t.allWrites,o,e),a=n||U.EMPTY_NODE;return zr(l,a)}}}function pS(t,e,n){let r=U.EMPTY_NODE;const i=tr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ve,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=xn(t.visibleWrites,e);return n.forEachChild(ve,(o,l)=>{const a=zr(xn(s,new se(o)),l);r=r.updateImmediateChild(o,a)}),ch(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=xn(t.visibleWrites,e);return ch(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function mS(t,e,n,r,i){R(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=_e(e,n);if(hu(t.visibleWrites,s))return null;{const o=xn(t.visibleWrites,s);return pu(o)?i.getChild(n):zr(o,i.getChild(n))}}function gS(t,e,n,r){const i=_e(e,n),s=tr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=xn(t.visibleWrites,i);return zr(o,r.getNode().getImmediateChild(n))}else return null}function yS(t,e){return tr(t.visibleWrites,e)}function _S(t,e,n,r,i,s,o){let l;const a=xn(t.visibleWrites,e),u=tr(a,te());if(u!=null)l=u;else if(n!=null)l=zr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],c=o.getCompare(),d=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=d.getNext();for(;y&&f.length<i;)c(y,r)!==0&&f.push(y),y=d.getNext();return f}else return[]}function vS(){return{visibleWrites:kt.empty(),allWrites:[],lastWriteId:-1}}function Oo(t,e,n,r){return ty(t.writeTree,t.treePath,e,n,r)}function Hc(t,e){return pS(t.writeTree,t.treePath,e)}function dh(t,e,n,r){return mS(t.writeTree,t.treePath,e,n,r)}function Fo(t,e){return yS(t.writeTree,_e(t.treePath,e))}function wS(t,e,n,r,i,s){return _S(t.writeTree,t.treePath,e,n,r,i,s)}function Vc(t,e,n){return gS(t.writeTree,t.treePath,e,n)}function ny(t,e){return ry(_e(t.treePath,e),t.writeTree)}function ry(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Zi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ji(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Fr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Zi(r,e.snapshotNode,i.oldSnap));else throw Gr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const iy=new CS;class Gc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new qn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Xn(this.viewCache_),s=wS(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){return{filter:t}}function ES(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function kS(t,e,n,r,i){const s=new xS;let o,l;if(n.type===Ct.OVERWRITE){const u=n;u.source.fromUser?o=mu(t,e,u.path,u.snap,r,i,s):(R(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!Q(u.path),o=jo(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===Ct.MERGE){const u=n;u.source.fromUser?o=TS(t,e,u.path,u.children,r,i,s):(R(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=gu(t,e,u.path,u.children,r,i,l,s))}else if(n.type===Ct.ACK_USER_WRITE){const u=n;u.revert?o=PS(t,e,u.path,r,i,s):o=RS(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Ct.LISTEN_COMPLETE)o=NS(t,e,n.path,r,s);else throw Gr("Unknown operation type: "+n.type);const a=s.getChanges();return IS(e,o,a),{viewCache:o,changes:a}}function IS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=du(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(qg(du(e)))}}function sy(t,e,n,r,i,s){const o=e.eventCache;if(Fo(r,n)!=null)return e;{let l,a;if(Q(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Xn(e),f=u instanceof U?u:U.EMPTY_NODE,c=Hc(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=Oo(r,Xn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=G(n);if(u===".priority"){R(En(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=e.serverCache.getNode();const c=dh(r,n,f,a);c!=null?l=t.filter.updatePriority(f,c):l=o.getNode()}else{const f=ae(n);let c;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const d=dh(r,n,o.getNode(),a);d!=null?c=o.getNode().getImmediateChild(u).updateChild(f,d):c=o.getNode().getImmediateChild(u)}else c=Vc(r,u,e.serverCache);c!=null?l=t.filter.updateChild(o.getNode(),u,c,f,i,s):l=o.getNode()}}return ki(e,l,o.isFullyInitialized()||Q(n),t.filter.filtersNodes())}}function jo(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(Q(n))u=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const y=a.getNode().updateChild(n,r);u=f.updateFullNode(a.getNode(),y,null)}else{const y=G(n);if(!a.isCompleteForPath(n)&&En(n)>1)return e;const _=ae(n),C=a.getNode().getImmediateChild(y).updateChild(_,r);y===".priority"?u=f.updatePriority(a.getNode(),C):u=f.updateChild(a.getNode(),y,C,_,iy,null)}const c=Jg(e,u,a.isFullyInitialized()||Q(n),f.filtersNodes()),d=new Gc(i,c,s);return sy(t,c,n,i,d,l)}function mu(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const f=new Gc(i,e,s);if(Q(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=ki(e,u,!0,t.filter.filtersNodes());else{const c=G(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ki(e,u,l.isFullyInitialized(),l.isFiltered());else{const d=ae(n),y=l.getNode().getImmediateChild(c);let _;if(Q(d))_=r;else{const w=f.getCompleteChild(c);w!=null?Lc(d)===".priority"&&w.getChild(Ug(d)).isEmpty()?_=w:_=w.updateChild(d,r):_=U.EMPTY_NODE}if(y.equals(_))a=e;else{const w=t.filter.updateChild(l.getNode(),c,_,d,f,o);a=ki(e,w,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function fh(t,e){return t.eventCache.isCompleteForChild(e)}function TS(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const f=_e(n,a);fh(e,G(f))&&(l=mu(t,l,f,u,i,s,o))}),r.foreach((a,u)=>{const f=_e(n,a);fh(e,G(f))||(l=mu(t,l,f,u,i,s,o))}),l}function hh(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gu(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;Q(n)?u=r:u=new oe(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(f.hasChild(c)){const y=e.serverCache.getNode().getImmediateChild(c),_=hh(t,y,d);a=jo(t,a,new se(c),_,i,s,o,l)}}),u.children.inorderTraversal((c,d)=>{const y=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!f.hasChild(c)&&!y){const _=e.serverCache.getNode().getImmediateChild(c),w=hh(t,_,d);a=jo(t,a,new se(c),w,i,s,o,l)}}),a}function RS(t,e,n,r,i,s,o){if(Fo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(Q(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return jo(t,e,n,a.getNode().getChild(n),i,s,l,o);if(Q(n)){let u=new oe(null);return a.getNode().forEachChild(Ir,(f,c)=>{u=u.set(new se(f),c)}),gu(t,e,n,u,i,s,l,o)}else return e}else{let u=new oe(null);return r.foreach((f,c)=>{const d=_e(n,f);a.isCompleteForPath(d)&&(u=u.set(f,a.getNode().getChild(d)))}),gu(t,e,n,u,i,s,l,o)}}function NS(t,e,n,r,i){const s=e.serverCache,o=Jg(e,s.getNode(),s.isFullyInitialized()||Q(n),s.isFiltered());return sy(t,o,n,r,iy,i)}function PS(t,e,n,r,i,s){let o;if(Fo(r,n)!=null)return e;{const l=new Gc(r,e,i),a=e.eventCache.getNode();let u;if(Q(n)||G(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Oo(r,Xn(e));else{const c=e.serverCache.getNode();R(c instanceof U,"serverChildren would be complete if leaf node"),f=Hc(r,c)}f=f,u=t.filter.updateFullNode(a,f,s)}else{const f=G(n);let c=Vc(r,f,e.serverCache);c==null&&e.serverCache.isCompleteForChild(f)&&(c=a.getImmediateChild(f)),c!=null?u=t.filter.updateChild(a,f,c,ae(n),l,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(a,f,U.EMPTY_NODE,ae(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Oo(r,Xn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Fo(r,te())!=null,ki(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new jc(r.getIndex()),s=KC(r);this.processor_=SS(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(U.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(U.EMPTY_NODE,l.getNode(),null),f=new qn(a,o.isFullyInitialized(),i.filtersNodes()),c=new qn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=fl(c,f),this.eventGenerator_=new nS(this.query_)}get query(){return this.query_}}function DS(t){return t.viewCache_.serverCache.getNode()}function AS(t,e){const n=Xn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Q(e)&&!n.getImmediateChild(G(e)).isEmpty())?n.getChild(e):null}function ph(t){return t.eventRegistrations_.length===0}function LS(t,e){t.eventRegistrations_.push(e)}function mh(t,e,n){const r=[];if(n){R(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function gh(t,e,n,r){e.type===Ct.MERGE&&e.source.queryId!==null&&(R(Xn(t.viewCache_),"We should always have a full cache before handling merges"),R(du(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=kS(t.processor_,i,e,n,r);return ES(t.processor_,s.viewCache),R(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,oy(t,s.changes,s.viewCache.eventCache.getNode(),null)}function MS(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ve,(s,o)=>{r.push(Fr(s,o))}),n.isFullyInitialized()&&r.push(qg(n.getNode())),oy(t,r,n.getNode(),e)}function oy(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return rS(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo;class OS{constructor(){this.views=new Map}}function FS(t){R(!zo,"__referenceConstructor has already been defined"),zo=t}function jS(){return R(zo,"Reference.ts has not been loaded"),zo}function zS(t){return t.views.size===0}function Qc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return R(s!=null,"SyncTree gave us an op for an invalid query."),gh(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(gh(o,e,n,r));return s}}function BS(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=Oo(n,i?r:null),a=!1;l?a=!0:r instanceof U?(l=Hc(n,r),a=!1):(l=U.EMPTY_NODE,a=!1);const u=fl(new qn(l,a,!1),new qn(r,i,!1));return new bS(e,u)}return o}function WS(t,e,n,r,i,s){const o=BS(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),LS(o,n),MS(o,n)}function $S(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=kn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(mh(u,n,r)),ph(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(mh(a,n,r)),ph(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!kn(t)&&s.push(new(jS())(e._repo,e._path)),{removed:s,events:o}}function ly(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Tr(t,e){let n=null;for(const r of t.views.values())n=n||AS(r,e);return n}function ay(t,e){if(e._queryParams.loadsAllData())return hl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function uy(t,e){return ay(t,e)!=null}function kn(t){return hl(t)!=null}function hl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo;function US(t){R(!Bo,"__referenceConstructor has already been defined"),Bo=t}function HS(){return R(Bo,"Reference.ts has not been loaded"),Bo}let VS=1;class yh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new oe(null),this.pendingWriteTree_=vS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function GS(t,e,n,r,i){return lS(t.pendingWriteTree_,e,n,r,i),i?Yr(t,new Kn(Bc(),e,n)):[]}function QS(t,e,n,r){aS(t.pendingWriteTree_,e,n,r);const i=oe.fromObject(n);return Yr(t,new jr(Bc(),e,i))}function zn(t,e,n=!1){const r=uS(t.pendingWriteTree_,e);if(cS(t.pendingWriteTree_,e)){let s=new oe(null);return r.snap!=null?s=s.set(te(),!0):Me(r.children,o=>{s=s.set(new se(o),!0)}),Yr(t,new Mo(r.path,s,n))}else return[]}function pl(t,e,n){return Yr(t,new Kn(Wc(),e,n))}function YS(t,e,n){const r=oe.fromObject(n);return Yr(t,new jr(Wc(),e,r))}function KS(t,e){return Yr(t,new ts(Wc(),e))}function qS(t,e,n){const r=Yc(t,n);if(r){const i=Kc(r),s=i.path,o=i.queryId,l=qe(s,e),a=new ts($c(o),l);return qc(t,s,a)}else return[]}function yu(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||uy(o,e))){const a=$S(o,e,n,r);zS(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const f=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(s,(d,y)=>kn(y));if(f&&!c){const d=t.syncPointTree_.subtree(s);if(!d.isEmpty()){const y=ZS(d);for(let _=0;_<y.length;++_){const w=y[_],C=w.query,p=hy(t,w);t.listenProvider_.startListening(Ti(C),Wo(t,C),p.hashFn,p.onComplete)}}}!c&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(Ti(e),null):u.forEach(d=>{const y=t.queryToTagMap.get(ml(d));t.listenProvider_.stopListening(Ti(d),y)}))}eE(t,u)}return l}function XS(t,e,n,r){const i=Yc(t,r);if(i!=null){const s=Kc(i),o=s.path,l=s.queryId,a=qe(o,e),u=new Kn($c(l),a,n);return qc(t,o,u)}else return[]}function JS(t,e,n,r){const i=Yc(t,r);if(i){const s=Kc(i),o=s.path,l=s.queryId,a=qe(o,e),u=oe.fromObject(n),f=new jr($c(l),a,u);return qc(t,o,f)}else return[]}function _h(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,y)=>{const _=qe(d,i);s=s||Tr(y,_),o=o||kn(y)});let l=t.syncPointTree_.get(i);l?(o=o||kn(l),s=s||Tr(l,te())):(l=new OS,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=U.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,_)=>{const w=Tr(_,te());w&&(s=s.updateImmediateChild(y,w))}));const u=uy(l,e);if(!u&&!e._queryParams.loadsAllData()){const d=ml(e);R(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const y=tE();t.queryToTagMap.set(d,y),t.tagToQueryMap.set(y,d)}const f=Uc(t.pendingWriteTree_,i);let c=WS(l,e,n,f,s,a);if(!u&&!o&&!r){const d=ay(l,e);c=c.concat(nE(t,e,d))}return c}function cy(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=qe(o,e),u=Tr(l,a);if(u)return u});return ty(i,e,s,n,!0)}function Yr(t,e){return dy(e,t.syncPointTree_,null,Uc(t.pendingWriteTree_,te()))}function dy(t,e,n,r){if(Q(t.path))return fy(t,e,n,r);{const i=e.get(te());n==null&&i!=null&&(n=Tr(i,te()));let s=[];const o=G(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,f=ny(r,o);s=s.concat(dy(l,a,u,f))}return i&&(s=s.concat(Qc(i,t,r,n))),s}}function fy(t,e,n,r){const i=e.get(te());n==null&&i!=null&&(n=Tr(i,te()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=ny(r,o),f=t.operationForChild(o);f&&(s=s.concat(fy(f,l,a,u)))}),i&&(s=s.concat(Qc(i,t,r,n))),s}function hy(t,e){const n=e.query,r=Wo(t,n);return{hashFn:()=>(DS(e)||U.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?qS(t,n._path,r):KS(t,n._path);{const s=Qx(i,n);return yu(t,n,null,s)}}}}function Wo(t,e){const n=ml(e);return t.queryToTagMap.get(n)}function ml(t){return t._path.toString()+"$"+t._queryIdentifier}function Yc(t,e){return t.tagToQueryMap.get(e)}function Kc(t){const e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new se(t.substr(0,e))}}function qc(t,e,n){const r=t.syncPointTree_.get(e);R(r,"Missing sync point for query tag that we're tracking");const i=Uc(t.pendingWriteTree_,e);return Qc(r,n,i,null)}function ZS(t){return t.fold((e,n,r)=>{if(n&&kn(n))return[hl(n)];{let i=[];return n&&(i=ly(n)),Me(r,(s,o)=>{i=i.concat(o)}),i}})}function Ti(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(HS())(t._repo,t._path):t}function eE(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ml(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function tE(){return VS++}function nE(t,e,n){const r=e._path,i=Wo(t,e),s=hy(t,n),o=t.listenProvider_.startListening(Ti(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)R(!kn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,f,c)=>{if(!Q(u)&&f&&kn(f))return[hl(f).query];{let d=[];return f&&(d=d.concat(ly(f).map(y=>y.query))),Me(c,(y,_)=>{d=d.concat(_)}),d}});for(let u=0;u<a.length;++u){const f=a[u];t.listenProvider_.stopListening(Ti(f),Wo(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Xc(n)}node(){return this.node_}}class Jc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=_e(this.path_,e);return new Jc(this.syncTree_,n)}node(){return cy(this.syncTree_,this.path_)}}const rE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vh=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return iE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return sE(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},iE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},sE=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&R(!1,"Unexpected increment value: "+r);const i=e.node();if(R(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},py=function(t,e,n,r){return Zc(e,new Jc(n,t),r)},oE=function(t,e,n){return Zc(t,new Xc(e),n)};function Zc(t,e,n){const r=t.getPriority().val(),i=vh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=vh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new ke(l,De(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ke(i))),o.forEachChild(ve,(l,a)=>{const u=Zc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function td(t,e){let n=e instanceof se?e:new se(e),r=t,i=G(n);for(;i!==null;){const s=Mr(r.node.children,i)||{children:{},childCount:0};r=new ed(i,r,s),n=ae(n),i=G(n)}return r}function Kr(t){return t.node.value}function my(t,e){t.node.value=e,_u(t)}function gy(t){return t.node.childCount>0}function lE(t){return Kr(t)===void 0&&!gy(t)}function gl(t,e){Me(t.node.children,(n,r)=>{e(new ed(n,t,r))})}function yy(t,e,n,r){n&&e(t),gl(t,i=>{yy(i,e,!0)})}function aE(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ms(t){return new se(t.parent===null?t.name:ms(t.parent)+"/"+t.name)}function _u(t){t.parent!==null&&uE(t.parent,t.name,t)}function uE(t,e,n){const r=lE(n),i=Mt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,_u(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,_u(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=/[\[\].#$\/\u0000-\u001F\u007F]/,dE=/[\[\].#$\u0000-\u001F\u007F]/,ia=10*1024*1024,nd=function(t){return typeof t=="string"&&t.length!==0&&!cE.test(t)},_y=function(t){return typeof t=="string"&&t.length!==0&&!dE.test(t)},fE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_y(t)},hE=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Nc(t)||t&&typeof t=="object"&&Mt(t,".sv")},rd=function(t,e,n){const r=n instanceof se?new TC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ln(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ln(r)+" with contents = "+e.toString());if(Nc(e))throw new Error(t+"contains "+e.toString()+" "+Ln(r));if(typeof e=="string"&&e.length>ia/3&&ul(e)>ia)throw new Error(t+"contains a string greater than "+ia+" utf8 bytes "+Ln(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Me(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!nd(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ln(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);RC(r,o),rd(t,l,r),NC(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ln(r)+" in addition to actual children.")}},pE=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Xi(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!nd(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(IC);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ft(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},mE=function(t,e,n,r){const i=Tc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Me(e,(o,l)=>{const a=new se(o);if(rd(i,l,_e(n,a)),Lc(a)===".priority"&&!hE(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),pE(i,s)},vy=function(t,e,n,r){if(!_y(n))throw new Error(Tc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gE=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vy(t,e,n)},yE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!fE(n))throw new Error(Tc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function id(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Mc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function wy(t,e,n){id(t,n),xy(t,r=>Mc(r,e))}function en(t,e,n){id(t,n),xy(t,r=>ft(r,e)||ft(e,r))}function xy(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(vE(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function vE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Si&&be("event: "+n.toString()),Qr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="repo_interrupt",xE=25;class CE{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _E,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lo(),this.transactionQueueTree_=new ed,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function SE(t,e,n){if(t.stats_=Dc(t.repoInfo_),t.forceRestClient_||Xx())t.server_=new Ao(t.repoInfo_,(r,i,s,o)=>{wh(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Re(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ht(t.repoInfo_,e,(r,i,s,o)=>{wh(t,r,i,s,o)},r=>{xh(t,r)},r=>{kE(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=nC(t.repoInfo_,()=>new tS(t.stats_,t.server_)),t.infoData_=new qC,t.infoSyncTree_=new yh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=pl(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),od(t,"connected",!1),t.serverSyncTree_=new yh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);en(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function EE(t){const n=t.infoData_.getNode(new se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function sd(t){return rE({timestamp:EE(t)})}function wh(t,e,n,r,i){t.dataUpdateCount++;const s=new se(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Io(n,u=>De(u));o=JS(t.serverSyncTree_,s,a,i)}else{const a=De(n);o=XS(t.serverSyncTree_,s,a,i)}else if(r){const a=Io(n,u=>De(u));o=YS(t.serverSyncTree_,s,a)}else{const a=De(n);o=pl(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=ns(t,s)),en(t.eventQueue_,l,o)}function xh(t,e){od(t,"connected",e),e===!1&&TE(t)}function kE(t,e){Me(e,(n,r)=>{od(t,n,r)})}function od(t,e,n){const r=new se("/.info/"+e),i=De(n);t.infoData_.updateSnapshot(r,i);const s=pl(t.infoSyncTree_,r,i);en(t.eventQueue_,r,s)}function Cy(t){return t.nextWriteId_++}function IE(t,e,n,r){ld(t,"update",{path:e.toString(),value:n});let i=!0;const s=sd(t),o={};if(Me(n,(l,a)=>{i=!1,o[l]=py(_e(e,l),De(a),t.serverSyncTree_,s)}),i)be("update() called with empty data.  Don't do anything."),Ch(t,r,"ok",void 0);else{const l=Cy(t),a=QS(t.serverSyncTree_,e,o,l);id(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,f)=>{const c=u==="ok";c||tt("update at "+e+" failed: "+u);const d=zn(t.serverSyncTree_,l,!c),y=d.length>0?ns(t,e):e;en(t.eventQueue_,y,d),Ch(t,r,u,f)}),Me(n,u=>{const f=Ty(t,_e(e,u));ns(t,f)}),en(t.eventQueue_,e,[])}}function TE(t){ld(t,"onDisconnectEvents");const e=sd(t),n=Lo();cu(t.onDisconnect_,te(),(i,s)=>{const o=py(i,s,t.serverSyncTree_,e);Xg(n,i,o)});let r=[];cu(n,te(),(i,s)=>{r=r.concat(pl(t.serverSyncTree_,i,s));const o=Ty(t,i);ns(t,o)}),t.onDisconnect_=Lo(),en(t.eventQueue_,te(),r)}function RE(t,e,n){let r;G(e._path)===".info"?r=_h(t.infoSyncTree_,e,n):r=_h(t.serverSyncTree_,e,n),wy(t.eventQueue_,e._path,r)}function vu(t,e,n){let r;G(e._path)===".info"?r=yu(t.infoSyncTree_,e,n):r=yu(t.serverSyncTree_,e,n),wy(t.eventQueue_,e._path,r)}function NE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wE)}function ld(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),be(n,...e)}function Ch(t,e,n,r){e&&Qr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Sy(t,e,n){return cy(t.serverSyncTree_,e,n)||U.EMPTY_NODE}function ad(t,e=t.transactionQueueTree_){if(e||yl(t,e),Kr(e)){const n=ky(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&PE(t,ms(e),n)}else gy(e)&&gl(e,n=>{ad(t,n)})}function PE(t,e,n){const r=n.map(u=>u.currentWriteId),i=Sy(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];R(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const c=qe(e,f.path);s=s.updateChild(c,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{ld(t,"transaction put response",{path:a.toString(),status:u});let f=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,f=f.concat(zn(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();yl(t,td(t.transactionQueueTree_,e)),ad(t,t.transactionQueueTree_),en(t.eventQueue_,e,f);for(let d=0;d<c.length;d++)Qr(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{tt("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}ns(t,e)}},o)}function ns(t,e){const n=Ey(t,e),r=ms(n),i=ky(t,n);return bE(t,i,r),r}function bE(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=qe(n,a.path);let f=!1,c;if(R(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,c=a.abortReason,i=i.concat(zn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=xE)f=!0,c="maxretry",i=i.concat(zn(t.serverSyncTree_,a.currentWriteId,!0));else{const d=Sy(t,a.path,o);a.currentInputSnapshot=d;const y=e[l].update(d.val());if(y!==void 0){rd("transaction failed: Data returned ",y,a.path);let _=De(y);typeof y=="object"&&y!=null&&Mt(y,".priority")||(_=_.updatePriority(d.getPriority()));const C=a.currentWriteId,p=sd(t),h=oE(_,d,p);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=h,a.currentWriteId=Cy(t),o.splice(o.indexOf(C),1),i=i.concat(GS(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(zn(t.serverSyncTree_,C,!0))}else f=!0,c="nodata",i=i.concat(zn(t.serverSyncTree_,a.currentWriteId,!0))}en(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(d){setTimeout(d,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(c==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(c),!1,null))))}yl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Qr(r[l]);ad(t,t.transactionQueueTree_)}function Ey(t,e){let n,r=t.transactionQueueTree_;for(n=G(e);n!==null&&Kr(r)===void 0;)r=td(r,n),e=ae(e),n=G(e);return r}function ky(t,e){const n=[];return Iy(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Iy(t,e,n){const r=Kr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);gl(e,i=>{Iy(t,i,n)})}function yl(t,e){const n=Kr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,my(e,n.length>0?n:void 0)}gl(e,r=>{yl(t,r)})}function Ty(t,e){const n=ms(Ey(t,e)),r=td(t.transactionQueueTree_,e);return aE(r,i=>{sa(t,i)}),sa(t,r),yy(r,i=>{sa(t,i)}),n}function sa(t,e){const n=Kr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(R(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(R(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(zn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?my(e,void 0):n.length=s+1,en(t.eventQueue_,ms(e),i);for(let o=0;o<r.length;o++)Qr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function AE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Sh=function(t,e){const n=LE(t),r=n.namespace;n.domain==="firebase.com"&&Zt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Zt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$x();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Lg(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new se(n.pathString)}},LE=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(f,c)),f<c&&(i=DE(t.substring(f,c)));const d=AE(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Re(this.snapshot.exportVal())}}class OE{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Q(this._path)?null:Lc(this._path)}get ref(){return new Pn(this._repo,this._path)}get _queryIdentifier(){const e=lh(this._queryParams),n=Pc(e);return n==="{}"?"default":n}get _queryObject(){return lh(this._queryParams)}isEqual(e){if(e=cl(e),!(e instanceof ud))return!1;const n=this._repo===e._repo,r=Mc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+kC(this._path)}}class Pn extends ud{constructor(e,n){super(e,n,new zc,!1)}get parent(){const e=Ug(this._path);return e===null?null:new Pn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class $o{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new se(e),r=wu(this.ref,e);return new $o(this._node.getChild(n),r,ve)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new $o(i,wu(this.ref,r),ve)))}hasChild(e){const n=new se(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Uo(t,e){return t=cl(t),t._checkNotDeleted("ref"),e!==void 0?wu(t._root,e):t._root}function wu(t,e){return t=cl(t),G(t._path)===null?gE("child","path",e):vy("child","path",e),new Pn(t._repo,_e(t._path,e))}function Ry(t,e){mE("update",e,t._path);const n=new al;return IE(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class cd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ME("value",this,new $o(e.snapshotNode,new Pn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new OE(this,e,n):null}matches(e){return e instanceof cd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function jE(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(f,c)=>{vu(t._repo,t,l),a(f,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new FE(n,s||void 0),l=new cd(o);return RE(t._repo,t,l),()=>vu(t._repo,t,l)}function Eh(t,e,n,r){return jE(t,"value",e,n,r)}function kh(t,e,n){vu(t._repo,t,null)}FS(Pn);US(Pn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="FIREBASE_DATABASE_EMULATOR_HOST",xu={};let BE=!1;function WE(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=Ic(s);t.repoInfo_=new Lg(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function $E(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Zt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),be("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Sh(s,i),l=o.repoInfo,a;typeof process<"u"&&Uf&&(a=Uf[zE]),a?(s=`http://${a}?ns=${l.namespace}`,o=Sh(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new Zx(t.name,t.options,e);yE("Invalid Firebase Database URL",o),Q(o.path)||Zt("Database URL must point to the root of a Firebase Database (not including a child path).");const f=HE(l,t,u,new Jx(t,n));return new VE(f,t)}function UE(t,e){const n=xu[e];(!n||n[t.key]!==t)&&Zt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),NE(t),delete n[t.key]}function HE(t,e,n,r){let i=xu[e.name];i||(i={},xu[e.name]=i);let s=i[t.toURLString()];return s&&Zt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new CE(t,BE,n,r),i[t.toURLString()]=s,s}class VE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(SE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pn(this._repo,te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(UE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zt("Cannot call "+e+" on a deleted database.")}}function GE(t=Sx(),e){const n=_x(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=r1("database");r&&QE(n,...r)}return n}function QE(t,e,n,r={}){t=cl(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&To(r,s.repoInfo_.emulatorOptions))return;Zt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Zt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Js(Js.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:s1(r.mockUserToken,t.app.options.projectId);o=new Js(l)}Ic(e)&&(i1(e),a1("Database",!0)),WE(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t){Ox(Cx),No(new Yi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return $E(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Er(Hf,Vf,t),Er(Hf,Vf,"esm2017")}Ht.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ht.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};YE();const Cu={apiKey:"AIzaSyBF1sBC8tegqpQzlhZDkfRyCkG1N-RqHZM",authDomain:"board6-a2c5a.firebaseapp.com",databaseURL:"https://board6-a2c5a-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"board6-a2c5a",storageBucket:"board6-a2c5a.appspot.com",messagingSenderId:"192957529739",appId:"1:192957529739:web:9c317aa3344e1824d89e8e",measurementId:"G-GS9NWB8PYP"},KE=yg(Cu),rs=GE(KE),He=()=>{const t=!!rs&&!!Cu.apiKey&&!!Cu.databaseURL;return t||console.warn("[firebase.ts] Firebase  :    db "),t},qE=()=>Uo(rs,"/sharedBoardData"),Ny=(t,e)=>{const n=Uo(rs,"/sharedBoardData/shapes"),r=Uo(rs,"/sharedBoardData/strokes"),i=Eh(n,o=>{const l=o.val();l&&t({type:"shapes",shapes:Object.values(l)})},o=>{console.error(" [firebase.ts] shapes   :",o),e&&e(o)}),s=Eh(r,o=>{const l=o.val();l&&t({type:"strokes",strokes:Object.values(l)})},o=>{console.error(" [firebase.ts] strokes   :",o),e&&e(o)});return()=>{kh(n),kh(r),i(),s()}},dd=async(t,e=[])=>{try{const n={},r=new Set(t.map(s=>s.id)),i=new Set(e.map(s=>s.id));for(const s of i)r.has(s)||(n[`/sharedBoardData/strokes/${s}`]=null);for(const s of t)n[`/sharedBoardData/strokes/${s.id}`]=s;await Ry(Uo(rs),n),console.log("[firebase.ts]   update (,  )",n)}catch(n){console.error("[firebase.ts]   :",n)}},ze=async t=>{try{const e=qE();console.log("[firebase.ts]  update",t),await Ry(e,t)}catch(e){console.error("[firebase.ts]  update :",e)}},XE=({setStrokes:t,penColor:e,penSize:n})=>{const r=g.useRef([]),i=g.useCallback((f,c,d)=>{const y=Date.now(),_={id:y.toString(),tool:c,points:[f],color:e,size:n,isErasable:!0,updatedAt:y,updatedBy:d,userId:d};return t(w=>[...Array.isArray(w)?w:[],_]),_.id},[e,n,t]),s=g.useCallback((f,c)=>{t(d=>Array.isArray(d)?d.map(_=>_&&_.id===f?{..._,points:[..._.points,c],updatedAt:Date.now()}:_):d)},[t]),o=g.useCallback((f,c=10)=>{t(d=>{const y=d.filter(w=>w.isErasable?w.points.some(C=>Math.sqrt(Math.pow(C.x-f.x,2)+Math.pow(C.y-f.y,2))<=c):!1);return d.filter(w=>!y.some(C=>C.id===w.id))})},[t]),l=g.useCallback(()=>{t(()=>[])},[t]),a=g.useCallback(()=>{t(f=>f.slice(0,-1))},[t]),u=g.useCallback(f=>{He()&&(dd(f,r.current),r.current=f)},[]);return{startStroke:i,addPointToStroke:s,eraseAtPoint:o,clearAllStrokes:l,removeLastStroke:a,saveStrokesOnDrawEnd:u,prevStrokesRef:r}},Py=t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height)},JE=(t,e)=>{t.strokeStyle=Hw,t.lineWidth=Vw,t.setLineDash([]);for(let n=0;n<=qt;n+=e)t.beginPath(),t.moveTo(n,0),t.lineTo(n,Xt),t.stroke();for(let n=0;n<=Xt;n+=e)t.beginPath(),t.moveTo(0,n),t.lineTo(qt,n),t.stroke()},ZE=(t,e)=>{if(!(e.points.length<2)){t.strokeStyle=e.color,t.lineWidth=e.size,t.lineCap="round",t.lineJoin="round",t.setLineDash([]),t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=1;n<e.points.length;n++)t.lineTo(e.points[n].x,e.points[n].y);t.stroke()}},ek=(t,e)=>{e.forEach(n=>ZE(t,n))},tk=(t,e)=>{if(e.type!=="rect")return;const{x:n,y:r,width:i=100,height:s=60,fill:o="#ffffff"}=e;t.fillStyle=o,t.fillRect(n,r,i,s),t.strokeStyle=e.selected?gr:"#000000",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s)},nk=(t,e)=>{if(e.type!=="text")return;const{x:n,y:r,text:i="Text",width:s=100,height:o=60,fontSize:l=16,fontWeight:a="normal",fontStyle:u="normal"}=e;e.fill&&(t.fillStyle=e.fill,t.fillRect(n,r,s,o));const f=u==="italic"?"italic ":"",c=a==="bold"?"bold ":"";t.font=`${f}${c}${l}px Arial`,t.fillStyle="#000000",t.textAlign="left",t.textBaseline="top",t.fillText(i,n+5,r+5),e.selected&&(t.strokeStyle=gr,t.lineWidth=3,t.setLineDash([]),t.strokeRect(n,r,s,o))},Ih=new Map,rk=(t,e)=>{if(e.type!=="image")return;const{x:n,y:r,width:i=100,height:s=100,imageSrc:o}=e;if(o){let l=Ih.get(o);l&&l.complete&&l.naturalWidth>0?(t.drawImage(l,n,r,i,s),e.selected&&(t.strokeStyle=gr,t.lineWidth=3,t.setLineDash([]),t.strokeRect(n,r,i,s))):l||(l=new Image,Ih.set(o,l),l.onload=()=>{},l.onerror=()=>{t.fillStyle="#f0f0f0",t.fillRect(n,r,i,s),t.strokeStyle=e.selected?gr:"#cccccc",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s),t.fillStyle="#ff0000",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("ERROR",n+i/2,r+s/2)},l.src=o,t.fillStyle="#f8f9fa",t.fillRect(n,r,i,s),t.strokeStyle=e.selected?gr:"#ddd",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s),t.fillStyle="#666666",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("...",n+i/2,r+s/2))}else t.fillStyle="#f0f0f0",t.fillRect(n,r,i,s),t.strokeStyle=e.selected?gr:"#cccccc",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s),t.fillStyle="#666666",t.font="14px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("IMG",n+i/2,r+s/2)},ik=(t,e)=>{e.forEach(n=>{switch(n.type){case"rect":tk(t,n);break;case"text":nk(t,n);break;case"image":rk(t,n);break}})},sk=(t,e)=>{for(let n=t.length-1;n>=0;n--){const r=t[n],{x:i,y:s,width:o=100,height:l=60}=r;if(e.x>=i&&e.x<=i+o&&e.y>=s&&e.y<=s+l)return r}return null},Th=(t,e)=>Math.round(t/e)*e,Ri=(t,e)=>({x:Th(t.x,e),y:Th(t.y,e)}),by=({shapes:t,setShapes:e,selectedId:n,setSelectedId:r,gridSize:i})=>{const s=g.useCallback(h=>{const m=Ri(h,i),v=typeof window.userId=="string"?window.userId:"anonymous",E=Date.now(),S={id:E.toString(),type:"rect",x:m.x,y:m.y,width:Ls,height:Pf,fill:$w,color:"#000000",selected:!0,movable:!0,deletable:!0,resizable:!0,userId:v,updatedAt:E,updatedBy:v,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return e(k=>[...k,S]),ze({[`shapes/${S.id}`]:S}),S.id},[i,e]),o=g.useCallback((h,m="Text")=>{const v=Ri(h,i),E=typeof window.userId=="string"?window.userId:"anonymous",S=Date.now(),k={id:S.toString(),type:"text",x:v.x,y:v.y,width:Ls,height:Pf,text:m,fontSize:16,fontWeight:"normal",fontStyle:"normal",color:"#000000",selected:!0,movable:!0,deletable:!0,resizable:!0,userId:E,updatedAt:S,updatedBy:E,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return e(I=>[...I,k]),ze({[`shapes/${k.id}`]:k}),k.id},[i,e]),l=g.useCallback((h,m)=>{const v=Ri(h,i),E=typeof window.userId=="string"?window.userId:"anonymous",S=Date.now(),k={id:S.toString(),type:"image",x:v.x,y:v.y,width:Ls,height:Ls,imageSrc:m,color:"#000000",selected:!0,movable:!0,deletable:!0,resizable:!0,userId:E,updatedAt:S,updatedBy:E,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return e(I=>[...I,k]),ze({[`shapes/${k.id}`]:k}),k.id},[i,e]),a=g.useCallback(h=>{r(h)},[r]),u=g.useCallback(()=>{var E;if(!n)return;const h=t.find(S=>S.id===n);if(!((E=h==null?void 0:h.meta)!=null&&E.isDeletable))return;const m=typeof window.userId=="string"?window.userId:"anonymous",v=Date.now();e(S=>S.filter(k=>k.id!==n)),ze({[`shapes/${n}`]:{id:n,deleted:!0,updatedAt:v,updatedBy:m}}),r(null)},[t,n,r,e]),f=g.useCallback((h,m)=>{e(v=>v.map(E=>E.id===h?{...E,x:m.x,y:m.y}:E)),ze({[`shapes/${h}/x`]:m.x,[`shapes/${h}/y`]:m.y})},[e]),c=g.useCallback(h=>{const m=t.find(k=>k.id===h);if(!m)return;const v=Date.now(),E=typeof window.userId=="string"?window.userId:"anonymous",S={...m,id:v.toString(),x:m.x+20,y:m.y+20,selected:!0,updatedAt:v,updatedBy:E};e(k=>[...k.map(I=>({...I,selected:!1})),S]),r(S.id),ze({[`shapes/${S.id}`]:{...S,selected:void 0}})},[t,e,r]),d=g.useCallback((h,m,v)=>{e(E=>E.map(S=>S.id===h?{...S,[m]:v}:S)),ze({[`shapes/${h}/${m}`]:v})},[e]),y=g.useCallback(()=>{e(h=>h.map(m=>({...m,selected:!1}))),r(null)},[e,r]),_=g.useCallback(h=>{e(m=>{const v=m.findIndex(k=>k.id===h);if(v===-1||v===m.length-1)return m;const E=m[v],S=[...m];return S.splice(v,1),S.push(E),S})},[e]),w=g.useCallback(h=>{e(m=>{const v=m.findIndex(k=>k.id===h);if(v===-1||v===0)return m;const E=m[v],S=[...m];return S.splice(v,1),S.unshift(E),S})},[e]),C=g.useCallback(h=>{e(m=>{const v=m.findIndex(k=>k.id===h);if(v===-1||v===m.length-1)return m;const E=[...m],S=E[v];return E[v]=E[v+1],E[v+1]=S,E})},[e]),p=g.useCallback(h=>{e(m=>{const v=m.findIndex(k=>k.id===h);if(v===-1||v===0)return m;const E=[...m],S=E[v];return E[v]=E[v-1],E[v-1]=S,E})},[e]);return{createRect:s,createText:o,createImage:l,selectShape:a,deleteSelectedShape:u,moveShape:f,duplicateShape:c,updateShapeProperty:d,clearSelection:y,bringToFront:_,sendToBack:w,moveForward:C,moveBackward:p}},ok=20,Dy=({shapes:t,strokes:e,selectedId:n,setShapes:r,setStrokes:i,setSelectedId:s})=>{const[o,l]=g.useState([]),[a,u]=g.useState([]),f=g.useCallback(()=>({shapes:t,strokes:e,selectedId:n}),[t,e,n]),c=g.useCallback((S,k,I)=>{const $={id:Date.now().toString(),type:S,timestamp:Date.now(),beforeState:k,afterState:I};l(b=>{const N=[...b,$];return N.length>ok?N.slice(-20):N}),u([])},[]),d=g.useCallback(S=>{S.shapes!==void 0&&r(()=>S.shapes),S.strokes!==void 0&&i(()=>S.strokes),S.selectedId!==void 0&&s(S.selectedId)},[r,i,s]),y=g.useCallback(()=>{if(o.length===0)return!1;const S=o[o.length-1];return u(k=>[...k,{...S,beforeState:S.afterState,afterState:S.beforeState}]),l(k=>k.slice(0,-1)),d(S.beforeState),!0},[o,d]),_=g.useCallback(()=>{if(a.length===0)return!1;const S=a[a.length-1];return l(k=>[...k,{...S,beforeState:S.afterState,afterState:S.beforeState}]),u(k=>k.slice(0,-1)),d(S.afterState),!0},[a,d]),w=g.useCallback(S=>{c("CREATE_SHAPE",{shapes:t},{shapes:[...t,S]})},[t,c]),C=g.useCallback(S=>{t.find(I=>I.id===S)&&c("DELETE_SHAPE",{shapes:t,selectedId:n},{shapes:t.filter(I=>I.id!==S),selectedId:null})},[t,n,c]),p=g.useCallback((S,k,I)=>{c("UPDATE_SHAPE",{shapes:t},{shapes:t.map($=>$.id===S?I:$)})},[t,c]),h=g.useCallback(S=>{c("CREATE_STROKE",{strokes:e},{strokes:[...e,S]})},[e,c]),m=g.useCallback(S=>{S.length!==0&&c("DELETE_STROKE",{strokes:e},{strokes:e.filter(k=>!S.some(I=>I.id===k.id))})},[e,c]),v=g.useCallback((S,k)=>{c("BATCH",S,k)},[c]),E=g.useCallback(()=>{l([]),u([])},[]);return{canUndo:o.length>0,canRedo:a.length>0,undoStackSize:o.length,redoStackSize:a.length,undo:y,redo:_,recordCreateShape:w,recordDeleteShape:C,recordUpdateShape:p,recordCreateStroke:h,recordDeleteStrokes:m,recordBatchAction:v,clearHistory:E,getCurrentState:f}},fd=({shapes:t,strokes:e,selectedId:n,setShapes:r,setStrokes:i,setSelectedId:s,onClearHistory:o,silent:l=!1})=>{const a=g.useCallback(()=>{const p={shapes:t,strokes:e,selectedId:n,timestamp:Date.now()};return console.log("[useBoardStorage] getCurrentBoardState",p),p},[t,e,n]),u=g.useCallback(p=>{console.log("[useBoardStorage] restoreBoardState",p),r(p.shapes||[]),i(Array.isArray(p.strokes)?p.strokes:p.strokes?Object.values(p.strokes):[]),s(p.selectedId||null),o&&o()},[r,i,s,o]),f=g.useCallback((p,h="board-push-state")=>{try{return localStorage.setItem(h,JSON.stringify(p)),console.log("[useBoardStorage] localStorage  ",h,p),!0}catch(m){return console.error("[useBoardStorage] localStorage  :",m),!1}},[]),c=g.useCallback((p="board-push-state")=>{try{const h=localStorage.getItem(p);if(h){const m=JSON.parse(h);return console.log("[useBoardStorage] localStorage  ",p,m),m}}catch(h){console.error("[useBoardStorage] localStorage  :",h)}return null},[]),d=g.useCallback(()=>{const p=a(),h=JSON.stringify(p,null,2),m=new Blob([h],{type:"application/json"}),v=document.createElement("a");v.href=URL.createObjectURL(m),v.download=`board-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,v.click(),l||alert("  .")},[a,l]),y=g.useCallback(()=>{const p=document.createElement("input");p.type="file",p.accept=".json",p.onchange=h=>{var v;const m=(v=h.target.files)==null?void 0:v[0];if(m){const E=new FileReader;E.onload=S=>{var k;try{const I=JSON.parse((k=S.target)==null?void 0:k.result);u(I),l||alert("  .")}catch(I){console.error("  :",I),alert("   .")}},E.readAsText(m)}},p.click()},[u,l]),_=g.useCallback(async()=>{const p=a();console.log("[useBoardStorage] pushToFirebase ",p);try{await ze(p),l||alert("  ."),console.log("[useBoardStorage] Firebase  ")}catch{f(p,"board-push-state"),l||alert(" Firebase  .   ."),console.warn("[useBoardStorage] Firebase , localStorage ")}},[a,l,f]),w=g.useCallback(()=>{const p=a();f(p,"board-push-state"),l||alert("  ."),console.log("[useBoardStorage] pushToStorage ",p)},[a,f,l]),C=g.useCallback(()=>{const p=c("board-push-state");p?(u(p),l||alert("  ."),console.log("[useBoardStorage] pullFromStorage ",p)):(l||alert("   ."),console.warn("[useBoardStorage] pullFromStorage:   "))},[c,u,l]);return{saveToFile:d,loadFromFile:y,pushToFirebase:_,pushToStorage:w,pullFromStorage:C,getCurrentBoardState:a,restoreBoardState:u,saveToLocalStorage:f,loadFromLocalStorage:c}};function lk(t,e){let n=!1,r=null,i=0;return function(...s){n?(r&&clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=e&&(t(...s),i=Date.now())},e-(Date.now()-i))):(t(...s),i=Date.now(),n=!0)}}const ak=({shapes:t,selectedId:e,gridSize:n,showGrid:r,onSyncShapes:i})=>{const s=g.useRef(null),[o,l]=g.useState(null),a=g.useRef(i?lk(i,300):void 0).current;g.useEffect(()=>{const f=new Image;f.src="/floor.png",f.onload=()=>{l(f)}},[]);const u=g.useCallback((f,c,d)=>{f.fillStyle=Gw,f.strokeStyle="#ffffff",f.lineWidth=1,f.fillRect(c-Ot/2,d-Ot/2,Ot,Ot),f.strokeRect(c-Ot/2,d-Ot/2,Ot,Ot)},[]);return g.useEffect(()=>{var y;const f=s.current;if(!f)return;const c=f.getContext("2d");if(!c)return;Py(c),o&&c.drawImage(o,0,0,qt,Xt),r&&JE(c,n);const d=t.map(_=>({..._,selected:_.id===e}));if(ik(c,d),e){const _=t.find(w=>w.id===e);if((y=_==null?void 0:_.meta)!=null&&y.isResizable){const{x:w,y:C,width:p=100,height:h=60}=_;u(c,w+p/2,C),u(c,w,C),u(c,w+p,C),u(c,w,C+h/2),u(c,w+p,C+h/2),u(c,w+p/2,C+h),u(c,w,C+h),u(c,w+p,C+h)}}a&&a(t)},[t,e,n,r,u,a,o]),x.jsx("canvas",{ref:s,width:qt,height:Xt,style:{position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none"}})},uk=({strokes:t})=>{const e=g.useRef(null);return g.useEffect(()=>{const n=e.current;if(!n)return;const r=n.getContext("2d");r&&(Py(r),ek(r,t))},[t]),x.jsx("canvas",{ref:e,width:qt,height:Xt,style:{position:"absolute",top:0,left:0,zIndex:2,pointerEvents:"auto",touchAction:"none"}})},ck=({tool:t,shapes:e,gridSize:n,selectedId:r,onToolChange:i,onStartStroke:s,onAddPointToStroke:o,onFinishStroke:l,onEraseAtPoint:a,onSelectShape:u,onCreateRect:f,currentStrokeId:c,onDeleteSelectedShape:d,onDuplicateSelectedShape:y,onMoveShape:_,onResizeShape:w,onEditEnd:C,setShapes:p,isEditingRef:h})=>{const m=g.useRef(null),v=g.useRef(!1),E=g.useRef(null),S=g.useRef(null),k=g.useRef(!1),I=g.useRef(null),$=g.useRef(null),b=g.useRef(null),N=g.useRef(!1),z=g.useRef(null),D=g.useRef(null),A=g.useRef(null),H=g.useRef(e);g.useEffect(()=>{H.current=e},[e]);const K=g.useCallback((M,F)=>{p&&p(O=>O.map(W=>W.id===M?{...W,x:F.x,y:F.y}:W))},[p]),Ce=g.useCallback((M,F)=>{p&&p(O=>O.map(W=>W.id===M?{...W,...F}:W))},[p]),P=g.useCallback(()=>{S.current&&clearTimeout(S.current),(t==="pen"||t==="eraser")&&(S.current=window.setTimeout(()=>{i&&i("select")},Uw))},[t,i]),j=g.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null)},[]),B=g.useCallback((M,F)=>{const O=m.current;if(!O)return{x:0,y:0};const W=O.getBoundingClientRect(),ie=qt/W.width,X=Xt/W.height;return{x:(M-W.left)*ie,y:(F-W.top)*X}},[]),q=g.useCallback((M,F)=>{const{x:O,y:W,width:ie=100,height:X=60}=F,ee=Ot,Oe={"top-left":{x:O,y:W},top:{x:O+ie/2,y:W},"top-right":{x:O+ie,y:W},left:{x:O,y:W+X/2},right:{x:O+ie,y:W+X/2},"bottom-left":{x:O,y:W+X},bottom:{x:O+ie/2,y:W+X},"bottom-right":{x:O+ie,y:W+X}};for(const[gt,nn]of Object.entries(Oe))if(M.x>=nn.x-ee/2&&M.x<=nn.x+ee/2&&M.y>=nn.y-ee/2&&M.y<=nn.y+ee/2)return gt;return null},[]),Z=g.useCallback(M=>{u(M),i("select")},[u,i]),at=g.useCallback(M=>{var O,W;const F=B(M.clientX,M.clientY);switch(t){case"pen":v.current=!0,E.current=F,h&&(h.current=!0),s(F),P();break;case"eraser":v.current=!0,h&&(h.current=!0),a(F),typeof l=="function"&&l(),P();break;case"select":const ie=sk(e,F);if(ie){if(u(ie.id),(O=ie.meta)!=null&&O.isResizable){const Oe=q(F,ie);Oe&&(N.current=!0,z.current=F,b.current=ie,A.current=Oe,D.current={width:ie.width||100,height:ie.height||60})}!N.current&&((W=ie.meta)==null?void 0:W.isMovable)!==!1&&_&&(k.current=!0,I.current=F,b.current=ie,$.current={x:ie.x,y:ie.y})}else u(null);break;case"rect":const X=Ri(F,n),ee=f(X);Z(ee);break}M.preventDefault()},[t,e,n,s,a,u,f,i,B,P,_,q,Z,h]),$e=g.useCallback(M=>{const F=B(M.clientX,M.clientY);switch(t){case"pen":v.current&&c&&E.current&&Math.sqrt(Math.pow(F.x-E.current.x,2)+Math.pow(F.y-E.current.y,2))>2&&(o(c,F),E.current=F,P());break;case"eraser":v.current&&(a(F),typeof l=="function"&&l(),P());break;case"select":if(N.current&&b.current&&z.current&&D.current){const O=F.x-z.current.x,W=F.y-z.current.y,ie=A.current;let X=D.current.width,ee=D.current.height,Oe=b.current.x,gt=b.current.y;switch(ie){case"top-left":X=Math.max(50,D.current.width-O),ee=Math.max(50,D.current.height-W),Oe=b.current.x+(D.current.width-X),gt=b.current.y+(D.current.height-ee);break;case"top":ee=Math.max(50,D.current.height-W),gt=b.current.y+(D.current.height-ee);break;case"top-right":X=Math.max(50,D.current.width+O),ee=Math.max(50,D.current.height-W),gt=b.current.y+(D.current.height-ee);break;case"left":X=Math.max(50,D.current.width-O),Oe=b.current.x+(D.current.width-X);break;case"right":X=Math.max(50,D.current.width+O);break;case"bottom-left":X=Math.max(50,D.current.width-O),ee=Math.max(50,D.current.height+W),Oe=b.current.x+(D.current.width-X);break;case"bottom":ee=Math.max(50,D.current.height+W);break;case"bottom-right":X=Math.max(50,D.current.width+O),ee=Math.max(50,D.current.height+W);break}const nn=Math.round(X/n)*n,_l=Math.round(ee/n)*n,vl=Math.round(Oe/n)*n,wl=Math.round(gt/n)*n;Ce(b.current.id,{width:nn,height:_l,x:vl,y:wl})}else if(k.current&&b.current&&I.current&&$.current){const O=F.x-I.current.x,W=F.y-I.current.y,ie={x:$.current.x+O,y:$.current.y+W};K(b.current.id,ie)}break}M.preventDefault()},[t,c,o,a,B,P,n,K,Ce]),ne=g.useCallback(M=>{switch(t){case"pen":v.current&&(v.current=!1,E.current=null,h&&(h.current=!1),l(),P());break;case"eraser":v.current&&(v.current=!1,h&&(h.current=!1),typeof l=="function"&&l(),P());break;case"select":if(N.current){if(b.current&&z.current&&D.current&&w){const F=B(M.clientX,M.clientY),O=F.x-z.current.x,W=F.y-z.current.y,ie=A.current;let X=D.current.width,ee=D.current.height,Oe=b.current.x,gt=b.current.y;switch(ie){case"top-left":X=Math.max(50,D.current.width-O),ee=Math.max(50,D.current.height-W),Oe=b.current.x+(D.current.width-X),gt=b.current.y+(D.current.height-ee);break;case"top":ee=Math.max(50,D.current.height-W),gt=b.current.y+(D.current.height-ee);break;case"top-right":X=Math.max(50,D.current.width+O),ee=Math.max(50,D.current.height-W),gt=b.current.y+(D.current.height-ee);break;case"left":X=Math.max(50,D.current.width-O),Oe=b.current.x+(D.current.width-X);break;case"right":X=Math.max(50,D.current.width+O);break;case"bottom-left":X=Math.max(50,D.current.width-O),ee=Math.max(50,D.current.height+W),Oe=b.current.x+(D.current.width-X);break;case"bottom":ee=Math.max(50,D.current.height+W);break;case"bottom-right":X=Math.max(50,D.current.width+O),ee=Math.max(50,D.current.height+W);break}const nn=Math.round(X/n)*n,_l=Math.round(ee/n)*n,vl=Math.round(Oe/n)*n,wl=Math.round(gt/n)*n;w(b.current.id,{width:nn,height:_l,x:vl,y:wl})}N.current=!1,z.current=null,D.current=null,A.current=null,C&&C(H.current)}else if(k.current&&b.current&&_){const F=H.current.find(O=>O.id===b.current.id);if(F){const O=Ri({x:F.x,y:F.y},n);_(b.current.id,O)}k.current=!1,I.current=null,$.current=null,b.current=null,C&&C(H.current)}break}M.preventDefault()},[t,l,P,_,n,C,B,w,h]);return g.useEffect(()=>{const M=O=>{var X;const W=document.activeElement;if(!(W&&(W.tagName==="INPUT"||W.tagName==="TEXTAREA"||W.getAttribute("contenteditable")==="true"||W.getAttribute("contenteditable")==="")&&(O.key==="Delete"||O.key==="Backspace"))){if(O.ctrlKey||O.metaKey){switch(O.key.toLowerCase()){case"d":O.preventDefault(),r&&y&&y();break}return}switch(O.key){case"Escape":O.preventDefault(),u(null),i("select");break;case"Delete":case"Backspace":if(O.preventDefault(),r&&d){const ee=e.find(Oe=>Oe.id===r);((X=ee==null?void 0:ee.meta)==null?void 0:X.isDeletable)!==!1&&d()}break;case"1":O.preventDefault(),i("select");break;case"2":O.preventDefault(),i("pen");break;case"3":O.preventDefault(),i("eraser");break;case"4":O.preventDefault(),i("rect");break}}},F=m.current;return F&&(F.tabIndex=0),window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[r,e,u,i,d,y]),g.useEffect(()=>()=>{j()},[j]),x.jsx("canvas",{ref:m,width:qt,height:Xt,style:{position:"absolute",top:0,left:0,zIndex:3,pointerEvents:"auto",cursor:t==="pen"?"crosshair":t==="eraser"?"pointer":t==="select"?"default":t==="rect"?"crosshair":"default",outline:"none"},onPointerDown:at,onPointerMove:$e,onPointerUp:ne,onPointerLeave:ne})},Ay=({tool:t,shapes:e,strokes:n,penColor:r,penSize:i,gridSize:s,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u,onUndoRedoStateChange:f,onSave:c,onLoad:d,onPushPull:y,onCommand:_,onToolChange:w,showGrid:C=!0,onMoveShape:p,onResizeShape:h,userId:m})=>{const[v,E]=g.useState(null),[S,k]=g.useState(null),I=g.useRef(e),$=g.useRef(l);g.useEffect(()=>{I.current=e,$.current=l},[e,l]);const b=g.useCallback((ne,M)=>{var F,O;p&&"x"in M&&"y"in M&&p(ne,{x:M.x,y:M.y}),h&&("width"in M||"height"in M)&&h(ne,{width:M.width||((F=I.current.find(W=>W.id===ne))==null?void 0:F.width)||100,height:M.height||((O=I.current.find(W=>W.id===ne))==null?void 0:O.height)||60,x:M.x,y:M.y})},[p,h]),N=Dy({shapes:e,strokes:n,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u}),z=fd({shapes:e,strokes:n,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u,onClearHistory:N.clearHistory}),D=XE({setStrokes:a,penColor:r,penSize:i}),A=by({shapes:e,setShapes:l,selectedId:o,setSelectedId:u,gridSize:s});Bn.useEffect(()=>{f&&f(N.canUndo,N.canRedo)},[N.canUndo,N.canRedo,f]);const H=g.useCallback(ne=>{const M=D.startStroke(ne,t,m);k(M);const F={id:M,tool:t,points:[ne],color:r,size:i,isErasable:!0,updatedAt:Date.now(),updatedBy:m,userId:m};return E(F),M},[D,r,i,t,m]),K=g.useCallback((ne,M)=>{D.addPointToStroke(ne,M),v&&v.id===ne&&E(F=>F?{...F,points:[...F.points,M]}:null)},[D,v]),Ce=g.useCallback(()=>{v&&N.recordCreateStroke(v),D.saveStrokesOnDrawEnd(n),E(null),k(null)},[v,N,D,n]),P=g.useCallback(ne=>{const M=[...n];D.eraseAtPoint(ne),setTimeout(()=>{const F=n,O=M.filter(W=>!F.some(ie=>ie.id===W.id));O.length>0&&N.recordDeleteStrokes(O)},0)},[n,D,N]),j=g.useCallback(()=>{var M;if(!o)return;const ne=e.find(F=>F.id===o);!ne||((M=ne.meta)==null?void 0:M.isDeletable)===!1||(N.recordDeleteShape(o),A.deleteSelectedShape())},[o,e,N,A]),B=g.useCallback(()=>{o&&(A.duplicateShape(o),setTimeout(()=>{const ne=N.getCurrentState();N.recordBatchAction(N.getCurrentState(),ne)},0))},[o,A,N]),q=g.useCallback(ne=>{const M=A.createRect(ne);return setTimeout(()=>{const F=e.find(O=>O.id===M);F&&N.recordCreateShape(F)},0),w&&w("select"),M},[A,e,N,w]),Z=g.useCallback(ne=>{switch(ne){case"save":z.saveToFile(),c&&c();break;case"load":z.loadFromFile(),d&&d();break;case"push":z.pushToStorage(),y&&y("push");break;case"pull":z.pullFromStorage(),y&&y("pull");break;case"undo":N.undo();break;case"redo":N.redo();break}},[z,N,c,d,y]);Bn.useEffect(()=>{_&&typeof _=="string"&&Z(_)},[_,Z]);const at=g.useCallback(()=>{const ne=window.innerWidth-40,M=window.innerHeight-40,F=ne/qt,O=M/Xt;return{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${Math.min(F,O,1)})`,transformOrigin:"center",width:`${qt}px`,height:`${Xt}px`,border:"1px solid #ccc",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",backgroundColor:"white"}},[]),$e=g.useRef(null);return g.useEffect(()=>{$e.current&&(window.clearTimeout($e.current),$e.current=null)},[t]),x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#f5f5f5",overflow:"hidden"},children:x.jsxs("div",{style:at(),children:[x.jsx(ak,{shapes:e,selectedId:o,gridSize:s,showGrid:C}),x.jsx(uk,{strokes:n}),x.jsx(ck,{tool:t,shapes:e,penColor:r,penSize:i,gridSize:s,selectedId:o,onToolChange:w,onStartStroke:H,onAddPointToStroke:K,onFinishStroke:Ce,onEraseAtPoint:P,onSelectShape:A.selectShape,onCreateRect:q,currentStrokeId:S,onDeleteSelectedShape:j,onDuplicateSelectedShape:B,onMoveShape:b,onResizeShape:b,setShapes:l})]})})},dk=({currentTool:t,onToolChange:e,onCommand:n,gridSize:r,onGridSizeChange:i,penColor:s,onPenColorChange:o,penSize:l,onPenSizeChange:a,showGrid:u=!0,onShowGridChange:f})=>{const[c,d]=g.useState(!1),y=[16,40,64,100,128],_=[{command:"select",label:"",icon:""},{command:"pen",label:"",icon:""},{command:"eraser",label:"",icon:""},{command:"rect",label:"",icon:""}],w=[{command:"undo",label:"",icon:""},{command:"redo",label:"",icon:""},{command:"image",label:"",icon:""}],C=[{command:"save",label:"",icon:""},{command:"load",label:"",icon:""},{command:"settings",label:"",icon:""}],p=[{command:"push",label:"Push",icon:""},{command:"pull",label:"Pull",icon:""}];return x.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},children:x.jsxs("div",{style:{position:"absolute",top:"20px",left:"20px",width:"280px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",padding:"16px",display:"flex",flexDirection:"column",gap:"16px",pointerEvents:"auto"},children:[x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[x.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:" "}),x.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:_.map(({command:h,label:m,icon:v})=>x.jsxs("button",{onClick:()=>e(h),style:{padding:"14px 0 8px 0",border:t===h?"2px solid #0066ff":"1px solid #ccc",borderRadius:"10px",backgroundColor:t===h?"#f0f8ff":"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"54px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:m,children:[x.jsx("span",{style:{fontSize:"24px"},children:v}),x.jsx("span",{children:m})]},h))})]}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[x.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:" "}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#555",minWidth:"40px"},children:":"}),x.jsx("input",{type:"color",value:s,onChange:h=>o==null?void 0:o(h.target.value),style:{width:"40px",height:"40px",border:"1px solid #ccc",borderRadius:"8px",padding:"2px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#555",minWidth:"40px"},children:":"}),x.jsx("input",{type:"range",min:"1",max:"20",value:l,onChange:h=>a==null?void 0:a(Number(h.target.value)),style:{flex:1}}),x.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"#555",minWidth:"24px",textAlign:"right"},children:l})]})]})]}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[x.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:""}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[x.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:w.map(({command:h,label:m,icon:v})=>x.jsxs("button",{onClick:()=>n(h),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:m,children:[x.jsx("span",{style:{fontSize:"22px"},children:v}),x.jsx("span",{children:m})]},h))}),x.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:C.map(({command:h,label:m,icon:v})=>x.jsxs("button",{onClick:()=>n(h),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:m,children:[x.jsx("span",{style:{fontSize:"22px"},children:v}),x.jsx("span",{children:m})]},h))}),x.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:p.map(({command:h,label:m,icon:v})=>x.jsxs("button",{onClick:()=>n(h),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:m,children:[x.jsx("span",{style:{fontSize:"22px"},children:v}),x.jsx("span",{children:m})]},h))})]})]}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[x.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:""}),x.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:[x.jsxs("div",{style:{position:"relative",flex:1,minWidth:"90px"},children:[x.jsxs("button",{onClick:()=>d(!c),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",width:"100%",boxSizing:"border-box",fontWeight:600},title:` (: ${r}px)`,children:[x.jsx("span",{style:{fontSize:"22px"},children:""}),x.jsx("span",{children:""}),x.jsxs("span",{style:{fontSize:"11px",color:"#888"},children:[r,"px"]})]}),c&&x.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1.5px solid #ccc",borderRadius:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:1001,marginTop:"2px"},children:[x.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsx("span",{style:{fontSize:"14px",color:"#333"},children:" "}),x.jsxs("label",{style:{position:"relative",display:"inline-block",width:"40px",height:"20px"},children:[x.jsx("input",{type:"checkbox",checked:u,onChange:h=>f==null?void 0:f(h.target.checked),style:{opacity:0,width:0,height:0}}),x.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:u?"#0066ff":"#ccc",transition:".4s",borderRadius:"20px"},children:x.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",transition:".4s",borderRadius:"50%",transform:u?"translateX(20px)":"translateX(0)"}})})]})]}),y.map(h=>x.jsxs("button",{onClick:()=>{i==null||i(h),d(!1)},style:{width:"100%",padding:"12px",border:"none",backgroundColor:r===h?"#f0f8ff":"white",color:r===h?"#0066ff":"#333",cursor:"pointer",fontSize:"14px",textAlign:"left",borderBottom:"1px solid #eee"},children:[h,"px"]},h))]})]}),x.jsxs("button",{onClick:()=>n("settings"),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:"",children:[x.jsx("span",{style:{fontSize:"22px"},children:""}),x.jsx("span",{children:""})]})]})]})]})})},fk=({selectedShape:t,onUpdateShape:e,onDeleteShape:n,onDuplicateShape:r,onBringToFront:i,onSendToBack:s,onMoveForward:o,onMoveBackward:l})=>{var a,u,f,c,d,y,_,w;return t?x.jsxs("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:1e3,backgroundColor:"white",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",minWidth:"200px"},children:[x.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px",color:"#333"},children:" "}),x.jsxs("div",{style:{marginBottom:"15px"},children:[x.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:" "}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("span",{style:{fontSize:"11px",color:"#666"},children:t.type})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"X:"}),x.jsx("input",{type:"number",value:t.x,onChange:C=>e("x",Number(C.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"Y:"}),x.jsx("input",{type:"number",value:t.y,onChange:C=>e("y",Number(C.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("input",{type:"number",value:t.width||100,onChange:C=>e("width",Number(C.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("input",{type:"number",value:t.height||60,onChange:C=>e("height",Number(C.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]})]})]}),t.type==="rect"&&x.jsxs("div",{style:{marginBottom:"15px"},children:[x.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:" "}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("input",{type:"color",value:t.fill||"#ffffff",onChange:C=>e("fill",C.target.value),style:{width:"30px",height:"20px",border:"none",borderRadius:"3px"}})]})]}),t.type==="text"&&x.jsxs("div",{style:{marginBottom:"15px"},children:[x.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:" "}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("input",{type:"text",value:t.text||"Text",onChange:C=>e("text",C.target.value),style:{flex:1,padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("input",{type:"number",value:t.fontSize||16,onChange:C=>e("fontSize",Number(C.target.value)),min:"8",max:"72",style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsxs("div",{style:{display:"flex",gap:"5px"},children:[x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px"},children:[x.jsx("input",{type:"checkbox",checked:t.fontWeight==="bold",onChange:C=>e("fontWeight",C.target.checked?"bold":"normal")}),"Bold"]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px"},children:[x.jsx("input",{type:"checkbox",checked:t.fontStyle==="italic",onChange:C=>e("fontStyle",C.target.checked?"italic":"normal")}),"Italic"]})]})]}),t.fill!==void 0&&x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("label",{style:{fontSize:"11px",width:"40px"},children:":"}),x.jsx("input",{type:"color",value:t.fill||"#ffffff",onChange:C=>e("fill",C.target.value),style:{width:"30px",height:"20px",border:"none",borderRadius:"3px"}})]})]})]}),x.jsxs("div",{style:{marginBottom:"15px"},children:[x.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:" "}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[x.jsx("input",{type:"checkbox",checked:((a=t.meta)==null?void 0:a.isMovable)!==!1,onChange:C=>e("meta",{...t.meta,isMovable:C.target.checked})})," "]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[x.jsx("input",{type:"checkbox",checked:((u=t.meta)==null?void 0:u.isDeletable)!==!1,onChange:C=>e("meta",{...t.meta,isDeletable:C.target.checked})})," "]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[x.jsx("input",{type:"checkbox",checked:((f=t.meta)==null?void 0:f.isResizable)!==!1,onChange:C=>e("meta",{...t.meta,isResizable:C.target.checked})}),"  "]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[x.jsx("input",{type:"checkbox",checked:((c=t.meta)==null?void 0:c.isErasable)===!0,onChange:C=>e("meta",{...t.meta,isErasable:C.target.checked})}),"  "]})]})]}),x.jsxs("div",{style:{marginBottom:"15px"},children:[x.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:" "}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px"},children:[x.jsx("button",{onClick:()=>i==null?void 0:i(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:" "}),x.jsx("button",{onClick:()=>s==null?void 0:s(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:" "}),x.jsx("button",{onClick:()=>o==null?void 0:o(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:""}),x.jsx("button",{onClick:()=>l==null?void 0:l(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:""})]})]}),x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.jsx("button",{onClick:r,style:{flex:1,padding:"6px 8px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:""}),x.jsx("button",{onClick:n,disabled:((d=t.meta)==null?void 0:d.isDeletable)===!1,style:{flex:1,padding:"6px 8px",fontSize:"11px",border:"1px solid #ff4444",borderRadius:"4px",backgroundColor:((y=t.meta)==null?void 0:y.isDeletable)===!1?"#f5f5f5":"#ffe6e6",color:((_=t.meta)==null?void 0:_.isDeletable)===!1?"#ccc":"#ff4444",cursor:((w=t.meta)==null?void 0:w.isDeletable)===!1?"not-allowed":"pointer"},children:""})]})]}):null},Ly=t=>({onDrawEnd:t.onDrawEnd,onMoveShape:t.onMoveShape,onResizeShape:t.onResizeShape,onUpdateShape:t.onUpdateShape,onDeleteShape:t.onDeleteShape});function hk(t,e){const n=new Map;for(const r of t)!r.id||!r.updatedAt||n.set(r.id,r);for(const r of e){if(!r.id||!r.updatedAt)continue;const i=n.get(r.id);if(r.deleted){(!i||r.updatedAt&&(!i.updatedAt||r.updatedAt>i.updatedAt))&&n.delete(r.id);continue}(!i||r.updatedAt&&(!i.updatedAt||r.updatedAt>i.updatedAt))&&n.set(r.id,r)}return Array.from(n.values())}const pk=()=>{const[t,e]=g.useState("select"),[n,r]=g.useState([]),[i,s]=g.useState([]),[o,l]=g.useState(null),[a,u]=g.useState(ng),[f,c]=g.useState(rg),[d,y]=g.useState(ig),[_,w]=g.useState(!0),C=n.find(N=>N.id===o)||null,p=Dy({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l}),h=fd({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onClearHistory:p.clearHistory}),m=by({shapes:n,setShapes:r,selectedId:o,setSelectedId:l,gridSize:d}),v=Bn.useMemo(()=>Ly({onDrawEnd:()=>{He()&&dd(i)},onMoveShape:(N,z)=>{if(He()){const D="admin";ze({[`shapes/${N}/x`]:z.x,[`shapes/${N}/y`]:z.y,[`shapes/${N}/updatedAt`]:Date.now(),[`shapes/${N}/updatedBy`]:D})}},onResizeShape:(N,z)=>{if(He()){const D="admin";ze({[`shapes/${N}/width`]:z.width,[`shapes/${N}/height`]:z.height,...z.x!==void 0?{[`shapes/${N}/x`]:z.x}:{},...z.y!==void 0?{[`shapes/${N}/y`]:z.y}:{},[`shapes/${N}/updatedAt`]:Date.now(),[`shapes/${N}/updatedBy`]:D})}},onUpdateShape:(N,z,D)=>{if(He()){if(z==="selected")return;const A="admin";ze({[`shapes/${N}/${z}`]:D,[`shapes/${N}/updatedAt`]:Date.now(),[`shapes/${N}/updatedBy`]:A})}},onDeleteShape:N=>{if(He()){const z="admin";ze({[`shapes/${N}`]:{id:N,deleted:!0,updatedAt:Date.now(),updatedBy:z}})}}}),[i]),E=g.useCallback(N=>{e(N)},[]),S=g.useCallback(N=>{y(N)},[]),k=g.useCallback(N=>{switch(N){case"text":const z=m.createText({x:1080,y:1920}," ");p.recordCreateShape(n.find(K=>K.id===z)),e("select");break;case"image":const D=document.createElement("input");D.type="file",D.accept="image/*",D.onchange=K=>{var P;const Ce=(P=K.target.files)==null?void 0:P[0];if(Ce){const j=new FileReader;j.onload=B=>{var Z;const q=(Z=B.target)==null?void 0:Z.result;if(q){const at=m.createImage({x:1080,y:1920},q);p.recordCreateShape(n.find($e=>$e.id===at)),e("select")}},j.readAsDataURL(Ce)}},D.click();break;case"save":h.saveToFile();break;case"load":h.loadFromFile();break;case"push":h.pushToFirebase();break;case"pull":h.pullFromStorage();break;case"undo":p.undo();break;case"redo":p.redo();break;case"settings":const A=prompt("   (: #FF0000):",a);A&&u(A);const H=prompt("   (1-20):",f.toString());if(H){const K=parseInt(H);!isNaN(K)&&K>=1&&K<=20&&c(K)}break}},[m,p,h,n,a,f]),I=g.useCallback((N,z)=>{var A;if(!o)return;const D=n.find(H=>H.id===o);D&&(m.updateShapeProperty(o,N,z),(A=v.onUpdateShape)==null||A.call(v,o,N,z),setTimeout(()=>{const H=n.find(K=>K.id===o);H&&p.recordUpdateShape(o,D,H)},0))},[o,m,n,p,v]),$=g.useCallback(()=>{if(!o)return;p.recordDeleteShape(o),m.deleteSelectedShape();const N=v==null?void 0:v.onDeleteShape;typeof N=="function"&&N(o)},[o,p,m,v]),b=g.useCallback(()=>{if(!o)return;const N=p.getCurrentState();m.duplicateShape(o),setTimeout(()=>{const z=p.getCurrentState();p.recordBatchAction(N,z)},0)},[o,m,p]);return g.useEffect(()=>{if(!He())return;const N=Ny(z=>{z.type==="shapes"?r(D=>hk(D,z.shapes)):z.type==="strokes"&&s(z.strokes)},z=>{console.warn("[AdminPage] Firebase   ",z)});return()=>N()},[]),x.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",backgroundColor:"#f5f5f5",margin:0,padding:0,overflow:"hidden"},children:[x.jsx("div",{style:{position:"absolute",top:"20px",right:"280px",zIndex:1001,padding:"8px 16px",backgroundColor:"#007acc",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"bold"},children:" "}),x.jsx(dk,{currentTool:t,onToolChange:E,onCommand:k,gridSize:d,onGridSizeChange:S,penColor:a,onPenColorChange:u,penSize:f,onPenSizeChange:c,showGrid:_,onShowGridChange:w}),x.jsx(fk,{selectedShape:C,onUpdateShape:I,onDeleteShape:$,onDuplicateShape:b,onBringToFront:m.bringToFront,onSendToBack:m.sendToBack,onMoveForward:m.moveForward,onMoveBackward:m.moveBackward}),x.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"},children:x.jsx(Ay,{tool:t,shapes:n,strokes:i,penColor:a,penSize:f,gridSize:d,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onToolChange:E,showGrid:_,userId:"admin",onMoveShape:v.onMoveShape,onResizeShape:v.onResizeShape})})]})};function mk(t,e){const n=new Map;for(const r of t)n.set(r.id,r);for(const r of e){const i=n.get(r.id);(!i||r.updatedAt&&(!i.updatedAt||r.updatedAt>i.updatedAt))&&n.set(r.id,r)}return Array.from(n.values())}const gk=()=>{const[t,e]=g.useState("select"),[n,r]=g.useState([]),[i,s]=g.useState([]),[o,l]=g.useState(null),[a,u]=g.useState(ng),[f,c]=g.useState(rg),d=ig,[y,_]=g.useState(()=>{const A=localStorage.getItem("viewpage-toolbar-state");if(A)try{return JSON.parse(A)}catch{console.warn("Failed to parse toolbar state from localStorage")}return{x:50,y:50,width:600,height:80,opacity:.5}}),[w,C]=g.useState(!1),[p,h]=g.useState(!1),[m,v]=g.useState({x:0,y:0}),[E,S]=g.useState({x:0,y:0,width:0,height:0}),k=g.useRef(null),I=fd({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,silent:!0});g.useEffect(()=>{localStorage.setItem("viewpage-toolbar-state",JSON.stringify(y))},[y]);const $=g.useCallback(A=>{const Ce=window.innerWidth-20,P=window.innerHeight-20;let{x:j,y:B,width:q,height:Z,opacity:at}=A;return q=Math.max(200,Math.min(q,Ce)),Z=Math.max(100,Math.min(Z,P)),j=Math.max(10,Math.min(j,window.innerWidth-q-10)),B=Math.max(10,Math.min(B,window.innerHeight-Z-10)),{x:j,y:B,width:q,height:Z,opacity:at}},[]),b=g.useCallback(A=>{p||(C(!0),v({x:A.clientX-y.x,y:A.clientY-y.y}),A.preventDefault())},[y.x,y.y,p]),N=g.useCallback(A=>{h(!0),S({x:A.clientX,y:A.clientY,width:y.width,height:y.height}),A.preventDefault(),A.stopPropagation()},[y.width,y.height]);g.useEffect(()=>{const A=K=>{if(w){const Ce={...y,x:K.clientX-m.x,y:K.clientY-m.y};_(Ce)}else if(p){const Ce=K.clientX-E.x,P=K.clientY-E.y,j={...y,width:E.width+Ce,height:E.height+P};_($(j))}},H=()=>{(w||p)&&(_(K=>$(K)),C(!1),h(!1))};if(w||p)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",H),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",H)}},[w,p,m,E,y,$]),Bn.useEffect(()=>{He()||(console.log("[ViewPage] Firebase , localStorage  "),I.pullFromStorage())},[I]),Bn.useEffect(()=>{if(!He()){const A=setTimeout(()=>{console.log("[ViewPage] localStorage   "),I.pushToStorage()},1e3);return()=>clearTimeout(A)}},[n,i,I]),g.useEffect(()=>{if(!He())return;const A=Ny(H=>{H.type==="shapes"?r(K=>mk(K,H.shapes)):H.type==="strokes"&&s(H.strokes)},H=>{console.warn("[ViewPage] Firebase   ",H)});return()=>A()},[]);const z=g.useCallback(A=>{(A==="pen"||A==="eraser"||A==="select")&&e(A)},[]),D=Bn.useMemo(()=>Ly({onDrawEnd:()=>{He()&&dd(i)},onMoveShape:(A,H)=>{if(He()){const K="viewer";ze({[`shapes/${A}/x`]:H.x,[`shapes/${A}/y`]:H.y,[`shapes/${A}/updatedAt`]:Date.now(),[`shapes/${A}/updatedBy`]:K})}},onResizeShape:(A,H)=>{if(He()){const K="viewer";ze({[`shapes/${A}/width`]:H.width,[`shapes/${A}/height`]:H.height,...H.x!==void 0?{[`shapes/${A}/x`]:H.x}:{},...H.y!==void 0?{[`shapes/${A}/y`]:H.y}:{},[`shapes/${A}/updatedAt`]:Date.now(),[`shapes/${A}/updatedBy`]:K})}},onUpdateShape:(A,H,K)=>{if(He()){if(H==="selected")return;const Ce="viewer";ze({[`shapes/${A}/${H}`]:K,[`shapes/${A}/updatedAt`]:Date.now(),[`shapes/${A}/updatedBy`]:Ce})}},onDeleteShape:A=>{if(He()){const H="viewer";ze({[`shapes/${A}`]:{id:A,deleted:!0,updatedAt:Date.now(),updatedBy:H}})}}}),[i]);return x.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",backgroundColor:"#f5f5f5",margin:0,padding:0,overflow:"hidden"},children:[x.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"},children:x.jsx(Ay,{tool:t,shapes:n,strokes:i,penColor:a,penSize:f,gridSize:d,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onToolChange:z,showGrid:!1,userId:"viewer",onMoveShape:D.onMoveShape,onResizeShape:D.onResizeShape})}),x.jsxs("div",{ref:k,style:{position:"fixed",left:`${y.x}px`,top:`${y.y}px`,width:`${y.width}px`,height:`${y.height}px`,zIndex:2e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"1px solid rgba(221, 221, 221, 0.8)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",opacity:y.opacity,display:"flex",flexDirection:"column",userSelect:"none"},children:[x.jsx("div",{style:{height:"24px",backgroundColor:"rgba(0, 102, 255, 0.1)",borderRadius:"12px 12px 0 0",cursor:w?"grabbing":"grab",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(221, 221, 221, 0.5)"},onMouseDown:b,children:x.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(0, 102, 255, 0.3)",borderRadius:"2px"}})}),x.jsxs("div",{style:{flex:1,padding:"8px 12px",display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[x.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[x.jsx("button",{onClick:()=>z("select"),style:{padding:"6px",border:t==="select"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:t==="select"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"",children:x.jsx("span",{style:{fontSize:"16px"},children:""})}),x.jsx("button",{onClick:()=>z("pen"),style:{padding:"6px",border:t==="pen"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:t==="pen"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"",children:x.jsx("span",{style:{fontSize:"16px"},children:""})}),x.jsx("button",{onClick:()=>z("eraser"),style:{padding:"6px",border:t==="eraser"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:t==="eraser"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"",children:x.jsx("span",{style:{fontSize:"16px"},children:""})})]}),x.jsx("div",{style:{width:"1px",height:"25px",backgroundColor:"rgba(204, 204, 204, 0.6)"}}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[x.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#666"},children:":"}),x.jsx("input",{type:"color",value:a,onChange:A=>u(A.target.value),style:{width:"28px",height:"20px",border:"none",borderRadius:"3px"}})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[x.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#666"},children:":"}),x.jsx("input",{type:"range",min:"1",max:"20",value:f,onChange:A=>c(Number(A.target.value)),style:{width:"50px"}}),x.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",minWidth:"18px",color:"#666"},children:f})]}),x.jsx("div",{style:{width:"1px",height:"25px",backgroundColor:"rgba(204, 204, 204, 0.6)"}}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[x.jsx("label",{style:{fontSize:"8px",fontWeight:"bold",color:"#666"},children:""}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[x.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:y.opacity,onChange:A=>_(H=>({...H,opacity:Number(A.target.value)})),style:{width:"50px"}}),x.jsxs("span",{style:{fontSize:"9px",fontWeight:"bold",minWidth:"25px",color:"#666"},children:[Math.round(y.opacity*100),"%"]})]})]})]}),x.jsx("div",{style:{position:"absolute",bottom:"0",right:"0",width:"16px",height:"16px",cursor:"nw-resize",background:"linear-gradient(-45deg, transparent 30%, rgba(0, 102, 255, 0.3) 30%, rgba(0, 102, 255, 0.3) 70%, transparent 70%)",borderRadius:"0 0 12px 0"},onMouseDown:N,children:x.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"12px",height:"12px",background:"repeating-linear-gradient(-45deg, rgba(0, 102, 255, 0.2) 0px, rgba(0, 102, 255, 0.2) 2px, transparent 2px, transparent 4px)"}})})]})]})},yk=()=>x.jsx(Dw,{children:x.jsxs(aw,{children:[x.jsx(Ks,{path:"/admin",element:x.jsx(pk,{})}),x.jsx(Ks,{path:"/view",element:x.jsx(gk,{})}),x.jsx(Ks,{path:"*",element:x.jsx(ow,{to:"/view",replace:!0})})]})}),_k=oa.createRoot(document.getElementById("root"));_k.render(x.jsx(Bn.StrictMode,{children:x.jsx(yk,{})}));
