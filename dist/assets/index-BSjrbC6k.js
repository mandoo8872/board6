(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Sg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xf={exports:{}},go={},kf={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=Symbol.for("react.element"),xg=Symbol.for("react.portal"),kg=Symbol.for("react.fragment"),Ig=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),Rg=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),Pg=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Ag=Symbol.for("react.memo"),bg=Symbol.for("react.lazy"),_c=Symbol.iterator;function Og(t){return t===null||typeof t!="object"?null:(t=_c&&t[_c]||t["@@iterator"],typeof t=="function"?t:null)}var If={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tf=Object.assign,Rf={};function Er(t,e,n){this.props=t,this.context=e,this.refs=Rf,this.updater=n||If}Er.prototype.isReactComponent={};Er.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Er.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nf(){}Nf.prototype=Er.prototype;function ja(t,e,n){this.props=t,this.context=e,this.refs=Rf,this.updater=n||If}var Ba=ja.prototype=new Nf;Ba.constructor=ja;Tf(Ba,Er.prototype);Ba.isPureReactComponent=!0;var yc=Array.isArray,Pf=Object.prototype.hasOwnProperty,Wa={current:null},Df={key:!0,ref:!0,__self:!0,__source:!0};function Af(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Pf.call(e,r)&&!Df.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Li,type:t,key:s,ref:o,props:i,_owner:Wa.current}}function Mg(t,e){return{$$typeof:Li,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ua(t){return typeof t=="object"&&t!==null&&t.$$typeof===Li}function Lg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vc=/\/+/g;function Uo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lg(""+t.key):e.toString(36)}function hs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Li:case xg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Uo(o,0):r,yc(i)?(n="",t!=null&&(n=t.replace(vc,"$&/")+"/"),hs(i,e,n,"",function(u){return u})):i!=null&&(Ua(i)&&(i=Mg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",yc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Uo(s,l);o+=hs(s,e,n,a,i)}else if(a=Og(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Uo(s,l++),o+=hs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yi(t,e,n){if(t==null)return t;var r=[],i=0;return hs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Fg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Le={current:null},ps={transition:null},zg={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ps,ReactCurrentOwner:Wa};function bf(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:Yi,forEach:function(t,e,n){Yi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yi(t,function(){e++}),e},toArray:function(t){return Yi(t,function(e){return e})||[]},only:function(t){if(!Ua(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=Er;$.Fragment=kg;$.Profiler=Tg;$.PureComponent=ja;$.StrictMode=Ig;$.Suspense=Dg;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg;$.act=bf;$.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tf({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Pf.call(e,a)&&!Df.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Li,type:t.type,key:i,ref:s,props:r,_owner:o}};$.createContext=function(t){return t={$$typeof:Ng,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rg,_context:t},t.Consumer=t};$.createElement=Af;$.createFactory=function(t){var e=Af.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:Pg,render:t}};$.isValidElement=Ua;$.lazy=function(t){return{$$typeof:bg,_payload:{_status:-1,_result:t},_init:Fg}};$.memo=function(t,e){return{$$typeof:Ag,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=ps.transition;ps.transition={};try{t()}finally{ps.transition=e}};$.unstable_act=bf;$.useCallback=function(t,e){return Le.current.useCallback(t,e)};$.useContext=function(t){return Le.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Le.current.useDeferredValue(t)};$.useEffect=function(t,e){return Le.current.useEffect(t,e)};$.useId=function(){return Le.current.useId()};$.useImperativeHandle=function(t,e,n){return Le.current.useImperativeHandle(t,e,n)};$.useInsertionEffect=function(t,e){return Le.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Le.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Le.current.useMemo(t,e)};$.useReducer=function(t,e,n){return Le.current.useReducer(t,e,n)};$.useRef=function(t){return Le.current.useRef(t)};$.useState=function(t){return Le.current.useState(t)};$.useSyncExternalStore=function(t,e,n){return Le.current.useSyncExternalStore(t,e,n)};$.useTransition=function(){return Le.current.useTransition()};$.version="18.3.1";kf.exports=$;var S=kf.exports;const ui=Sg(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg=S,Bg=Symbol.for("react.element"),Wg=Symbol.for("react.fragment"),Ug=Object.prototype.hasOwnProperty,Hg=jg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vg={key:!0,ref:!0,__self:!0,__source:!0};function Of(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ug.call(e,r)&&!Vg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Bg,type:t,key:s,ref:o,props:i,_owner:Hg.current}}go.Fragment=Wg;go.jsx=Of;go.jsxs=Of;xf.exports=go;var C=xf.exports,Il={},Mf={exports:{}},Je={},Lf={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,b){var A=P.length;P.push(b);e:for(;0<A;){var T=A-1>>>1,D=P[T];if(0<i(D,b))P[T]=b,P[A]=D,A=T;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var b=P[0],A=P.pop();if(A!==b){P[0]=A;e:for(var T=0,D=P.length,z=D>>>1;T<z;){var B=2*(T+1)-1,G=P[B],K=B+1,ot=P[K];if(0>i(G,A))K<D&&0>i(ot,G)?(P[T]=ot,P[K]=A,T=K):(P[T]=G,P[B]=A,T=B);else if(K<D&&0>i(ot,A))P[T]=ot,P[K]=A,T=K;else break e}}return b}function i(P,b){var A=P.sortIndex-b.sortIndex;return A!==0?A:P.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,d=null,c=3,g=!1,_=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var b=n(u);b!==null;){if(b.callback===null)r(u);else if(b.startTime<=P)r(u),b.sortIndex=b.expirationTime,e(a,b);else break;b=n(u)}}function y(P){if(E=!1,m(P),!_)if(n(a)!==null)_=!0,ge(v);else{var b=n(u);b!==null&&ze(y,b.startTime-P)}}function v(P,b){_=!1,E&&(E=!1,p(x),x=-1),g=!0;var A=c;try{for(m(b),d=n(a);d!==null&&(!(d.expirationTime>b)||P&&!W());){var T=d.callback;if(typeof T=="function"){d.callback=null,c=d.priorityLevel;var D=T(d.expirationTime<=b);b=t.unstable_now(),typeof D=="function"?d.callback=D:d===n(a)&&r(a),m(b)}else r(a);d=n(a)}if(d!==null)var z=!0;else{var B=n(u);B!==null&&ze(y,B.startTime-b),z=!1}return z}finally{d=null,c=A,g=!1}}var w=!1,k=null,x=-1,M=5,L=-1;function W(){return!(t.unstable_now()-L<M)}function he(){if(k!==null){var P=t.unstable_now();L=P;var b=!0;try{b=k(!0,P)}finally{b?F():(w=!1,k=null)}}else w=!1}var F;if(typeof h=="function")F=function(){h(he)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,me=se.port2;se.port1.onmessage=he,F=function(){me.postMessage(null)}}else F=function(){I(he,0)};function ge(P){k=P,w||(w=!0,F())}function ze(P,b){x=I(function(){P(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,ge(v))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(c){case 1:case 2:case 3:var b=3;break;default:b=c}var A=c;c=b;try{return P()}finally{c=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,b){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var A=c;c=P;try{return b()}finally{c=A}},t.unstable_scheduleCallback=function(P,b,A){var T=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?T+A:T):A=T,P){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=A+D,P={id:f++,callback:b,priorityLevel:P,startTime:A,expirationTime:D,sortIndex:-1},A>T?(P.sortIndex=A,e(u,P),n(a)===null&&P===n(u)&&(E?(p(x),x=-1):E=!0,ze(y,A-T))):(P.sortIndex=D,e(a,P),_||g||(_=!0,ge(v))),P},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(P){var b=c;return function(){var A=c;c=b;try{return P.apply(this,arguments)}finally{c=A}}}})(Ff);Lf.exports=Ff;var $g=Lf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=S,Xe=$g;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zf=new Set,ci={};function Mn(t,e){dr(t,e),dr(t+"Capture",e)}function dr(t,e){for(ci[t]=e,t=0;t<e.length;t++)zf.add(e[t])}var Dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tl=Object.prototype.hasOwnProperty,Qg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wc={},Cc={};function Yg(t){return Tl.call(Cc,t)?!0:Tl.call(wc,t)?!1:Qg.test(t)?Cc[t]=!0:(wc[t]=!0,!1)}function Kg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qg(t,e,n,r){if(e===null||typeof e>"u"||Kg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Re[t]=new Fe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Re[e]=new Fe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Re[t]=new Fe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Re[t]=new Fe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Re[t]=new Fe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Re[t]=new Fe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Re[t]=new Fe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Re[t]=new Fe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Re[t]=new Fe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ha=/[\-:]([a-z])/g;function Va(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ha,Va);Re[e]=new Fe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ha,Va);Re[e]=new Fe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ha,Va);Re[e]=new Fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Re[t]=new Fe(t,1,!1,t.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Re[t]=new Fe(t,1,!1,t.toLowerCase(),null,!0,!0)});function $a(t,e,n,r){var i=Re.hasOwnProperty(e)?Re[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qg(e,n,i,r)&&(n=null),r||i===null?Yg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bt=Gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ki=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Un=Symbol.for("react.fragment"),Ga=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),jf=Symbol.for("react.provider"),Bf=Symbol.for("react.context"),Qa=Symbol.for("react.forward_ref"),Nl=Symbol.for("react.suspense"),Pl=Symbol.for("react.suspense_list"),Ya=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),Wf=Symbol.for("react.offscreen"),Ec=Symbol.iterator;function Nr(t){return t===null||typeof t!="object"?null:(t=Ec&&t[Ec]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,Ho;function Ur(t){if(Ho===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ho=e&&e[1]||""}return`
`+Ho+t}var Vo=!1;function $o(t,e){if(!t||Vo)return"";Vo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Vo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ur(t):""}function Xg(t){switch(t.tag){case 5:return Ur(t.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return t=$o(t.type,!1),t;case 11:return t=$o(t.type.render,!1),t;case 1:return t=$o(t.type,!0),t;default:return""}}function Dl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Un:return"Fragment";case Wn:return"Portal";case Rl:return"Profiler";case Ga:return"StrictMode";case Nl:return"Suspense";case Pl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bf:return(t.displayName||"Context")+".Consumer";case jf:return(t._context.displayName||"Context")+".Provider";case Qa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ya:return e=t.displayName||null,e!==null?e:Dl(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return Dl(t(e))}catch{}}return null}function Jg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dl(e);case 8:return e===Ga?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zg(t){var e=Uf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qi(t){t._valueTracker||(t._valueTracker=Zg(t))}function Hf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Uf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Al(t,e){var n=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vf(t,e){e=e.checked,e!=null&&$a(t,"checked",e,!1)}function bl(t,e){Vf(t,e);var n=ln(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ol(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ol(t,e.type,ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ol(t,e,n){(e!=="number"||Is(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hr=Array.isArray;function tr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ml(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Hr(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ln(n)}}function $f(t,e){var n=ln(e.value),r=ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ic(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xi,Qf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xi=Xi||document.createElement("div"),Xi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function di(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e_=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(t){e_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gr[e]=Gr[t]})});function Yf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gr.hasOwnProperty(t)&&Gr[t]?(""+e).trim():e+"px"}function Kf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Yf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var t_=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fl(t,e){if(e){if(t_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function zl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=null;function Ka(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bl=null,nr=null,rr=null;function Tc(t){if(t=ji(t)){if(typeof Bl!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Co(e),Bl(t.stateNode,t.type,e))}}function qf(t){nr?rr?rr.push(t):rr=[t]:nr=t}function Xf(){if(nr){var t=nr,e=rr;if(rr=nr=null,Tc(t),e)for(t=0;t<e.length;t++)Tc(e[t])}}function Jf(t,e){return t(e)}function Zf(){}var Go=!1;function eh(t,e,n){if(Go)return t(e,n);Go=!0;try{return Jf(t,e,n)}finally{Go=!1,(nr!==null||rr!==null)&&(Zf(),Xf())}}function fi(t,e){var n=t.stateNode;if(n===null)return null;var r=Co(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Wl=!1;if(Dt)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Wl=!1}function n_(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var Qr=!1,Ts=null,Rs=!1,Ul=null,r_={onError:function(t){Qr=!0,Ts=t}};function i_(t,e,n,r,i,s,o,l,a){Qr=!1,Ts=null,n_.apply(r_,arguments)}function s_(t,e,n,r,i,s,o,l,a){if(i_.apply(this,arguments),Qr){if(Qr){var u=Ts;Qr=!1,Ts=null}else throw Error(R(198));Rs||(Rs=!0,Ul=u)}}function Ln(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function th(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rc(t){if(Ln(t)!==t)throw Error(R(188))}function o_(t){var e=t.alternate;if(!e){if(e=Ln(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Rc(i),t;if(s===r)return Rc(i),e;s=s.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function nh(t){return t=o_(t),t!==null?rh(t):null}function rh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rh(t);if(e!==null)return e;t=t.sibling}return null}var ih=Xe.unstable_scheduleCallback,Nc=Xe.unstable_cancelCallback,l_=Xe.unstable_shouldYield,a_=Xe.unstable_requestPaint,fe=Xe.unstable_now,u_=Xe.unstable_getCurrentPriorityLevel,qa=Xe.unstable_ImmediatePriority,sh=Xe.unstable_UserBlockingPriority,Ns=Xe.unstable_NormalPriority,c_=Xe.unstable_LowPriority,oh=Xe.unstable_IdlePriority,_o=null,Ct=null;function d_(t){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(_o,t,void 0,(t.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:p_,f_=Math.log,h_=Math.LN2;function p_(t){return t>>>=0,t===0?32:31-(f_(t)/h_|0)|0}var Ji=64,Zi=4194304;function Vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ps(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Vr(l):(s&=o,s!==0&&(r=Vr(s)))}else o=n&~i,o!==0?r=Vr(o):s!==0&&(r=Vr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pt(e),i=1<<n,r|=t[n],e&=~i;return r}function m_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-pt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=m_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Hl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lh(){var t=Ji;return Ji<<=1,!(Ji&4194240)&&(Ji=64),t}function Qo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pt(e),t[e]=n}function __(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-pt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var q=0;function ah(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uh,Ja,ch,dh,fh,Vl=!1,es=[],Kt=null,qt=null,Xt=null,hi=new Map,pi=new Map,$t=[],y_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pc(t,e){switch(t){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":hi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(e.pointerId)}}function Dr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ji(e),e!==null&&Ja(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function v_(t,e,n,r,i){switch(e){case"focusin":return Kt=Dr(Kt,t,e,n,r,i),!0;case"dragenter":return qt=Dr(qt,t,e,n,r,i),!0;case"mouseover":return Xt=Dr(Xt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return hi.set(s,Dr(hi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pi.set(s,Dr(pi.get(s)||null,t,e,n,r,i)),!0}return!1}function hh(t){var e=vn(t.target);if(e!==null){var n=Ln(e);if(n!==null){if(e=n.tag,e===13){if(e=th(n),e!==null){t.blockedOn=e,fh(t.priority,function(){ch(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ms(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$l(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jl=r,n.target.dispatchEvent(r),jl=null}else return e=ji(n),e!==null&&Ja(e),t.blockedOn=n,!1;e.shift()}return!0}function Dc(t,e,n){ms(t)&&n.delete(e)}function w_(){Vl=!1,Kt!==null&&ms(Kt)&&(Kt=null),qt!==null&&ms(qt)&&(qt=null),Xt!==null&&ms(Xt)&&(Xt=null),hi.forEach(Dc),pi.forEach(Dc)}function Ar(t,e){t.blockedOn===e&&(t.blockedOn=null,Vl||(Vl=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,w_)))}function mi(t){function e(i){return Ar(i,t)}if(0<es.length){Ar(es[0],t);for(var n=1;n<es.length;n++){var r=es[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kt!==null&&Ar(Kt,t),qt!==null&&Ar(qt,t),Xt!==null&&Ar(Xt,t),hi.forEach(e),pi.forEach(e),n=0;n<$t.length;n++)r=$t[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$t.length&&(n=$t[0],n.blockedOn===null);)hh(n),n.blockedOn===null&&$t.shift()}var ir=Bt.ReactCurrentBatchConfig,Ds=!0;function C_(t,e,n,r){var i=q,s=ir.transition;ir.transition=null;try{q=1,Za(t,e,n,r)}finally{q=i,ir.transition=s}}function E_(t,e,n,r){var i=q,s=ir.transition;ir.transition=null;try{q=4,Za(t,e,n,r)}finally{q=i,ir.transition=s}}function Za(t,e,n,r){if(Ds){var i=$l(t,e,n,r);if(i===null)rl(t,e,r,As,n),Pc(t,r);else if(v_(i,t,e,n,r))r.stopPropagation();else if(Pc(t,r),e&4&&-1<y_.indexOf(t)){for(;i!==null;){var s=ji(i);if(s!==null&&uh(s),s=$l(t,e,n,r),s===null&&rl(t,e,r,As,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rl(t,e,r,null,n)}}var As=null;function $l(t,e,n,r){if(As=null,t=Ka(r),t=vn(t),t!==null)if(e=Ln(t),e===null)t=null;else if(n=e.tag,n===13){if(t=th(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return As=t,null}function ph(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u_()){case qa:return 1;case sh:return 4;case Ns:case c_:return 16;case oh:return 536870912;default:return 16}default:return 16}}var Qt=null,eu=null,gs=null;function mh(){if(gs)return gs;var t,e=eu,n=e.length,r,i="value"in Qt?Qt.value:Qt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gs=i.slice(t,1<r?1-r:void 0)}function _s(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ts(){return!0}function Ac(){return!1}function Ze(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ts:Ac,this.isPropagationStopped=Ac,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),e}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tu=Ze(Sr),zi=ae({},Sr,{view:0,detail:0}),S_=Ze(zi),Yo,Ko,br,yo=ae({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==br&&(br&&t.type==="mousemove"?(Yo=t.screenX-br.screenX,Ko=t.screenY-br.screenY):Ko=Yo=0,br=t),Yo)},movementY:function(t){return"movementY"in t?t.movementY:Ko}}),bc=Ze(yo),x_=ae({},yo,{dataTransfer:0}),k_=Ze(x_),I_=ae({},zi,{relatedTarget:0}),qo=Ze(I_),T_=ae({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),R_=Ze(T_),N_=ae({},Sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),P_=Ze(N_),D_=ae({},Sr,{data:0}),Oc=Ze(D_),A_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=O_[t])?!!e[t]:!1}function nu(){return M_}var L_=ae({},zi,{key:function(t){if(t.key){var e=A_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_s(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(t){return t.type==="keypress"?_s(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_s(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F_=Ze(L_),z_=ae({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mc=Ze(z_),j_=ae({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),B_=Ze(j_),W_=ae({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),U_=Ze(W_),H_=ae({},yo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V_=Ze(H_),$_=[9,13,27,32],ru=Dt&&"CompositionEvent"in window,Yr=null;Dt&&"documentMode"in document&&(Yr=document.documentMode);var G_=Dt&&"TextEvent"in window&&!Yr,gh=Dt&&(!ru||Yr&&8<Yr&&11>=Yr),Lc=" ",Fc=!1;function _h(t,e){switch(t){case"keyup":return $_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hn=!1;function Q_(t,e){switch(t){case"compositionend":return yh(e);case"keypress":return e.which!==32?null:(Fc=!0,Lc);case"textInput":return t=e.data,t===Lc&&Fc?null:t;default:return null}}function Y_(t,e){if(Hn)return t==="compositionend"||!ru&&_h(t,e)?(t=mh(),gs=eu=Qt=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gh&&e.locale!=="ko"?null:e.data;default:return null}}var K_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!K_[t.type]:e==="textarea"}function vh(t,e,n,r){qf(r),e=bs(e,"onChange"),0<e.length&&(n=new tu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kr=null,gi=null;function q_(t){Ph(t,0)}function vo(t){var e=Gn(t);if(Hf(e))return t}function X_(t,e){if(t==="change")return e}var wh=!1;if(Dt){var Xo;if(Dt){var Jo="oninput"in document;if(!Jo){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),Jo=typeof jc.oninput=="function"}Xo=Jo}else Xo=!1;wh=Xo&&(!document.documentMode||9<document.documentMode)}function Bc(){Kr&&(Kr.detachEvent("onpropertychange",Ch),gi=Kr=null)}function Ch(t){if(t.propertyName==="value"&&vo(gi)){var e=[];vh(e,gi,t,Ka(t)),eh(q_,e)}}function J_(t,e,n){t==="focusin"?(Bc(),Kr=e,gi=n,Kr.attachEvent("onpropertychange",Ch)):t==="focusout"&&Bc()}function Z_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vo(gi)}function ey(t,e){if(t==="click")return vo(e)}function ty(t,e){if(t==="input"||t==="change")return vo(e)}function ny(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _t=typeof Object.is=="function"?Object.is:ny;function _i(t,e){if(_t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tl.call(e,i)||!_t(t[i],e[i]))return!1}return!0}function Wc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uc(t,e){var n=Wc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wc(n)}}function Eh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Eh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sh(){for(var t=window,e=Is();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Is(t.document)}return e}function iu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ry(t){var e=Sh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Eh(n.ownerDocument.documentElement,n)){if(r!==null&&iu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Uc(n,s);var o=Uc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iy=Dt&&"documentMode"in document&&11>=document.documentMode,Vn=null,Gl=null,qr=null,Ql=!1;function Hc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ql||Vn==null||Vn!==Is(r)||(r=Vn,"selectionStart"in r&&iu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qr&&_i(qr,r)||(qr=r,r=bs(Gl,"onSelect"),0<r.length&&(e=new tu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vn)))}function ns(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $n={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionend:ns("Transition","TransitionEnd")},Zo={},xh={};Dt&&(xh=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);function wo(t){if(Zo[t])return Zo[t];if(!$n[t])return t;var e=$n[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xh)return Zo[t]=e[n];return t}var kh=wo("animationend"),Ih=wo("animationiteration"),Th=wo("animationstart"),Rh=wo("transitionend"),Nh=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){Nh.set(t,e),Mn(e,[t])}for(var el=0;el<Vc.length;el++){var tl=Vc[el],sy=tl.toLowerCase(),oy=tl[0].toUpperCase()+tl.slice(1);dn(sy,"on"+oy)}dn(kh,"onAnimationEnd");dn(Ih,"onAnimationIteration");dn(Th,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(Rh,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ly=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function $c(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,s_(r,e,void 0,t),t.currentTarget=null}function Ph(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;$c(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;$c(i,l,u),s=a}}}if(Rs)throw t=Ul,Rs=!1,Ul=null,t}function te(t,e){var n=e[Jl];n===void 0&&(n=e[Jl]=new Set);var r=t+"__bubble";n.has(r)||(Dh(e,t,2,!1),n.add(r))}function nl(t,e,n){var r=0;e&&(r|=4),Dh(n,t,r,e)}var rs="_reactListening"+Math.random().toString(36).slice(2);function yi(t){if(!t[rs]){t[rs]=!0,zf.forEach(function(n){n!=="selectionchange"&&(ly.has(n)||nl(n,!1,t),nl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rs]||(e[rs]=!0,nl("selectionchange",!1,e))}}function Dh(t,e,n,r){switch(ph(e)){case 1:var i=C_;break;case 4:i=E_;break;default:i=Za}n=i.bind(null,e,n,t),i=void 0,!Wl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=vn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}eh(function(){var u=s,f=Ka(n),d=[];e:{var c=Nh.get(t);if(c!==void 0){var g=tu,_=t;switch(t){case"keypress":if(_s(n)===0)break e;case"keydown":case"keyup":g=F_;break;case"focusin":_="focus",g=qo;break;case"focusout":_="blur",g=qo;break;case"beforeblur":case"afterblur":g=qo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=k_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=B_;break;case kh:case Ih:case Th:g=R_;break;case Rh:g=U_;break;case"scroll":g=S_;break;case"wheel":g=V_;break;case"copy":case"cut":case"paste":g=P_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Mc}var E=(e&4)!==0,I=!E&&t==="scroll",p=E?c!==null?c+"Capture":null:c;E=[];for(var h=u,m;h!==null;){m=h;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,p!==null&&(y=fi(h,p),y!=null&&E.push(vi(h,y,m)))),I)break;h=h.return}0<E.length&&(c=new g(c,_,null,n,f),d.push({event:c,listeners:E}))}}if(!(e&7)){e:{if(c=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",c&&n!==jl&&(_=n.relatedTarget||n.fromElement)&&(vn(_)||_[At]))break e;if((g||c)&&(c=f.window===f?f:(c=f.ownerDocument)?c.defaultView||c.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?vn(_):null,_!==null&&(I=Ln(_),_!==I||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(E=bc,y="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(E=Mc,y="onPointerLeave",p="onPointerEnter",h="pointer"),I=g==null?c:Gn(g),m=_==null?c:Gn(_),c=new E(y,h+"leave",g,n,f),c.target=I,c.relatedTarget=m,y=null,vn(f)===u&&(E=new E(p,h+"enter",_,n,f),E.target=m,E.relatedTarget=I,y=E),I=y,g&&_)t:{for(E=g,p=_,h=0,m=E;m;m=jn(m))h++;for(m=0,y=p;y;y=jn(y))m++;for(;0<h-m;)E=jn(E),h--;for(;0<m-h;)p=jn(p),m--;for(;h--;){if(E===p||p!==null&&E===p.alternate)break t;E=jn(E),p=jn(p)}E=null}else E=null;g!==null&&Gc(d,c,g,E,!1),_!==null&&I!==null&&Gc(d,I,_,E,!0)}}e:{if(c=u?Gn(u):window,g=c.nodeName&&c.nodeName.toLowerCase(),g==="select"||g==="input"&&c.type==="file")var v=X_;else if(zc(c))if(wh)v=ty;else{v=Z_;var w=J_}else(g=c.nodeName)&&g.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(v=ey);if(v&&(v=v(t,u))){vh(d,v,n,f);break e}w&&w(t,c,u),t==="focusout"&&(w=c._wrapperState)&&w.controlled&&c.type==="number"&&Ol(c,"number",c.value)}switch(w=u?Gn(u):window,t){case"focusin":(zc(w)||w.contentEditable==="true")&&(Vn=w,Gl=u,qr=null);break;case"focusout":qr=Gl=Vn=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Hc(d,n,f);break;case"selectionchange":if(iy)break;case"keydown":case"keyup":Hc(d,n,f)}var k;if(ru)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Hn?_h(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(gh&&n.locale!=="ko"&&(Hn||x!=="onCompositionStart"?x==="onCompositionEnd"&&Hn&&(k=mh()):(Qt=f,eu="value"in Qt?Qt.value:Qt.textContent,Hn=!0)),w=bs(u,x),0<w.length&&(x=new Oc(x,t,null,n,f),d.push({event:x,listeners:w}),k?x.data=k:(k=yh(n),k!==null&&(x.data=k)))),(k=G_?Q_(t,n):Y_(t,n))&&(u=bs(u,"onBeforeInput"),0<u.length&&(f=new Oc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=k))}Ph(d,e)})}function vi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fi(t,n),s!=null&&r.unshift(vi(t,s,i)),s=fi(t,e),s!=null&&r.push(vi(t,s,i))),t=t.return}return r}function jn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=fi(n,s),a!=null&&o.unshift(vi(n,a,l))):i||(a=fi(n,s),a!=null&&o.push(vi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ay=/\r\n?/g,uy=/\u0000|\uFFFD/g;function Qc(t){return(typeof t=="string"?t:""+t).replace(ay,`
`).replace(uy,"")}function is(t,e,n){if(e=Qc(e),Qc(t)!==e&&n)throw Error(R(425))}function Os(){}var Yl=null,Kl=null;function ql(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xl=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,Yc=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof Yc<"u"?function(t){return Yc.resolve(null).then(t).catch(fy)}:Xl;function fy(t){setTimeout(function(){throw t})}function il(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mi(e)}function Jt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xr=Math.random().toString(36).slice(2),wt="__reactFiber$"+xr,wi="__reactProps$"+xr,At="__reactContainer$"+xr,Jl="__reactEvents$"+xr,hy="__reactListeners$"+xr,py="__reactHandles$"+xr;function vn(t){var e=t[wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[At]||n[wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kc(t);t!==null;){if(n=t[wt])return n;t=Kc(t)}return e}t=n,n=t.parentNode}return null}function ji(t){return t=t[wt]||t[At],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Co(t){return t[wi]||null}var Zl=[],Qn=-1;function fn(t){return{current:t}}function re(t){0>Qn||(t.current=Zl[Qn],Zl[Qn]=null,Qn--)}function ee(t,e){Qn++,Zl[Qn]=t.current,t.current=e}var an={},be=fn(an),He=fn(!1),In=an;function fr(t,e){var n=t.type.contextTypes;if(!n)return an;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ve(t){return t=t.childContextTypes,t!=null}function Ms(){re(He),re(be)}function qc(t,e,n){if(be.current!==an)throw Error(R(168));ee(be,e),ee(He,n)}function Ah(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(R(108,Jg(t)||"Unknown",i));return ae({},n,r)}function Ls(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,In=be.current,ee(be,t),ee(He,He.current),!0}function Xc(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=Ah(t,e,In),r.__reactInternalMemoizedMergedChildContext=t,re(He),re(be),ee(be,t)):re(He),ee(He,n)}var kt=null,Eo=!1,sl=!1;function bh(t){kt===null?kt=[t]:kt.push(t)}function my(t){Eo=!0,bh(t)}function hn(){if(!sl&&kt!==null){sl=!0;var t=0,e=q;try{var n=kt;for(q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kt=null,Eo=!1}catch(i){throw kt!==null&&(kt=kt.slice(t+1)),ih(qa,hn),i}finally{q=e,sl=!1}}return null}var Yn=[],Kn=0,Fs=null,zs=0,et=[],tt=0,Tn=null,It=1,Tt="";function mn(t,e){Yn[Kn++]=zs,Yn[Kn++]=Fs,Fs=t,zs=e}function Oh(t,e,n){et[tt++]=It,et[tt++]=Tt,et[tt++]=Tn,Tn=t;var r=It;t=Tt;var i=32-pt(r)-1;r&=~(1<<i),n+=1;var s=32-pt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,It=1<<32-pt(e)+i|n<<i|r,Tt=s+t}else It=1<<s|n<<i|r,Tt=t}function su(t){t.return!==null&&(mn(t,1),Oh(t,1,0))}function ou(t){for(;t===Fs;)Fs=Yn[--Kn],Yn[Kn]=null,zs=Yn[--Kn],Yn[Kn]=null;for(;t===Tn;)Tn=et[--tt],et[tt]=null,Tt=et[--tt],et[tt]=null,It=et[--tt],et[tt]=null}var qe=null,Ke=null,ie=!1,ct=null;function Mh(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qe=t,Ke=Jt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qe=t,Ke=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tn!==null?{id:It,overflow:Tt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qe=t,Ke=null,!0):!1;default:return!1}}function ea(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ta(t){if(ie){var e=Ke;if(e){var n=e;if(!Jc(t,e)){if(ea(t))throw Error(R(418));e=Jt(n.nextSibling);var r=qe;e&&Jc(t,e)?Mh(r,n):(t.flags=t.flags&-4097|2,ie=!1,qe=t)}}else{if(ea(t))throw Error(R(418));t.flags=t.flags&-4097|2,ie=!1,qe=t}}}function Zc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qe=t}function ss(t){if(t!==qe)return!1;if(!ie)return Zc(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ql(t.type,t.memoizedProps)),e&&(e=Ke)){if(ea(t))throw Lh(),Error(R(418));for(;e;)Mh(t,e),e=Jt(e.nextSibling)}if(Zc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ke=Jt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ke=null}}else Ke=qe?Jt(t.stateNode.nextSibling):null;return!0}function Lh(){for(var t=Ke;t;)t=Jt(t.nextSibling)}function hr(){Ke=qe=null,ie=!1}function lu(t){ct===null?ct=[t]:ct.push(t)}var gy=Bt.ReactCurrentBatchConfig;function Or(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function os(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ed(t){var e=t._init;return e(t._payload)}function Fh(t){function e(p,h){if(t){var m=p.deletions;m===null?(p.deletions=[h],p.flags|=16):m.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=nn(p,h),p.index=0,p.sibling=null,p}function s(p,h,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<h?(p.flags|=2,h):m):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,m,y){return h===null||h.tag!==6?(h=fl(m,p.mode,y),h.return=p,h):(h=i(h,m),h.return=p,h)}function a(p,h,m,y){var v=m.type;return v===Un?f(p,h,m.props.children,y,m.key):h!==null&&(h.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===Ht&&ed(v)===h.type)?(y=i(h,m.props),y.ref=Or(p,h,m),y.return=p,y):(y=xs(m.type,m.key,m.props,null,p.mode,y),y.ref=Or(p,h,m),y.return=p,y)}function u(p,h,m,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=hl(m,p.mode,y),h.return=p,h):(h=i(h,m.children||[]),h.return=p,h)}function f(p,h,m,y,v){return h===null||h.tag!==7?(h=kn(m,p.mode,y,v),h.return=p,h):(h=i(h,m),h.return=p,h)}function d(p,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=fl(""+h,p.mode,m),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ki:return m=xs(h.type,h.key,h.props,null,p.mode,m),m.ref=Or(p,null,h),m.return=p,m;case Wn:return h=hl(h,p.mode,m),h.return=p,h;case Ht:var y=h._init;return d(p,y(h._payload),m)}if(Hr(h)||Nr(h))return h=kn(h,p.mode,m,null),h.return=p,h;os(p,h)}return null}function c(p,h,m,y){var v=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return v!==null?null:l(p,h,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ki:return m.key===v?a(p,h,m,y):null;case Wn:return m.key===v?u(p,h,m,y):null;case Ht:return v=m._init,c(p,h,v(m._payload),y)}if(Hr(m)||Nr(m))return v!==null?null:f(p,h,m,y,null);os(p,m)}return null}function g(p,h,m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return p=p.get(m)||null,l(h,p,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ki:return p=p.get(y.key===null?m:y.key)||null,a(h,p,y,v);case Wn:return p=p.get(y.key===null?m:y.key)||null,u(h,p,y,v);case Ht:var w=y._init;return g(p,h,m,w(y._payload),v)}if(Hr(y)||Nr(y))return p=p.get(m)||null,f(h,p,y,v,null);os(h,y)}return null}function _(p,h,m,y){for(var v=null,w=null,k=h,x=h=0,M=null;k!==null&&x<m.length;x++){k.index>x?(M=k,k=null):M=k.sibling;var L=c(p,k,m[x],y);if(L===null){k===null&&(k=M);break}t&&k&&L.alternate===null&&e(p,k),h=s(L,h,x),w===null?v=L:w.sibling=L,w=L,k=M}if(x===m.length)return n(p,k),ie&&mn(p,x),v;if(k===null){for(;x<m.length;x++)k=d(p,m[x],y),k!==null&&(h=s(k,h,x),w===null?v=k:w.sibling=k,w=k);return ie&&mn(p,x),v}for(k=r(p,k);x<m.length;x++)M=g(k,p,x,m[x],y),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?x:M.key),h=s(M,h,x),w===null?v=M:w.sibling=M,w=M);return t&&k.forEach(function(W){return e(p,W)}),ie&&mn(p,x),v}function E(p,h,m,y){var v=Nr(m);if(typeof v!="function")throw Error(R(150));if(m=v.call(m),m==null)throw Error(R(151));for(var w=v=null,k=h,x=h=0,M=null,L=m.next();k!==null&&!L.done;x++,L=m.next()){k.index>x?(M=k,k=null):M=k.sibling;var W=c(p,k,L.value,y);if(W===null){k===null&&(k=M);break}t&&k&&W.alternate===null&&e(p,k),h=s(W,h,x),w===null?v=W:w.sibling=W,w=W,k=M}if(L.done)return n(p,k),ie&&mn(p,x),v;if(k===null){for(;!L.done;x++,L=m.next())L=d(p,L.value,y),L!==null&&(h=s(L,h,x),w===null?v=L:w.sibling=L,w=L);return ie&&mn(p,x),v}for(k=r(p,k);!L.done;x++,L=m.next())L=g(k,p,x,L.value,y),L!==null&&(t&&L.alternate!==null&&k.delete(L.key===null?x:L.key),h=s(L,h,x),w===null?v=L:w.sibling=L,w=L);return t&&k.forEach(function(he){return e(p,he)}),ie&&mn(p,x),v}function I(p,h,m,y){if(typeof m=="object"&&m!==null&&m.type===Un&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ki:e:{for(var v=m.key,w=h;w!==null;){if(w.key===v){if(v=m.type,v===Un){if(w.tag===7){n(p,w.sibling),h=i(w,m.props.children),h.return=p,p=h;break e}}else if(w.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===Ht&&ed(v)===w.type){n(p,w.sibling),h=i(w,m.props),h.ref=Or(p,w,m),h.return=p,p=h;break e}n(p,w);break}else e(p,w);w=w.sibling}m.type===Un?(h=kn(m.props.children,p.mode,y,m.key),h.return=p,p=h):(y=xs(m.type,m.key,m.props,null,p.mode,y),y.ref=Or(p,h,m),y.return=p,p=y)}return o(p);case Wn:e:{for(w=m.key;h!==null;){if(h.key===w)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(p,h.sibling),h=i(h,m.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=hl(m,p.mode,y),h.return=p,p=h}return o(p);case Ht:return w=m._init,I(p,h,w(m._payload),y)}if(Hr(m))return _(p,h,m,y);if(Nr(m))return E(p,h,m,y);os(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,m),h.return=p,p=h):(n(p,h),h=fl(m,p.mode,y),h.return=p,p=h),o(p)):n(p,h)}return I}var pr=Fh(!0),zh=Fh(!1),js=fn(null),Bs=null,qn=null,au=null;function uu(){au=qn=Bs=null}function cu(t){var e=js.current;re(js),t._currentValue=e}function na(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sr(t,e){Bs=t,au=qn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Be=!0),t.firstContext=null)}function it(t){var e=t._currentValue;if(au!==t)if(t={context:t,memoizedValue:e,next:null},qn===null){if(Bs===null)throw Error(R(308));qn=t,Bs.dependencies={lanes:0,firstContext:t}}else qn=qn.next=t;return e}var wn=null;function du(t){wn===null?wn=[t]:wn.push(t)}function jh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,du(e)):(n.next=i.next,i.next=n),e.interleaved=n,bt(t,r)}function bt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vt=!1;function fu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bt(t,n)}return i=r.interleaved,i===null?(e.next=e,du(r)):(e.next=i.next,i.next=e),r.interleaved=e,bt(t,n)}function ys(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xa(t,n)}}function td(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ws(t,e,n,r){var i=t.updateQueue;Vt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=u=a=null,l=s;do{var c=l.lane,g=l.eventTime;if((r&c)===c){f!==null&&(f=f.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,E=l;switch(c=e,g=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){d=_.call(g,d,c);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,c=typeof _=="function"?_.call(g,d,c):_,c==null)break e;d=ae({},d,c);break e;case 2:Vt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else g={eventTime:g,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=g,a=d):f=f.next=g,o|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nn|=o,t.lanes=o,t.memoizedState=d}}function nd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(R(191,i));i.call(r)}}}var Bi={},Et=fn(Bi),Ci=fn(Bi),Ei=fn(Bi);function Cn(t){if(t===Bi)throw Error(R(174));return t}function hu(t,e){switch(ee(Ei,e),ee(Ci,t),ee(Et,Bi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ll(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ll(e,t)}re(Et),ee(Et,e)}function mr(){re(Et),re(Ci),re(Ei)}function Wh(t){Cn(Ei.current);var e=Cn(Et.current),n=Ll(e,t.type);e!==n&&(ee(Ci,t),ee(Et,n))}function pu(t){Ci.current===t&&(re(Et),re(Ci))}var oe=fn(0);function Us(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ol=[];function mu(){for(var t=0;t<ol.length;t++)ol[t]._workInProgressVersionPrimary=null;ol.length=0}var vs=Bt.ReactCurrentDispatcher,ll=Bt.ReactCurrentBatchConfig,Rn=0,le=null,_e=null,Ce=null,Hs=!1,Xr=!1,Si=0,_y=0;function Ne(){throw Error(R(321))}function gu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_t(t[n],e[n]))return!1;return!0}function _u(t,e,n,r,i,s){if(Rn=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vs.current=t===null||t.memoizedState===null?Cy:Ey,t=n(r,i),Xr){s=0;do{if(Xr=!1,Si=0,25<=s)throw Error(R(301));s+=1,Ce=_e=null,e.updateQueue=null,vs.current=Sy,t=n(r,i)}while(Xr)}if(vs.current=Vs,e=_e!==null&&_e.next!==null,Rn=0,Ce=_e=le=null,Hs=!1,e)throw Error(R(300));return t}function yu(){var t=Si!==0;return Si=0,t}function vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?le.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function st(){if(_e===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=Ce===null?le.memoizedState:Ce.next;if(e!==null)Ce=e,_e=t;else{if(t===null)throw Error(R(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Ce===null?le.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function xi(t,e){return typeof e=="function"?e(t):e}function al(t){var e=st(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=_e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((Rn&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,le.lanes|=f,Nn|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,_t(r,e.memoizedState)||(Be=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,le.lanes|=s,Nn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ul(t){var e=st(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);_t(s,e.memoizedState)||(Be=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Uh(){}function Hh(t,e){var n=le,r=st(),i=e(),s=!_t(r.memoizedState,i);if(s&&(r.memoizedState=i,Be=!0),r=r.queue,vu(Gh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,ki(9,$h.bind(null,n,r,i,e),void 0,null),xe===null)throw Error(R(349));Rn&30||Vh(n,e,i)}return i}function Vh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $h(t,e,n,r){e.value=n,e.getSnapshot=r,Qh(e)&&Yh(t)}function Gh(t,e,n){return n(function(){Qh(e)&&Yh(t)})}function Qh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_t(t,n)}catch{return!0}}function Yh(t){var e=bt(t,1);e!==null&&mt(e,t,1,-1)}function rd(t){var e=vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},e.queue=t,t=t.dispatch=wy.bind(null,le,t),[e.memoizedState,t]}function ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kh(){return st().memoizedState}function ws(t,e,n,r){var i=vt();le.flags|=t,i.memoizedState=ki(1|e,n,void 0,r===void 0?null:r)}function So(t,e,n,r){var i=st();r=r===void 0?null:r;var s=void 0;if(_e!==null){var o=_e.memoizedState;if(s=o.destroy,r!==null&&gu(r,o.deps)){i.memoizedState=ki(e,n,s,r);return}}le.flags|=t,i.memoizedState=ki(1|e,n,s,r)}function id(t,e){return ws(8390656,8,t,e)}function vu(t,e){return So(2048,8,t,e)}function qh(t,e){return So(4,2,t,e)}function Xh(t,e){return So(4,4,t,e)}function Jh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zh(t,e,n){return n=n!=null?n.concat([t]):null,So(4,4,Jh.bind(null,e,t),n)}function wu(){}function ep(t,e){var n=st();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tp(t,e){var n=st();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function np(t,e,n){return Rn&21?(_t(n,e)||(n=lh(),le.lanes|=n,Nn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Be=!0),t.memoizedState=n)}function yy(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var r=ll.transition;ll.transition={};try{t(!1),e()}finally{q=n,ll.transition=r}}function rp(){return st().memoizedState}function vy(t,e,n){var r=tn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ip(t))sp(e,n);else if(n=jh(t,e,n,r),n!==null){var i=Me();mt(n,t,r,i),op(n,e,r)}}function wy(t,e,n){var r=tn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ip(t))sp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,_t(l,o)){var a=e.interleaved;a===null?(i.next=i,du(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=jh(t,e,i,r),n!==null&&(i=Me(),mt(n,t,r,i),op(n,e,r))}}function ip(t){var e=t.alternate;return t===le||e!==null&&e===le}function sp(t,e){Xr=Hs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function op(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xa(t,n)}}var Vs={readContext:it,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},Cy={readContext:it,useCallback:function(t,e){return vt().memoizedState=[t,e===void 0?null:e],t},useContext:it,useEffect:id,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ws(4194308,4,Jh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ws(4194308,4,t,e)},useInsertionEffect:function(t,e){return ws(4,2,t,e)},useMemo:function(t,e){var n=vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vy.bind(null,le,t),[r.memoizedState,t]},useRef:function(t){var e=vt();return t={current:t},e.memoizedState=t},useState:rd,useDebugValue:wu,useDeferredValue:function(t){return vt().memoizedState=t},useTransition:function(){var t=rd(!1),e=t[0];return t=yy.bind(null,t[1]),vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=le,i=vt();if(ie){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),xe===null)throw Error(R(349));Rn&30||Vh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,id(Gh.bind(null,r,s,t),[t]),r.flags|=2048,ki(9,$h.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vt(),e=xe.identifierPrefix;if(ie){var n=Tt,r=It;n=(r&~(1<<32-pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Si++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_y++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ey={readContext:it,useCallback:ep,useContext:it,useEffect:vu,useImperativeHandle:Zh,useInsertionEffect:qh,useLayoutEffect:Xh,useMemo:tp,useReducer:al,useRef:Kh,useState:function(){return al(xi)},useDebugValue:wu,useDeferredValue:function(t){var e=st();return np(e,_e.memoizedState,t)},useTransition:function(){var t=al(xi)[0],e=st().memoizedState;return[t,e]},useMutableSource:Uh,useSyncExternalStore:Hh,useId:rp,unstable_isNewReconciler:!1},Sy={readContext:it,useCallback:ep,useContext:it,useEffect:vu,useImperativeHandle:Zh,useInsertionEffect:qh,useLayoutEffect:Xh,useMemo:tp,useReducer:ul,useRef:Kh,useState:function(){return ul(xi)},useDebugValue:wu,useDeferredValue:function(t){var e=st();return _e===null?e.memoizedState=t:np(e,_e.memoizedState,t)},useTransition:function(){var t=ul(xi)[0],e=st().memoizedState;return[t,e]},useMutableSource:Uh,useSyncExternalStore:Hh,useId:rp,unstable_isNewReconciler:!1};function at(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ra(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xo={isMounted:function(t){return(t=t._reactInternals)?Ln(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Me(),i=tn(t),s=Nt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Zt(t,s,i),e!==null&&(mt(e,t,i,r),ys(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Me(),i=tn(t),s=Nt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zt(t,s,i),e!==null&&(mt(e,t,i,r),ys(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Me(),r=tn(t),i=Nt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zt(t,i,r),e!==null&&(mt(e,t,r,n),ys(e,t,r))}};function sd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!_i(n,r)||!_i(i,s):!0}function lp(t,e,n){var r=!1,i=an,s=e.contextType;return typeof s=="object"&&s!==null?s=it(s):(i=Ve(e)?In:be.current,r=e.contextTypes,s=(r=r!=null)?fr(t,i):an),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function od(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xo.enqueueReplaceState(e,e.state,null)}function ia(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},fu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=it(s):(s=Ve(e)?In:be.current,i.context=fr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ra(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xo.enqueueReplaceState(i,i.state,null),Ws(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gr(t,e){try{var n="",r=e;do n+=Xg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function cl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xy=typeof WeakMap=="function"?WeakMap:Map;function ap(t,e,n){n=Nt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gs||(Gs=!0,ma=r),sa(t,e)},n}function up(t,e,n){n=Nt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sa(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sa(t,e),typeof r!="function"&&(en===null?en=new Set([this]):en.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ld(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xy;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zy.bind(null,t,e,n),e.then(t,t))}function ad(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ud(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nt(-1,1),e.tag=2,Zt(n,e,1))),n.lanes|=1),t)}var ky=Bt.ReactCurrentOwner,Be=!1;function Oe(t,e,n,r){e.child=t===null?zh(e,null,n,r):pr(e,t.child,n,r)}function cd(t,e,n,r,i){n=n.render;var s=e.ref;return sr(e,i),r=_u(t,e,n,r,s,i),n=yu(),t!==null&&!Be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ot(t,e,i)):(ie&&n&&su(e),e.flags|=1,Oe(t,e,r,i),e.child)}function dd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ru(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cp(t,e,s,r,i)):(t=xs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_i,n(o,r)&&t.ref===e.ref)return Ot(t,e,i)}return e.flags|=1,t=nn(s,r),t.ref=e.ref,t.return=e,e.child=t}function cp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(_i(s,r)&&t.ref===e.ref)if(Be=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Be=!0);else return e.lanes=t.lanes,Ot(t,e,i)}return oa(t,e,n,r,i)}function dp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(Jn,Ye),Ye|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(Jn,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ee(Jn,Ye),Ye|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ee(Jn,Ye),Ye|=r;return Oe(t,e,i,n),e.child}function fp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oa(t,e,n,r,i){var s=Ve(n)?In:be.current;return s=fr(e,s),sr(e,i),n=_u(t,e,n,r,s,i),r=yu(),t!==null&&!Be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ot(t,e,i)):(ie&&r&&su(e),e.flags|=1,Oe(t,e,n,i),e.child)}function fd(t,e,n,r,i){if(Ve(n)){var s=!0;Ls(e)}else s=!1;if(sr(e,i),e.stateNode===null)Cs(t,e),lp(e,n,r),ia(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=it(u):(u=Ve(n)?In:be.current,u=fr(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&od(e,o,r,u),Vt=!1;var c=e.memoizedState;o.state=c,Ws(e,r,o,i),a=e.memoizedState,l!==r||c!==a||He.current||Vt?(typeof f=="function"&&(ra(e,n,f,r),a=e.memoizedState),(l=Vt||sd(e,n,l,r,c,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:at(e.type,l),o.props=u,d=e.pendingProps,c=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=it(a):(a=Ve(n)?In:be.current,a=fr(e,a));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||c!==a)&&od(e,o,r,a),Vt=!1,c=e.memoizedState,o.state=c,Ws(e,r,o,i);var _=e.memoizedState;l!==d||c!==_||He.current||Vt?(typeof g=="function"&&(ra(e,n,g,r),_=e.memoizedState),(u=Vt||sd(e,n,u,r,c,_,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return la(t,e,n,r,s,i)}function la(t,e,n,r,i,s){fp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xc(e,n,!1),Ot(t,e,s);r=e.stateNode,ky.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pr(e,t.child,null,s),e.child=pr(e,null,l,s)):Oe(t,e,l,s),e.memoizedState=r.state,i&&Xc(e,n,!0),e.child}function hp(t){var e=t.stateNode;e.pendingContext?qc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qc(t,e.context,!1),hu(t,e.containerInfo)}function hd(t,e,n,r,i){return hr(),lu(i),e.flags|=256,Oe(t,e,n,r),e.child}var aa={dehydrated:null,treeContext:null,retryLane:0};function ua(t){return{baseLanes:t,cachePool:null,transitions:null}}function pp(t,e,n){var r=e.pendingProps,i=oe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ee(oe,i&1),t===null)return ta(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=To(o,r,0,null),t=kn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ua(n),e.memoizedState=aa,t):Cu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Iy(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=nn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=nn(l,s):(s=kn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ua(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=aa,r}return s=t.child,t=s.sibling,r=nn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cu(t,e){return e=To({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ls(t,e,n,r){return r!==null&&lu(r),pr(e,t.child,null,n),t=Cu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Iy(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=cl(Error(R(422))),ls(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=To({mode:"visible",children:r.children},i,0,null),s=kn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&pr(e,t.child,null,o),e.child.memoizedState=ua(o),e.memoizedState=aa,s);if(!(e.mode&1))return ls(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(R(419)),r=cl(s,r,void 0),ls(t,e,o,r)}if(l=(o&t.childLanes)!==0,Be||l){if(r=xe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bt(t,i),mt(r,t,i,-1))}return Tu(),r=cl(Error(R(421))),ls(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jy.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ke=Jt(i.nextSibling),qe=e,ie=!0,ct=null,t!==null&&(et[tt++]=It,et[tt++]=Tt,et[tt++]=Tn,It=t.id,Tt=t.overflow,Tn=e),e=Cu(e,r.children),e.flags|=4096,e)}function pd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),na(t.return,e,n)}function dl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Oe(t,e,r.children,n),r=oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pd(t,n,e);else if(t.tag===19)pd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ee(oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Us(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Us(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dl(e,!0,n,null,s);break;case"together":dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=nn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ty(t,e,n){switch(e.tag){case 3:hp(e),hr();break;case 5:Wh(e);break;case 1:Ve(e.type)&&Ls(e);break;case 4:hu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ee(js,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ee(oe,oe.current&1),e.flags|=128,null):n&e.child.childLanes?pp(t,e,n):(ee(oe,oe.current&1),t=Ot(t,e,n),t!==null?t.sibling:null);ee(oe,oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ee(oe,oe.current),r)break;return null;case 22:case 23:return e.lanes=0,dp(t,e,n)}return Ot(t,e,n)}var gp,ca,_p,yp;gp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ca=function(){};_p=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Cn(Et.current);var s=null;switch(n){case"input":i=Al(t,i),r=Al(t,r),s=[];break;case"select":i=ae({},i,{value:void 0}),r=ae({},r,{value:void 0}),s=[];break;case"textarea":i=Ml(t,i),r=Ml(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Os)}Fl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ci.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ci.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&te("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};yp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mr(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ry(t,e,n){var r=e.pendingProps;switch(ou(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(e),null;case 1:return Ve(e.type)&&Ms(),Pe(e),null;case 3:return r=e.stateNode,mr(),re(He),re(be),mu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ss(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ct!==null&&(ya(ct),ct=null))),ca(t,e),Pe(e),null;case 5:pu(e);var i=Cn(Ei.current);if(n=e.type,t!==null&&e.stateNode!=null)_p(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return Pe(e),null}if(t=Cn(Et.current),ss(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[wt]=e,r[wi]=s,t=(e.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(i=0;i<$r.length;i++)te($r[i],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":Sc(r,s),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},te("invalid",r);break;case"textarea":kc(r,s),te("invalid",r)}Fl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&is(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&is(r.textContent,l,t),i=["children",""+l]):ci.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&te("scroll",r)}switch(n){case"input":qi(r),xc(r,s,!0);break;case"textarea":qi(r),Ic(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Os)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wt]=e,t[wi]=r,gp(t,e,!1,!1),e.stateNode=t;e:{switch(o=zl(n,r),n){case"dialog":te("cancel",t),te("close",t),i=r;break;case"iframe":case"object":case"embed":te("load",t),i=r;break;case"video":case"audio":for(i=0;i<$r.length;i++)te($r[i],t);i=r;break;case"source":te("error",t),i=r;break;case"img":case"image":case"link":te("error",t),te("load",t),i=r;break;case"details":te("toggle",t),i=r;break;case"input":Sc(t,r),i=Al(t,r),te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ae({},r,{value:void 0}),te("invalid",t);break;case"textarea":kc(t,r),i=Ml(t,r),te("invalid",t);break;default:i=r}Fl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Kf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Qf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&di(t,a):typeof a=="number"&&di(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ci.hasOwnProperty(s)?a!=null&&s==="onScroll"&&te("scroll",t):a!=null&&$a(t,s,a,o))}switch(n){case"input":qi(t),xc(t,r,!1);break;case"textarea":qi(t),Ic(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ln(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?tr(t,!!r.multiple,s,!1):r.defaultValue!=null&&tr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Os)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pe(e),null;case 6:if(t&&e.stateNode!=null)yp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=Cn(Ei.current),Cn(Et.current),ss(e)){if(r=e.stateNode,n=e.memoizedProps,r[wt]=e,(s=r.nodeValue!==n)&&(t=qe,t!==null))switch(t.tag){case 3:is(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&is(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=e,e.stateNode=r}return Pe(e),null;case 13:if(re(oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&Ke!==null&&e.mode&1&&!(e.flags&128))Lh(),hr(),e.flags|=98560,s=!1;else if(s=ss(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[wt]=e}else hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),s=!1}else ct!==null&&(ya(ct),ct=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||oe.current&1?ve===0&&(ve=3):Tu())),e.updateQueue!==null&&(e.flags|=4),Pe(e),null);case 4:return mr(),ca(t,e),t===null&&yi(e.stateNode.containerInfo),Pe(e),null;case 10:return cu(e.type._context),Pe(e),null;case 17:return Ve(e.type)&&Ms(),Pe(e),null;case 19:if(re(oe),s=e.memoizedState,s===null)return Pe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mr(s,!1);else{if(ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Us(t),o!==null){for(e.flags|=128,Mr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ee(oe,oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&fe()>_r&&(e.flags|=128,r=!0,Mr(s,!1),e.lanes=4194304)}else{if(!r)if(t=Us(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ie)return Pe(e),null}else 2*fe()-s.renderingStartTime>_r&&n!==1073741824&&(e.flags|=128,r=!0,Mr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fe(),e.sibling=null,n=oe.current,ee(oe,r?n&1|2:n&1),e):(Pe(e),null);case 22:case 23:return Iu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(Pe(e),e.subtreeFlags&6&&(e.flags|=8192)):Pe(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Ny(t,e){switch(ou(e),e.tag){case 1:return Ve(e.type)&&Ms(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mr(),re(He),re(be),mu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pu(e),null;case 13:if(re(oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(oe),null;case 4:return mr(),null;case 10:return cu(e.type._context),null;case 22:case 23:return Iu(),null;case 24:return null;default:return null}}var as=!1,De=!1,Py=typeof WeakSet=="function"?WeakSet:Set,O=null;function Xn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ue(t,e,r)}else n.current=null}function da(t,e,n){try{n()}catch(r){ue(t,e,r)}}var md=!1;function Dy(t,e){if(Yl=Ds,t=Sh(),iu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,d=t,c=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)c=d,d=g;for(;;){if(d===t)break t;if(c===n&&++u===i&&(l=o),c===s&&++f===r&&(a=o),(g=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kl={focusedElem:t,selectionRange:n},Ds=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,I=_.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?E:at(e.type,E),I);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(y){ue(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return _=md,md=!1,_}function Jr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&da(e,n,s)}i=i.next}while(i!==r)}}function ko(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fa(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vp(t){var e=t.alternate;e!==null&&(t.alternate=null,vp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[wi],delete e[Jl],delete e[hy],delete e[py])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wp(t){return t.tag===5||t.tag===3||t.tag===4}function gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ha(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Os));else if(r!==4&&(t=t.child,t!==null))for(ha(t,e,n),t=t.sibling;t!==null;)ha(t,e,n),t=t.sibling}function pa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pa(t,e,n),t=t.sibling;t!==null;)pa(t,e,n),t=t.sibling}var ke=null,ut=!1;function Ut(t,e,n){for(n=n.child;n!==null;)Cp(t,e,n),n=n.sibling}function Cp(t,e,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(_o,n)}catch{}switch(n.tag){case 5:De||Xn(n,e);case 6:var r=ke,i=ut;ke=null,Ut(t,e,n),ke=r,ut=i,ke!==null&&(ut?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(ut?(t=ke,n=n.stateNode,t.nodeType===8?il(t.parentNode,n):t.nodeType===1&&il(t,n),mi(t)):il(ke,n.stateNode));break;case 4:r=ke,i=ut,ke=n.stateNode.containerInfo,ut=!0,Ut(t,e,n),ke=r,ut=i;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&da(n,e,o),i=i.next}while(i!==r)}Ut(t,e,n);break;case 1:if(!De&&(Xn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ue(n,e,l)}Ut(t,e,n);break;case 21:Ut(t,e,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,Ut(t,e,n),De=r):Ut(t,e,n);break;default:Ut(t,e,n)}}function _d(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Py),e.forEach(function(r){var i=By.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,ut=!1;break e;case 3:ke=l.stateNode.containerInfo,ut=!0;break e;case 4:ke=l.stateNode.containerInfo,ut=!0;break e}l=l.return}if(ke===null)throw Error(R(160));Cp(s,o,i),ke=null,ut=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ue(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ep(e,t),e=e.sibling}function Ep(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lt(e,t),yt(t),r&4){try{Jr(3,t,t.return),ko(3,t)}catch(E){ue(t,t.return,E)}try{Jr(5,t,t.return)}catch(E){ue(t,t.return,E)}}break;case 1:lt(e,t),yt(t),r&512&&n!==null&&Xn(n,n.return);break;case 5:if(lt(e,t),yt(t),r&512&&n!==null&&Xn(n,n.return),t.flags&32){var i=t.stateNode;try{di(i,"")}catch(E){ue(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Vf(i,s),zl(l,o);var u=zl(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?Kf(i,d):f==="dangerouslySetInnerHTML"?Qf(i,d):f==="children"?di(i,d):$a(i,f,d,u)}switch(l){case"input":bl(i,s);break;case"textarea":$f(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?tr(i,!!s.multiple,g,!1):c!==!!s.multiple&&(s.defaultValue!=null?tr(i,!!s.multiple,s.defaultValue,!0):tr(i,!!s.multiple,s.multiple?[]:"",!1))}i[wi]=s}catch(E){ue(t,t.return,E)}}break;case 6:if(lt(e,t),yt(t),r&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ue(t,t.return,E)}}break;case 3:if(lt(e,t),yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mi(e.containerInfo)}catch(E){ue(t,t.return,E)}break;case 4:lt(e,t),yt(t);break;case 13:lt(e,t),yt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xu=fe())),r&4&&_d(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(De=(u=De)||f,lt(e,t),De=u):lt(e,t),yt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(O=t,f=t.child;f!==null;){for(d=O=f;O!==null;){switch(c=O,g=c.child,c.tag){case 0:case 11:case 14:case 15:Jr(4,c,c.return);break;case 1:Xn(c,c.return);var _=c.stateNode;if(typeof _.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){ue(r,n,E)}}break;case 5:Xn(c,c.return);break;case 22:if(c.memoizedState!==null){vd(d);continue}}g!==null?(g.return=c,O=g):vd(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Yf("display",o))}catch(E){ue(t,t.return,E)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){ue(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:lt(e,t),yt(t),r&4&&_d(t);break;case 21:break;default:lt(e,t),yt(t)}}function yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wp(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(di(i,""),r.flags&=-33);var s=gd(t);pa(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=gd(t);ha(t,l,o);break;default:throw Error(R(161))}}catch(a){ue(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ay(t,e,n){O=t,Sp(t)}function Sp(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var i=O,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||as;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||De;l=as;var u=De;if(as=o,(De=a)&&!u)for(O=i;O!==null;)o=O,a=o.child,o.tag===22&&o.memoizedState!==null?wd(i):a!==null?(a.return=o,O=a):wd(i);for(;s!==null;)O=s,Sp(s),s=s.sibling;O=i,as=l,De=u}yd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,O=s):yd(t)}}function yd(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||ko(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:at(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&mi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}De||e.flags&512&&fa(e)}catch(c){ue(e,e.return,c)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function vd(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function wd(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ko(4,e)}catch(a){ue(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ue(e,i,a)}}var s=e.return;try{fa(e)}catch(a){ue(e,s,a)}break;case 5:var o=e.return;try{fa(e)}catch(a){ue(e,o,a)}}}catch(a){ue(e,e.return,a)}if(e===t){O=null;break}var l=e.sibling;if(l!==null){l.return=e.return,O=l;break}O=e.return}}var by=Math.ceil,$s=Bt.ReactCurrentDispatcher,Eu=Bt.ReactCurrentOwner,rt=Bt.ReactCurrentBatchConfig,Q=0,xe=null,pe=null,Te=0,Ye=0,Jn=fn(0),ve=0,Ii=null,Nn=0,Io=0,Su=0,Zr=null,je=null,xu=0,_r=1/0,xt=null,Gs=!1,ma=null,en=null,us=!1,Yt=null,Qs=0,ei=0,ga=null,Es=-1,Ss=0;function Me(){return Q&6?fe():Es!==-1?Es:Es=fe()}function tn(t){return t.mode&1?Q&2&&Te!==0?Te&-Te:gy.transition!==null?(Ss===0&&(Ss=lh()),Ss):(t=q,t!==0||(t=window.event,t=t===void 0?16:ph(t.type)),t):1}function mt(t,e,n,r){if(50<ei)throw ei=0,ga=null,Error(R(185));Fi(t,n,r),(!(Q&2)||t!==xe)&&(t===xe&&(!(Q&2)&&(Io|=n),ve===4&&Gt(t,Te)),$e(t,r),n===1&&Q===0&&!(e.mode&1)&&(_r=fe()+500,Eo&&hn()))}function $e(t,e){var n=t.callbackNode;g_(t,e);var r=Ps(t,t===xe?Te:0);if(r===0)n!==null&&Nc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nc(n),e===1)t.tag===0?my(Cd.bind(null,t)):bh(Cd.bind(null,t)),dy(function(){!(Q&6)&&hn()}),n=null;else{switch(ah(r)){case 1:n=qa;break;case 4:n=sh;break;case 16:n=Ns;break;case 536870912:n=oh;break;default:n=Ns}n=Dp(n,xp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xp(t,e){if(Es=-1,Ss=0,Q&6)throw Error(R(327));var n=t.callbackNode;if(or()&&t.callbackNode!==n)return null;var r=Ps(t,t===xe?Te:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ys(t,r);else{e=r;var i=Q;Q|=2;var s=Ip();(xe!==t||Te!==e)&&(xt=null,_r=fe()+500,xn(t,e));do try{Ly();break}catch(l){kp(t,l)}while(!0);uu(),$s.current=s,Q=i,pe!==null?e=0:(xe=null,Te=0,e=ve)}if(e!==0){if(e===2&&(i=Hl(t),i!==0&&(r=i,e=_a(t,i))),e===1)throw n=Ii,xn(t,0),Gt(t,r),$e(t,fe()),n;if(e===6)Gt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Oy(i)&&(e=Ys(t,r),e===2&&(s=Hl(t),s!==0&&(r=s,e=_a(t,s))),e===1))throw n=Ii,xn(t,0),Gt(t,r),$e(t,fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:gn(t,je,xt);break;case 3:if(Gt(t,r),(r&130023424)===r&&(e=xu+500-fe(),10<e)){if(Ps(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Me(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xl(gn.bind(null,t,je,xt),e);break}gn(t,je,xt);break;case 4:if(Gt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-pt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*by(r/1960))-r,10<r){t.timeoutHandle=Xl(gn.bind(null,t,je,xt),r);break}gn(t,je,xt);break;case 5:gn(t,je,xt);break;default:throw Error(R(329))}}}return $e(t,fe()),t.callbackNode===n?xp.bind(null,t):null}function _a(t,e){var n=Zr;return t.current.memoizedState.isDehydrated&&(xn(t,e).flags|=256),t=Ys(t,e),t!==2&&(e=je,je=n,e!==null&&ya(e)),t}function ya(t){je===null?je=t:je.push.apply(je,t)}function Oy(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gt(t,e){for(e&=~Su,e&=~Io,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pt(e),r=1<<n;t[n]=-1,e&=~r}}function Cd(t){if(Q&6)throw Error(R(327));or();var e=Ps(t,0);if(!(e&1))return $e(t,fe()),null;var n=Ys(t,e);if(t.tag!==0&&n===2){var r=Hl(t);r!==0&&(e=r,n=_a(t,r))}if(n===1)throw n=Ii,xn(t,0),Gt(t,e),$e(t,fe()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gn(t,je,xt),$e(t,fe()),null}function ku(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(_r=fe()+500,Eo&&hn())}}function Pn(t){Yt!==null&&Yt.tag===0&&!(Q&6)&&or();var e=Q;Q|=1;var n=rt.transition,r=q;try{if(rt.transition=null,q=1,t)return t()}finally{q=r,rt.transition=n,Q=e,!(Q&6)&&hn()}}function Iu(){Ye=Jn.current,re(Jn)}function xn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cy(n)),pe!==null)for(n=pe.return;n!==null;){var r=n;switch(ou(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ms();break;case 3:mr(),re(He),re(be),mu();break;case 5:pu(r);break;case 4:mr();break;case 13:re(oe);break;case 19:re(oe);break;case 10:cu(r.type._context);break;case 22:case 23:Iu()}n=n.return}if(xe=t,pe=t=nn(t.current,null),Te=Ye=e,ve=0,Ii=null,Su=Io=Nn=0,je=Zr=null,wn!==null){for(e=0;e<wn.length;e++)if(n=wn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wn=null}return t}function kp(t,e){do{var n=pe;try{if(uu(),vs.current=Vs,Hs){for(var r=le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hs=!1}if(Rn=0,Ce=_e=le=null,Xr=!1,Si=0,Eu.current=null,n===null||n.return===null){ve=1,Ii=e,pe=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Te,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var c=f.alternate;c?(f.updateQueue=c.updateQueue,f.memoizedState=c.memoizedState,f.lanes=c.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=ad(o);if(g!==null){g.flags&=-257,ud(g,o,l,s,e),g.mode&1&&ld(s,u,e),e=g,a=u;var _=e.updateQueue;if(_===null){var E=new Set;E.add(a),e.updateQueue=E}else _.add(a);break e}else{if(!(e&1)){ld(s,u,e),Tu();break e}a=Error(R(426))}}else if(ie&&l.mode&1){var I=ad(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),ud(I,o,l,s,e),lu(gr(a,l));break e}}s=a=gr(a,l),ve!==4&&(ve=2),Zr===null?Zr=[s]:Zr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=ap(s,a,e);td(s,p);break e;case 1:l=a;var h=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(en===null||!en.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var y=up(s,l,e);td(s,y);break e}}s=s.return}while(s!==null)}Rp(n)}catch(v){e=v,pe===n&&n!==null&&(pe=n=n.return);continue}break}while(!0)}function Ip(){var t=$s.current;return $s.current=Vs,t===null?Vs:t}function Tu(){(ve===0||ve===3||ve===2)&&(ve=4),xe===null||!(Nn&268435455)&&!(Io&268435455)||Gt(xe,Te)}function Ys(t,e){var n=Q;Q|=2;var r=Ip();(xe!==t||Te!==e)&&(xt=null,xn(t,e));do try{My();break}catch(i){kp(t,i)}while(!0);if(uu(),Q=n,$s.current=r,pe!==null)throw Error(R(261));return xe=null,Te=0,ve}function My(){for(;pe!==null;)Tp(pe)}function Ly(){for(;pe!==null&&!l_();)Tp(pe)}function Tp(t){var e=Pp(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?Rp(t):pe=e,Eu.current=null}function Rp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ny(n,e),n!==null){n.flags&=32767,pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,pe=null;return}}else if(n=Ry(n,e,Ye),n!==null){pe=n;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);ve===0&&(ve=5)}function gn(t,e,n){var r=q,i=rt.transition;try{rt.transition=null,q=1,Fy(t,e,n,r)}finally{rt.transition=i,q=r}return null}function Fy(t,e,n,r){do or();while(Yt!==null);if(Q&6)throw Error(R(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(__(t,s),t===xe&&(pe=xe=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||us||(us=!0,Dp(Ns,function(){return or(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rt.transition,rt.transition=null;var o=q;q=1;var l=Q;Q|=4,Eu.current=null,Dy(t,n),Ep(n,t),ry(Kl),Ds=!!Yl,Kl=Yl=null,t.current=n,Ay(n),a_(),Q=l,q=o,rt.transition=s}else t.current=n;if(us&&(us=!1,Yt=t,Qs=i),s=t.pendingLanes,s===0&&(en=null),d_(n.stateNode),$e(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,t=ma,ma=null,t;return Qs&1&&t.tag!==0&&or(),s=t.pendingLanes,s&1?t===ga?ei++:(ei=0,ga=t):ei=0,hn(),null}function or(){if(Yt!==null){var t=ah(Qs),e=rt.transition,n=q;try{if(rt.transition=null,q=16>t?16:t,Yt===null)var r=!1;else{if(t=Yt,Yt=null,Qs=0,Q&6)throw Error(R(331));var i=Q;for(Q|=4,O=t.current;O!==null;){var s=O,o=s.child;if(O.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(O=u;O!==null;){var f=O;switch(f.tag){case 0:case 11:case 15:Jr(8,f,s)}var d=f.child;if(d!==null)d.return=f,O=d;else for(;O!==null;){f=O;var c=f.sibling,g=f.return;if(vp(f),f===u){O=null;break}if(c!==null){c.return=g,O=c;break}O=g}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var I=E.sibling;E.sibling=null,E=I}while(E!==null)}}O=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,O=o;else e:for(;O!==null;){if(s=O,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,O=p;break e}O=s.return}}var h=t.current;for(O=h;O!==null;){o=O;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,O=m;else e:for(o=h;O!==null;){if(l=O,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ko(9,l)}}catch(v){ue(l,l.return,v)}if(l===o){O=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,O=y;break e}O=l.return}}if(Q=i,hn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(_o,t)}catch{}r=!0}return r}finally{q=n,rt.transition=e}}return!1}function Ed(t,e,n){e=gr(n,e),e=ap(t,e,1),t=Zt(t,e,1),e=Me(),t!==null&&(Fi(t,1,e),$e(t,e))}function ue(t,e,n){if(t.tag===3)Ed(t,t,n);else for(;e!==null;){if(e.tag===3){Ed(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(en===null||!en.has(r))){t=gr(n,t),t=up(e,t,1),e=Zt(e,t,1),t=Me(),e!==null&&(Fi(e,1,t),$e(e,t));break}}e=e.return}}function zy(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&n,xe===t&&(Te&n)===n&&(ve===4||ve===3&&(Te&130023424)===Te&&500>fe()-xu?xn(t,0):Su|=n),$e(t,e)}function Np(t,e){e===0&&(t.mode&1?(e=Zi,Zi<<=1,!(Zi&130023424)&&(Zi=4194304)):e=1);var n=Me();t=bt(t,e),t!==null&&(Fi(t,e,n),$e(t,n))}function jy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Np(t,n)}function By(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),Np(t,n)}var Pp;Pp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||He.current)Be=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Be=!1,Ty(t,e,n);Be=!!(t.flags&131072)}else Be=!1,ie&&e.flags&1048576&&Oh(e,zs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cs(t,e),t=e.pendingProps;var i=fr(e,be.current);sr(e,n),i=_u(null,e,r,t,i,n);var s=yu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ve(r)?(s=!0,Ls(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fu(e),i.updater=xo,e.stateNode=i,i._reactInternals=e,ia(e,r,t,n),e=la(null,e,r,!0,s,n)):(e.tag=0,ie&&s&&su(e),Oe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Uy(r),t=at(r,t),i){case 0:e=oa(null,e,r,t,n);break e;case 1:e=fd(null,e,r,t,n);break e;case 11:e=cd(null,e,r,t,n);break e;case 14:e=dd(null,e,r,at(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:at(r,i),oa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:at(r,i),fd(t,e,r,i,n);case 3:e:{if(hp(e),t===null)throw Error(R(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Bh(t,e),Ws(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gr(Error(R(423)),e),e=hd(t,e,r,n,i);break e}else if(r!==i){i=gr(Error(R(424)),e),e=hd(t,e,r,n,i);break e}else for(Ke=Jt(e.stateNode.containerInfo.firstChild),qe=e,ie=!0,ct=null,n=zh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===i){e=Ot(t,e,n);break e}Oe(t,e,r,n)}e=e.child}return e;case 5:return Wh(e),t===null&&ta(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ql(r,i)?o=null:s!==null&&ql(r,s)&&(e.flags|=32),fp(t,e),Oe(t,e,o,n),e.child;case 6:return t===null&&ta(e),null;case 13:return pp(t,e,n);case 4:return hu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pr(e,null,r,n):Oe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:at(r,i),cd(t,e,r,i,n);case 7:return Oe(t,e,e.pendingProps,n),e.child;case 8:return Oe(t,e,e.pendingProps.children,n),e.child;case 12:return Oe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ee(js,r._currentValue),r._currentValue=o,s!==null)if(_t(s.value,o)){if(s.children===i.children&&!He.current){e=Ot(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Nt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),na(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(R(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),na(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Oe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sr(e,n),i=it(i),r=r(i),e.flags|=1,Oe(t,e,r,n),e.child;case 14:return r=e.type,i=at(r,e.pendingProps),i=at(r.type,i),dd(t,e,r,i,n);case 15:return cp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:at(r,i),Cs(t,e),e.tag=1,Ve(r)?(t=!0,Ls(e)):t=!1,sr(e,n),lp(e,r,i),ia(e,r,i,n),la(null,e,r,!0,t,n);case 19:return mp(t,e,n);case 22:return dp(t,e,n)}throw Error(R(156,e.tag))};function Dp(t,e){return ih(t,e)}function Wy(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new Wy(t,e,n,r)}function Ru(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uy(t){if(typeof t=="function")return Ru(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qa)return 11;if(t===Ya)return 14}return 2}function nn(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xs(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Ru(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Un:return kn(n.children,i,s,e);case Ga:o=8,i|=8;break;case Rl:return t=nt(12,n,e,i|2),t.elementType=Rl,t.lanes=s,t;case Nl:return t=nt(13,n,e,i),t.elementType=Nl,t.lanes=s,t;case Pl:return t=nt(19,n,e,i),t.elementType=Pl,t.lanes=s,t;case Wf:return To(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jf:o=10;break e;case Bf:o=9;break e;case Qa:o=11;break e;case Ya:o=14;break e;case Ht:o=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=nt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function kn(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function To(t,e,n,r){return t=nt(22,t,r,e),t.elementType=Wf,t.lanes=n,t.stateNode={isHidden:!1},t}function fl(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function hl(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hy(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qo(0),this.expirationTimes=Qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nu(t,e,n,r,i,s,o,l,a){return t=new Hy(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fu(s),t}function Vy(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ap(t){if(!t)return an;t=t._reactInternals;e:{if(Ln(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ve(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Ve(n))return Ah(t,n,e)}return e}function bp(t,e,n,r,i,s,o,l,a){return t=Nu(n,r,!0,t,i,s,o,l,a),t.context=Ap(null),n=t.current,r=Me(),i=tn(n),s=Nt(r,i),s.callback=e??null,Zt(n,s,i),t.current.lanes=i,Fi(t,i,r),$e(t,r),t}function Ro(t,e,n,r){var i=e.current,s=Me(),o=tn(i);return n=Ap(n),e.context===null?e.context=n:e.pendingContext=n,e=Nt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zt(i,e,o),t!==null&&(mt(t,i,o,s),ys(t,i,o)),o}function Ks(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pu(t,e){Sd(t,e),(t=t.alternate)&&Sd(t,e)}function $y(){return null}var Op=typeof reportError=="function"?reportError:function(t){console.error(t)};function Du(t){this._internalRoot=t}No.prototype.render=Du.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Ro(t,e,null,null)};No.prototype.unmount=Du.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pn(function(){Ro(null,t,null,null)}),e[At]=null}};function No(t){this._internalRoot=t}No.prototype.unstable_scheduleHydration=function(t){if(t){var e=dh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$t.length&&e!==0&&e<$t[n].priority;n++);$t.splice(n,0,t),n===0&&hh(t)}};function Au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Po(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xd(){}function Gy(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ks(o);s.call(u)}}var o=bp(e,r,t,0,null,!1,!1,"",xd);return t._reactRootContainer=o,t[At]=o.current,yi(t.nodeType===8?t.parentNode:t),Pn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ks(a);l.call(u)}}var a=Nu(t,0,!1,null,null,!1,!1,"",xd);return t._reactRootContainer=a,t[At]=a.current,yi(t.nodeType===8?t.parentNode:t),Pn(function(){Ro(e,a,n,r)}),a}function Do(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Ks(o);l.call(a)}}Ro(e,o,t,i)}else o=Gy(n,e,t,i,r);return Ks(o)}uh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vr(e.pendingLanes);n!==0&&(Xa(e,n|1),$e(e,fe()),!(Q&6)&&(_r=fe()+500,hn()))}break;case 13:Pn(function(){var r=bt(t,1);if(r!==null){var i=Me();mt(r,t,1,i)}}),Pu(t,1)}};Ja=function(t){if(t.tag===13){var e=bt(t,134217728);if(e!==null){var n=Me();mt(e,t,134217728,n)}Pu(t,134217728)}};ch=function(t){if(t.tag===13){var e=tn(t),n=bt(t,e);if(n!==null){var r=Me();mt(n,t,e,r)}Pu(t,e)}};dh=function(){return q};fh=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};Bl=function(t,e,n){switch(e){case"input":if(bl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Co(r);if(!i)throw Error(R(90));Hf(r),bl(r,i)}}}break;case"textarea":$f(t,n);break;case"select":e=n.value,e!=null&&tr(t,!!n.multiple,e,!1)}};Jf=ku;Zf=Pn;var Qy={usingClientEntryPoint:!1,Events:[ji,Gn,Co,qf,Xf,ku]},Lr={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yy={bundleType:Lr.bundleType,version:Lr.version,rendererPackageName:Lr.rendererPackageName,rendererConfig:Lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nh(t),t===null?null:t.stateNode},findFiberByHostInstance:Lr.findFiberByHostInstance||$y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cs.isDisabled&&cs.supportsFiber)try{_o=cs.inject(Yy),Ct=cs}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qy;Je.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Au(e))throw Error(R(200));return Vy(t,e,null,n)};Je.createRoot=function(t,e){if(!Au(t))throw Error(R(299));var n=!1,r="",i=Op;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nu(t,1,!1,null,null,n,!1,r,i),t[At]=e.current,yi(t.nodeType===8?t.parentNode:t),new Du(e)};Je.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=nh(e),t=t===null?null:t.stateNode,t};Je.flushSync=function(t){return Pn(t)};Je.hydrate=function(t,e,n){if(!Po(e))throw Error(R(200));return Do(null,t,e,!0,n)};Je.hydrateRoot=function(t,e,n){if(!Au(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Op;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bp(e,null,t,1,n??null,i,!1,s,o),t[At]=e.current,yi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new No(e)};Je.render=function(t,e,n){if(!Po(e))throw Error(R(200));return Do(null,t,e,!1,n)};Je.unmountComponentAtNode=function(t){if(!Po(t))throw Error(R(40));return t._reactRootContainer?(Pn(function(){Do(null,null,t,!1,function(){t._reactRootContainer=null,t[At]=null})}),!0):!1};Je.unstable_batchedUpdates=ku;Je.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Po(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return Do(t,e,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function Mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mp)}catch(t){console.error(t)}}Mp(),Mf.exports=Je;var Ky=Mf.exports,kd=Ky;Il.createRoot=kd.createRoot,Il.hydrateRoot=kd.hydrateRoot;const Mt=2160,Lt=3840,Lp="#000000",Fp=2,zp=40,qy="#ffffff",Zn="#0066ff",Xy=2e3,Jy="#e0e0e0",Zy=1,Fr=100,pl=60,St=16,ev="#4a90e2",tv=({setStrokes:t,penColor:e,penSize:n})=>{const r=S.useCallback(a=>{const u={id:Date.now().toString(),points:[a],color:e,size:n,isErasable:!0};return t(f=>[...f,u]),u.id},[e,n,t]),i=S.useCallback((a,u)=>{t(f=>f.map(d=>d.id===a?{...d,points:[...d.points,u]}:d))},[t]),s=S.useCallback((a,u=10)=>{t(f=>f.filter(d=>d.isErasable?!d.points.some(c=>Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2))<=u):!0))},[t]),o=S.useCallback(()=>{t(()=>[])},[t]),l=S.useCallback(()=>{t(a=>a.slice(0,-1))},[t]);return{startStroke:r,addPointToStroke:i,eraseAtPoint:s,clearAllStrokes:o,removeLastStroke:l}},jp=t=>{t.clearRect(0,0,Mt,Lt)},nv=(t,e)=>{t.strokeStyle=Jy,t.lineWidth=Zy,t.setLineDash([]);for(let n=0;n<=Mt;n+=e)t.beginPath(),t.moveTo(n,0),t.lineTo(n,Lt),t.stroke();for(let n=0;n<=Lt;n+=e)t.beginPath(),t.moveTo(0,n),t.lineTo(Mt,n),t.stroke()},rv=(t,e)=>{if(!(e.points.length<2)){t.strokeStyle=e.color,t.lineWidth=e.size,t.lineCap="round",t.lineJoin="round",t.setLineDash([]),t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=1;n<e.points.length;n++)t.lineTo(e.points[n].x,e.points[n].y);t.stroke()}},Id=(t,e)=>{e.forEach(n=>rv(t,n))},iv=(t,e)=>{if(e.type!=="rect")return;const{x:n,y:r,width:i=100,height:s=60,fill:o="#ffffff"}=e;t.fillStyle=o,t.fillRect(n,r,i,s),t.strokeStyle=e.selected?Zn:"#000000",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s)},sv=(t,e)=>{if(e.type!=="text")return;const{x:n,y:r,text:i="Text",width:s=100,height:o=60,fontSize:l=16,fontWeight:a="normal",fontStyle:u="normal"}=e;e.fill&&(t.fillStyle=e.fill,t.fillRect(n,r,s,o));const f=u==="italic"?"italic ":"",d=a==="bold"?"bold ":"";t.font=`${f}${d}${l}px Arial`,t.fillStyle="#000000",t.textAlign="left",t.textBaseline="top",t.fillText(i,n+5,r+5),e.selected&&(t.strokeStyle=Zn,t.lineWidth=3,t.setLineDash([]),t.strokeRect(n,r,s,o))},Td=new Map,ov=(t,e)=>{if(e.type!=="image")return;const{x:n,y:r,width:i=100,height:s=100,imageSrc:o}=e;if(o){let l=Td.get(o);l&&l.complete&&l.naturalWidth>0?(t.drawImage(l,n,r,i,s),e.selected&&(t.strokeStyle=Zn,t.lineWidth=3,t.setLineDash([]),t.strokeRect(n,r,i,s))):l||(l=new Image,Td.set(o,l),l.onload=()=>{},l.onerror=()=>{t.fillStyle="#f0f0f0",t.fillRect(n,r,i,s),t.strokeStyle=e.selected?Zn:"#cccccc",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s),t.fillStyle="#ff0000",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("ERROR",n+i/2,r+s/2)},l.src=o,t.fillStyle="#f8f9fa",t.fillRect(n,r,i,s),t.strokeStyle=e.selected?Zn:"#ddd",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s),t.fillStyle="#666666",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("로딩중...",n+i/2,r+s/2))}else t.fillStyle="#f0f0f0",t.fillRect(n,r,i,s),t.strokeStyle=e.selected?Zn:"#cccccc",t.lineWidth=e.selected?3:1,t.setLineDash([]),t.strokeRect(n,r,i,s),t.fillStyle="#666666",t.font="14px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("IMG",n+i/2,r+s/2)},lv=(t,e)=>{e.forEach(n=>{switch(n.type){case"rect":iv(t,n);break;case"text":sv(t,n);break;case"image":ov(t,n);break}})},av=(t,e)=>{for(let n=t.length-1;n>=0;n--){const r=t[n],{x:i,y:s,width:o=100,height:l=60}=r;if(e.x>=i&&e.x<=i+o&&e.y>=s&&e.y<=s+l)return r}return null},Rd=(t,e)=>Math.round(t/e)*e,ti=(t,e)=>({x:Rd(t.x,e),y:Rd(t.y,e)}),Bp=({shapes:t,setShapes:e,selectedId:n,setSelectedId:r,gridSize:i})=>{const s=S.useCallback(h=>{const m=ti(h,i),y={id:Date.now().toString(),type:"rect",x:m.x,y:m.y,width:Fr,height:pl,fill:qy,selected:!0,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return e(v=>[...v.map(w=>({...w,selected:!1})),y]),r(y.id),y.id},[e,r,i]),o=S.useCallback((h,m="Text")=>{const y=ti(h,i),v={id:Date.now().toString(),type:"text",x:y.x,y:y.y,width:Fr,height:pl,text:m,fontSize:16,fontWeight:"normal",fontStyle:"normal",selected:!0,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return e(w=>[...w.map(k=>({...k,selected:!1})),v]),r(v.id),v.id},[e,r,i]),l=S.useCallback((h,m)=>{const y=ti(h,i),v={id:Date.now().toString(),type:"image",x:y.x,y:y.y,width:Fr,height:Fr,imageSrc:m,selected:!0,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return e(w=>[...w.map(k=>({...k,selected:!1})),v]),r(v.id),v.id},[e,r,i]),a=S.useCallback(h=>{e(m=>m.map(y=>({...y,selected:y.id===h}))),r(h)},[e,r]),u=S.useCallback(()=>{var m;if(!n)return;const h=t.find(y=>y.id===n);(m=h==null?void 0:h.meta)!=null&&m.isDeletable&&(e(y=>y.filter(v=>v.id!==n)),r(null))},[t,n,e,r]),f=S.useCallback((h,m)=>{e(y=>y.map(v=>{var w;return v.id!==h||!((w=v.meta)!=null&&w.isMovable)?v:{...v,x:Math.max(0,Math.min(m.x,2160-(v.width||Fr))),y:Math.max(0,Math.min(m.y,3840-(v.height||pl)))}}))},[e]),d=S.useCallback(h=>{const m=t.find(v=>v.id===h);if(!m)return;const y={...m,id:Date.now().toString(),x:m.x+20,y:m.y+20,selected:!0};e(v=>[...v.map(w=>({...w,selected:!1})),y]),r(y.id)},[t,e,r]),c=S.useCallback((h,m,y)=>{e(v=>v.map(w=>w.id===h?{...w,[m]:y}:w))},[e]),g=S.useCallback(()=>{e(h=>h.map(m=>({...m,selected:!1}))),r(null)},[e,r]),_=S.useCallback(h=>{e(m=>{const y=m.findIndex(k=>k.id===h);if(y===-1||y===m.length-1)return m;const v=m[y],w=[...m];return w.splice(y,1),w.push(v),w})},[e]),E=S.useCallback(h=>{e(m=>{const y=m.findIndex(k=>k.id===h);if(y===-1||y===0)return m;const v=m[y],w=[...m];return w.splice(y,1),w.unshift(v),w})},[e]),I=S.useCallback(h=>{e(m=>{const y=m.findIndex(k=>k.id===h);if(y===-1||y===m.length-1)return m;const v=[...m],w=v[y];return v[y]=v[y+1],v[y+1]=w,v})},[e]),p=S.useCallback(h=>{e(m=>{const y=m.findIndex(k=>k.id===h);if(y===-1||y===0)return m;const v=[...m],w=v[y];return v[y]=v[y-1],v[y-1]=w,v})},[e]);return{createRect:s,createText:o,createImage:l,selectShape:a,deleteSelectedShape:u,moveShape:f,duplicateShape:d,updateShapeProperty:c,clearSelection:g,bringToFront:_,sendToBack:E,moveForward:I,moveBackward:p}},uv=20,Wp=({shapes:t,strokes:e,selectedId:n,setShapes:r,setStrokes:i,setSelectedId:s})=>{const[o,l]=S.useState([]),[a,u]=S.useState([]),f=S.useCallback(()=>({shapes:t,strokes:e,selectedId:n}),[t,e,n]),d=S.useCallback((w,k,x)=>{const M={id:Date.now().toString(),type:w,timestamp:Date.now(),beforeState:k,afterState:x};l(L=>{const W=[...L,M];return W.length>uv?W.slice(-20):W}),u([])},[]),c=S.useCallback(w=>{w.shapes!==void 0&&r(()=>w.shapes),w.strokes!==void 0&&i(()=>w.strokes),w.selectedId!==void 0&&s(w.selectedId)},[r,i,s]),g=S.useCallback(()=>{if(o.length===0)return!1;const w=o[o.length-1];return u(k=>[...k,{...w,beforeState:w.afterState,afterState:w.beforeState}]),l(k=>k.slice(0,-1)),c(w.beforeState),!0},[o,c]),_=S.useCallback(()=>{if(a.length===0)return!1;const w=a[a.length-1];return l(k=>[...k,{...w,beforeState:w.afterState,afterState:w.beforeState}]),u(k=>k.slice(0,-1)),c(w.afterState),!0},[a,c]),E=S.useCallback(w=>{d("CREATE_SHAPE",{shapes:t},{shapes:[...t,w]})},[t,d]),I=S.useCallback(w=>{t.find(x=>x.id===w)&&d("DELETE_SHAPE",{shapes:t,selectedId:n},{shapes:t.filter(x=>x.id!==w),selectedId:null})},[t,n,d]),p=S.useCallback((w,k,x)=>{d("UPDATE_SHAPE",{shapes:t},{shapes:t.map(M=>M.id===w?x:M)})},[t,d]),h=S.useCallback(w=>{d("CREATE_STROKE",{strokes:e},{strokes:[...e,w]})},[e,d]),m=S.useCallback(w=>{w.length!==0&&d("DELETE_STROKE",{strokes:e},{strokes:e.filter(k=>!w.some(x=>x.id===k.id))})},[e,d]),y=S.useCallback((w,k)=>{d("BATCH",w,k)},[d]),v=S.useCallback(()=>{l([]),u([])},[]);return{canUndo:o.length>0,canRedo:a.length>0,undoStackSize:o.length,redoStackSize:a.length,undo:g,redo:_,recordCreateShape:E,recordDeleteShape:I,recordUpdateShape:p,recordCreateStroke:h,recordDeleteStrokes:m,recordBatchAction:y,clearHistory:v,getCurrentState:f}},cv=()=>{};var Nd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(t,e){if(!t)throw kr(e)},kr=function(t){return new Error("Firebase Database ("+Up.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,f=s>>2,d=(s&3)<<4|l>>4;let c=(l&15)<<2|u>>6,g=u&63;a||(g=64,o||(c=64)),r.push(n[f],n[d],n[c],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new fv;const c=s<<2|l>>4;if(r.push(c),u!==64){const g=l<<4&240|u>>2;if(r.push(g),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vp=function(t){const e=Hp(t);return bu.encodeByteArray(e,!0)},qs=function(t){return Vp(t).replace(/\./g,"")},va=function(t){try{return bu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){return $p(void 0,t)}function $p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!pv(n)||(t[n]=$p(t[n],e[n]));return t}function pv(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=()=>mv().__FIREBASE_DEFAULTS__,_v=()=>{if(typeof process>"u"||typeof Nd>"u")return;const t=Nd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&va(t[1]);return e&&JSON.parse(e)},Gp=()=>{try{return cv()||gv()||_v()||yv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vv=t=>{var e,n;return(n=(e=Gp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wv=t=>{const e=vv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qp=()=>{var t;return(t=Gp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){return t.endsWith(".cloudworkstations.dev")}async function Cv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qs(JSON.stringify(n)),qs(JSON.stringify(o)),""].join(".")}const ni={};function Sv(){const t={prod:[],emulator:[]};for(const e of Object.keys(ni))ni[e]?t.emulator.push(e):t.prod.push(e);return t}function xv(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Pd=!1;function kv(t,e){if(typeof window>"u"||typeof document>"u"||!Ou(window.location.host)||ni[t]===e||ni[t]||Pd)return;ni[t]=e;function n(c){return`__firebase__banner__${c}`}const r="__firebase__banner",s=Sv().prod.length>0;function o(){const c=document.getElementById(r);c&&c.remove()}function l(c){c.style.display="flex",c.style.background="#7faaf0",c.style.position="fixed",c.style.bottom="5px",c.style.left="5px",c.style.padding=".5em",c.style.borderRadius="5px",c.style.alignItems="center"}function a(c,g){c.setAttribute("width","24"),c.setAttribute("id",g),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px"}function u(){const c=document.createElement("span");return c.style.cursor="pointer",c.style.marginLeft="16px",c.style.fontSize="24px",c.innerHTML=" &times;",c.onclick=()=>{Pd=!0,o()},c}function f(c,g){c.setAttribute("id",g),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline"}function d(){const c=xv(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),E=n("learnmore"),I=document.getElementById(E)||document.createElement("a"),p=n("preprendIcon"),h=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.created){const m=c.element;l(m),f(I,E);const y=u();a(h,p),m.append(h,_,I,y),document.body.appendChild(m)}s?(_.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Iv())}function Tv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rv(){return Up.NODE_ADMIN===!0}function Nv(){try{return typeof indexedDB=="object"}catch{return!1}}function Pv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="FirebaseError";class Wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Dv,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kp.prototype.create)}}class Kp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Av(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Wi(i,l,r)}}function Av(t,e){return t.replace(bv,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t){return JSON.parse(t)}function Se(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ti(va(s[0])||""),n=Ti(va(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Ov=function(t){const e=qp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Mv=function(t){const e=qp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Dd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xs(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Js(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ad(s)&&Ad(o)){if(!Js(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ad(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const c=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(c<<1|c>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),f=1518500249):(u=s^o^l,f=1859775393):d<60?(u=s&o|l&(s|o),f=2400959708):(u=s^o^l,f=3395469782);const c=(i<<5|i>>>27)+u+a+f+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=c}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Mu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,N(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){return t&&t._delegate?t._delegate:t}class Ri{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ao;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wv(e))try{this.getOrInitializeService({instanceIdentifier:_n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_n){return this.instances.has(e)}getOptions(e=_n){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_n){return this.component?this.component.multipleInstances?e:_n:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bv(t){return t===_n?void 0:t}function Wv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(J||(J={}));const Hv={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Vv=J.INFO,$v={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Gv=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$v[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xp{constructor(e){this.name=e,this._logLevel=Vv,this._logHandler=Gv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const Qv=(t,e)=>e.some(n=>t instanceof n);let bd,Od;function Yv(){return bd||(bd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kv(){return Od||(Od=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jp=new WeakMap,wa=new WeakMap,Zp=new WeakMap,ml=new WeakMap,Lu=new WeakMap;function qv(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(rn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Jp.set(n,t)}).catch(()=>{}),Lu.set(e,t),e}function Xv(t){if(wa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wa.set(t,e)}let Ca={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jv(t){Ca=t(Ca)}function Zv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gl(this),e,...n);return Zp.set(r,e.sort?e.sort():[e]),rn(r)}:Kv().includes(t)?function(...e){return t.apply(gl(this),e),rn(Jp.get(this))}:function(...e){return rn(t.apply(gl(this),e))}}function e0(t){return typeof t=="function"?Zv(t):(t instanceof IDBTransaction&&Xv(t),Qv(t,Yv())?new Proxy(t,Ca):t)}function rn(t){if(t instanceof IDBRequest)return qv(t);if(ml.has(t))return ml.get(t);const e=e0(t);return e!==t&&(ml.set(t,e),Lu.set(e,t)),e}const gl=t=>Lu.get(t);function t0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=rn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(rn(o.result),a.oldVersion,a.newVersion,rn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const n0=["get","getKey","getAll","getAllKeys","count"],r0=["put","add","delete","clear"],_l=new Map;function Md(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_l.get(e))return _l.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=r0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n0.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return _l.set(e,s),s}Jv(t=>({...t,get:(e,n,r)=>Md(e,n)||t.get(e,n,r),has:(e,n)=>!!Md(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function s0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ea="@firebase/app",Ld="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new Xp("@firebase/app"),o0="@firebase/app-compat",l0="@firebase/analytics-compat",a0="@firebase/analytics",u0="@firebase/app-check-compat",c0="@firebase/app-check",d0="@firebase/auth",f0="@firebase/auth-compat",h0="@firebase/database",p0="@firebase/data-connect",m0="@firebase/database-compat",g0="@firebase/functions",_0="@firebase/functions-compat",y0="@firebase/installations",v0="@firebase/installations-compat",w0="@firebase/messaging",C0="@firebase/messaging-compat",E0="@firebase/performance",S0="@firebase/performance-compat",x0="@firebase/remote-config",k0="@firebase/remote-config-compat",I0="@firebase/storage",T0="@firebase/storage-compat",R0="@firebase/firestore",N0="@firebase/ai",P0="@firebase/firestore-compat",D0="firebase",A0="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]",b0={[Ea]:"fire-core",[o0]:"fire-core-compat",[a0]:"fire-analytics",[l0]:"fire-analytics-compat",[c0]:"fire-app-check",[u0]:"fire-app-check-compat",[d0]:"fire-auth",[f0]:"fire-auth-compat",[h0]:"fire-rtdb",[p0]:"fire-data-connect",[m0]:"fire-rtdb-compat",[g0]:"fire-fn",[_0]:"fire-fn-compat",[y0]:"fire-iid",[v0]:"fire-iid-compat",[w0]:"fire-fcm",[C0]:"fire-fcm-compat",[E0]:"fire-perf",[S0]:"fire-perf-compat",[x0]:"fire-rc",[k0]:"fire-rc-compat",[I0]:"fire-gcs",[T0]:"fire-gcs-compat",[R0]:"fire-fst",[P0]:"fire-fst-compat",[N0]:"fire-vertex","fire-js":"fire-js",[D0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new Map,O0=new Map,xa=new Map;function Fd(t,e){try{t.container.addComponent(e)}catch(n){Ft.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function eo(t){const e=t.name;if(xa.has(e))return Ft.debug(`There were multiple attempts to register component ${e}.`),!1;xa.set(e,t);for(const n of Zs.values())Fd(n,t);for(const n of O0.values())Fd(n,t);return!0}function M0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function L0(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sn=new Kp("app","Firebase",F0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=A0;function em(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sa,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw sn.create("bad-app-name",{appName:String(i)});if(n||(n=Qp()),!n)throw sn.create("no-options");const s=Zs.get(i);if(s){if(Js(n,s.options)&&Js(r,s.config))return s;throw sn.create("duplicate-app",{appName:i})}const o=new Uv(i);for(const a of xa.values())o.addComponent(a);const l=new z0(n,r,o);return Zs.set(i,l),l}function B0(t=Sa){const e=Zs.get(t);if(!e&&t===Sa&&Qp())return em();if(!e)throw sn.create("no-app",{appName:t});return e}function lr(t,e,n){var r;let i=(r=b0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ft.warn(l.join(" "));return}eo(new Ri(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="firebase-heartbeat-database",U0=1,Ni="firebase-heartbeat-store";let yl=null;function tm(){return yl||(yl=t0(W0,U0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ni)}catch(n){console.warn(n)}}}}).catch(t=>{throw sn.create("idb-open",{originalErrorMessage:t.message})})),yl}async function H0(t){try{const n=(await tm()).transaction(Ni),r=await n.objectStore(Ni).get(nm(t));return await n.done,r}catch(e){if(e instanceof Wi)Ft.warn(e.message);else{const n=sn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ft.warn(n.message)}}}async function zd(t,e){try{const r=(await tm()).transaction(Ni,"readwrite");await r.objectStore(Ni).put(e,nm(t)),await r.done}catch(n){if(n instanceof Wi)Ft.warn(n.message);else{const r=sn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ft.warn(r.message)}}}function nm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=1024,$0=30;class G0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jd();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>$0){const o=K0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ft.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jd(),{heartbeatsToSend:r,unsentEntries:i}=Q0(this._heartbeatsCache.heartbeats),s=qs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ft.warn(n),""}}}function jd(){return new Date().toISOString().substring(0,10)}function Q0(t,e=V0){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bd(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Y0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nv()?Pv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await H0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bd(t){return qs(JSON.stringify({version:2,heartbeats:t})).length}function K0(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){eo(new Ri("platform-logger",e=>new i0(e),"PRIVATE")),eo(new Ri("heartbeat",e=>new G0(e),"PRIVATE")),lr(Ea,Ld,t),lr(Ea,Ld,"esm2017"),lr("fire-js","")}q0("");var X0="firebase",J0="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(X0,J0,"app");var Wd={};const Ud="@firebase/database",Hd="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rm="";function Z0(t){rm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Se(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ti(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new e1(e)}}catch{}return new t1},En=im("localStorage"),n1=im("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Xp("@firebase/database"),r1=function(){let t=1;return function(){return t++}}(),sm=function(t){const e=zv(t),n=new Fv;n.update(e);const r=n.digest();return bu.encodeByteArray(r)},Hi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Hi.apply(null,r):typeof r=="object"?e+=Se(r):e+=r,e+=" "}return e};let ri=null,Vd=!0;const i1=function(t,e){N(!0,"Can't turn on custom loggers persistently."),ar.logLevel=J.VERBOSE,ri=ar.log.bind(ar)},Ae=function(...t){if(Vd===!0&&(Vd=!1,ri===null&&n1.get("logging_enabled")===!0&&i1()),ri){const e=Hi.apply(null,t);ri(e)}},Vi=function(t){return function(...e){Ae(t,...e)}},ka=function(...t){const e="FIREBASE INTERNAL ERROR: "+Hi(...t);ar.error(e)},zt=function(...t){const e=`FIREBASE FATAL ERROR: ${Hi(...t)}`;throw ar.error(e),new Error(e)},Ge=function(...t){const e="FIREBASE WARNING: "+Hi(...t);ar.warn(e)},s1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ge("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},om=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},o1=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vr="[MIN_NAME]",Dn="[MAX_NAME]",Ir=function(t,e){if(t===e)return 0;if(t===vr||e===Dn)return-1;if(e===vr||t===Dn)return 1;{const n=$d(t),r=$d(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},l1=function(t,e){return t===e?0:t<e?-1:1},zr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Se(e))},Fu=function(t){if(typeof t!="object"||t===null)return Se(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Se(e[r]),n+=":",n+=Fu(t[e[r]]);return n+="}",n},lm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const am=function(t){N(!om(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let d="";for(a=0;a<64;a+=8){let c=parseInt(f.substr(a,8),2).toString(16);c.length===1&&(c="0"+c),d=d+c}return d.toLowerCase()},a1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},u1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function c1(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const d1=new RegExp("^-?(0*)\\d{1,10}$"),f1=-2147483648,h1=2147483647,$d=function(t){if(d1.test(t)){const e=Number(t);if(e>=f1&&e<=h1)return e}return null},Tr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ge("Exception was thrown by user callback.",n),e},Math.floor(0))}},p1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ii=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,L0(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ge(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ae("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ge(e)}}class ks{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ks.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu="5",um="v",cm="s",dm="r",fm="f",hm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pm="ls",mm="p",Ia="ac",gm="websocket",_m="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=En.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&En.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function _1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vm(t,e,n){N(typeof e=="string","typeof type must == string"),N(typeof n=="object","typeof params must == object");let r;if(e===gm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===_m)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_1(t)&&(n.ns=t.namespace);const i=[];return Qe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.counters_={}}incrementCounter(e,n=1){Wt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return hv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl={},wl={};function ju(t){const e=t.toString();return vl[e]||(vl[e]=new y1),vl[e]}function v1(t,e){const n=t.toString();return wl[n]||(wl[n]=e()),wl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Tr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="start",C1="close",E1="pLPCommand",S1="pRTLPCB",wm="id",Cm="pw",Em="ser",x1="cb",k1="seg",I1="ts",T1="d",R1="dframe",Sm=1870,xm=30,N1=Sm-xm,P1=25e3,D1=3e4;class er{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vi(e),this.stats_=ju(n),this.urlFn=a=>(this.appCheckToken&&(a[Ia]=this.appCheckToken),vm(n,_m,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new w1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(D1)),o1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bu((...s)=>{const[o,l,a,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Gd)this.id=l,this.password=a;else if(o===C1)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Gd]="t",r[Em]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[x1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[um]=zu,this.transportSessionId&&(r[cm]=this.transportSessionId),this.lastSessionId&&(r[pm]=this.lastSessionId),this.applicationId&&(r[mm]=this.applicationId),this.appCheckToken&&(r[Ia]=this.appCheckToken),typeof location<"u"&&location.hostname&&hm.test(location.hostname)&&(r[dm]=fm);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){er.forceAllow_=!0}static forceDisallow(){er.forceDisallow_=!0}static isAvailable(){return er.forceAllow_?!0:!er.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a1()&&!u1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Se(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Vp(n),i=lm(r,N1);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[R1]="t",r[wm]=e,r[Cm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Se(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Bu{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=r1(),window[E1+this.uniqueCallbackIdentifier]=e,window[S1+this.uniqueCallbackIdentifier]=n,this.myIFrame=Bu.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ae("frame writing exception"),l.stack&&Ae(l.stack),Ae(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ae("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wm]=this.myID,e[Cm]=this.myPW,e[Em]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xm+r.length<=Sm;){const o=this.pendingSegs.shift();r=r+"&"+k1+i+"="+o.seg+"&"+I1+i+"="+o.ts+"&"+T1+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(P1)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ae("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=16384,b1=45e3;let to=null;typeof MozWebSocket<"u"?to=MozWebSocket:typeof WebSocket<"u"&&(to=WebSocket);class dt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vi(this.connId),this.stats_=ju(n),this.connURL=dt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[um]=zu,typeof location<"u"&&location.hostname&&hm.test(location.hostname)&&(o[dm]=fm),n&&(o[cm]=n),r&&(o[pm]=r),i&&(o[Ia]=i),s&&(o[mm]=s),vm(e,gm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,En.set("previous_websocket_failure",!0);try{let r;Rv(),this.mySock=new to(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){dt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&to!==null&&!dt.forceDisallow_}static previouslyFailed(){return En.isInMemoryStorage||En.get("previous_websocket_failure")===!0}markConnectionHealthy(){En.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ti(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(N(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Se(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lm(n,A1);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(b1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dt.responsesRequiredToBeHealthy=2;dt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static get ALL_TRANSPORTS(){return[er,dt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=dt&&dt.isAvailable();let r=n&&!dt.previouslyFailed();if(e.webSocketOnly&&(n||Ge("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dt];else{const i=this.transports_=[];for(const s of Pi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Pi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=6e4,M1=5e3,L1=10*1024,F1=100*1024,Cl="t",Qd="d",z1="s",Yd="r",j1="e",Kd="o",qd="a",Xd="n",Jd="p",B1="h";class W1{constructor(e,n,r,i,s,o,l,a,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vi("c:"+this.id+":"),this.transportManager_=new Pi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ii(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>F1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>L1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cl in e){const n=e[Cl];n===qd?this.upgradeIfSecondaryHealthy_():n===Yd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Kd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=zr("t",e),r=zr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Jd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=zr("t",e),r=zr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=zr(Cl,e);if(Qd in e){const r=e[Qd];if(n===B1){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Xd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===z1?this.onConnectionShutdown_(r):n===Yd?this.onReset_(r):n===j1?ka("Server Error: "+r):n===Kd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ka("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zu!==r&&Ge("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ii(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(O1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ii(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(M1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Jd,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(En.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.allowedEvents_=e,this.listeners_={},N(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){N(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Im{static getInstance(){return new no}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return N(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=32,ef=768;class X{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Y(){return new X("")}function U(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function un(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new X(t.pieces_,e)}function Tm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function U1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Rm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Nm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new X(e,0)}function ye(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof X)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new X(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function We(t,e){const n=U(t),r=U(e);if(n===null)return e;if(n===r)return We(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Wu(t,e){if(un(t)!==un(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ft(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(un(t)>un(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class H1{constructor(e,n){this.errorPrefix_=n,this.parts_=Rm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=bo(this.parts_[r]);Pm(this)}}function V1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=bo(e),Pm(t)}function $1(t){const e=t.parts_.pop();t.byteLength_-=bo(e),t.parts_.length>0&&(t.byteLength_-=1)}function Pm(t){if(t.byteLength_>ef)throw new Error(t.errorPrefix_+"has a key path longer than "+ef+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zd)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zd+") or object contains a cycle "+yn(t))}function yn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Im{static getInstance(){return new Uu}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return N(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=1e3,G1=60*5*1e3,tf=30*1e3,Q1=1.3,Y1=3e4,K1="server_kill",nf=3;class Pt extends km{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Pt.nextPersistentConnectionId_++,this.log_=Vi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jr,this.maxReconnectDelay_=G1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&no.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Se(s)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ao,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Pt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Wt(e,"w")){const r=yr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Ge(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Mv(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=tf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Ov(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Se(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ka("Unrecognized action received from server: "+Se(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=jr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Y1&&(this.reconnectDelay_=jr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Q1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Pt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){N(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,c]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?Ae("getToken() completed but was canceled"):(Ae("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=c&&c.token,l=new W1(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{Ge(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(K1)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ge(d),a())}}}interrupt(e){Ae("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ae("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dd(this.interruptReasons_)&&(this.reconnectDelay_=jr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Fu(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new X(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Ae("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=nf&&(this.reconnectDelay_=tf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ae("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=nf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+rm.replace(/\./g,"-")]=1,Yp()?e["framework.cordova"]=1:Tv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=no.getInstance().currentlyOnline();return Dd(this.interruptReasons_)&&e}}Pt.nextPersistentConnectionId_=0;Pt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new H(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new H(vr,e),i=new H(vr,n);return this.compare(r,i)!==0}minPost(){return H.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds;class Dm extends Oo{static get __EMPTY_NODE(){return ds}static set __EMPTY_NODE(e){ds=e}compare(e,n){return Ir(e.name,n.name)}isDefinedOn(e){throw kr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return H.MIN}maxPost(){return new H(Dn,ds)}makePost(e,n){return N(typeof e=="string","KeyIndex indexValue must always be a string."),new H(e,ds)}toString(){return".key"}}const ur=new Dm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ee{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ee.RED,this.left=i??Ue.EMPTY_NODE,this.right=s??Ue.EMPTY_NODE}copy(e,n,r,i,s){return new Ee(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ue.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ue.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ee.RED=!0;Ee.BLACK=!1;class q1{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ee(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ue{constructor(e,n=Ue.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ue(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ee.BLACK,null,null))}remove(e){return new Ue(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ee.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fs(this.root_,null,this.comparator_,!0,e)}}Ue.EMPTY_NODE=new q1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e){return Ir(t.name,e.name)}function Hu(t,e){return Ir(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta;function J1(t){Ta=t}const Am=function(t){return typeof t=="number"?"number:"+am(t):"string:"+t},bm=function(t){if(t.isLeafNode()){const e=t.val();N(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wt(e,".sv"),"Priority must be a string or number.")}else N(t===Ta||t.isEmpty(),"priority of unexpected type.");N(t===Ta||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf;class we{static set __childrenNodeConstructor(e){rf=e}static get __childrenNodeConstructor(){return rf}constructor(e,n=we.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new we(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:we.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return V(e)?this:U(e)===".priority"?this.priorityNode_:we.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:we.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=U(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(N(r!==".priority"||un(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,we.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Am(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=am(this.value_):e+=this.value_,this.lazyHash_=sm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===we.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof we.__childrenNodeConstructor?-1:(N(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=we.VALUE_TYPE_ORDER.indexOf(n),s=we.VALUE_TYPE_ORDER.indexOf(r);return N(i>=0,"Unknown leaf type: "+n),N(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}we.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om,Mm;function Z1(t){Om=t}function ew(t){Mm=t}class tw extends Oo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ir(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return H.MIN}maxPost(){return new H(Dn,new we("[PRIORITY-POST]",Mm))}makePost(e,n){const r=Om(e);return new H(n,new we("[PRIORITY-POST]",r))}toString(){return".priority"}}const ce=new tw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=Math.log(2);class rw{constructor(e){const n=s=>parseInt(Math.log(s)/nw,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ro=function(t,e,n,r){t.sort(e);const i=function(a,u){const f=u-a;let d,c;if(f===0)return null;if(f===1)return d=t[a],c=n?n(d):d,new Ee(c,d.node,Ee.BLACK,null,null);{const g=parseInt(f/2,10)+a,_=i(a,g),E=i(g+1,u);return d=t[g],c=n?n(d):d,new Ee(c,d.node,Ee.BLACK,_,E)}},s=function(a){let u=null,f=null,d=t.length;const c=function(_,E){const I=d-_,p=d;d-=_;const h=i(I+1,p),m=t[I],y=n?n(m):m;g(new Ee(y,m.node,E,null,h))},g=function(_){u?(u.left=_,u=_):(f=_,u=_)};for(let _=0;_<a.count;++_){const E=a.nextBitIsOne(),I=Math.pow(2,a.count-(_+1));E?c(I,Ee.BLACK):(c(I,Ee.BLACK),c(I,Ee.RED))}return f},o=new rw(t.length),l=s(o);return new Ue(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El;const Bn={};class Rt{static get Default(){return N(Bn&&ce,"ChildrenNode.ts has not been loaded"),El=El||new Rt({".priority":Bn},{".priority":ce}),El}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=yr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ue?n:null}hasIndex(e){return Wt(this.indexSet_,e.toString())}addIndex(e,n){N(e!==ur,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(H.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=ro(r,e.getCompare()):l=Bn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const f=Object.assign({},this.indexes_);return f[a]=l,new Rt(f,u)}addToIndexes(e,n){const r=Xs(this.indexes_,(i,s)=>{const o=yr(this.indexSet_,s);if(N(o,"Missing index implementation for "+s),i===Bn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(H.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),ro(l,o.getCompare())}else return Bn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new H(e.name,l))),a.insert(e,e.node)}});return new Rt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Xs(this.indexes_,i=>{if(i===Bn)return i;{const s=n.get(e.name);return s?i.remove(new H(e.name,s)):i}});return new Rt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Br;class j{static get EMPTY_NODE(){return Br||(Br=new j(new Ue(Hu),null,Rt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&bm(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Br}updatePriority(e){return this.children_.isEmpty()?this:new j(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Br:n}}getChild(e){const n=U(e);return n===null?this:this.getImmediateChild(n).getChild(Z(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(N(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new H(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Br:this.priorityNode_;return new j(i,o,s)}}updateChild(e,n){const r=U(e);if(r===null)return n;{N(U(e)!==".priority"||un(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Z(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ce,(o,l)=>{n[o]=l.val(e),r++,s&&j.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Am(this.getPriority().val())+":"),this.forEachChild(ce,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":sm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new H(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new H(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new H(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,H.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,H.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$i?-1:0}withIndex(e){if(e===ur||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new j(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ur||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ce),i=n.getIterator(ce);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ur?null:this.indexMap_.get(e.toString())}}j.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class iw extends j{constructor(){super(new Ue(Hu),j.EMPTY_NODE,Rt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return j.EMPTY_NODE}isEmpty(){return!1}}const $i=new iw;Object.defineProperties(H,{MIN:{value:new H(vr,j.EMPTY_NODE)},MAX:{value:new H(Dn,$i)}});Dm.__EMPTY_NODE=j.EMPTY_NODE;we.__childrenNodeConstructor=j;J1($i);ew($i);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=!0;function Ie(t,e=null){if(t===null)return j.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),N(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new we(n,Ie(e))}if(!(t instanceof Array)&&sw){const n=[];let r=!1;if(Qe(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ie(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new H(o,a)))}}),n.length===0)return j.EMPTY_NODE;const s=ro(n,X1,o=>o.name,Hu);if(r){const o=ro(n,ce.getCompare());return new j(s,Ie(e),new Rt({".priority":o},{".priority":ce}))}else return new j(s,Ie(e),Rt.Default)}else{let n=j.EMPTY_NODE;return Qe(t,(r,i)=>{if(Wt(t,r)&&r.substring(0,1)!=="."){const s=Ie(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ie(e))}}Z1(Ie);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends Oo{constructor(e){super(),this.indexPath_=e,N(!V(e)&&U(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ir(e.name,n.name):s}makePost(e,n){const r=Ie(e),i=j.EMPTY_NODE.updateChild(this.indexPath_,r);return new H(n,i)}maxPost(){const e=j.EMPTY_NODE.updateChild(this.indexPath_,$i);return new H(Dn,e)}toString(){return Rm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw extends Oo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ir(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return H.MIN}maxPost(){return H.MAX}makePost(e,n){const r=Ie(e);return new H(n,r)}toString(){return".value"}}const aw=new lw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){return{type:"value",snapshotNode:t}}function wr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Di(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ai(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function uw(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Di(n,l)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(wr(n,r)):o.trackChildChange(Ai(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ce,(i,s)=>{n.hasChild(i)||r.trackChildChange(Di(i,s))}),n.isLeafNode()||n.forEachChild(ce,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ai(i,s,o))}else r.trackChildChange(wr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?j.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.indexedFilter_=new Vu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bi.getStartPost_(e),this.endPost_=bi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new H(n,r))||(r=j.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=j.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(j.EMPTY_NODE);const s=this;return n.forEachChild(ce,(o,l)=>{s.matches(new H(o,l))||(i=i.updateImmediateChild(o,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new bi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new H(n,r))||(r=j.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=j.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(j.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(c,g)=>d(g,c)}else o=this.index_.getCompare();const l=e;N(l.numChildren()===this.limit_,"");const a=new H(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let c=i.getChildAfterChild(this.index_,u,this.reverse_);for(;c!=null&&(c.name===n||l.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const g=c==null?1:o(c,a);if(f&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(Ai(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Di(n,d));const E=l.updateImmediateChild(n,j.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(s!=null&&s.trackChildChange(wr(c.name,c.node)),E.updateImmediateChild(c.name,c.node)):E}}else return r.isEmpty()?e:f&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Di(u.name,u.node)),s.trackChildChange(wr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,j.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vr}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ce}copy(){const e=new $u;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dw(t){return t.loadsAllData()?new Vu(t.getIndex()):t.hasLimit()?new cw(t):new bi(t)}function sf(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ce?n="$priority":t.index_===aw?n="$value":t.index_===ur?n="$key":(N(t.index_ instanceof ow,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Se(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Se(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Se(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Se(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Se(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function of(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ce&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends km{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vi("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=io.getListenId_(e,r),l={};this.listens_[o]=l;const a=sf(e._queryParams);this.restRequest_(s+".json",a,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),yr(this.listens_,o)===l){let c;u?u===401?c="permission_denied":c="rest_error:"+u:c="ok",i(c,null)}})}unlisten(e,n){const r=io.getListenId_(e,n);delete this.listens_[r]}get(e){const n=sf(e._queryParams),r=e._path.toString(),i=new Ao;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Lv(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Ti(l.responseText)}catch{Ge("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Ge("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return{value:null,children:new Map}}function Fm(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=U(e);t.children.has(r)||t.children.set(r,so());const i=t.children.get(r);e=Z(e),Fm(i,e,n)}}function Ra(t,e,n){t.value!==null?n(e,t.value):hw(t,(r,i)=>{const s=new X(e.toString()+"/"+r);Ra(i,s,n)})}function hw(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Qe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=10*1e3,mw=30*1e3,gw=5*60*1e3;class _w{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new pw(e);const r=lf+(mw-lf)*Math.random();ii(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Qe(e,(i,s)=>{s>0&&Wt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ii(this.reportStats_.bind(this),Math.floor(Math.random()*2*gw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ht||(ht={}));function zm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ht.ACK_USER_WRITE,this.source=zm()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new X(e));return new oo(Y(),n,this.revert)}}else return N(U(this.path)===e,"operationForChild called for unrelated child."),new oo(Z(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.source=e,this.path=n,this.type=ht.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new Oi(this.source,Y()):new Oi(this.source,Z(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ht.OVERWRITE}operationForChild(e){return V(this.path)?new An(this.source,Y(),this.snap.getImmediateChild(e)):new An(this.source,Z(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ht.MERGE}operationForChild(e){if(V(this.path)){const n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new An(this.source,Y(),n.value):new Mi(this.source,Y(),n)}else return N(U(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Mi(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;const n=U(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function vw(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(uw(o.childName,o.snapshotNode))}),Wr(t,i,"child_removed",e,r,n),Wr(t,i,"child_added",e,r,n),Wr(t,i,"child_moved",s,r,n),Wr(t,i,"child_changed",e,r,n),Wr(t,i,"value",e,r,n),i}function Wr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>Cw(t,l,a)),o.forEach(l=>{const a=ww(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function ww(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Cw(t,e,n){if(e.childName==null||n.childName==null)throw kr("Should only compare child_ events.");const r=new H(e.childName,e.snapshotNode),i=new H(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e){return{eventCache:t,serverCache:e}}function si(t,e,n,r){return Mo(new bn(e,n,r),t.serverCache)}function jm(t,e,n,r){return Mo(t.eventCache,new bn(e,n,r))}function Na(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function On(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl;const Ew=()=>(Sl||(Sl=new Ue(l1)),Sl);class ne{static fromObject(e){let n=new ne(null);return Qe(e,(r,i)=>{n=n.set(new X(r),i)}),n}constructor(e,n=Ew()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Y(),value:this.value};if(V(e))return null;{const r=U(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Z(e),n);return s!=null?{path:ye(new X(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{const n=U(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new ne(null)}}set(e,n){if(V(e))return new ne(n,this.children);{const r=U(e),s=(this.children.get(r)||new ne(null)).set(Z(e),n),o=this.children.insert(r,s);return new ne(this.value,o)}}remove(e){if(V(e))return this.children.isEmpty()?new ne(null):new ne(null,this.children);{const n=U(e),r=this.children.get(n);if(r){const i=r.remove(Z(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ne(null):new ne(this.value,s)}else return this}}get(e){if(V(e))return this.value;{const n=U(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(V(e))return n;{const r=U(e),s=(this.children.get(r)||new ne(null)).setTree(Z(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ne(this.value,o)}}fold(e){return this.fold_(Y(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ye(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Y(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(V(e))return null;{const s=U(e),o=this.children.get(s);return o?o.findOnPath_(Z(e),ye(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Y(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);const i=U(e),s=this.children.get(i);return s?s.foreachOnPath_(Z(e),ye(n,i),r):new ne(null)}}foreach(e){this.foreach_(Y(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ye(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.writeTree_=e}static empty(){return new gt(new ne(null))}}function oi(t,e,n){if(V(e))return new gt(new ne(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=We(i,e);return s=s.updateChild(o,n),new gt(t.writeTree_.set(i,s))}else{const i=new ne(n),s=t.writeTree_.setTree(e,i);return new gt(s)}}}function af(t,e,n){let r=t;return Qe(n,(i,s)=>{r=oi(r,ye(e,i),s)}),r}function uf(t,e){if(V(e))return gt.empty();{const n=t.writeTree_.setTree(e,new ne(null));return new gt(n)}}function Pa(t,e){return Fn(t,e)!=null}function Fn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(We(n.path,e)):null}function cf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ce,(r,i)=>{e.push(new H(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new H(r,i.value))}),e}function on(t,e){if(V(e))return t;{const n=Fn(t,e);return n!=null?new gt(new ne(n)):new gt(t.writeTree_.subtree(e))}}function Da(t){return t.writeTree_.isEmpty()}function Cr(t,e){return Bm(Y(),t.writeTree_,e)}function Bm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(N(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Bm(ye(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ye(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e){return Vm(e,t)}function Sw(t,e,n,r,i){N(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=oi(t.visibleWrites,e,n)),t.lastWriteId=r}function xw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function kw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);N(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&Iw(l,r.path)?i=!1:ft(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return Tw(t),!0;if(r.snap)t.visibleWrites=uf(t.visibleWrites,r.path);else{const l=r.children;Qe(l,a=>{t.visibleWrites=uf(t.visibleWrites,ye(r.path,a))})}return!0}else return!1}function Iw(t,e){if(t.snap)return ft(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ft(ye(t.path,n),e))return!0;return!1}function Tw(t){t.visibleWrites=Wm(t.allWrites,Rw,Y()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Rw(t){return t.visible}function Wm(t,e,n){let r=gt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)ft(n,o)?(l=We(n,o),r=oi(r,l,s.snap)):ft(o,n)&&(l=We(o,n),r=oi(r,Y(),s.snap.getChild(l)));else if(s.children){if(ft(n,o))l=We(n,o),r=af(r,l,s.children);else if(ft(o,n))if(l=We(o,n),V(l))r=af(r,Y(),s.children);else{const a=yr(s.children,U(l));if(a){const u=a.getChild(Z(l));r=oi(r,Y(),u)}}}else throw kr("WriteRecord should have .snap or .children")}}return r}function Um(t,e,n,r,i){if(!r&&!i){const s=Fn(t.visibleWrites,e);if(s!=null)return s;{const o=on(t.visibleWrites,e);if(Da(o))return n;if(n==null&&!Pa(o,Y()))return null;{const l=n||j.EMPTY_NODE;return Cr(o,l)}}}else{const s=on(t.visibleWrites,e);if(!i&&Da(s))return n;if(!i&&n==null&&!Pa(s,Y()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ft(u.path,e)||ft(e,u.path))},l=Wm(t.allWrites,o,e),a=n||j.EMPTY_NODE;return Cr(l,a)}}}function Nw(t,e,n){let r=j.EMPTY_NODE;const i=Fn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ce,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=on(t.visibleWrites,e);return n.forEachChild(ce,(o,l)=>{const a=Cr(on(s,new X(o)),l);r=r.updateImmediateChild(o,a)}),cf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=on(t.visibleWrites,e);return cf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Pw(t,e,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ye(e,n);if(Pa(t.visibleWrites,s))return null;{const o=on(t.visibleWrites,s);return Da(o)?i.getChild(n):Cr(o,i.getChild(n))}}function Dw(t,e,n,r){const i=ye(e,n),s=Fn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=on(t.visibleWrites,i);return Cr(o,r.getNode().getImmediateChild(n))}else return null}function Aw(t,e){return Fn(t.visibleWrites,e)}function bw(t,e,n,r,i,s,o){let l;const a=on(t.visibleWrites,e),u=Fn(a,Y());if(u!=null)l=u;else if(n!=null)l=Cr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],d=o.getCompare(),c=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let g=c.getNext();for(;g&&f.length<i;)d(g,r)!==0&&f.push(g),g=c.getNext();return f}else return[]}function Ow(){return{visibleWrites:gt.empty(),allWrites:[],lastWriteId:-1}}function lo(t,e,n,r){return Um(t.writeTree,t.treePath,e,n,r)}function Ku(t,e){return Nw(t.writeTree,t.treePath,e)}function df(t,e,n,r){return Pw(t.writeTree,t.treePath,e,n,r)}function ao(t,e){return Aw(t.writeTree,ye(t.treePath,e))}function Mw(t,e,n,r,i,s){return bw(t.writeTree,t.treePath,e,n,r,i,s)}function qu(t,e,n){return Dw(t.writeTree,t.treePath,e,n)}function Hm(t,e){return Vm(ye(t.treePath,e),t.writeTree)}function Vm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;N(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),N(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ai(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Di(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ai(r,e.snapshotNode,i.oldSnap));else throw kr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const $m=new Fw;class Xu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new bn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qu(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:On(this.viewCache_),s=Mw(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){return{filter:t}}function jw(t,e){N(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),N(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Bw(t,e,n,r,i){const s=new Lw;let o,l;if(n.type===ht.OVERWRITE){const u=n;u.source.fromUser?o=Aa(t,e,u.path,u.snap,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!V(u.path),o=uo(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===ht.MERGE){const u=n;u.source.fromUser?o=Uw(t,e,u.path,u.children,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=ba(t,e,u.path,u.children,r,i,l,s))}else if(n.type===ht.ACK_USER_WRITE){const u=n;u.revert?o=$w(t,e,u.path,r,i,s):o=Hw(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===ht.LISTEN_COMPLETE)o=Vw(t,e,n.path,r,s);else throw kr("Unknown operation type: "+n.type);const a=s.getChanges();return Ww(e,o,a),{viewCache:o,changes:a}}function Ww(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Na(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Lm(Na(e)))}}function Gm(t,e,n,r,i,s){const o=e.eventCache;if(ao(r,n)!=null)return e;{let l,a;if(V(n))if(N(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=On(e),f=u instanceof j?u:j.EMPTY_NODE,d=Ku(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=lo(r,On(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=U(n);if(u===".priority"){N(un(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=e.serverCache.getNode();const d=df(r,n,f,a);d!=null?l=t.filter.updatePriority(f,d):l=o.getNode()}else{const f=Z(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const c=df(r,n,o.getNode(),a);c!=null?d=o.getNode().getImmediateChild(u).updateChild(f,c):d=o.getNode().getImmediateChild(u)}else d=qu(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,f,i,s):l=o.getNode()}}return si(e,l,o.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function uo(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(V(n))u=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const g=a.getNode().updateChild(n,r);u=f.updateFullNode(a.getNode(),g,null)}else{const g=U(n);if(!a.isCompleteForPath(n)&&un(n)>1)return e;const _=Z(n),I=a.getNode().getImmediateChild(g).updateChild(_,r);g===".priority"?u=f.updatePriority(a.getNode(),I):u=f.updateChild(a.getNode(),g,I,_,$m,null)}const d=jm(e,u,a.isFullyInitialized()||V(n),f.filtersNodes()),c=new Xu(i,d,s);return Gm(t,d,n,i,c,l)}function Aa(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const f=new Xu(i,e,s);if(V(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=si(e,u,!0,t.filter.filtersNodes());else{const d=U(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=si(e,u,l.isFullyInitialized(),l.isFiltered());else{const c=Z(n),g=l.getNode().getImmediateChild(d);let _;if(V(c))_=r;else{const E=f.getCompleteChild(d);E!=null?Tm(c)===".priority"&&E.getChild(Nm(c)).isEmpty()?_=E:_=E.updateChild(c,r):_=j.EMPTY_NODE}if(g.equals(_))a=e;else{const E=t.filter.updateChild(l.getNode(),d,_,c,f,o);a=si(e,E,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function ff(t,e){return t.eventCache.isCompleteForChild(e)}function Uw(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const f=ye(n,a);ff(e,U(f))&&(l=Aa(t,l,f,u,i,s,o))}),r.foreach((a,u)=>{const f=ye(n,a);ff(e,U(f))||(l=Aa(t,l,f,u,i,s,o))}),l}function hf(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ba(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;V(n)?u=r:u=new ne(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,c)=>{if(f.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),_=hf(t,g,c);a=uo(t,a,new X(d),_,i,s,o,l)}}),u.children.inorderTraversal((d,c)=>{const g=!e.serverCache.isCompleteForChild(d)&&c.value===null;if(!f.hasChild(d)&&!g){const _=e.serverCache.getNode().getImmediateChild(d),E=hf(t,_,c);a=uo(t,a,new X(d),E,i,s,o,l)}}),a}function Hw(t,e,n,r,i,s,o){if(ao(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(V(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return uo(t,e,n,a.getNode().getChild(n),i,s,l,o);if(V(n)){let u=new ne(null);return a.getNode().forEachChild(ur,(f,d)=>{u=u.set(new X(f),d)}),ba(t,e,n,u,i,s,l,o)}else return e}else{let u=new ne(null);return r.foreach((f,d)=>{const c=ye(n,f);a.isCompleteForPath(c)&&(u=u.set(f,a.getNode().getChild(c)))}),ba(t,e,n,u,i,s,l,o)}}function Vw(t,e,n,r,i){const s=e.serverCache,o=jm(e,s.getNode(),s.isFullyInitialized()||V(n),s.isFiltered());return Gm(t,o,n,r,$m,i)}function $w(t,e,n,r,i,s){let o;if(ao(r,n)!=null)return e;{const l=new Xu(r,e,i),a=e.eventCache.getNode();let u;if(V(n)||U(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=lo(r,On(e));else{const d=e.serverCache.getNode();N(d instanceof j,"serverChildren would be complete if leaf node"),f=Ku(r,d)}f=f,u=t.filter.updateFullNode(a,f,s)}else{const f=U(n);let d=qu(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=a.getImmediateChild(f)),d!=null?u=t.filter.updateChild(a,f,d,Z(n),l,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(a,f,j.EMPTY_NODE,Z(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lo(r,On(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||ao(r,Y())!=null,si(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Vu(r.getIndex()),s=dw(r);this.processor_=zw(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(j.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(j.EMPTY_NODE,l.getNode(),null),f=new bn(a,o.isFullyInitialized(),i.filtersNodes()),d=new bn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Mo(d,f),this.eventGenerator_=new yw(this.query_)}get query(){return this.query_}}function Qw(t){return t.viewCache_.serverCache.getNode()}function Yw(t,e){const n=On(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild(U(e)).isEmpty())?n.getChild(e):null}function pf(t){return t.eventRegistrations_.length===0}function Kw(t,e){t.eventRegistrations_.push(e)}function mf(t,e,n){const r=[];if(n){N(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function gf(t,e,n,r){e.type===ht.MERGE&&e.source.queryId!==null&&(N(On(t.viewCache_),"We should always have a full cache before handling merges"),N(Na(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Bw(t.processor_,i,e,n,r);return jw(t.processor_,s.viewCache),N(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Qm(t,s.changes,s.viewCache.eventCache.getNode(),null)}function qw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ce,(s,o)=>{r.push(wr(s,o))}),n.isFullyInitialized()&&r.push(Lm(n.getNode())),Qm(t,r,n.getNode(),e)}function Qm(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return vw(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co;class Xw{constructor(){this.views=new Map}}function Jw(t){N(!co,"__referenceConstructor has already been defined"),co=t}function Zw(){return N(co,"Reference.ts has not been loaded"),co}function eC(t){return t.views.size===0}function Ju(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return N(s!=null,"SyncTree gave us an op for an invalid query."),gf(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(gf(o,e,n,r));return s}}function tC(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=lo(n,i?r:null),a=!1;l?a=!0:r instanceof j?(l=Ku(n,r),a=!1):(l=j.EMPTY_NODE,a=!1);const u=Mo(new bn(l,a,!1),new bn(r,i,!1));return new Gw(e,u)}return o}function nC(t,e,n,r,i,s){const o=tC(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Kw(o,n),qw(o,n)}function rC(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=cn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(mf(u,n,r)),pf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(mf(a,n,r)),pf(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!cn(t)&&s.push(new(Zw())(e._repo,e._path)),{removed:s,events:o}}function Ym(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function cr(t,e){let n=null;for(const r of t.views.values())n=n||Yw(r,e);return n}function Km(t,e){if(e._queryParams.loadsAllData())return Lo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function qm(t,e){return Km(t,e)!=null}function cn(t){return Lo(t)!=null}function Lo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo;function iC(t){N(!fo,"__referenceConstructor has already been defined"),fo=t}function sC(){return N(fo,"Reference.ts has not been loaded"),fo}let oC=1;class _f{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ne(null),this.pendingWriteTree_=Ow(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xm(t,e,n,r,i){return Sw(t.pendingWriteTree_,e,n,r,i),i?Gi(t,new An(zm(),e,n)):[]}function Sn(t,e,n=!1){const r=xw(t.pendingWriteTree_,e);if(kw(t.pendingWriteTree_,e)){let s=new ne(null);return r.snap!=null?s=s.set(Y(),!0):Qe(r.children,o=>{s=s.set(new X(o),!0)}),Gi(t,new oo(r.path,s,n))}else return[]}function Fo(t,e,n){return Gi(t,new An(Gu(),e,n))}function lC(t,e,n){const r=ne.fromObject(n);return Gi(t,new Mi(Gu(),e,r))}function aC(t,e){return Gi(t,new Oi(Gu(),e))}function uC(t,e,n){const r=ec(t,n);if(r){const i=tc(r),s=i.path,o=i.queryId,l=We(s,e),a=new Oi(Qu(o),l);return nc(t,s,a)}else return[]}function Oa(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||qm(o,e))){const a=rC(o,e,n,r);eC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const f=u.findIndex(c=>c._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(c,g)=>cn(g));if(f&&!d){const c=t.syncPointTree_.subtree(s);if(!c.isEmpty()){const g=fC(c);for(let _=0;_<g.length;++_){const E=g[_],I=E.query,p=eg(t,E);t.listenProvider_.startListening(li(I),ho(t,I),p.hashFn,p.onComplete)}}}!d&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(li(e),null):u.forEach(c=>{const g=t.queryToTagMap.get(zo(c));t.listenProvider_.stopListening(li(c),g)}))}hC(t,u)}return l}function cC(t,e,n,r){const i=ec(t,r);if(i!=null){const s=tc(i),o=s.path,l=s.queryId,a=We(o,e),u=new An(Qu(l),a,n);return nc(t,o,u)}else return[]}function dC(t,e,n,r){const i=ec(t,r);if(i){const s=tc(i),o=s.path,l=s.queryId,a=We(o,e),u=ne.fromObject(n),f=new Mi(Qu(l),a,u);return nc(t,o,f)}else return[]}function yf(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(c,g)=>{const _=We(c,i);s=s||cr(g,_),o=o||cn(g)});let l=t.syncPointTree_.get(i);l?(o=o||cn(l),s=s||cr(l,Y())):(l=new Xw,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=j.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,_)=>{const E=cr(_,Y());E&&(s=s.updateImmediateChild(g,E))}));const u=qm(l,e);if(!u&&!e._queryParams.loadsAllData()){const c=zo(e);N(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const g=pC();t.queryToTagMap.set(c,g),t.tagToQueryMap.set(g,c)}const f=Yu(t.pendingWriteTree_,i);let d=nC(l,e,n,f,s,a);if(!u&&!o&&!r){const c=Km(l,e);d=d.concat(mC(t,e,c))}return d}function Zu(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=We(o,e),u=cr(l,a);if(u)return u});return Um(i,e,s,n,!0)}function Gi(t,e){return Jm(e,t.syncPointTree_,null,Yu(t.pendingWriteTree_,Y()))}function Jm(t,e,n,r){if(V(t.path))return Zm(t,e,n,r);{const i=e.get(Y());n==null&&i!=null&&(n=cr(i,Y()));let s=[];const o=U(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,f=Hm(r,o);s=s.concat(Jm(l,a,u,f))}return i&&(s=s.concat(Ju(i,t,r,n))),s}}function Zm(t,e,n,r){const i=e.get(Y());n==null&&i!=null&&(n=cr(i,Y()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Hm(r,o),f=t.operationForChild(o);f&&(s=s.concat(Zm(f,l,a,u)))}),i&&(s=s.concat(Ju(i,t,r,n))),s}function eg(t,e){const n=e.query,r=ho(t,n);return{hashFn:()=>(Qw(e)||j.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?uC(t,n._path,r):aC(t,n._path);{const s=c1(i,n);return Oa(t,n,null,s)}}}}function ho(t,e){const n=zo(e);return t.queryToTagMap.get(n)}function zo(t){return t._path.toString()+"$"+t._queryIdentifier}function ec(t,e){return t.tagToQueryMap.get(e)}function tc(t){const e=t.indexOf("$");return N(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}}function nc(t,e,n){const r=t.syncPointTree_.get(e);N(r,"Missing sync point for query tag that we're tracking");const i=Yu(t.pendingWriteTree_,e);return Ju(r,n,i,null)}function fC(t){return t.fold((e,n,r)=>{if(n&&cn(n))return[Lo(n)];{let i=[];return n&&(i=Ym(n)),Qe(r,(s,o)=>{i=i.concat(o)}),i}})}function li(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(sC())(t._repo,t._path):t}function hC(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=zo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function pC(){return oC++}function mC(t,e,n){const r=e._path,i=ho(t,e),s=eg(t,n),o=t.listenProvider_.startListening(li(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)N(!cn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,f,d)=>{if(!V(u)&&f&&cn(f))return[Lo(f).query];{let c=[];return f&&(c=c.concat(Ym(f).map(g=>g.query))),Qe(d,(g,_)=>{c=c.concat(_)}),c}});for(let u=0;u<a.length;++u){const f=a[u];t.listenProvider_.stopListening(li(f),ho(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new rc(n)}node(){return this.node_}}class ic{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ye(this.path_,e);return new ic(this.syncTree_,n)}node(){return Zu(this.syncTree_,this.path_)}}const gC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vf=function(t,e,n){if(!t||typeof t!="object")return t;if(N(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _C(t[".sv"],e,n);if(typeof t[".sv"]=="object")return yC(t[".sv"],e);N(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_C=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:N(!1,"Unexpected server value: "+t)}},yC=function(t,e,n){t.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&N(!1,"Unexpected increment value: "+r);const i=e.node();if(N(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},vC=function(t,e,n,r){return sc(e,new ic(n,t),r)},tg=function(t,e,n){return sc(t,new rc(e),n)};function sc(t,e,n){const r=t.getPriority().val(),i=vf(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=vf(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new we(l,Ie(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new we(i))),o.forEachChild(ce,(l,a)=>{const u=sc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function lc(t,e){let n=e instanceof X?e:new X(e),r=t,i=U(n);for(;i!==null;){const s=yr(r.node.children,i)||{children:{},childCount:0};r=new oc(i,r,s),n=Z(n),i=U(n)}return r}function Rr(t){return t.node.value}function ng(t,e){t.node.value=e,Ma(t)}function rg(t){return t.node.childCount>0}function wC(t){return Rr(t)===void 0&&!rg(t)}function jo(t,e){Qe(t.node.children,(n,r)=>{e(new oc(n,t,r))})}function ig(t,e,n,r){n&&e(t),jo(t,i=>{ig(i,e,!0)})}function CC(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Qi(t){return new X(t.parent===null?t.name:Qi(t.parent)+"/"+t.name)}function Ma(t){t.parent!==null&&EC(t.parent,t.name,t)}function EC(t,e,n){const r=wC(n),i=Wt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ma(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ma(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=/[\[\].#$\/\u0000-\u001F\u007F]/,xC=/[\[\].#$\u0000-\u001F\u007F]/,xl=10*1024*1024,sg=function(t){return typeof t=="string"&&t.length!==0&&!SC.test(t)},og=function(t){return typeof t=="string"&&t.length!==0&&!xC.test(t)},kC=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),og(t)},IC=function(t,e,n,r){ac(Mu(t,"value"),e,n)},ac=function(t,e,n){const r=n instanceof X?new H1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+yn(r));if(typeof e=="function")throw new Error(t+"contains a function "+yn(r)+" with contents = "+e.toString());if(om(e))throw new Error(t+"contains "+e.toString()+" "+yn(r));if(typeof e=="string"&&e.length>xl/3&&bo(e)>xl)throw new Error(t+"contains a string greater than "+xl+" utf8 bytes "+yn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Qe(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!sg(o)))throw new Error(t+" contains an invalid key ("+o+") "+yn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);V1(r,o),ac(t,l,r),$1(r)}),i&&s)throw new Error(t+' contains ".value" child '+yn(r)+" in addition to actual children.")}},lg=function(t,e,n,r){if(!og(n))throw new Error(Mu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},TC=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lg(t,e,n)},RC=function(t,e){if(U(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},NC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kC(n))throw new Error(Mu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Wu(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ag(t,e,n){uc(t,n),ug(t,r=>Wu(r,e))}function jt(t,e,n){uc(t,n),ug(t,r=>ft(r,e)||ft(e,r))}function ug(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(DC(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function DC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ri&&Ae("event: "+n.toString()),Tr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="repo_interrupt",bC=25;class OC{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=so(),this.transactionQueueTree_=new oc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function MC(t,e,n){if(t.stats_=ju(t.repoInfo_),t.forceRestClient_||p1())t.server_=new io(t.repoInfo_,(r,i,s,o)=>{wf(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Cf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Se(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Pt(t.repoInfo_,e,(r,i,s,o)=>{wf(t,r,i,s,o)},r=>{Cf(t,r)},r=>{FC(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=v1(t.repoInfo_,()=>new _w(t.stats_,t.server_)),t.infoData_=new fw,t.infoSyncTree_=new _f({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Fo(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),dc(t,"connected",!1),t.serverSyncTree_=new _f({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);jt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function LC(t){const n=t.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function cc(t){return gC({timestamp:LC(t)})}function wf(t,e,n,r,i){t.dataUpdateCount++;const s=new X(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Xs(n,u=>Ie(u));o=dC(t.serverSyncTree_,s,a,i)}else{const a=Ie(n);o=cC(t.serverSyncTree_,s,a,i)}else if(r){const a=Xs(n,u=>Ie(u));o=lC(t.serverSyncTree_,s,a)}else{const a=Ie(n);o=Fo(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Bo(t,s)),jt(t.eventQueue_,l,o)}function Cf(t,e){dc(t,"connected",e),e===!1&&jC(t)}function FC(t,e){Qe(e,(n,r)=>{dc(t,n,r)})}function dc(t,e,n){const r=new X("/.info/"+e),i=Ie(n);t.infoData_.updateSnapshot(r,i);const s=Fo(t.infoSyncTree_,r,i);jt(t.eventQueue_,r,s)}function cg(t){return t.nextWriteId_++}function zC(t,e,n,r,i){fc(t,"set",{path:e.toString(),value:n,priority:r});const s=cc(t),o=Ie(n,r),l=Zu(t.serverSyncTree_,e),a=tg(o,l,s),u=cg(t),f=Xm(t.serverSyncTree_,e,a,u,!0);uc(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(c,g)=>{const _=c==="ok";_||Ge("set at "+e+" failed: "+c);const E=Sn(t.serverSyncTree_,u,!_);jt(t.eventQueue_,e,E),UC(t,i,c,g)});const d=mg(t,e);Bo(t,d),jt(t.eventQueue_,d,[])}function jC(t){fc(t,"onDisconnectEvents");const e=cc(t),n=so();Ra(t.onDisconnect_,Y(),(i,s)=>{const o=vC(i,s,t.serverSyncTree_,e);Fm(n,i,o)});let r=[];Ra(n,Y(),(i,s)=>{r=r.concat(Fo(t.serverSyncTree_,i,s));const o=mg(t,i);Bo(t,o)}),t.onDisconnect_=so(),jt(t.eventQueue_,Y(),r)}function BC(t,e,n){let r;U(e._path)===".info"?r=yf(t.infoSyncTree_,e,n):r=yf(t.serverSyncTree_,e,n),ag(t.eventQueue_,e._path,r)}function La(t,e,n){let r;U(e._path)===".info"?r=Oa(t.infoSyncTree_,e,n):r=Oa(t.serverSyncTree_,e,n),ag(t.eventQueue_,e._path,r)}function WC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(AC)}function fc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ae(n,...e)}function UC(t,e,n,r){e&&Tr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function dg(t,e,n){return Zu(t.serverSyncTree_,e,n)||j.EMPTY_NODE}function hc(t,e=t.transactionQueueTree_){if(e||Wo(t,e),Rr(e)){const n=hg(t,e);N(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&HC(t,Qi(e),n)}else rg(e)&&jo(e,n=>{hc(t,n)})}function HC(t,e,n){const r=n.map(u=>u.currentWriteId),i=dg(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];N(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=We(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{fc(t,"transaction put response",{path:a.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let c=0;c<n.length;c++)n[c].status=2,f=f.concat(Sn(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&d.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();Wo(t,lc(t.transactionQueueTree_,e)),hc(t,t.transactionQueueTree_),jt(t.eventQueue_,e,f);for(let c=0;c<d.length;c++)Tr(d[c])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ge("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Bo(t,e)}},o)}function Bo(t,e){const n=fg(t,e),r=Qi(n),i=hg(t,n);return VC(t,i,r),r}function VC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=We(n,a.path);let f=!1,d;if(N(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,d=a.abortReason,i=i.concat(Sn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=bC)f=!0,d="maxretry",i=i.concat(Sn(t.serverSyncTree_,a.currentWriteId,!0));else{const c=dg(t,a.path,o);a.currentInputSnapshot=c;const g=e[l].update(c.val());if(g!==void 0){ac("transaction failed: Data returned ",g,a.path);let _=Ie(g);typeof g=="object"&&g!=null&&Wt(g,".priority")||(_=_.updatePriority(c.getPriority()));const I=a.currentWriteId,p=cc(t),h=tg(_,c,p);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=h,a.currentWriteId=cg(t),o.splice(o.indexOf(I),1),i=i.concat(Xm(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(Sn(t.serverSyncTree_,I,!0))}else f=!0,d="nodata",i=i.concat(Sn(t.serverSyncTree_,a.currentWriteId,!0))}jt(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(c){setTimeout(c,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}Wo(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Tr(r[l]);hc(t,t.transactionQueueTree_)}function fg(t,e){let n,r=t.transactionQueueTree_;for(n=U(e);n!==null&&Rr(r)===void 0;)r=lc(r,n),e=Z(e),n=U(e);return r}function hg(t,e){const n=[];return pg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function pg(t,e,n){const r=Rr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);jo(e,i=>{pg(t,i,n)})}function Wo(t,e){const n=Rr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,ng(e,n.length>0?n:void 0)}jo(e,r=>{Wo(t,r)})}function mg(t,e){const n=Qi(fg(t,e)),r=lc(t.transactionQueueTree_,e);return CC(r,i=>{kl(t,i)}),kl(t,r),ig(r,i=>{kl(t,i)}),n}function kl(t,e){const n=Rr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(N(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(N(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Sn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?ng(e,void 0):n.length=s+1,jt(t.eventQueue_,Qi(e),i);for(let o=0;o<r.length;o++)Tr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function GC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ge(`Invalid query segment '${n}' in query '${t}'`)}return e}const Ef=function(t,e){const n=QC(t),r=n.namespace;n.domain==="firebase.com"&&zt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&zt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||s1();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ym(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new X(n.pathString)}},QC=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=$C(t.substring(f,d)));const c=GC(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in c&&(s=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Se(this.snapshot.exportVal())}}class KC{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return V(this._path)?null:Tm(this._path)}get ref(){return new pn(this._repo,this._path)}get _queryIdentifier(){const e=of(this._queryParams),n=Fu(e);return n==="{}"?"default":n}get _queryObject(){return of(this._queryParams)}isEqual(e){if(e=Ui(e),!(e instanceof pc))return!1;const n=this._repo===e._repo,r=Wu(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+U1(this._path)}}class pn extends pc{constructor(e,n){super(e,n,new $u,!1)}get parent(){const e=Nm(this._path);return e===null?null:new pn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class po{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new X(e),r=Fa(this.ref,e);return new po(this._node.getChild(n),r,ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new po(i,Fa(this.ref,r),ce)))}hasChild(e){const n=new X(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function XC(t,e){return t=Ui(t),t._checkNotDeleted("ref"),e!==void 0?Fa(t._root,e):t._root}function Fa(t,e){return t=Ui(t),U(t._path)===null?TC("child","path",e):lg("child","path",e),new pn(t._repo,ye(t._path,e))}function JC(t,e){t=Ui(t),RC("set",t._path),IC("set",e,t._path);const n=new Ao;return zC(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class mc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new YC("value",this,new po(e.snapshotNode,new pn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new KC(this,e,n):null}matches(e){return e instanceof mc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function ZC(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(f,d)=>{La(t._repo,t,l),a(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new qC(n,s||void 0),l=new mc(o);return BC(t._repo,t,l),()=>La(t._repo,t,l)}function eE(t,e,n,r){return ZC(t,"value",e,n,r)}function tE(t,e,n){La(t._repo,t,null)}Jw(pn);iC(pn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="FIREBASE_DATABASE_EMULATOR_HOST",za={};let rE=!1;function iE(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=Ou(s);t.repoInfo_=new ym(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function sE(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||zt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ae("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Ef(s,i),l=o.repoInfo,a;typeof process<"u"&&Wd&&(a=Wd[nE]),a?(s=`http://${a}?ns=${l.namespace}`,o=Ef(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new g1(t.name,t.options,e);NC("Invalid Firebase Database URL",o),V(o.path)||zt("Database URL must point to the root of a Firebase Database (not including a child path).");const f=lE(l,t,u,new m1(t,n));return new aE(f,t)}function oE(t,e){const n=za[e];(!n||n[t.key]!==t)&&zt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),WC(t),delete n[t.key]}function lE(t,e,n,r){let i=za[e.name];i||(i={},za[e.name]=i);let s=i[t.toURLString()];return s&&zt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new OC(t,rE,n,r),i[t.toURLString()]=s,s}class aE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(MC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pn(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zt("Cannot call "+e+" on a deleted database.")}}function uE(t=B0(),e){const n=M0(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=wv("database");r&&cE(n,...r)}return n}function cE(t,e,n,r={}){t=Ui(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Js(r,s.repoInfo_.emulatorOptions))return;zt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&zt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ks(ks.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:Ev(r.mockUserToken,t.app.options.projectId);o=new ks(l)}Ou(e)&&(Cv(e),kv("Database",!0)),iE(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){Z0(j0),eo(new Ri("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return sE(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),lr(Ud,Hd,t),lr(Ud,Hd,"esm2017")}Pt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Pt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};dE();const fE={},de=fE,gg={apiKey:de==null?void 0:de.VITE_FIREBASE_API_KEY,authDomain:de==null?void 0:de.VITE_FIREBASE_AUTH_DOMAIN,databaseURL:de==null?void 0:de.VITE_FIREBASE_DATABASE_URL,projectId:de==null?void 0:de.VITE_FIREBASE_PROJECT_ID,storageBucket:de==null?void 0:de.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:de==null?void 0:de.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:de==null?void 0:de.VITE_FIREBASE_APP_ID},_g=Object.values(gg).every(t=>t&&t!=="undefined");let Sf=null,mo=null;if(_g)try{Sf=em(gg),mo=uE(Sf),console.log("✅ Firebase 초기화 성공")}catch(t){console.warn("⚠️ Firebase 초기화 실패:",t)}else console.warn("⚠️ Firebase 환경변수가 설정되지 않음. localStorage만 사용됩니다.");const yg=(t="mainBoard")=>mo?XC(mo,`boards/${t}`):null,ai=()=>!!mo&&_g,hE=async(t,e="mainBoard")=>{if(!ai())return console.warn("Firebase를 사용할 수 없습니다. localStorage만 사용됩니다."),!1;try{const n=yg(e);if(n)return await JC(n,{...t,lastUpdated:Date.now(),updatedBy:"admin"}),console.log("✅ Firebase에 보드 상태 저장 성공"),!0}catch(n){return console.error("❌ Firebase 저장 실패:",n),!1}return!1},pE=(t,e="mainBoard")=>{if(!ai())return console.warn("Firebase를 사용할 수 없습니다."),null;const n=yg(e);if(!n)return null;const r=eE(n,i=>{const s=i.val();s&&(console.log("🔄 Firebase에서 보드 상태 업데이트 수신"),t(s))},i=>{console.error("❌ Firebase 구독 오류:",i)});return()=>{tE(n),r()}},gc=({shapes:t,strokes:e,selectedId:n,setShapes:r,setStrokes:i,setSelectedId:s,onClearHistory:o,silent:l=!1})=>{const a=S.useCallback(()=>({shapes:t,strokes:e,selectedId:n,timestamp:Date.now()}),[t,e,n]),u=S.useCallback(p=>{r(p.shapes||[]),i(p.strokes||[]),s(p.selectedId||null),o&&o()},[r,i,s,o]),f=S.useCallback((p,h="board-state")=>{try{return localStorage.setItem(h,JSON.stringify(p)),!0}catch(m){return console.error("localStorage 저장 실패:",m),!1}},[]),d=S.useCallback((p="board-state")=>{try{const h=localStorage.getItem(p);if(h)return JSON.parse(h)}catch(h){console.error("localStorage 불러오기 실패:",h)}return null},[]),c=S.useCallback(()=>{const p=a(),h=JSON.stringify(p,null,2),m=new Blob([h],{type:"application/json"}),y=document.createElement("a");y.href=URL.createObjectURL(m),y.download=`board-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,y.click(),l||alert("보드가 파일로 저장되었습니다.")},[a,l]),g=S.useCallback(()=>{const p=document.createElement("input");p.type="file",p.accept=".json",p.onchange=h=>{var y;const m=(y=h.target.files)==null?void 0:y[0];if(m){const v=new FileReader;v.onload=w=>{var k;try{const x=JSON.parse((k=w.target)==null?void 0:k.result);u(x),l||alert("보드가 파일에서 불러와졌습니다.")}catch(x){console.error("파일 파싱 실패:",x),alert("올바르지 않은 파일 형식입니다.")}},v.readAsText(m)}},p.click()},[u,l]),_=S.useCallback(async()=>{const p=a();await hE(p)?(l||alert("✅ 현장으로 전송되었습니다."),console.log("Firebase 푸시 성공")):(f(p,"board-push-state"),l||alert("⚠️ Firebase 연결 실패. 로컬에 임시 저장되었습니다."))},[a,l,f]),E=S.useCallback(()=>{const p=a();f(p,"board-push-state"),l||alert("관리자 상태가 저장되었습니다.")},[a,f,l]),I=S.useCallback(()=>{const p=d("board-push-state");p?(u(p),l||alert("관리자 상태를 불러왔습니다.")):l||alert("저장된 관리자 상태가 없습니다.")},[d,u,l]);return{saveToFile:c,loadFromFile:g,pushToFirebase:_,pushToStorage:E,pullFromStorage:I,getCurrentBoardState:a,restoreBoardState:u,saveToLocalStorage:f,loadFromLocalStorage:d}},mE=({shapes:t,selectedId:e,gridSize:n,showGrid:r})=>{const i=S.useRef(null),s=S.useCallback((o,l,a)=>{o.fillStyle=ev,o.strokeStyle="#ffffff",o.lineWidth=1,o.fillRect(l-St/2,a-St/2,St,St),o.strokeRect(l-St/2,a-St/2,St,St)},[]);return S.useEffect(()=>{var u;const o=i.current;if(!o)return;const l=o.getContext("2d");if(!l)return;jp(l),r&&nv(l,n);const a=t.map(f=>({...f,selected:f.id===e}));if(lv(l,a),e){const f=t.find(d=>d.id===e);if((u=f==null?void 0:f.meta)!=null&&u.isResizable){const{x:d,y:c,width:g=100,height:_=60}=f;s(l,d+g/2,c),s(l,d,c),s(l,d+g,c),s(l,d,c+_/2),s(l,d+g,c+_/2),s(l,d+g/2,c+_),s(l,d,c+_),s(l,d+g,c+_)}}},[t,e,n,r,s]),C.jsx("canvas",{ref:i,width:Mt,height:Lt,style:{position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none"}})},gE=({strokes:t,currentStroke:e})=>{const n=S.useRef(null);return S.useEffect(()=>{const r=n.current;if(!r)return;const i=r.getContext("2d");i&&(jp(i),Id(i,t),e&&Id(i,[e]))},[t,e]),C.jsx("canvas",{ref:n,width:Mt,height:Lt,style:{position:"absolute",top:0,left:0,zIndex:2,pointerEvents:"auto"}})},_E=({tool:t,shapes:e,gridSize:n,selectedId:r,onToolChange:i,onStartStroke:s,onAddPointToStroke:o,onFinishStroke:l,onEraseAtPoint:a,onSelectShape:u,onCreateRect:f,currentStrokeId:d,onDeleteSelectedShape:c,onDuplicateSelectedShape:g,onMoveShape:_,onResizeShape:E})=>{const I=S.useRef(null),p=S.useRef(!1),h=S.useRef(null),m=S.useRef(null),y=S.useRef(!1),v=S.useRef(null),w=S.useRef(null),k=S.useRef(!1),x=S.useRef(null),M=S.useRef(null),L=S.useRef(null),W=S.useCallback(()=>{m.current&&clearTimeout(m.current),(t==="pen"||t==="eraser")&&(m.current=window.setTimeout(()=>{i&&i("select")},Xy))},[t,i]),he=S.useCallback(()=>{m.current&&(clearTimeout(m.current),m.current=null)},[]),F=S.useCallback((b,A)=>{const T=I.current;if(!T)return{x:0,y:0};const D=T.getBoundingClientRect(),z=Mt/D.width,B=Lt/D.height;return{x:(b-D.left)*z,y:(A-D.top)*B}},[]),se=S.useCallback((b,A)=>{const{x:T,y:D,width:z=100,height:B=60}=A,G=St,K={"top-left":{x:T,y:D},top:{x:T+z/2,y:D},"top-right":{x:T+z,y:D},left:{x:T,y:D+B/2},right:{x:T+z,y:D+B/2},"bottom-left":{x:T,y:D+B},bottom:{x:T+z/2,y:D+B},"bottom-right":{x:T+z,y:D+B}};for(const[ot,zn]of Object.entries(K))if(b.x>=zn.x-G/2&&b.x<=zn.x+G/2&&b.y>=zn.y-G/2&&b.y<=zn.y+G/2)return ot;return null},[]),me=S.useCallback(b=>{u(b),i("select")},[u,i]),ge=S.useCallback(b=>{var T,D;const A=F(b.clientX,b.clientY);switch(t){case"pen":p.current=!0,h.current=A,s(A),W();break;case"eraser":p.current=!0,a(A),W();break;case"select":const z=av(e,A);if(z){if(u(z.id),(T=z.meta)!=null&&T.isResizable){const K=se(A,z);K&&(k.current=!0,x.current=A,w.current=z,L.current=K,M.current={width:z.width||100,height:z.height||60})}!k.current&&((D=z.meta)==null?void 0:D.isMovable)!==!1&&_&&(y.current=!0,v.current=A,w.current=z)}else u(null);break;case"rect":const B=ti(A,n),G=f(B);me(G);break}b.preventDefault()},[t,e,n,s,a,u,f,i,F,W,_,se,me]),ze=S.useCallback(b=>{const A=F(b.clientX,b.clientY);switch(t){case"pen":p.current&&d&&h.current&&Math.sqrt(Math.pow(A.x-h.current.x,2)+Math.pow(A.y-h.current.y,2))>2&&(o(d,A),h.current=A,W());break;case"eraser":p.current&&(a(A),W());break;case"select":if(k.current&&w.current&&x.current&&M.current&&E){const T=A.x-x.current.x,D=A.y-x.current.y,z=L.current;let B=M.current.width,G=M.current.height,K=w.current.x,ot=w.current.y;switch(z){case"top-left":B=Math.max(50,M.current.width-T),G=Math.max(50,M.current.height-D),K=w.current.x+(M.current.width-B),ot=w.current.y+(M.current.height-G);break;case"top":G=Math.max(50,M.current.height-D),ot=w.current.y+(M.current.height-G);break;case"top-right":B=Math.max(50,M.current.width+T),G=Math.max(50,M.current.height-D),ot=w.current.y+(M.current.height-G);break;case"left":B=Math.max(50,M.current.width-T),K=w.current.x+(M.current.width-B);break;case"right":B=Math.max(50,M.current.width+T);break;case"bottom-left":B=Math.max(50,M.current.width-T),G=Math.max(50,M.current.height+D),K=w.current.x+(M.current.width-B);break;case"bottom":G=Math.max(50,M.current.height+D);break;case"bottom-right":B=Math.max(50,M.current.width+T),G=Math.max(50,M.current.height+D);break}const zn=Math.round(B/n)*n,wg=Math.round(G/n)*n,Cg=Math.round(K/n)*n,Eg=Math.round(ot/n)*n;E(w.current.id,{width:zn,height:wg,x:Cg,y:Eg})}else if(y.current&&w.current&&v.current&&_){const T=A.x-v.current.x,D=A.y-v.current.y,z={x:w.current.x+T,y:w.current.y+D};_(w.current.id,z),v.current=A,w.current={...w.current,x:z.x,y:z.y}}break}b.preventDefault()},[t,d,o,a,F,W,_,E,n]),P=S.useCallback(b=>{switch(t){case"pen":p.current&&(p.current=!1,h.current=null,l(),W());break;case"eraser":p.current&&(p.current=!1,W());break;case"select":if(k.current)k.current=!1,x.current=null,M.current=null,L.current=null;else if(y.current&&w.current&&_){const A=ti({x:w.current.x,y:w.current.y},n);_(w.current.id,A),y.current=!1,v.current=null,w.current=null}break}b.preventDefault()},[t,l,W,_,n]);return S.useEffect(()=>{const b=T=>{var B;const D=document.activeElement;if(!(D&&(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.getAttribute("contenteditable")==="true"||D.getAttribute("contenteditable")==="")&&(T.key==="Delete"||T.key==="Backspace"))){if(T.ctrlKey||T.metaKey){switch(T.key.toLowerCase()){case"d":T.preventDefault(),r&&g&&g();break}return}switch(T.key){case"Escape":T.preventDefault(),u(null),i("select");break;case"Delete":case"Backspace":if(T.preventDefault(),r&&c){const G=e.find(K=>K.id===r);((B=G==null?void 0:G.meta)==null?void 0:B.isDeletable)!==!1&&c()}break;case"1":T.preventDefault(),i("select");break;case"2":T.preventDefault(),i("pen");break;case"3":T.preventDefault(),i("eraser");break;case"4":T.preventDefault(),i("rect");break}}},A=I.current;return A&&(A.tabIndex=0),window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[r,e,u,i,c,g]),S.useEffect(()=>()=>{he()},[he]),C.jsx("canvas",{ref:I,width:Mt,height:Lt,style:{position:"absolute",top:0,left:0,zIndex:3,pointerEvents:"auto",cursor:t==="pen"?"crosshair":t==="eraser"?"pointer":t==="select"?"default":t==="rect"?"crosshair":"default",outline:"none"},onPointerDown:ge,onPointerMove:ze,onPointerUp:P,onPointerLeave:P})},vg=({tool:t,shapes:e,strokes:n,penColor:r,penSize:i,gridSize:s,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u,onUndoRedoStateChange:f,onSave:d,onLoad:c,onPushPull:g,onCommand:_,onToolChange:E})=>{const[I,p]=S.useState(null),[h,m]=S.useState(null),[y]=S.useState(!0),v=Wp({shapes:e,strokes:n,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u}),w=gc({shapes:e,strokes:n,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u,onClearHistory:v.clearHistory}),k=tv({setStrokes:a,penColor:r,penSize:i}),x=Bp({shapes:e,setShapes:l,selectedId:o,setSelectedId:u,gridSize:s});ui.useEffect(()=>{f&&f(v.canUndo,v.canRedo)},[v.canUndo,v.canRedo,f]);const M=S.useCallback(T=>{const D=k.startStroke(T);return m(D),p({id:D,points:[T],color:r,size:i,isErasable:!0}),D},[k,r,i]),L=S.useCallback((T,D)=>{k.addPointToStroke(T,D),I&&I.id===T&&p(z=>z?{...z,points:[...z.points,D]}:null)},[k,I]),W=S.useCallback(()=>{I&&v.recordCreateStroke(I),p(null),m(null)},[I,v]),he=S.useCallback(T=>{const D=[...n];k.eraseAtPoint(T),setTimeout(()=>{const z=n,B=D.filter(G=>!z.some(K=>K.id===G.id));B.length>0&&v.recordDeleteStrokes(B)},0)},[n,k,v]),F=S.useCallback(()=>{var D;if(!o)return;const T=e.find(z=>z.id===o);!T||((D=T.meta)==null?void 0:D.isDeletable)===!1||(v.recordDeleteShape(o),x.deleteSelectedShape())},[o,e,v,x]),se=S.useCallback(()=>{o&&(x.duplicateShape(o),setTimeout(()=>{const T=v.getCurrentState();v.recordBatchAction(v.getCurrentState(),T)},0))},[o,x,v]),me=S.useCallback((T,D)=>{var G;const z=e.find(K=>K.id===T);if(!z||((G=z.meta)==null?void 0:G.isMovable)===!1)return;const B=v.getCurrentState();x.moveShape(T,D),setTimeout(()=>{const K=v.getCurrentState();v.recordBatchAction(B,K)},0)},[e,x,v]),ge=S.useCallback(T=>{const D=x.createRect(T);return setTimeout(()=>{const z=e.find(B=>B.id===D);z&&v.recordCreateShape(z)},0),E&&E("select"),D},[x,e,v,E]),ze=S.useCallback((T,D)=>{var G;const z=e.find(K=>K.id===T);if(!z||!((G=z.meta)!=null&&G.isResizable))return;const B=v.getCurrentState();x.updateShapeProperty(T,"width",D.width),x.updateShapeProperty(T,"height",D.height),D.x!==void 0&&x.updateShapeProperty(T,"x",D.x),D.y!==void 0&&x.updateShapeProperty(T,"y",D.y),setTimeout(()=>{const K=v.getCurrentState();v.recordBatchAction(B,K)},0)},[e,x,v]),P=S.useCallback(T=>{switch(T){case"save":w.saveToFile(),d&&d();break;case"load":w.loadFromFile(),c&&c();break;case"push":w.pushToStorage(),g&&g("push");break;case"pull":w.pullFromStorage(),g&&g("pull");break;case"undo":v.undo();break;case"redo":v.redo();break}},[w,v,d,c,g]);ui.useEffect(()=>{_&&typeof _=="string"&&P(_)},[_,P]);const b=S.useCallback(()=>{const T=window.innerWidth-40,D=window.innerHeight-40,z=T/Mt,B=D/Lt;return{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${Math.min(z,B,1)})`,transformOrigin:"center",width:`${Mt}px`,height:`${Lt}px`,border:"1px solid #ccc",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",backgroundColor:"white"}},[]),A=S.useRef(null);return S.useEffect(()=>{A.current&&(window.clearTimeout(A.current),A.current=null)},[t]),C.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#f5f5f5",overflow:"hidden"},children:C.jsxs("div",{style:b(),children:[C.jsx(mE,{shapes:e,selectedId:o,gridSize:s,showGrid:y}),C.jsx(gE,{strokes:n,currentStroke:I}),C.jsx(_E,{tool:t,shapes:e,penColor:r,penSize:i,gridSize:s,selectedId:o,onToolChange:E,onStartStroke:M,onAddPointToStroke:L,onFinishStroke:W,onEraseAtPoint:he,onSelectShape:x.selectShape,onCreateRect:ge,currentStrokeId:h,onDeleteSelectedShape:F,onDuplicateSelectedShape:se,onMoveShape:me,onResizeShape:ze})]})})},yE=({currentTool:t,onToolChange:e,onCommand:n,penColor:r,penSize:i,onPenColorChange:s,onPenSizeChange:o,gridSize:l,onGridSizeChange:a})=>{const[u,f]=S.useState(!1),d=[16,40,64,100,128],c=[{command:"select",label:"선택",icon:"👆"},{command:"pen",label:"펜",icon:"✏️"},{command:"eraser",label:"지우개",icon:"🧹"},{command:"rect",label:"사각형",icon:"⬜"}],g=[{command:"undo",label:"실행취소",icon:"↩️"},{command:"redo",label:"다시실행",icon:"↪️"},{command:"image",label:"이미지",icon:"🖼️"},{command:"save",label:"저장",icon:"💾"},{command:"load",label:"불러오기",icon:"📁"},{command:"push",label:"Push",icon:"📤"},{command:"pull",label:"Pull",icon:"📥"},{command:"settings",label:"설정",icon:"⚙️"},{command:"grid",label:"그리드",icon:"⚏"}];return C.jsxs("div",{style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"12px",backgroundColor:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",maxWidth:"240px"},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"그리기 도구"}),C.jsx("div",{style:{display:"flex",gap:"5px"},children:c.map(({command:_,label:E,icon:I})=>C.jsxs("button",{onClick:()=>e(_),style:{padding:"8px 12px",border:t===_?"2px solid #0066ff":"1px solid #ccc",borderRadius:"4px",backgroundColor:t===_?"#f0f8ff":"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",fontSize:"11px",minWidth:"50px"},title:E,children:[C.jsx("span",{style:{fontSize:"16px"},children:I}),C.jsx("span",{children:E})]},_))})]}),(t==="pen"||t==="eraser")&&C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"도구 설정"}),t==="pen"&&C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"30px"},children:"색상:"}),C.jsx("input",{type:"color",value:r,onChange:_=>s(_.target.value),style:{width:"32px",height:"24px",border:"none",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"30px"},children:"크기:"}),C.jsx("input",{type:"range",min:"1",max:"20",value:i,onChange:_=>o(Number(_.target.value)),style:{flex:1}}),C.jsx("span",{style:{fontSize:"11px",width:"24px",textAlign:"center"},children:i})]})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"명령"}),C.jsx("div",{style:{display:"flex",gap:"5px"},children:g.map(({command:_,label:E,icon:I})=>C.jsxs("button",{onClick:()=>n(_),style:{padding:"6px 8px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",fontSize:"10px",minWidth:"60px",flex:1},title:E,children:[C.jsx("span",{style:{fontSize:"14px"},children:I}),C.jsx("span",{children:E})]},_))})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"기타"}),C.jsxs("div",{style:{display:"flex",gap:"5px"},children:[C.jsxs("div",{style:{position:"relative",flex:1},children:[C.jsxs("button",{onClick:()=>f(!u),style:{padding:"6px 8px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",fontSize:"10px",minWidth:"60px",width:"100%"},title:`그리드 (현재: ${l}px)`,children:[C.jsx("span",{style:{fontSize:"14px"},children:"⚏"}),C.jsx("span",{children:"그리드"}),C.jsxs("span",{style:{fontSize:"8px"},children:[l,"px"]})]}),u&&C.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:1001,marginTop:"2px"},children:d.map(_=>C.jsxs("button",{onClick:()=>{a==null||a(_),f(!1)},style:{width:"100%",padding:"8px",border:"none",backgroundColor:l===_?"#f0f8ff":"white",color:l===_?"#0066ff":"#333",cursor:"pointer",fontSize:"11px",textAlign:"left",borderBottom:"1px solid #eee"},children:[_,"px"]},_))})]}),C.jsxs("button",{onClick:()=>n("settings"),style:{padding:"6px 8px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",fontSize:"10px",minWidth:"60px",flex:1},title:"설정",children:[C.jsx("span",{style:{fontSize:"14px"},children:"⚙️"}),C.jsx("span",{children:"설정"})]})]})]})]})},vE=({selectedShape:t,onUpdateShape:e,onDeleteShape:n,onDuplicateShape:r,onBringToFront:i,onSendToBack:s,onMoveForward:o,onMoveBackward:l})=>{var a,u,f,d,c,g,_,E;return t?C.jsxs("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:1e3,backgroundColor:"white",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",minWidth:"200px"},children:[C.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px",color:"#333"},children:"객체 속성"}),C.jsxs("div",{style:{marginBottom:"15px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"기본 정보"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"타입:"}),C.jsx("span",{style:{fontSize:"11px",color:"#666"},children:t.type})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"X:"}),C.jsx("input",{type:"number",value:t.x,onChange:I=>e("x",Number(I.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"Y:"}),C.jsx("input",{type:"number",value:t.y,onChange:I=>e("y",Number(I.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"폭:"}),C.jsx("input",{type:"number",value:t.width||100,onChange:I=>e("width",Number(I.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"높이:"}),C.jsx("input",{type:"number",value:t.height||60,onChange:I=>e("height",Number(I.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]})]})]}),t.type==="rect"&&C.jsxs("div",{style:{marginBottom:"15px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"사각형 설정"}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"배경:"}),C.jsx("input",{type:"color",value:t.fill||"#ffffff",onChange:I=>e("fill",I.target.value),style:{width:"30px",height:"20px",border:"none",borderRadius:"3px"}})]})]}),t.type==="text"&&C.jsxs("div",{style:{marginBottom:"15px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"텍스트 설정"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"내용:"}),C.jsx("input",{type:"text",value:t.text||"Text",onChange:I=>e("text",I.target.value),style:{flex:1,padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"크기:"}),C.jsx("input",{type:"number",value:t.fontSize||16,onChange:I=>e("fontSize",Number(I.target.value)),min:"8",max:"72",style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"스타일:"}),C.jsxs("div",{style:{display:"flex",gap:"5px"},children:[C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px"},children:[C.jsx("input",{type:"checkbox",checked:t.fontWeight==="bold",onChange:I=>e("fontWeight",I.target.checked?"bold":"normal")}),"Bold"]}),C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px"},children:[C.jsx("input",{type:"checkbox",checked:t.fontStyle==="italic",onChange:I=>e("fontStyle",I.target.checked?"italic":"normal")}),"Italic"]})]})]}),t.fill!==void 0&&C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"배경:"}),C.jsx("input",{type:"color",value:t.fill||"#ffffff",onChange:I=>e("fill",I.target.value),style:{width:"30px",height:"20px",border:"none",borderRadius:"3px"}})]})]})]}),C.jsxs("div",{style:{marginBottom:"15px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"권한 설정"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[C.jsx("input",{type:"checkbox",checked:((a=t.meta)==null?void 0:a.isMovable)!==!1,onChange:I=>e("meta",{...t.meta,isMovable:I.target.checked})}),"이동 가능"]}),C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[C.jsx("input",{type:"checkbox",checked:((u=t.meta)==null?void 0:u.isDeletable)!==!1,onChange:I=>e("meta",{...t.meta,isDeletable:I.target.checked})}),"삭제 가능"]}),C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[C.jsx("input",{type:"checkbox",checked:((f=t.meta)==null?void 0:f.isResizable)!==!1,onChange:I=>e("meta",{...t.meta,isResizable:I.target.checked})}),"크기 조절 가능"]}),C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[C.jsx("input",{type:"checkbox",checked:((d=t.meta)==null?void 0:d.isErasable)===!0,onChange:I=>e("meta",{...t.meta,isErasable:I.target.checked})}),"지우개로 삭제 가능"]})]})]}),C.jsxs("div",{style:{marginBottom:"15px"},children:[C.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"레이어 정렬"}),C.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px"},children:[C.jsx("button",{onClick:()=>i==null?void 0:i(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"맨 앞으로"}),C.jsx("button",{onClick:()=>s==null?void 0:s(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"맨 뒤로"}),C.jsx("button",{onClick:()=>o==null?void 0:o(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"앞으로"}),C.jsx("button",{onClick:()=>l==null?void 0:l(t.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"뒤로"})]})]}),C.jsxs("div",{style:{display:"flex",gap:"8px"},children:[C.jsx("button",{onClick:r,style:{flex:1,padding:"6px 8px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:"복제"}),C.jsx("button",{onClick:n,disabled:((c=t.meta)==null?void 0:c.isDeletable)===!1,style:{flex:1,padding:"6px 8px",fontSize:"11px",border:"1px solid #ff4444",borderRadius:"4px",backgroundColor:((g=t.meta)==null?void 0:g.isDeletable)===!1?"#f5f5f5":"#ffe6e6",color:((_=t.meta)==null?void 0:_.isDeletable)===!1?"#ccc":"#ff4444",cursor:((E=t.meta)==null?void 0:E.isDeletable)===!1?"not-allowed":"pointer"},children:"삭제"})]})]}):null},wE=()=>{const[t,e]=S.useState("select"),[n,r]=S.useState([]),[i,s]=S.useState([]),[o,l]=S.useState(null),[a,u]=S.useState(Lp),[f,d]=S.useState(Fp),[c,g]=S.useState(zp),_=n.find(x=>x.id===o)||null,E=Wp({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l}),I=gc({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onClearHistory:E.clearHistory}),p=Bp({shapes:n,setShapes:r,selectedId:o,setSelectedId:l,gridSize:c}),h=S.useCallback(x=>{e(x)},[]),m=S.useCallback(x=>{g(x)},[]),y=S.useCallback(x=>{switch(x){case"text":const M=p.createText({x:1080,y:1920},"새 텍스트");E.recordCreateShape(n.find(W=>W.id===M)),e("select");break;case"image":const L=document.createElement("input");L.type="file",L.accept="image/*",L.onchange=W=>{var F;const he=(F=W.target.files)==null?void 0:F[0];if(he){const se=new FileReader;se.onload=me=>{var ze;const ge=(ze=me.target)==null?void 0:ze.result;if(ge){const P=p.createImage({x:1080,y:1920},ge);E.recordCreateShape(n.find(b=>b.id===P)),e("select")}},se.readAsDataURL(he)}},L.click();break;case"save":I.saveToFile();break;case"load":I.loadFromFile();break;case"push":I.pushToFirebase();break;case"pull":I.pullFromStorage();break;case"undo":E.undo();break;case"redo":E.redo();break}},[p,E,I,n]),v=S.useCallback((x,M)=>{if(!o)return;const L=n.find(W=>W.id===o);L&&(p.updateShapeProperty(o,x,M),setTimeout(()=>{const W=n.find(he=>he.id===o);W&&E.recordUpdateShape(o,L,W)},0))},[o,p,n,E]),w=S.useCallback(()=>{o&&(E.recordDeleteShape(o),p.deleteSelectedShape())},[o,E,p]),k=S.useCallback(()=>{if(!o)return;const x=E.getCurrentState();p.duplicateShape(o),setTimeout(()=>{const M=E.getCurrentState();E.recordBatchAction(x,M)},0)},[o,p,E]);return C.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[C.jsx("div",{style:{position:"absolute",top:"20px",right:"280px",zIndex:1001,padding:"8px 16px",backgroundColor:"#007acc",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"bold"},children:"관리자 화면"}),C.jsx(yE,{currentTool:t,onToolChange:h,onCommand:y,penColor:a,penSize:f,onPenColorChange:u,onPenSizeChange:d,gridSize:c,onGridSizeChange:m}),C.jsx(vE,{selectedShape:_,onUpdateShape:v,onDeleteShape:w,onDuplicateShape:k,onBringToFront:p.bringToFront,onSendToBack:p.sendToBack,onMoveForward:p.moveForward,onMoveBackward:p.moveBackward}),C.jsx(vg,{tool:t,shapes:n,strokes:i,penColor:a,penSize:f,gridSize:c,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onToolChange:h})]})},CE=()=>{const[t,e]=S.useState("select"),[n,r]=S.useState([]),[i,s]=S.useState([]),[o,l]=S.useState(null),[a,u]=S.useState(Lp),[f,d]=S.useState(Fp),c=zp,[g,_]=S.useState(()=>{const F=localStorage.getItem("viewpage-toolbar-state");if(F)try{return JSON.parse(F)}catch{console.warn("Failed to parse toolbar state from localStorage")}return{x:50,y:50,width:600,height:80,opacity:.5}}),[E,I]=S.useState(!1),[p,h]=S.useState(!1),[m,y]=S.useState({x:0,y:0}),[v,w]=S.useState({x:0,y:0,width:0,height:0}),k=S.useRef(null),x=gc({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,silent:!0});S.useEffect(()=>{let F=null;return ai()?(console.log("🔄 Firebase 실시간 구독 시작"),F=pE(se=>{var me,ge;console.log("📱 ViewPage: Firebase에서 새 데이터 수신",{shapes:((me=se.shapes)==null?void 0:me.length)||0,strokes:((ge=se.strokes)==null?void 0:ge.length)||0,timestamp:new Date(se.lastUpdated||se.timestamp).toLocaleTimeString()}),x.restoreBoardState(se)})):(console.warn("⚠️ Firebase 사용 불가. localStorage 기반으로 동작합니다."),x.pullFromStorage()),()=>{F&&(console.log("🛑 Firebase 구독 해제"),F())}},[]),S.useEffect(()=>{localStorage.setItem("viewpage-toolbar-state",JSON.stringify(g))},[g]);const M=S.useCallback(F=>{const ge=window.innerWidth-20,ze=window.innerHeight-20;let{x:P,y:b,width:A,height:T,opacity:D}=F;return A=Math.max(200,Math.min(A,ge)),T=Math.max(100,Math.min(T,ze)),P=Math.max(10,Math.min(P,window.innerWidth-A-10)),b=Math.max(10,Math.min(b,window.innerHeight-T-10)),{x:P,y:b,width:A,height:T,opacity:D}},[]),L=S.useCallback(F=>{p||(I(!0),y({x:F.clientX-g.x,y:F.clientY-g.y}),F.preventDefault())},[g.x,g.y,p]),W=S.useCallback(F=>{h(!0),w({x:F.clientX,y:F.clientY,width:g.width,height:g.height}),F.preventDefault(),F.stopPropagation()},[g.width,g.height]);S.useEffect(()=>{const F=me=>{if(E){const ge={...g,x:me.clientX-m.x,y:me.clientY-m.y};_(ge)}else if(p){const ge=me.clientX-v.x,ze=me.clientY-v.y,P={...g,width:v.width+ge,height:v.height+ze};_(M(P))}},se=()=>{(E||p)&&(_(me=>M(me)),I(!1),h(!1))};if(E||p)return document.addEventListener("mousemove",F),document.addEventListener("mouseup",se),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",se)}},[E,p,m,v,g,M]),ui.useEffect(()=>{ai()||x.pullFromStorage()},[x]),ui.useEffect(()=>{if(!ai()){const F=setTimeout(()=>{x.pushToStorage()},1e3);return()=>clearTimeout(F)}},[n,i,x]);const he=S.useCallback(F=>{(F==="pen"||F==="eraser"||F==="select")&&e(F)},[]);return C.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",backgroundColor:"#f5f5f5"},children:[C.jsx(vg,{tool:t,shapes:n,strokes:i,penColor:a,penSize:f,gridSize:c,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onToolChange:he}),C.jsxs("div",{ref:k,style:{position:"fixed",left:`${g.x}px`,top:`${g.y}px`,width:`${g.width}px`,height:`${g.height}px`,zIndex:2e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"1px solid rgba(221, 221, 221, 0.8)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",opacity:g.opacity,display:"flex",flexDirection:"column",userSelect:"none"},children:[C.jsx("div",{style:{height:"24px",backgroundColor:"rgba(0, 102, 255, 0.1)",borderRadius:"12px 12px 0 0",cursor:E?"grabbing":"grab",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(221, 221, 221, 0.5)"},onMouseDown:L,children:C.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(0, 102, 255, 0.3)",borderRadius:"2px"}})}),C.jsxs("div",{style:{flex:1,padding:"8px 12px",display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[C.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[C.jsx("button",{onClick:()=>he("select"),style:{padding:"6px",border:t==="select"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:t==="select"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"선택",children:C.jsx("span",{style:{fontSize:"16px"},children:"👆"})}),C.jsx("button",{onClick:()=>he("pen"),style:{padding:"6px",border:t==="pen"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:t==="pen"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"펜",children:C.jsx("span",{style:{fontSize:"16px"},children:"✏️"})}),C.jsx("button",{onClick:()=>he("eraser"),style:{padding:"6px",border:t==="eraser"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:t==="eraser"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"지우개",children:C.jsx("span",{style:{fontSize:"16px"},children:"🧽"})})]}),C.jsx("div",{style:{width:"1px",height:"25px",backgroundColor:"rgba(204, 204, 204, 0.6)"}}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[C.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#666"},children:"색상:"}),C.jsx("input",{type:"color",value:a,onChange:F=>u(F.target.value),style:{width:"28px",height:"20px",border:"none",borderRadius:"3px"}})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[C.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#666"},children:"크기:"}),C.jsx("input",{type:"range",min:"1",max:"20",value:f,onChange:F=>d(Number(F.target.value)),style:{width:"50px"}}),C.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",minWidth:"18px",color:"#666"},children:f})]}),C.jsx("div",{style:{width:"1px",height:"25px",backgroundColor:"rgba(204, 204, 204, 0.6)"}}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[C.jsx("label",{style:{fontSize:"8px",fontWeight:"bold",color:"#666"},children:"투명도"}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[C.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:g.opacity,onChange:F=>_(se=>({...se,opacity:Number(F.target.value)})),style:{width:"50px"}}),C.jsxs("span",{style:{fontSize:"9px",fontWeight:"bold",minWidth:"25px",color:"#666"},children:[Math.round(g.opacity*100),"%"]})]})]})]}),C.jsx("div",{style:{position:"absolute",bottom:"0",right:"0",width:"16px",height:"16px",cursor:"nw-resize",background:"linear-gradient(-45deg, transparent 30%, rgba(0, 102, 255, 0.3) 30%, rgba(0, 102, 255, 0.3) 70%, transparent 70%)",borderRadius:"0 0 12px 0"},onMouseDown:W,children:C.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"12px",height:"12px",background:"repeating-linear-gradient(-45deg, rgba(0, 102, 255, 0.2) 0px, rgba(0, 102, 255, 0.2) 2px, transparent 2px, transparent 4px)"}})})]})]})},EE=()=>{const t=window.location.pathname.includes("/view");return C.jsx(C.Fragment,{children:t?C.jsx(CE,{}):C.jsx(wE,{})})},SE=Il.createRoot(document.getElementById("root"));SE.render(C.jsx(ui.StrictMode,{children:C.jsx(EE,{})}));
