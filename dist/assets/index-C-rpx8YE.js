(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ph={exports:{}},Ho={},Dh={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ss=Symbol.for("react.element"),zy=Symbol.for("react.portal"),By=Symbol.for("react.fragment"),Wy=Symbol.for("react.strict_mode"),$y=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Gy=Symbol.for("react.suspense"),Qy=Symbol.for("react.memo"),Yy=Symbol.for("react.lazy"),gd=Symbol.iterator;function Ky(e){return e===null||typeof e!="object"?null:(e=gd&&e[gd]||e["@@iterator"],typeof e=="function"?e:null)}var Ah={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lh=Object.assign,Mh={};function $r(e,t,n){this.props=e,this.context=t,this.refs=Mh,this.updater=n||Ah}$r.prototype.isReactComponent={};$r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Oh(){}Oh.prototype=$r.prototype;function Tu(e,t,n){this.props=e,this.context=t,this.refs=Mh,this.updater=n||Ah}var Iu=Tu.prototype=new Oh;Iu.constructor=Tu;Lh(Iu,$r.prototype);Iu.isPureReactComponent=!0;var yd=Array.isArray,Fh=Object.prototype.hasOwnProperty,Ru={current:null},jh={key:!0,ref:!0,__self:!0,__source:!0};function zh(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Fh.call(t,r)&&!jh.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ss,type:e,key:s,ref:o,props:i,_owner:Ru.current}}function qy(e,t){return{$$typeof:ss,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ss}function Xy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vd=/\/+/g;function xl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xy(""+e.key):t.toString(36)}function Fs(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ss:case zy:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+xl(o,0):r,yd(i)?(n="",e!=null&&(n=e.replace(vd,"$&/")+"/"),Fs(i,t,n,"",function(u){return u})):i!=null&&(Nu(i)&&(i=qy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vd,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",yd(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+xl(s,l);o+=Fs(s,t,n,a,i)}else if(a=Ky(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+xl(s,l++),o+=Fs(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ys(e,t,n){if(e==null)return e;var r=[],i=0;return Fs(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Jy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},js={transition:null},Zy={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:js,ReactCurrentOwner:Ru};function Bh(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:ys,forEach:function(e,t,n){ys(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ys(e,function(){t++}),t},toArray:function(e){return ys(e,function(t){return t})||[]},only:function(e){if(!Nu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=$r;J.Fragment=By;J.Profiler=$y;J.PureComponent=Tu;J.StrictMode=Wy;J.Suspense=Gy;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy;J.act=Bh;J.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Lh({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Ru.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Fh.call(t,a)&&!jh.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ss,type:e.type,key:i,ref:s,props:r,_owner:o}};J.createContext=function(e){return e={$$typeof:Hy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uy,_context:e},e.Consumer=e};J.createElement=zh;J.createFactory=function(e){var t=zh.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Vy,render:e}};J.isValidElement=Nu;J.lazy=function(e){return{$$typeof:Yy,_payload:{_status:-1,_result:e},_init:Jy}};J.memo=function(e,t){return{$$typeof:Qy,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=js.transition;js.transition={};try{e()}finally{js.transition=t}};J.unstable_act=Bh;J.useCallback=function(e,t){return Ge.current.useCallback(e,t)};J.useContext=function(e){return Ge.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};J.useEffect=function(e,t){return Ge.current.useEffect(e,t)};J.useId=function(){return Ge.current.useId()};J.useImperativeHandle=function(e,t,n){return Ge.current.useImperativeHandle(e,t,n)};J.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Ge.current.useMemo(e,t)};J.useReducer=function(e,t,n){return Ge.current.useReducer(e,t,n)};J.useRef=function(e){return Ge.current.useRef(e)};J.useState=function(e){return Ge.current.useState(e)};J.useSyncExternalStore=function(e,t,n){return Ge.current.useSyncExternalStore(e,t,n)};J.useTransition=function(){return Ge.current.useTransition()};J.version="18.3.1";Dh.exports=J;var g=Dh.exports;const Wn=jy(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev=g,tv=Symbol.for("react.element"),nv=Symbol.for("react.fragment"),rv=Object.prototype.hasOwnProperty,iv=ev.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sv={key:!0,ref:!0,__self:!0,__source:!0};function Wh(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)rv.call(t,r)&&!sv.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tv,type:e,key:s,ref:o,props:i,_owner:iv.current}}Ho.Fragment=nv;Ho.jsx=Wh;Ho.jsxs=Wh;Ph.exports=Ho;var w=Ph.exports,aa={},$h={exports:{}},lt={},Uh={exports:{}},Hh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var W=P.length;P.push(B);e:for(;0<W;){var Z=W-1>>>1,te=P[Z];if(0<i(te,B))P[Z]=B,P[W]=te,W=Z;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],W=P.pop();if(W!==B){P[0]=W;e:for(var Z=0,te=P.length,ut=te>>>1;Z<ut;){var nt=2*(Z+1)-1,Ft=P[nt],K=nt+1,V=P[K];if(0>i(Ft,W))K<te&&0>i(V,Ft)?(P[Z]=V,P[K]=W,Z=K):(P[Z]=Ft,P[nt]=W,Z=nt);else if(K<te&&0>i(V,W))P[Z]=V,P[K]=W,Z=K;else break e}}return B}function i(P,B){var W=P.sortIndex-B.sortIndex;return W!==0?W:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,c=null,d=3,y=!1,v=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=P)r(u),B.sortIndex=B.expirationTime,t(a,B);else break;B=n(u)}}function _(P){if(x=!1,m(P),!v)if(n(a)!==null)v=!0,G(S);else{var B=n(u);B!==null&&ce(_,B.startTime-P)}}function S(P,B){v=!1,x&&(x=!1,p(T),T=-1),y=!0;var W=d;try{for(m(B),c=n(a);c!==null&&(!(c.expirationTime>B)||P&&!M());){var Z=c.callback;if(typeof Z=="function"){c.callback=null,d=c.priorityLevel;var te=Z(c.expirationTime<=B);B=e.unstable_now(),typeof te=="function"?c.callback=te:c===n(a)&&r(a),m(B)}else r(a);c=n(a)}if(c!==null)var ut=!0;else{var nt=n(u);nt!==null&&ce(_,nt.startTime-B),ut=!1}return ut}finally{c=null,d=W,y=!1}}var C=!1,k=null,T=-1,z=5,b=-1;function M(){return!(e.unstable_now()-b<z)}function $(){if(k!==null){var P=e.unstable_now();b=P;var B=!0;try{B=k(!0,P)}finally{B?A():(C=!1,k=null)}}else C=!1}var A;if(typeof h=="function")A=function(){h($)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,U=R.port2;R.port1.onmessage=$,A=function(){U.postMessage(null)}}else A=function(){E($,0)};function G(P){k=P,C||(C=!0,A())}function ce(P,B){T=E(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,G(S))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(P){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var W=d;d=B;try{return P()}finally{d=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var W=d;d=P;try{return B()}finally{d=W}},e.unstable_scheduleCallback=function(P,B,W){var Z=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,P){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=W+te,P={id:f++,callback:B,priorityLevel:P,startTime:W,expirationTime:te,sortIndex:-1},W>Z?(P.sortIndex=W,t(u,P),n(a)===null&&P===n(u)&&(x?(p(T),T=-1):x=!0,ce(_,W-Z))):(P.sortIndex=te,t(a,P),v||y||(v=!0,G(S))),P},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(P){var B=d;return function(){var W=d;d=B;try{return P.apply(this,arguments)}finally{d=W}}}})(Hh);Uh.exports=Hh;var ov=Uh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv=g,ot=ov;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vh=new Set,bi={};function Zn(e,t){br(e,t),br(e+"Capture",t)}function br(e,t){for(bi[e]=t,e=0;e<t.length;e++)Vh.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ua=Object.prototype.hasOwnProperty,av=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_d={},wd={};function uv(e){return ua.call(wd,e)?!0:ua.call(_d,e)?!1:av.test(e)?wd[e]=!0:(_d[e]=!0,!1)}function cv(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dv(e,t,n,r){if(t===null||typeof t>"u"||cv(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var bu=/[\-:]([a-z])/g;function Pu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bu,Pu);Oe[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bu,Pu);Oe[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bu,Pu);Oe[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Du(e,t,n,r){var i=Oe.hasOwnProperty(t)?Oe[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dv(t,n,i,r)&&(n=null),r||i===null?uv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rn=lv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vs=Symbol.for("react.element"),sr=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),Au=Symbol.for("react.strict_mode"),ca=Symbol.for("react.profiler"),Gh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),Lu=Symbol.for("react.forward_ref"),da=Symbol.for("react.suspense"),fa=Symbol.for("react.suspense_list"),Mu=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),Yh=Symbol.for("react.offscreen"),xd=Symbol.iterator;function Jr(e){return e===null||typeof e!="object"?null:(e=xd&&e[xd]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Cl;function di(e){if(Cl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Cl=t&&t[1]||""}return`
`+Cl+e}var El=!1;function Sl(e,t){if(!e||El)return"";El=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{El=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?di(e):""}function fv(e){switch(e.tag){case 5:return di(e.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 2:case 15:return e=Sl(e.type,!1),e;case 11:return e=Sl(e.type.render,!1),e;case 1:return e=Sl(e.type,!0),e;default:return""}}function ha(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case or:return"Fragment";case sr:return"Portal";case ca:return"Profiler";case Au:return"StrictMode";case da:return"Suspense";case fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qh:return(e.displayName||"Context")+".Consumer";case Gh:return(e._context.displayName||"Context")+".Provider";case Lu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mu:return t=e.displayName||null,t!==null?t:ha(e.type)||"Memo";case on:t=e._payload,e=e._init;try{return ha(e(t))}catch{}}return null}function hv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ha(t);case 8:return t===Au?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function En(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pv(e){var t=Kh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _s(e){e._valueTracker||(e._valueTracker=pv(e))}function qh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Kh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pa(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Cd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=En(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xh(e,t){t=t.checked,t!=null&&Du(e,"checked",t,!1)}function ma(e,t){Xh(e,t);var n=En(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ga(e,t.type,n):t.hasOwnProperty("defaultValue")&&ga(e,t.type,En(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ed(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ga(e,t,n){(t!=="number"||Zs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fi=Array.isArray;function _r(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+En(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ya(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(fi(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:En(n)}}function Jh(e,t){var n=En(t.value),r=En(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function kd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ws,ep=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ws=ws||document.createElement("div"),ws.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ws.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mv=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(e){mv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mi[t]=mi[e]})});function tp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||mi.hasOwnProperty(e)&&mi[e]?(""+t).trim():t+"px"}function np(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=tp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var gv=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _a(e,t){if(t){if(gv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function wa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xa=null;function Ou(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ca=null,wr=null,xr=null;function Td(e){if(e=as(e)){if(typeof Ca!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Ko(t),Ca(e.stateNode,e.type,t))}}function rp(e){wr?xr?xr.push(e):xr=[e]:wr=e}function ip(){if(wr){var e=wr,t=xr;if(xr=wr=null,Td(e),t)for(e=0;e<t.length;e++)Td(t[e])}}function sp(e,t){return e(t)}function op(){}var kl=!1;function lp(e,t,n){if(kl)return e(t,n);kl=!0;try{return sp(e,t,n)}finally{kl=!1,(wr!==null||xr!==null)&&(op(),ip())}}function Di(e,t){var n=e.stateNode;if(n===null)return null;var r=Ko(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var Ea=!1;if(Qt)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Ea=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Ea=!1}function yv(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var gi=!1,eo=null,to=!1,Sa=null,vv={onError:function(e){gi=!0,eo=e}};function _v(e,t,n,r,i,s,o,l,a){gi=!1,eo=null,yv.apply(vv,arguments)}function wv(e,t,n,r,i,s,o,l,a){if(_v.apply(this,arguments),gi){if(gi){var u=eo;gi=!1,eo=null}else throw Error(I(198));to||(to=!0,Sa=u)}}function er(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ap(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Id(e){if(er(e)!==e)throw Error(I(188))}function xv(e){var t=e.alternate;if(!t){if(t=er(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Id(i),e;if(s===r)return Id(i),t;s=s.sibling}throw Error(I(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function up(e){return e=xv(e),e!==null?cp(e):null}function cp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cp(e);if(t!==null)return t;e=e.sibling}return null}var dp=ot.unstable_scheduleCallback,Rd=ot.unstable_cancelCallback,Cv=ot.unstable_shouldYield,Ev=ot.unstable_requestPaint,xe=ot.unstable_now,Sv=ot.unstable_getCurrentPriorityLevel,Fu=ot.unstable_ImmediatePriority,fp=ot.unstable_UserBlockingPriority,no=ot.unstable_NormalPriority,kv=ot.unstable_LowPriority,hp=ot.unstable_IdlePriority,Vo=null,At=null;function Tv(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Vo,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:Nv,Iv=Math.log,Rv=Math.LN2;function Nv(e){return e>>>=0,e===0?32:31-(Iv(e)/Rv|0)|0}var xs=64,Cs=4194304;function hi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ro(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=hi(l):(s&=o,s!==0&&(r=hi(s)))}else o=n&~i,o!==0?r=hi(o):s!==0&&(r=hi(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Et(t),i=1<<n,r|=e[n],t&=~i;return r}function bv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pv(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Et(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=bv(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function ka(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pp(){var e=xs;return xs<<=1,!(xs&4194240)&&(xs=64),e}function Tl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function os(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=n}function Dv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Et(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function ju(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Et(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var re=0;function mp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gp,zu,yp,vp,_p,Ta=!1,Es=[],fn=null,hn=null,pn=null,Ai=new Map,Li=new Map,an=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nd(e,t){switch(e){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":Ai.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(t.pointerId)}}function ei(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=as(t),t!==null&&zu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Lv(e,t,n,r,i){switch(t){case"focusin":return fn=ei(fn,e,t,n,r,i),!0;case"dragenter":return hn=ei(hn,e,t,n,r,i),!0;case"mouseover":return pn=ei(pn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ai.set(s,ei(Ai.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Li.set(s,ei(Li.get(s)||null,e,t,n,r,i)),!0}return!1}function wp(e){var t=On(e.target);if(t!==null){var n=er(t);if(n!==null){if(t=n.tag,t===13){if(t=ap(n),t!==null){e.blockedOn=t,_p(e.priority,function(){yp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ia(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xa=r,n.target.dispatchEvent(r),xa=null}else return t=as(n),t!==null&&zu(t),e.blockedOn=n,!1;t.shift()}return!0}function bd(e,t,n){zs(e)&&n.delete(t)}function Mv(){Ta=!1,fn!==null&&zs(fn)&&(fn=null),hn!==null&&zs(hn)&&(hn=null),pn!==null&&zs(pn)&&(pn=null),Ai.forEach(bd),Li.forEach(bd)}function ti(e,t){e.blockedOn===t&&(e.blockedOn=null,Ta||(Ta=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Mv)))}function Mi(e){function t(i){return ti(i,e)}if(0<Es.length){ti(Es[0],e);for(var n=1;n<Es.length;n++){var r=Es[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fn!==null&&ti(fn,e),hn!==null&&ti(hn,e),pn!==null&&ti(pn,e),Ai.forEach(t),Li.forEach(t),n=0;n<an.length;n++)r=an[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)wp(n),n.blockedOn===null&&an.shift()}var Cr=rn.ReactCurrentBatchConfig,io=!0;function Ov(e,t,n,r){var i=re,s=Cr.transition;Cr.transition=null;try{re=1,Bu(e,t,n,r)}finally{re=i,Cr.transition=s}}function Fv(e,t,n,r){var i=re,s=Cr.transition;Cr.transition=null;try{re=4,Bu(e,t,n,r)}finally{re=i,Cr.transition=s}}function Bu(e,t,n,r){if(io){var i=Ia(e,t,n,r);if(i===null)Ol(e,t,r,so,n),Nd(e,r);else if(Lv(i,e,t,n,r))r.stopPropagation();else if(Nd(e,r),t&4&&-1<Av.indexOf(e)){for(;i!==null;){var s=as(i);if(s!==null&&gp(s),s=Ia(e,t,n,r),s===null&&Ol(e,t,r,so,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ol(e,t,r,null,n)}}var so=null;function Ia(e,t,n,r){if(so=null,e=Ou(r),e=On(e),e!==null)if(t=er(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ap(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return so=e,null}function xp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sv()){case Fu:return 1;case fp:return 4;case no:case kv:return 16;case hp:return 536870912;default:return 16}default:return 16}}var cn=null,Wu=null,Bs=null;function Cp(){if(Bs)return Bs;var e,t=Wu,n=t.length,r,i="value"in cn?cn.value:cn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Bs=i.slice(e,1<r?1-r:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ss(){return!0}function Pd(){return!1}function at(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ss:Pd,this.isPropagationStopped=Pd,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),t}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$u=at(Ur),ls=ye({},Ur,{view:0,detail:0}),jv=at(ls),Il,Rl,ni,Go=ye({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ni&&(ni&&e.type==="mousemove"?(Il=e.screenX-ni.screenX,Rl=e.screenY-ni.screenY):Rl=Il=0,ni=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:Rl}}),Dd=at(Go),zv=ye({},Go,{dataTransfer:0}),Bv=at(zv),Wv=ye({},ls,{relatedTarget:0}),Nl=at(Wv),$v=ye({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Uv=at($v),Hv=ye({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vv=at(Hv),Gv=ye({},Ur,{data:0}),Ad=at(Gv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kv[e])?!!t[e]:!1}function Uu(){return qv}var Xv=ye({},ls,{key:function(e){if(e.key){var t=Qv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jv=at(Xv),Zv=ye({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=at(Zv),e_=ye({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),t_=at(e_),n_=ye({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),r_=at(n_),i_=ye({},Go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s_=at(i_),o_=[9,13,27,32],Hu=Qt&&"CompositionEvent"in window,yi=null;Qt&&"documentMode"in document&&(yi=document.documentMode);var l_=Qt&&"TextEvent"in window&&!yi,Ep=Qt&&(!Hu||yi&&8<yi&&11>=yi),Md=" ",Od=!1;function Sp(e,t){switch(e){case"keyup":return o_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lr=!1;function a_(e,t){switch(e){case"compositionend":return kp(t);case"keypress":return t.which!==32?null:(Od=!0,Md);case"textInput":return e=t.data,e===Md&&Od?null:e;default:return null}}function u_(e,t){if(lr)return e==="compositionend"||!Hu&&Sp(e,t)?(e=Cp(),Bs=Wu=cn=null,lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ep&&t.locale!=="ko"?null:t.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!c_[e.type]:t==="textarea"}function Tp(e,t,n,r){rp(r),t=oo(t,"onChange"),0<t.length&&(n=new $u("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vi=null,Oi=null;function d_(e){Fp(e,0)}function Qo(e){var t=cr(e);if(qh(t))return e}function f_(e,t){if(e==="change")return t}var Ip=!1;if(Qt){var bl;if(Qt){var Pl="oninput"in document;if(!Pl){var jd=document.createElement("div");jd.setAttribute("oninput","return;"),Pl=typeof jd.oninput=="function"}bl=Pl}else bl=!1;Ip=bl&&(!document.documentMode||9<document.documentMode)}function zd(){vi&&(vi.detachEvent("onpropertychange",Rp),Oi=vi=null)}function Rp(e){if(e.propertyName==="value"&&Qo(Oi)){var t=[];Tp(t,Oi,e,Ou(e)),lp(d_,t)}}function h_(e,t,n){e==="focusin"?(zd(),vi=t,Oi=n,vi.attachEvent("onpropertychange",Rp)):e==="focusout"&&zd()}function p_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qo(Oi)}function m_(e,t){if(e==="click")return Qo(t)}function g_(e,t){if(e==="input"||e==="change")return Qo(t)}function y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:y_;function Fi(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ua.call(t,i)||!Tt(e[i],t[i]))return!1}return!0}function Bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wd(e,t){var n=Bd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bd(n)}}function Np(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Np(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bp(){for(var e=window,t=Zs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zs(e.document)}return t}function Vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function v_(e){var t=bp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Np(n.ownerDocument.documentElement,n)){if(r!==null&&Vu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Wd(n,s);var o=Wd(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var __=Qt&&"documentMode"in document&&11>=document.documentMode,ar=null,Ra=null,_i=null,Na=!1;function $d(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Na||ar==null||ar!==Zs(r)||(r=ar,"selectionStart"in r&&Vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Fi(_i,r)||(_i=r,r=oo(Ra,"onSelect"),0<r.length&&(t=new $u("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ks(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionend:ks("Transition","TransitionEnd")},Dl={},Pp={};Qt&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function Yo(e){if(Dl[e])return Dl[e];if(!ur[e])return e;var t=ur[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pp)return Dl[e]=t[n];return e}var Dp=Yo("animationend"),Ap=Yo("animationiteration"),Lp=Yo("animationstart"),Mp=Yo("transitionend"),Op=new Map,Ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,t){Op.set(e,t),Zn(t,[e])}for(var Al=0;Al<Ud.length;Al++){var Ll=Ud[Al],w_=Ll.toLowerCase(),x_=Ll[0].toUpperCase()+Ll.slice(1);In(w_,"on"+x_)}In(Dp,"onAnimationEnd");In(Ap,"onAnimationIteration");In(Lp,"onAnimationStart");In("dblclick","onDoubleClick");In("focusin","onFocus");In("focusout","onBlur");In(Mp,"onTransitionEnd");br("onMouseEnter",["mouseout","mouseover"]);br("onMouseLeave",["mouseout","mouseover"]);br("onPointerEnter",["pointerout","pointerover"]);br("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C_=new Set("cancel close invalid load scroll toggle".split(" ").concat(pi));function Hd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,wv(r,t,void 0,e),e.currentTarget=null}function Fp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Hd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Hd(i,l,u),s=a}}}if(to)throw e=Sa,to=!1,Sa=null,e}function de(e,t){var n=t[La];n===void 0&&(n=t[La]=new Set);var r=e+"__bubble";n.has(r)||(jp(t,e,2,!1),n.add(r))}function Ml(e,t,n){var r=0;t&&(r|=4),jp(n,e,r,t)}var Ts="_reactListening"+Math.random().toString(36).slice(2);function ji(e){if(!e[Ts]){e[Ts]=!0,Vh.forEach(function(n){n!=="selectionchange"&&(C_.has(n)||Ml(n,!1,e),Ml(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ts]||(t[Ts]=!0,Ml("selectionchange",!1,t))}}function jp(e,t,n,r){switch(xp(t)){case 1:var i=Ov;break;case 4:i=Fv;break;default:i=Bu}n=i.bind(null,t,n,e),i=void 0,!Ea||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ol(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=On(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}lp(function(){var u=s,f=Ou(n),c=[];e:{var d=Op.get(e);if(d!==void 0){var y=$u,v=e;switch(e){case"keypress":if(Ws(n)===0)break e;case"keydown":case"keyup":y=Jv;break;case"focusin":v="focus",y=Nl;break;case"focusout":v="blur",y=Nl;break;case"beforeblur":case"afterblur":y=Nl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Bv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=t_;break;case Dp:case Ap:case Lp:y=Uv;break;case Mp:y=r_;break;case"scroll":y=jv;break;case"wheel":y=s_;break;case"copy":case"cut":case"paste":y=Vv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ld}var x=(t&4)!==0,E=!x&&e==="scroll",p=x?d!==null?d+"Capture":null:d;x=[];for(var h=u,m;h!==null;){m=h;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,p!==null&&(_=Di(h,p),_!=null&&x.push(zi(h,_,m)))),E)break;h=h.return}0<x.length&&(d=new y(d,v,null,n,f),c.push({event:d,listeners:x}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",d&&n!==xa&&(v=n.relatedTarget||n.fromElement)&&(On(v)||v[Yt]))break e;if((y||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?On(v):null,v!==null&&(E=er(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(x=Dd,_="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(x=Ld,_="onPointerLeave",p="onPointerEnter",h="pointer"),E=y==null?d:cr(y),m=v==null?d:cr(v),d=new x(_,h+"leave",y,n,f),d.target=E,d.relatedTarget=m,_=null,On(f)===u&&(x=new x(p,h+"enter",v,n,f),x.target=m,x.relatedTarget=E,_=x),E=_,y&&v)t:{for(x=y,p=v,h=0,m=x;m;m=rr(m))h++;for(m=0,_=p;_;_=rr(_))m++;for(;0<h-m;)x=rr(x),h--;for(;0<m-h;)p=rr(p),m--;for(;h--;){if(x===p||p!==null&&x===p.alternate)break t;x=rr(x),p=rr(p)}x=null}else x=null;y!==null&&Vd(c,d,y,x,!1),v!==null&&E!==null&&Vd(c,E,v,x,!0)}}e:{if(d=u?cr(u):window,y=d.nodeName&&d.nodeName.toLowerCase(),y==="select"||y==="input"&&d.type==="file")var S=f_;else if(Fd(d))if(Ip)S=g_;else{S=p_;var C=h_}else(y=d.nodeName)&&y.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=m_);if(S&&(S=S(e,u))){Tp(c,S,n,f);break e}C&&C(e,d,u),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&ga(d,"number",d.value)}switch(C=u?cr(u):window,e){case"focusin":(Fd(C)||C.contentEditable==="true")&&(ar=C,Ra=u,_i=null);break;case"focusout":_i=Ra=ar=null;break;case"mousedown":Na=!0;break;case"contextmenu":case"mouseup":case"dragend":Na=!1,$d(c,n,f);break;case"selectionchange":if(__)break;case"keydown":case"keyup":$d(c,n,f)}var k;if(Hu)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else lr?Sp(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Ep&&n.locale!=="ko"&&(lr||T!=="onCompositionStart"?T==="onCompositionEnd"&&lr&&(k=Cp()):(cn=f,Wu="value"in cn?cn.value:cn.textContent,lr=!0)),C=oo(u,T),0<C.length&&(T=new Ad(T,e,null,n,f),c.push({event:T,listeners:C}),k?T.data=k:(k=kp(n),k!==null&&(T.data=k)))),(k=l_?a_(e,n):u_(e,n))&&(u=oo(u,"onBeforeInput"),0<u.length&&(f=new Ad("onBeforeInput","beforeinput",null,n,f),c.push({event:f,listeners:u}),f.data=k))}Fp(c,t)})}function zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function oo(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Di(e,n),s!=null&&r.unshift(zi(e,s,i)),s=Di(e,t),s!=null&&r.push(zi(e,s,i))),e=e.return}return r}function rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vd(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Di(n,s),a!=null&&o.unshift(zi(n,a,l))):i||(a=Di(n,s),a!=null&&o.push(zi(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var E_=/\r\n?/g,S_=/\u0000|\uFFFD/g;function Gd(e){return(typeof e=="string"?e:""+e).replace(E_,`
`).replace(S_,"")}function Is(e,t,n){if(t=Gd(t),Gd(e)!==t&&n)throw Error(I(425))}function lo(){}var ba=null,Pa=null;function Da(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Aa=typeof setTimeout=="function"?setTimeout:void 0,k_=typeof clearTimeout=="function"?clearTimeout:void 0,Qd=typeof Promise=="function"?Promise:void 0,T_=typeof queueMicrotask=="function"?queueMicrotask:typeof Qd<"u"?function(e){return Qd.resolve(null).then(e).catch(I_)}:Aa;function I_(e){setTimeout(function(){throw e})}function Fl(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Mi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mi(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Hr,Bi="__reactProps$"+Hr,Yt="__reactContainer$"+Hr,La="__reactEvents$"+Hr,R_="__reactListeners$"+Hr,N_="__reactHandles$"+Hr;function On(e){var t=e[Dt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[Dt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yd(e);e!==null;){if(n=e[Dt])return n;e=Yd(e)}return t}e=n,n=e.parentNode}return null}function as(e){return e=e[Dt]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Ko(e){return e[Bi]||null}var Ma=[],dr=-1;function Rn(e){return{current:e}}function fe(e){0>dr||(e.current=Ma[dr],Ma[dr]=null,dr--)}function ue(e,t){dr++,Ma[dr]=e.current,e.current=t}var Sn={},$e=Rn(Sn),Je=Rn(!1),Hn=Sn;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Sn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ze(e){return e=e.childContextTypes,e!=null}function ao(){fe(Je),fe($e)}function Kd(e,t,n){if($e.current!==Sn)throw Error(I(168));ue($e,t),ue(Je,n)}function zp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(I(108,hv(e)||"Unknown",i));return ye({},n,r)}function uo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sn,Hn=$e.current,ue($e,e),ue(Je,Je.current),!0}function qd(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=zp(e,t,Hn),r.__reactInternalMemoizedMergedChildContext=e,fe(Je),fe($e),ue($e,e)):fe(Je),ue(Je,n)}var Bt=null,qo=!1,jl=!1;function Bp(e){Bt===null?Bt=[e]:Bt.push(e)}function b_(e){qo=!0,Bp(e)}function Nn(){if(!jl&&Bt!==null){jl=!0;var e=0,t=re;try{var n=Bt;for(re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Bt=null,qo=!1}catch(i){throw Bt!==null&&(Bt=Bt.slice(e+1)),dp(Fu,Nn),i}finally{re=t,jl=!1}}return null}var fr=[],hr=0,co=null,fo=0,ct=[],dt=0,Vn=null,Wt=1,$t="";function Dn(e,t){fr[hr++]=fo,fr[hr++]=co,co=e,fo=t}function Wp(e,t,n){ct[dt++]=Wt,ct[dt++]=$t,ct[dt++]=Vn,Vn=e;var r=Wt;e=$t;var i=32-Et(r)-1;r&=~(1<<i),n+=1;var s=32-Et(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wt=1<<32-Et(t)+i|n<<i|r,$t=s+e}else Wt=1<<s|n<<i|r,$t=e}function Gu(e){e.return!==null&&(Dn(e,1),Wp(e,1,0))}function Qu(e){for(;e===co;)co=fr[--hr],fr[hr]=null,fo=fr[--hr],fr[hr]=null;for(;e===Vn;)Vn=ct[--dt],ct[dt]=null,$t=ct[--dt],ct[dt]=null,Wt=ct[--dt],ct[dt]=null}var st=null,it=null,he=!1,wt=null;function $p(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Xd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,it=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Wt,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,st=e,it=null,!0):!1;default:return!1}}function Oa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fa(e){if(he){var t=it;if(t){var n=t;if(!Xd(e,t)){if(Oa(e))throw Error(I(418));t=mn(n.nextSibling);var r=st;t&&Xd(e,t)?$p(r,n):(e.flags=e.flags&-4097|2,he=!1,st=e)}}else{if(Oa(e))throw Error(I(418));e.flags=e.flags&-4097|2,he=!1,st=e}}}function Jd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function Rs(e){if(e!==st)return!1;if(!he)return Jd(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Da(e.type,e.memoizedProps)),t&&(t=it)){if(Oa(e))throw Up(),Error(I(418));for(;t;)$p(e,t),t=mn(t.nextSibling)}if(Jd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=st?mn(e.stateNode.nextSibling):null;return!0}function Up(){for(var e=it;e;)e=mn(e.nextSibling)}function Dr(){it=st=null,he=!1}function Yu(e){wt===null?wt=[e]:wt.push(e)}var P_=rn.ReactCurrentBatchConfig;function ri(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function Ns(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zd(e){var t=e._init;return t(e._payload)}function Hp(e){function t(p,h){if(e){var m=p.deletions;m===null?(p.deletions=[h],p.flags|=16):m.push(h)}}function n(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=_n(p,h),p.index=0,p.sibling=null,p}function s(p,h,m){return p.index=m,e?(m=p.alternate,m!==null?(m=m.index,m<h?(p.flags|=2,h):m):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,h,m,_){return h===null||h.tag!==6?(h=Vl(m,p.mode,_),h.return=p,h):(h=i(h,m),h.return=p,h)}function a(p,h,m,_){var S=m.type;return S===or?f(p,h,m.props.children,_,m.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===on&&Zd(S)===h.type)?(_=i(h,m.props),_.ref=ri(p,h,m),_.return=p,_):(_=Ys(m.type,m.key,m.props,null,p.mode,_),_.ref=ri(p,h,m),_.return=p,_)}function u(p,h,m,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=Gl(m,p.mode,_),h.return=p,h):(h=i(h,m.children||[]),h.return=p,h)}function f(p,h,m,_,S){return h===null||h.tag!==7?(h=Un(m,p.mode,_,S),h.return=p,h):(h=i(h,m),h.return=p,h)}function c(p,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Vl(""+h,p.mode,m),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case vs:return m=Ys(h.type,h.key,h.props,null,p.mode,m),m.ref=ri(p,null,h),m.return=p,m;case sr:return h=Gl(h,p.mode,m),h.return=p,h;case on:var _=h._init;return c(p,_(h._payload),m)}if(fi(h)||Jr(h))return h=Un(h,p.mode,m,null),h.return=p,h;Ns(p,h)}return null}function d(p,h,m,_){var S=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:l(p,h,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case vs:return m.key===S?a(p,h,m,_):null;case sr:return m.key===S?u(p,h,m,_):null;case on:return S=m._init,d(p,h,S(m._payload),_)}if(fi(m)||Jr(m))return S!==null?null:f(p,h,m,_,null);Ns(p,m)}return null}function y(p,h,m,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(m)||null,l(h,p,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vs:return p=p.get(_.key===null?m:_.key)||null,a(h,p,_,S);case sr:return p=p.get(_.key===null?m:_.key)||null,u(h,p,_,S);case on:var C=_._init;return y(p,h,m,C(_._payload),S)}if(fi(_)||Jr(_))return p=p.get(m)||null,f(h,p,_,S,null);Ns(h,_)}return null}function v(p,h,m,_){for(var S=null,C=null,k=h,T=h=0,z=null;k!==null&&T<m.length;T++){k.index>T?(z=k,k=null):z=k.sibling;var b=d(p,k,m[T],_);if(b===null){k===null&&(k=z);break}e&&k&&b.alternate===null&&t(p,k),h=s(b,h,T),C===null?S=b:C.sibling=b,C=b,k=z}if(T===m.length)return n(p,k),he&&Dn(p,T),S;if(k===null){for(;T<m.length;T++)k=c(p,m[T],_),k!==null&&(h=s(k,h,T),C===null?S=k:C.sibling=k,C=k);return he&&Dn(p,T),S}for(k=r(p,k);T<m.length;T++)z=y(k,p,T,m[T],_),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?T:z.key),h=s(z,h,T),C===null?S=z:C.sibling=z,C=z);return e&&k.forEach(function(M){return t(p,M)}),he&&Dn(p,T),S}function x(p,h,m,_){var S=Jr(m);if(typeof S!="function")throw Error(I(150));if(m=S.call(m),m==null)throw Error(I(151));for(var C=S=null,k=h,T=h=0,z=null,b=m.next();k!==null&&!b.done;T++,b=m.next()){k.index>T?(z=k,k=null):z=k.sibling;var M=d(p,k,b.value,_);if(M===null){k===null&&(k=z);break}e&&k&&M.alternate===null&&t(p,k),h=s(M,h,T),C===null?S=M:C.sibling=M,C=M,k=z}if(b.done)return n(p,k),he&&Dn(p,T),S;if(k===null){for(;!b.done;T++,b=m.next())b=c(p,b.value,_),b!==null&&(h=s(b,h,T),C===null?S=b:C.sibling=b,C=b);return he&&Dn(p,T),S}for(k=r(p,k);!b.done;T++,b=m.next())b=y(k,p,T,b.value,_),b!==null&&(e&&b.alternate!==null&&k.delete(b.key===null?T:b.key),h=s(b,h,T),C===null?S=b:C.sibling=b,C=b);return e&&k.forEach(function($){return t(p,$)}),he&&Dn(p,T),S}function E(p,h,m,_){if(typeof m=="object"&&m!==null&&m.type===or&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case vs:e:{for(var S=m.key,C=h;C!==null;){if(C.key===S){if(S=m.type,S===or){if(C.tag===7){n(p,C.sibling),h=i(C,m.props.children),h.return=p,p=h;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===on&&Zd(S)===C.type){n(p,C.sibling),h=i(C,m.props),h.ref=ri(p,C,m),h.return=p,p=h;break e}n(p,C);break}else t(p,C);C=C.sibling}m.type===or?(h=Un(m.props.children,p.mode,_,m.key),h.return=p,p=h):(_=Ys(m.type,m.key,m.props,null,p.mode,_),_.ref=ri(p,h,m),_.return=p,p=_)}return o(p);case sr:e:{for(C=m.key;h!==null;){if(h.key===C)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(p,h.sibling),h=i(h,m.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else t(p,h);h=h.sibling}h=Gl(m,p.mode,_),h.return=p,p=h}return o(p);case on:return C=m._init,E(p,h,C(m._payload),_)}if(fi(m))return v(p,h,m,_);if(Jr(m))return x(p,h,m,_);Ns(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,m),h.return=p,p=h):(n(p,h),h=Vl(m,p.mode,_),h.return=p,p=h),o(p)):n(p,h)}return E}var Ar=Hp(!0),Vp=Hp(!1),ho=Rn(null),po=null,pr=null,Ku=null;function qu(){Ku=pr=po=null}function Xu(e){var t=ho.current;fe(ho),e._currentValue=t}function ja(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Er(e,t){po=e,Ku=pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ke=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(Ku!==e)if(e={context:e,memoizedValue:t,next:null},pr===null){if(po===null)throw Error(I(308));pr=e,po.dependencies={lanes:0,firstContext:e}}else pr=pr.next=e;return t}var Fn=null;function Ju(e){Fn===null?Fn=[e]:Fn.push(e)}function Gp(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ju(t)):(n.next=i.next,i.next=n),t.interleaved=n,Kt(e,r)}function Kt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ln=!1;function Zu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Kt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ju(r)):(t.next=i.next,i.next=t),r.interleaved=t,Kt(e,n)}function $s(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ju(e,n)}}function ef(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mo(e,t,n,r){var i=e.updateQueue;ln=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,f=u=a=null,l=s;do{var d=l.lane,y=l.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(d=t,y=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){c=v.call(y,c,d);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,d=typeof v=="function"?v.call(y,c,d):v,d==null)break e;c=ye({},c,d);break e;case 2:ln=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else y={eventTime:y,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,a=c):f=f.next=y,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(f===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Qn|=o,e.lanes=o,e.memoizedState=c}}function tf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(I(191,i));i.call(r)}}}var us={},Lt=Rn(us),Wi=Rn(us),$i=Rn(us);function jn(e){if(e===us)throw Error(I(174));return e}function ec(e,t){switch(ue($i,t),ue(Wi,e),ue(Lt,us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=va(t,e)}fe(Lt),ue(Lt,t)}function Lr(){fe(Lt),fe(Wi),fe($i)}function Yp(e){jn($i.current);var t=jn(Lt.current),n=va(t,e.type);t!==n&&(ue(Wi,e),ue(Lt,n))}function tc(e){Wi.current===e&&(fe(Lt),fe(Wi))}var me=Rn(0);function go(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zl=[];function nc(){for(var e=0;e<zl.length;e++)zl[e]._workInProgressVersionPrimary=null;zl.length=0}var Us=rn.ReactCurrentDispatcher,Bl=rn.ReactCurrentBatchConfig,Gn=0,ge=null,Ee=null,Ie=null,yo=!1,wi=!1,Ui=0,D_=0;function ze(){throw Error(I(321))}function rc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tt(e[n],t[n]))return!1;return!0}function ic(e,t,n,r,i,s){if(Gn=s,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Us.current=e===null||e.memoizedState===null?O_:F_,e=n(r,i),wi){s=0;do{if(wi=!1,Ui=0,25<=s)throw Error(I(301));s+=1,Ie=Ee=null,t.updateQueue=null,Us.current=j_,e=n(r,i)}while(wi)}if(Us.current=vo,t=Ee!==null&&Ee.next!==null,Gn=0,Ie=Ee=ge=null,yo=!1,t)throw Error(I(300));return e}function sc(){var e=Ui!==0;return Ui=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ge.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function gt(){if(Ee===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Ie===null?ge.memoizedState:Ie.next;if(t!==null)Ie=t,Ee=e;else{if(e===null)throw Error(I(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ie===null?ge.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Hi(e,t){return typeof t=="function"?t(e):t}function Wl(e){var t=gt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=Ee,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((Gn&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var c={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,ge.lanes|=f,Qn|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Tt(r,t.memoizedState)||(Ke=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ge.lanes|=s,Qn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $l(e){var t=gt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Tt(s,t.memoizedState)||(Ke=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Kp(){}function qp(e,t){var n=ge,r=gt(),i=t(),s=!Tt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ke=!0),r=r.queue,oc(Zp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Vi(9,Jp.bind(null,n,r,i,t),void 0,null),be===null)throw Error(I(349));Gn&30||Xp(n,t,i)}return i}function Xp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jp(e,t,n,r){t.value=n,t.getSnapshot=r,em(t)&&tm(e)}function Zp(e,t,n){return n(function(){em(t)&&tm(e)})}function em(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tt(e,n)}catch{return!0}}function tm(e){var t=Kt(e,1);t!==null&&St(t,e,1,-1)}function nf(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=M_.bind(null,ge,e),[t.memoizedState,e]}function Vi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nm(){return gt().memoizedState}function Hs(e,t,n,r){var i=Pt();ge.flags|=e,i.memoizedState=Vi(1|t,n,void 0,r===void 0?null:r)}function Xo(e,t,n,r){var i=gt();r=r===void 0?null:r;var s=void 0;if(Ee!==null){var o=Ee.memoizedState;if(s=o.destroy,r!==null&&rc(r,o.deps)){i.memoizedState=Vi(t,n,s,r);return}}ge.flags|=e,i.memoizedState=Vi(1|t,n,s,r)}function rf(e,t){return Hs(8390656,8,e,t)}function oc(e,t){return Xo(2048,8,e,t)}function rm(e,t){return Xo(4,2,e,t)}function im(e,t){return Xo(4,4,e,t)}function sm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function om(e,t,n){return n=n!=null?n.concat([e]):null,Xo(4,4,sm.bind(null,t,e),n)}function lc(){}function lm(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function am(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function um(e,t,n){return Gn&21?(Tt(n,t)||(n=pp(),ge.lanes|=n,Qn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ke=!0),e.memoizedState=n)}function A_(e,t){var n=re;re=n!==0&&4>n?n:4,e(!0);var r=Bl.transition;Bl.transition={};try{e(!1),t()}finally{re=n,Bl.transition=r}}function cm(){return gt().memoizedState}function L_(e,t,n){var r=vn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dm(e))fm(t,n);else if(n=Gp(e,t,n,r),n!==null){var i=Ve();St(n,e,r,i),hm(n,t,r)}}function M_(e,t,n){var r=vn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dm(e))fm(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Tt(l,o)){var a=t.interleaved;a===null?(i.next=i,Ju(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Gp(e,t,i,r),n!==null&&(i=Ve(),St(n,e,r,i),hm(n,t,r))}}function dm(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function fm(e,t){wi=yo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ju(e,n)}}var vo={readContext:mt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},O_={readContext:mt,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:rf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hs(4194308,4,sm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hs(4,2,e,t)},useMemo:function(e,t){var n=Pt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=L_.bind(null,ge,e),[r.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:nf,useDebugValue:lc,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=nf(!1),t=e[0];return e=A_.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ge,i=Pt();if(he){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),be===null)throw Error(I(349));Gn&30||Xp(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,rf(Zp.bind(null,r,s,e),[e]),r.flags|=2048,Vi(9,Jp.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Pt(),t=be.identifierPrefix;if(he){var n=$t,r=Wt;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ui++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=D_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},F_={readContext:mt,useCallback:lm,useContext:mt,useEffect:oc,useImperativeHandle:om,useInsertionEffect:rm,useLayoutEffect:im,useMemo:am,useReducer:Wl,useRef:nm,useState:function(){return Wl(Hi)},useDebugValue:lc,useDeferredValue:function(e){var t=gt();return um(t,Ee.memoizedState,e)},useTransition:function(){var e=Wl(Hi)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Kp,useSyncExternalStore:qp,useId:cm,unstable_isNewReconciler:!1},j_={readContext:mt,useCallback:lm,useContext:mt,useEffect:oc,useImperativeHandle:om,useInsertionEffect:rm,useLayoutEffect:im,useMemo:am,useReducer:$l,useRef:nm,useState:function(){return $l(Hi)},useDebugValue:lc,useDeferredValue:function(e){var t=gt();return Ee===null?t.memoizedState=e:um(t,Ee.memoizedState,e)},useTransition:function(){var e=$l(Hi)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Kp,useSyncExternalStore:qp,useId:cm,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Jo={isMounted:function(e){return(e=e._reactInternals)?er(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),i=vn(e),s=Ht(r,i);s.payload=t,n!=null&&(s.callback=n),t=gn(e,s,i),t!==null&&(St(t,e,i,r),$s(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),i=vn(e),s=Ht(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=gn(e,s,i),t!==null&&(St(t,e,i,r),$s(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=vn(e),i=Ht(n,r);i.tag=2,t!=null&&(i.callback=t),t=gn(e,i,r),t!==null&&(St(t,e,r,n),$s(t,e,r))}};function sf(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Fi(n,r)||!Fi(i,s):!0}function pm(e,t,n){var r=!1,i=Sn,s=t.contextType;return typeof s=="object"&&s!==null?s=mt(s):(i=Ze(t)?Hn:$e.current,r=t.contextTypes,s=(r=r!=null)?Pr(e,i):Sn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function of(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Jo.enqueueReplaceState(t,t.state,null)}function Ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Zu(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=mt(s):(s=Ze(t)?Hn:$e.current,i.context=Pr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(za(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Jo.enqueueReplaceState(i,i.state,null),mo(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Mr(e,t){try{var n="",r=t;do n+=fv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Ul(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var z_=typeof WeakMap=="function"?WeakMap:Map;function mm(e,t,n){n=Ht(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wo||(wo=!0,Xa=r),Wa(e,t)},n}function gm(e,t,n){n=Ht(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Wa(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wa(e,t),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function lf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new z_;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Z_.bind(null,e,t,n),t.then(e,e))}function af(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uf(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ht(-1,1),t.tag=2,gn(n,t,1))),n.lanes|=1),e)}var B_=rn.ReactCurrentOwner,Ke=!1;function Ue(e,t,n,r){t.child=e===null?Vp(t,null,n,r):Ar(t,e.child,n,r)}function cf(e,t,n,r,i){n=n.render;var s=t.ref;return Er(t,i),r=ic(e,t,n,r,s,i),n=sc(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qt(e,t,i)):(he&&n&&Gu(t),t.flags|=1,Ue(e,t,r,i),t.child)}function df(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!mc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ym(e,t,s,r,i)):(e=Ys(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fi,n(o,r)&&e.ref===t.ref)return qt(e,t,i)}return t.flags|=1,e=_n(s,r),e.ref=t.ref,e.return=t,t.child=e}function ym(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Fi(s,r)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ke=!0);else return t.lanes=e.lanes,qt(e,t,i)}return $a(e,t,n,r,i)}function vm(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(gr,rt),rt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(gr,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(gr,rt),rt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ue(gr,rt),rt|=r;return Ue(e,t,i,n),t.child}function _m(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $a(e,t,n,r,i){var s=Ze(n)?Hn:$e.current;return s=Pr(t,s),Er(t,i),n=ic(e,t,n,r,s,i),r=sc(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qt(e,t,i)):(he&&r&&Gu(t),t.flags|=1,Ue(e,t,n,i),t.child)}function ff(e,t,n,r,i){if(Ze(n)){var s=!0;uo(t)}else s=!1;if(Er(t,i),t.stateNode===null)Vs(e,t),pm(t,n,r),Ba(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=Ze(n)?Hn:$e.current,u=Pr(t,u));var f=n.getDerivedStateFromProps,c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&of(t,o,r,u),ln=!1;var d=t.memoizedState;o.state=d,mo(t,r,o,i),a=t.memoizedState,l!==r||d!==a||Je.current||ln?(typeof f=="function"&&(za(t,n,f,r),a=t.memoizedState),(l=ln||sf(t,n,l,r,d,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Qp(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:vt(t.type,l),o.props=u,c=t.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=mt(a):(a=Ze(n)?Hn:$e.current,a=Pr(t,a));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||d!==a)&&of(t,o,r,a),ln=!1,d=t.memoizedState,o.state=d,mo(t,r,o,i);var v=t.memoizedState;l!==c||d!==v||Je.current||ln?(typeof y=="function"&&(za(t,n,y,r),v=t.memoizedState),(u=ln||sf(t,n,u,r,d,v,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ua(e,t,n,r,s,i)}function Ua(e,t,n,r,i,s){_m(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&qd(t,n,!1),qt(e,t,s);r=t.stateNode,B_.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ar(t,e.child,null,s),t.child=Ar(t,null,l,s)):Ue(e,t,l,s),t.memoizedState=r.state,i&&qd(t,n,!0),t.child}function wm(e){var t=e.stateNode;t.pendingContext?Kd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kd(e,t.context,!1),ec(e,t.containerInfo)}function hf(e,t,n,r,i){return Dr(),Yu(i),t.flags|=256,Ue(e,t,n,r),t.child}var Ha={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function xm(e,t,n){var r=t.pendingProps,i=me.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ue(me,i&1),e===null)return Fa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tl(o,r,0,null),e=Un(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Va(n),t.memoizedState=Ha,e):ac(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return W_(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=_n(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=_n(l,s):(s=Un(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Va(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Ha,r}return s=e.child,e=s.sibling,r=_n(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ac(e,t){return t=tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bs(e,t,n,r){return r!==null&&Yu(r),Ar(t,e.child,null,n),e=ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W_(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Ul(Error(I(422))),bs(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=tl({mode:"visible",children:r.children},i,0,null),s=Un(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ar(t,e.child,null,o),t.child.memoizedState=Va(o),t.memoizedState=Ha,s);if(!(t.mode&1))return bs(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(I(419)),r=Ul(s,r,void 0),bs(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ke||l){if(r=be,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Kt(e,i),St(r,e,i,-1))}return pc(),r=Ul(Error(I(421))),bs(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=e0.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,it=mn(i.nextSibling),st=t,he=!0,wt=null,e!==null&&(ct[dt++]=Wt,ct[dt++]=$t,ct[dt++]=Vn,Wt=e.id,$t=e.overflow,Vn=t),t=ac(t,r.children),t.flags|=4096,t)}function pf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ja(e.return,t,n)}function Hl(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Cm(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ue(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pf(e,n,t);else if(e.tag===19)pf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(me,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&go(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hl(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&go(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hl(t,!0,n,null,s);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=_n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $_(e,t,n){switch(t.tag){case 3:wm(t),Dr();break;case 5:Yp(t);break;case 1:Ze(t.type)&&uo(t);break;case 4:ec(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ue(ho,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?xm(e,t,n):(ue(me,me.current&1),e=qt(e,t,n),e!==null?e.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Cm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,vm(e,t,n)}return qt(e,t,n)}var Em,Ga,Sm,km;Em=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ga=function(){};Sm=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jn(Lt.current);var s=null;switch(n){case"input":i=pa(e,i),r=pa(e,r),s=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),s=[];break;case"textarea":i=ya(e,i),r=ya(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lo)}_a(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&de("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};km=function(e,t,n,r){n!==r&&(t.flags|=4)};function ii(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function U_(e,t,n){var r=t.pendingProps;switch(Qu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return Ze(t.type)&&ao(),Be(t),null;case 3:return r=t.stateNode,Lr(),fe(Je),fe($e),nc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Rs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(eu(wt),wt=null))),Ga(e,t),Be(t),null;case 5:tc(t);var i=jn($i.current);if(n=t.type,e!==null&&t.stateNode!=null)Sm(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return Be(t),null}if(e=jn(Lt.current),Rs(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Dt]=t,r[Bi]=s,e=(t.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<pi.length;i++)de(pi[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":Cd(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":Sd(r,s),de("invalid",r)}_a(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Is(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Is(r.textContent,l,e),i=["children",""+l]):bi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":_s(r),Ed(r,s,!0);break;case"textarea":_s(r),kd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lo)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Dt]=t,e[Bi]=r,Em(e,t,!1,!1),t.stateNode=e;e:{switch(o=wa(n,r),n){case"dialog":de("cancel",e),de("close",e),i=r;break;case"iframe":case"object":case"embed":de("load",e),i=r;break;case"video":case"audio":for(i=0;i<pi.length;i++)de(pi[i],e);i=r;break;case"source":de("error",e),i=r;break;case"img":case"image":case"link":de("error",e),de("load",e),i=r;break;case"details":de("toggle",e),i=r;break;case"input":Cd(e,r),i=pa(e,r),de("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),de("invalid",e);break;case"textarea":Sd(e,r),i=ya(e,r),de("invalid",e);break;default:i=r}_a(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?np(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ep(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Pi(e,a):typeof a=="number"&&Pi(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&de("scroll",e):a!=null&&Du(e,s,a,o))}switch(n){case"input":_s(e),Ed(e,r,!1);break;case"textarea":_s(e),kd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+En(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?_r(e,!!r.multiple,s,!1):r.defaultValue!=null&&_r(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=lo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Be(t),null;case 6:if(e&&t.stateNode!=null)km(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=jn($i.current),jn(Lt.current),Rs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Dt]=t,(s=r.nodeValue!==n)&&(e=st,e!==null))switch(e.tag){case 3:Is(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Is(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dt]=t,t.stateNode=r}return Be(t),null;case 13:if(fe(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&it!==null&&t.mode&1&&!(t.flags&128))Up(),Dr(),t.flags|=98560,s=!1;else if(s=Rs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(I(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(I(317));s[Dt]=t}else Dr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Be(t),s=!1}else wt!==null&&(eu(wt),wt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Se===0&&(Se=3):pc())),t.updateQueue!==null&&(t.flags|=4),Be(t),null);case 4:return Lr(),Ga(e,t),e===null&&ji(t.stateNode.containerInfo),Be(t),null;case 10:return Xu(t.type._context),Be(t),null;case 17:return Ze(t.type)&&ao(),Be(t),null;case 19:if(fe(me),s=t.memoizedState,s===null)return Be(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)ii(s,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=go(e),o!==null){for(t.flags|=128,ii(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(me,me.current&1|2),t.child}e=e.sibling}s.tail!==null&&xe()>Or&&(t.flags|=128,r=!0,ii(s,!1),t.lanes=4194304)}else{if(!r)if(e=go(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ii(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!he)return Be(t),null}else 2*xe()-s.renderingStartTime>Or&&n!==1073741824&&(t.flags|=128,r=!0,ii(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=xe(),t.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),t):(Be(t),null);case 22:case 23:return hc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rt&1073741824&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function H_(e,t){switch(Qu(t),t.tag){case 1:return Ze(t.type)&&ao(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lr(),fe(Je),fe($e),nc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tc(t),null;case 13:if(fe(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));Dr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(me),null;case 4:return Lr(),null;case 10:return Xu(t.type._context),null;case 22:case 23:return hc(),null;case 24:return null;default:return null}}var Ps=!1,We=!1,V_=typeof WeakSet=="function"?WeakSet:Set,L=null;function mr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,t,r)}else n.current=null}function Qa(e,t,n){try{n()}catch(r){ve(e,t,r)}}var mf=!1;function G_(e,t){if(ba=io,e=bp(),Vu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,c=e,d=null;t:for(;;){for(var y;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(y=c.firstChild)!==null;)d=c,c=y;for(;;){if(c===e)break t;if(d===n&&++u===i&&(l=o),d===s&&++f===r&&(a=o),(y=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pa={focusedElem:e,selectionRange:n},io=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,E=v.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?x:vt(t.type,x),E);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(_){ve(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return v=mf,mf=!1,v}function xi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qa(t,n,s)}i=i.next}while(i!==r)}}function Zo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ya(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Tm(e){var t=e.alternate;t!==null&&(e.alternate=null,Tm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dt],delete t[Bi],delete t[La],delete t[R_],delete t[N_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Im(e){return e.tag===5||e.tag===3||e.tag===4}function gf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Im(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ka(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lo));else if(r!==4&&(e=e.child,e!==null))for(Ka(e,t,n),e=e.sibling;e!==null;)Ka(e,t,n),e=e.sibling}function qa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qa(e,t,n),e=e.sibling;e!==null;)qa(e,t,n),e=e.sibling}var De=null,_t=!1;function sn(e,t,n){for(n=n.child;n!==null;)Rm(e,t,n),n=n.sibling}function Rm(e,t,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Vo,n)}catch{}switch(n.tag){case 5:We||mr(n,t);case 6:var r=De,i=_t;De=null,sn(e,t,n),De=r,_t=i,De!==null&&(_t?(e=De,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(_t?(e=De,n=n.stateNode,e.nodeType===8?Fl(e.parentNode,n):e.nodeType===1&&Fl(e,n),Mi(e)):Fl(De,n.stateNode));break;case 4:r=De,i=_t,De=n.stateNode.containerInfo,_t=!0,sn(e,t,n),De=r,_t=i;break;case 0:case 11:case 14:case 15:if(!We&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qa(n,t,o),i=i.next}while(i!==r)}sn(e,t,n);break;case 1:if(!We&&(mr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ve(n,t,l)}sn(e,t,n);break;case 21:sn(e,t,n);break;case 22:n.mode&1?(We=(r=We)||n.memoizedState!==null,sn(e,t,n),We=r):sn(e,t,n);break;default:sn(e,t,n)}}function yf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new V_),t.forEach(function(r){var i=t0.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:De=l.stateNode,_t=!1;break e;case 3:De=l.stateNode.containerInfo,_t=!0;break e;case 4:De=l.stateNode.containerInfo,_t=!0;break e}l=l.return}if(De===null)throw Error(I(160));Rm(s,o,i),De=null,_t=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ve(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nm(t,e),t=t.sibling}function Nm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yt(t,e),bt(e),r&4){try{xi(3,e,e.return),Zo(3,e)}catch(x){ve(e,e.return,x)}try{xi(5,e,e.return)}catch(x){ve(e,e.return,x)}}break;case 1:yt(t,e),bt(e),r&512&&n!==null&&mr(n,n.return);break;case 5:if(yt(t,e),bt(e),r&512&&n!==null&&mr(n,n.return),e.flags&32){var i=e.stateNode;try{Pi(i,"")}catch(x){ve(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Xh(i,s),wa(l,o);var u=wa(l,s);for(o=0;o<a.length;o+=2){var f=a[o],c=a[o+1];f==="style"?np(i,c):f==="dangerouslySetInnerHTML"?ep(i,c):f==="children"?Pi(i,c):Du(i,f,c,u)}switch(l){case"input":ma(i,s);break;case"textarea":Jh(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?_r(i,!!s.multiple,y,!1):d!==!!s.multiple&&(s.defaultValue!=null?_r(i,!!s.multiple,s.defaultValue,!0):_r(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bi]=s}catch(x){ve(e,e.return,x)}}break;case 6:if(yt(t,e),bt(e),r&4){if(e.stateNode===null)throw Error(I(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(x){ve(e,e.return,x)}}break;case 3:if(yt(t,e),bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(t.containerInfo)}catch(x){ve(e,e.return,x)}break;case 4:yt(t,e),bt(e);break;case 13:yt(t,e),bt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dc=xe())),r&4&&yf(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(We=(u=We)||f,yt(t,e),We=u):yt(t,e),bt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(L=e,f=e.child;f!==null;){for(c=L=f;L!==null;){switch(d=L,y=d.child,d.tag){case 0:case 11:case 14:case 15:xi(4,d,d.return);break;case 1:mr(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){ve(r,n,x)}}break;case 5:mr(d,d.return);break;case 22:if(d.memoizedState!==null){_f(c);continue}}y!==null?(y.return=d,L=y):_f(c)}f=f.sibling}e:for(f=null,c=e;;){if(c.tag===5){if(f===null){f=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=tp("display",o))}catch(x){ve(e,e.return,x)}}}else if(c.tag===6){if(f===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(x){ve(e,e.return,x)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:yt(t,e),bt(e),r&4&&yf(e);break;case 21:break;default:yt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Im(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pi(i,""),r.flags&=-33);var s=gf(e);qa(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=gf(e);Ka(e,l,o);break;default:throw Error(I(161))}}catch(a){ve(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Q_(e,t,n){L=e,bm(e)}function bm(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ps;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||We;l=Ps;var u=We;if(Ps=o,(We=a)&&!u)for(L=i;L!==null;)o=L,a=o.child,o.tag===22&&o.memoizedState!==null?wf(i):a!==null?(a.return=o,L=a):wf(i);for(;s!==null;)L=s,bm(s),s=s.sibling;L=i,Ps=l,We=u}vf(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):vf(e)}}function vf(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||Zo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!We)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&tf(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var c=f.dehydrated;c!==null&&Mi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}We||t.flags&512&&Ya(t)}catch(d){ve(t,t.return,d)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function _f(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function wf(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zo(4,t)}catch(a){ve(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){ve(t,i,a)}}var s=t.return;try{Ya(t)}catch(a){ve(t,s,a)}break;case 5:var o=t.return;try{Ya(t)}catch(a){ve(t,o,a)}}}catch(a){ve(t,t.return,a)}if(t===e){L=null;break}var l=t.sibling;if(l!==null){l.return=t.return,L=l;break}L=t.return}}var Y_=Math.ceil,_o=rn.ReactCurrentDispatcher,uc=rn.ReactCurrentOwner,pt=rn.ReactCurrentBatchConfig,ee=0,be=null,Ce=null,Me=0,rt=0,gr=Rn(0),Se=0,Gi=null,Qn=0,el=0,cc=0,Ci=null,Ye=null,dc=0,Or=1/0,zt=null,wo=!1,Xa=null,yn=null,Ds=!1,dn=null,xo=0,Ei=0,Ja=null,Gs=-1,Qs=0;function Ve(){return ee&6?xe():Gs!==-1?Gs:Gs=xe()}function vn(e){return e.mode&1?ee&2&&Me!==0?Me&-Me:P_.transition!==null?(Qs===0&&(Qs=pp()),Qs):(e=re,e!==0||(e=window.event,e=e===void 0?16:xp(e.type)),e):1}function St(e,t,n,r){if(50<Ei)throw Ei=0,Ja=null,Error(I(185));os(e,n,r),(!(ee&2)||e!==be)&&(e===be&&(!(ee&2)&&(el|=n),Se===4&&un(e,Me)),et(e,r),n===1&&ee===0&&!(t.mode&1)&&(Or=xe()+500,qo&&Nn()))}function et(e,t){var n=e.callbackNode;Pv(e,t);var r=ro(e,e===be?Me:0);if(r===0)n!==null&&Rd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Rd(n),t===1)e.tag===0?b_(xf.bind(null,e)):Bp(xf.bind(null,e)),T_(function(){!(ee&6)&&Nn()}),n=null;else{switch(mp(r)){case 1:n=Fu;break;case 4:n=fp;break;case 16:n=no;break;case 536870912:n=hp;break;default:n=no}n=jm(n,Pm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pm(e,t){if(Gs=-1,Qs=0,ee&6)throw Error(I(327));var n=e.callbackNode;if(Sr()&&e.callbackNode!==n)return null;var r=ro(e,e===be?Me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Co(e,r);else{t=r;var i=ee;ee|=2;var s=Am();(be!==e||Me!==t)&&(zt=null,Or=xe()+500,$n(e,t));do try{X_();break}catch(l){Dm(e,l)}while(!0);qu(),_o.current=s,ee=i,Ce!==null?t=0:(be=null,Me=0,t=Se)}if(t!==0){if(t===2&&(i=ka(e),i!==0&&(r=i,t=Za(e,i))),t===1)throw n=Gi,$n(e,0),un(e,r),et(e,xe()),n;if(t===6)un(e,r);else{if(i=e.current.alternate,!(r&30)&&!K_(i)&&(t=Co(e,r),t===2&&(s=ka(e),s!==0&&(r=s,t=Za(e,s))),t===1))throw n=Gi,$n(e,0),un(e,r),et(e,xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:An(e,Ye,zt);break;case 3:if(un(e,r),(r&130023424)===r&&(t=dc+500-xe(),10<t)){if(ro(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Aa(An.bind(null,e,Ye,zt),t);break}An(e,Ye,zt);break;case 4:if(un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Et(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Y_(r/1960))-r,10<r){e.timeoutHandle=Aa(An.bind(null,e,Ye,zt),r);break}An(e,Ye,zt);break;case 5:An(e,Ye,zt);break;default:throw Error(I(329))}}}return et(e,xe()),e.callbackNode===n?Pm.bind(null,e):null}function Za(e,t){var n=Ci;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=Co(e,t),e!==2&&(t=Ye,Ye=n,t!==null&&eu(t)),e}function eu(e){Ye===null?Ye=e:Ye.push.apply(Ye,e)}function K_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Tt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t){for(t&=~cc,t&=~el,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Et(t),r=1<<n;e[n]=-1,t&=~r}}function xf(e){if(ee&6)throw Error(I(327));Sr();var t=ro(e,0);if(!(t&1))return et(e,xe()),null;var n=Co(e,t);if(e.tag!==0&&n===2){var r=ka(e);r!==0&&(t=r,n=Za(e,r))}if(n===1)throw n=Gi,$n(e,0),un(e,t),et(e,xe()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,An(e,Ye,zt),et(e,xe()),null}function fc(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(Or=xe()+500,qo&&Nn())}}function Yn(e){dn!==null&&dn.tag===0&&!(ee&6)&&Sr();var t=ee;ee|=1;var n=pt.transition,r=re;try{if(pt.transition=null,re=1,e)return e()}finally{re=r,pt.transition=n,ee=t,!(ee&6)&&Nn()}}function hc(){rt=gr.current,fe(gr)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,k_(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(Qu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ao();break;case 3:Lr(),fe(Je),fe($e),nc();break;case 5:tc(r);break;case 4:Lr();break;case 13:fe(me);break;case 19:fe(me);break;case 10:Xu(r.type._context);break;case 22:case 23:hc()}n=n.return}if(be=e,Ce=e=_n(e.current,null),Me=rt=t,Se=0,Gi=null,cc=el=Qn=0,Ye=Ci=null,Fn!==null){for(t=0;t<Fn.length;t++)if(n=Fn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fn=null}return e}function Dm(e,t){do{var n=Ce;try{if(qu(),Us.current=vo,yo){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yo=!1}if(Gn=0,Ie=Ee=ge=null,wi=!1,Ui=0,uc.current=null,n===null||n.return===null){Se=1,Gi=t,Ce=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=Me,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,c=f.tag;if(!(f.mode&1)&&(c===0||c===11||c===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=af(o);if(y!==null){y.flags&=-257,uf(y,o,l,s,t),y.mode&1&&lf(s,u,t),t=y,a=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(a),t.updateQueue=x}else v.add(a);break e}else{if(!(t&1)){lf(s,u,t),pc();break e}a=Error(I(426))}}else if(he&&l.mode&1){var E=af(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),uf(E,o,l,s,t),Yu(Mr(a,l));break e}}s=a=Mr(a,l),Se!==4&&(Se=2),Ci===null?Ci=[s]:Ci.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=mm(s,a,t);ef(s,p);break e;case 1:l=a;var h=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(yn===null||!yn.has(m)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=gm(s,l,t);ef(s,_);break e}}s=s.return}while(s!==null)}Mm(n)}catch(S){t=S,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function Am(){var e=_o.current;return _o.current=vo,e===null?vo:e}function pc(){(Se===0||Se===3||Se===2)&&(Se=4),be===null||!(Qn&268435455)&&!(el&268435455)||un(be,Me)}function Co(e,t){var n=ee;ee|=2;var r=Am();(be!==e||Me!==t)&&(zt=null,$n(e,t));do try{q_();break}catch(i){Dm(e,i)}while(!0);if(qu(),ee=n,_o.current=r,Ce!==null)throw Error(I(261));return be=null,Me=0,Se}function q_(){for(;Ce!==null;)Lm(Ce)}function X_(){for(;Ce!==null&&!Cv();)Lm(Ce)}function Lm(e){var t=Fm(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?Mm(e):Ce=t,uc.current=null}function Mm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=H_(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,Ce=null;return}}else if(n=U_(n,t,rt),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Se===0&&(Se=5)}function An(e,t,n){var r=re,i=pt.transition;try{pt.transition=null,re=1,J_(e,t,n,r)}finally{pt.transition=i,re=r}return null}function J_(e,t,n,r){do Sr();while(dn!==null);if(ee&6)throw Error(I(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Dv(e,s),e===be&&(Ce=be=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ds||(Ds=!0,jm(no,function(){return Sr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pt.transition,pt.transition=null;var o=re;re=1;var l=ee;ee|=4,uc.current=null,G_(e,n),Nm(n,e),v_(Pa),io=!!ba,Pa=ba=null,e.current=n,Q_(n),Ev(),ee=l,re=o,pt.transition=s}else e.current=n;if(Ds&&(Ds=!1,dn=e,xo=i),s=e.pendingLanes,s===0&&(yn=null),Tv(n.stateNode),et(e,xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wo)throw wo=!1,e=Xa,Xa=null,e;return xo&1&&e.tag!==0&&Sr(),s=e.pendingLanes,s&1?e===Ja?Ei++:(Ei=0,Ja=e):Ei=0,Nn(),null}function Sr(){if(dn!==null){var e=mp(xo),t=pt.transition,n=re;try{if(pt.transition=null,re=16>e?16:e,dn===null)var r=!1;else{if(e=dn,dn=null,xo=0,ee&6)throw Error(I(331));var i=ee;for(ee|=4,L=e.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(L=u;L!==null;){var f=L;switch(f.tag){case 0:case 11:case 15:xi(8,f,s)}var c=f.child;if(c!==null)c.return=f,L=c;else for(;L!==null;){f=L;var d=f.sibling,y=f.return;if(Tm(f),f===u){L=null;break}if(d!==null){d.return=y,L=d;break}L=y}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var h=e.current;for(L=h;L!==null;){o=L;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,L=m;else e:for(o=h;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zo(9,l)}}catch(S){ve(l,l.return,S)}if(l===o){L=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,L=_;break e}L=l.return}}if(ee=i,Nn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Vo,e)}catch{}r=!0}return r}finally{re=n,pt.transition=t}}return!1}function Cf(e,t,n){t=Mr(n,t),t=mm(e,t,1),e=gn(e,t,1),t=Ve(),e!==null&&(os(e,1,t),et(e,t))}function ve(e,t,n){if(e.tag===3)Cf(e,e,n);else for(;t!==null;){if(t.tag===3){Cf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){e=Mr(n,e),e=gm(t,e,1),t=gn(t,e,1),e=Ve(),t!==null&&(os(t,1,e),et(t,e));break}}t=t.return}}function Z_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,be===e&&(Me&n)===n&&(Se===4||Se===3&&(Me&130023424)===Me&&500>xe()-dc?$n(e,0):cc|=n),et(e,t)}function Om(e,t){t===0&&(e.mode&1?(t=Cs,Cs<<=1,!(Cs&130023424)&&(Cs=4194304)):t=1);var n=Ve();e=Kt(e,t),e!==null&&(os(e,t,n),et(e,n))}function e0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Om(e,n)}function t0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),Om(e,n)}var Fm;Fm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Je.current)Ke=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ke=!1,$_(e,t,n);Ke=!!(e.flags&131072)}else Ke=!1,he&&t.flags&1048576&&Wp(t,fo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Pr(t,$e.current);Er(t,n),i=ic(null,t,r,e,i,n);var s=sc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(r)?(s=!0,uo(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zu(t),i.updater=Jo,t.stateNode=i,i._reactInternals=t,Ba(t,r,e,n),t=Ua(null,t,r,!0,s,n)):(t.tag=0,he&&s&&Gu(t),Ue(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=r0(r),e=vt(r,e),i){case 0:t=$a(null,t,r,e,n);break e;case 1:t=ff(null,t,r,e,n);break e;case 11:t=cf(null,t,r,e,n);break e;case 14:t=df(null,t,r,vt(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),$a(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),ff(e,t,r,i,n);case 3:e:{if(wm(t),e===null)throw Error(I(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Qp(e,t),mo(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Mr(Error(I(423)),t),t=hf(e,t,r,n,i);break e}else if(r!==i){i=Mr(Error(I(424)),t),t=hf(e,t,r,n,i);break e}else for(it=mn(t.stateNode.containerInfo.firstChild),st=t,he=!0,wt=null,n=Vp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dr(),r===i){t=qt(e,t,n);break e}Ue(e,t,r,n)}t=t.child}return t;case 5:return Yp(t),e===null&&Fa(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Da(r,i)?o=null:s!==null&&Da(r,s)&&(t.flags|=32),_m(e,t),Ue(e,t,o,n),t.child;case 6:return e===null&&Fa(t),null;case 13:return xm(e,t,n);case 4:return ec(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ar(t,null,r,n):Ue(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),cf(e,t,r,i,n);case 7:return Ue(e,t,t.pendingProps,n),t.child;case 8:return Ue(e,t,t.pendingProps.children,n),t.child;case 12:return Ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ue(ho,r._currentValue),r._currentValue=o,s!==null)if(Tt(s.value,o)){if(s.children===i.children&&!Je.current){t=qt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Ht(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ja(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(I(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ja(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ue(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Er(t,n),i=mt(i),r=r(i),t.flags|=1,Ue(e,t,r,n),t.child;case 14:return r=t.type,i=vt(r,t.pendingProps),i=vt(r.type,i),df(e,t,r,i,n);case 15:return ym(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),Vs(e,t),t.tag=1,Ze(r)?(e=!0,uo(t)):e=!1,Er(t,n),pm(t,r,i),Ba(t,r,i,n),Ua(null,t,r,!0,e,n);case 19:return Cm(e,t,n);case 22:return vm(e,t,n)}throw Error(I(156,t.tag))};function jm(e,t){return dp(e,t)}function n0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,r){return new n0(e,t,n,r)}function mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r0(e){if(typeof e=="function")return mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Lu)return 11;if(e===Mu)return 14}return 2}function _n(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ys(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")mc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case or:return Un(n.children,i,s,t);case Au:o=8,i|=8;break;case ca:return e=ft(12,n,t,i|2),e.elementType=ca,e.lanes=s,e;case da:return e=ft(13,n,t,i),e.elementType=da,e.lanes=s,e;case fa:return e=ft(19,n,t,i),e.elementType=fa,e.lanes=s,e;case Yh:return tl(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gh:o=10;break e;case Qh:o=9;break e;case Lu:o=11;break e;case Mu:o=14;break e;case on:o=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=ft(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Un(e,t,n,r){return e=ft(7,e,r,t),e.lanes=n,e}function tl(e,t,n,r){return e=ft(22,e,r,t),e.elementType=Yh,e.lanes=n,e.stateNode={isHidden:!1},e}function Vl(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function Gl(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i0(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tl(0),this.expirationTimes=Tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gc(e,t,n,r,i,s,o,l,a){return e=new i0(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ft(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(s),e}function s0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zm(e){if(!e)return Sn;e=e._reactInternals;e:{if(er(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(Ze(n))return zp(e,n,t)}return t}function Bm(e,t,n,r,i,s,o,l,a){return e=gc(n,r,!0,e,i,s,o,l,a),e.context=zm(null),n=e.current,r=Ve(),i=vn(n),s=Ht(r,i),s.callback=t??null,gn(n,s,i),e.current.lanes=i,os(e,i,r),et(e,r),e}function nl(e,t,n,r){var i=t.current,s=Ve(),o=vn(i);return n=zm(n),t.context===null?t.context=n:t.pendingContext=n,t=Ht(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gn(i,t,o),e!==null&&(St(e,i,o,s),$s(e,i,o)),o}function Eo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ef(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yc(e,t){Ef(e,t),(e=e.alternate)&&Ef(e,t)}function o0(){return null}var Wm=typeof reportError=="function"?reportError:function(e){console.error(e)};function vc(e){this._internalRoot=e}rl.prototype.render=vc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));nl(e,t,null,null)};rl.prototype.unmount=vc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yn(function(){nl(null,e,null,null)}),t[Yt]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=vp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<an.length&&t!==0&&t<an[n].priority;n++);an.splice(n,0,e),n===0&&wp(e)}};function _c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function il(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sf(){}function l0(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Eo(o);s.call(u)}}var o=Bm(t,r,e,0,null,!1,!1,"",Sf);return e._reactRootContainer=o,e[Yt]=o.current,ji(e.nodeType===8?e.parentNode:e),Yn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Eo(a);l.call(u)}}var a=gc(e,0,!1,null,null,!1,!1,"",Sf);return e._reactRootContainer=a,e[Yt]=a.current,ji(e.nodeType===8?e.parentNode:e),Yn(function(){nl(t,a,n,r)}),a}function sl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Eo(o);l.call(a)}}nl(t,o,e,i)}else o=l0(n,t,e,i,r);return Eo(o)}gp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hi(t.pendingLanes);n!==0&&(ju(t,n|1),et(t,xe()),!(ee&6)&&(Or=xe()+500,Nn()))}break;case 13:Yn(function(){var r=Kt(e,1);if(r!==null){var i=Ve();St(r,e,1,i)}}),yc(e,1)}};zu=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var n=Ve();St(t,e,134217728,n)}yc(e,134217728)}};yp=function(e){if(e.tag===13){var t=vn(e),n=Kt(e,t);if(n!==null){var r=Ve();St(n,e,t,r)}yc(e,t)}};vp=function(){return re};_p=function(e,t){var n=re;try{return re=e,t()}finally{re=n}};Ca=function(e,t,n){switch(t){case"input":if(ma(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ko(r);if(!i)throw Error(I(90));qh(r),ma(r,i)}}}break;case"textarea":Jh(e,n);break;case"select":t=n.value,t!=null&&_r(e,!!n.multiple,t,!1)}};sp=fc;op=Yn;var a0={usingClientEntryPoint:!1,Events:[as,cr,Ko,rp,ip,fc]},si={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u0={bundleType:si.bundleType,version:si.version,rendererPackageName:si.rendererPackageName,rendererConfig:si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=up(e),e===null?null:e.stateNode},findFiberByHostInstance:si.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var As=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!As.isDisabled&&As.supportsFiber)try{Vo=As.inject(u0),At=As}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(t))throw Error(I(200));return s0(e,t,null,n)};lt.createRoot=function(e,t){if(!_c(e))throw Error(I(299));var n=!1,r="",i=Wm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=gc(e,1,!1,null,null,n,!1,r,i),e[Yt]=t.current,ji(e.nodeType===8?e.parentNode:e),new vc(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=up(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return Yn(e)};lt.hydrate=function(e,t,n){if(!il(t))throw Error(I(200));return sl(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!_c(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Wm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Bm(t,null,e,1,n??null,i,!1,s,o),e[Yt]=t.current,ji(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new rl(t)};lt.render=function(e,t,n){if(!il(t))throw Error(I(200));return sl(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!il(e))throw Error(I(40));return e._reactRootContainer?(Yn(function(){sl(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};lt.unstable_batchedUpdates=fc;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return sl(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function $m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($m)}catch(e){console.error(e)}}$m(),$h.exports=lt;var c0=$h.exports,kf=c0;aa.createRoot=kf.createRoot,aa.hydrateRoot=kf.hydrateRoot;var wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.parse=y0;wc.serialize=v0;const d0=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,f0=/^[\u0021-\u003A\u003C-\u007E]*$/,h0=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,p0=/^[\u0020-\u003A\u003D-\u007E]*$/,m0=Object.prototype.toString,g0=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function y0(e,t){const n=new g0,r=e.length;if(r<2)return n;const i=(t==null?void 0:t.decode)||_0;let s=0;do{const o=e.indexOf("=",s);if(o===-1)break;const l=e.indexOf(";",s),a=l===-1?r:l;if(o>a){s=e.lastIndexOf(";",o-1)+1;continue}const u=Tf(e,s,o),f=If(e,o,u),c=e.slice(u,f);if(n[c]===void 0){let d=Tf(e,o+1,a),y=If(e,a,d);const v=i(e.slice(d,y));n[c]=v}s=a+1}while(s<r);return n}function Tf(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function If(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function v0(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!d0.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=r(t);if(!f0.test(i))throw new TypeError(`argument val is invalid: ${t}`);let s=e+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!h0.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!p0.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!w0(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function _0(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function w0(e){return m0.call(e)==="[object Date]"}var Rf="popstate";function x0(e={}){function t(r,i){let{pathname:s,search:o,hash:l}=r.location;return tu("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Qi(i)}return E0(t,n,null,e)}function pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function It(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C0(){return Math.random().toString(36).substring(2,10)}function Nf(e,t){return{usr:e.state,key:e.key,idx:t}}function tu(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vr(t):t,state:n,key:t&&t.key||r||C0()}}function Qi({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function E0(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l="POP",a=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function c(){l="POP";let E=f(),p=E==null?null:E-u;u=E,a&&a({action:l,location:x.location,delta:p})}function d(E,p){l="PUSH";let h=tu(x.location,E,p);u=f()+1;let m=Nf(h,u),_=x.createHref(h);try{o.pushState(m,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(_)}s&&a&&a({action:l,location:x.location,delta:1})}function y(E,p){l="REPLACE";let h=tu(x.location,E,p);u=f();let m=Nf(h,u),_=x.createHref(h);o.replaceState(m,"",_),s&&a&&a({action:l,location:x.location,delta:0})}function v(E){return S0(E)}let x={get action(){return l},get location(){return e(i,o)},listen(E){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Rf,c),a=E,()=>{i.removeEventListener(Rf,c),a=null}},createHref(E){return t(i,E)},createURL:v,encodeLocation(E){let p=v(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:y,go(E){return o.go(E)}};return x}function S0(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pe(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Qi(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Um(e,t,n="/"){return k0(e,t,n,!1)}function k0(e,t,n,r){let i=typeof t=="string"?Vr(t):t,s=Xt(i.pathname||"/",n);if(s==null)return null;let o=Hm(e);T0(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=F0(s);l=M0(o[a],u,r)}return l}function Hm(e,t=[],n=[],r=""){let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(pe(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let u=Vt([r,a.relativePath]),f=n.concat(a);s.children&&s.children.length>0&&(pe(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Hm(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:A0(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of Vm(s.path))i(s,o,a)}),t}function Vm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Vm(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>e.startsWith("/")&&a===""?"/":a)}function T0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:L0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var I0=/^:[\w-]+$/,R0=3,N0=2,b0=1,P0=10,D0=-2,bf=e=>e==="*";function A0(e,t){let n=e.split("/"),r=n.length;return n.some(bf)&&(r+=D0),t&&(r+=N0),n.filter(i=>!bf(i)).reduce((i,s)=>i+(I0.test(s)?R0:s===""?b0:P0),r)}function L0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function M0(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",c=So({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},f),d=a.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=So({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},f)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:Vt([s,c.pathname]),pathnameBase:W0(Vt([s,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(s=Vt([s,c.pathnameBase]))}return o}function So(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=O0(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:c},d)=>{if(f==="*"){let v=l[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[d];return c&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function O0(e,t=!1,n=!0){It(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function F0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return It(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Xt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function j0(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Vr(e):e;return{pathname:n?n.startsWith("/")?n:z0(n,t):t,search:$0(r),hash:U0(i)}}function z0(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ql(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function B0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function xc(e){let t=B0(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Cc(e,t,n,r=!1){let i;typeof e=="string"?i=Vr(e):(i={...e},pe(!i.pathname||!i.pathname.includes("?"),Ql("?","pathname","search",i)),pe(!i.pathname||!i.pathname.includes("#"),Ql("#","pathname","hash",i)),pe(!i.search||!i.search.includes("#"),Ql("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let c=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),c-=1;i.pathname=d.join("/")}l=c>=0?t[c]:"/"}let a=j0(i,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||f)&&(a.pathname+="/"),a}var Vt=e=>e.join("/").replace(/\/\/+/g,"/"),W0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,U0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function H0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Gm=["POST","PUT","PATCH","DELETE"];new Set(Gm);var V0=["GET",...Gm];new Set(V0);var Gr=g.createContext(null);Gr.displayName="DataRouter";var ol=g.createContext(null);ol.displayName="DataRouterState";var Qm=g.createContext({isTransitioning:!1});Qm.displayName="ViewTransition";var G0=g.createContext(new Map);G0.displayName="Fetchers";var Q0=g.createContext(null);Q0.displayName="Await";var Rt=g.createContext(null);Rt.displayName="Navigation";var cs=g.createContext(null);cs.displayName="Location";var Mt=g.createContext({outlet:null,matches:[],isDataRoute:!1});Mt.displayName="Route";var Ec=g.createContext(null);Ec.displayName="RouteError";function Y0(e,{relative:t}={}){pe(Qr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(Rt),{hash:i,pathname:s,search:o}=ds(e,{relative:t}),l=s;return n!=="/"&&(l=s==="/"?n:Vt([n,s])),r.createHref({pathname:l,search:o,hash:i})}function Qr(){return g.useContext(cs)!=null}function bn(){return pe(Qr(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(cs).location}var Ym="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Km(e){g.useContext(Rt).static||g.useLayoutEffect(e)}function qm(){let{isDataRoute:e}=g.useContext(Mt);return e?lw():K0()}function K0(){pe(Qr(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Gr),{basename:t,navigator:n}=g.useContext(Rt),{matches:r}=g.useContext(Mt),{pathname:i}=bn(),s=JSON.stringify(xc(r)),o=g.useRef(!1);return Km(()=>{o.current=!0}),g.useCallback((a,u={})=>{if(It(o.current,Ym),!o.current)return;if(typeof a=="number"){n.go(a);return}let f=Cc(a,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Vt([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,s,i,e])}g.createContext(null);function ds(e,{relative:t}={}){let{matches:n}=g.useContext(Mt),{pathname:r}=bn(),i=JSON.stringify(xc(n));return g.useMemo(()=>Cc(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function q0(e,t){return Xm(e,t)}function Xm(e,t,n,r){var p;pe(Qr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(Rt),{matches:s}=g.useContext(Mt),o=s[s.length-1],l=o?o.params:{},a=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let h=f&&f.path||"";Jm(a,!f||h.endsWith("*")||h.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${a}" (under <Route path="${h}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${h}"> to <Route path="${h==="/"?"*":`${h}/*`}">.`)}let c=bn(),d;if(t){let h=typeof t=="string"?Vr(t):t;pe(u==="/"||((p=h.pathname)==null?void 0:p.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${h.pathname}" was given in the \`location\` prop.`),d=h}else d=c;let y=d.pathname||"/",v=y;if(u!=="/"){let h=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(h.length).join("/")}let x=Um(e,{pathname:v});It(f||x!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),It(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=tw(x&&x.map(h=>Object.assign({},h,{params:Object.assign({},l,h.params),pathname:Vt([u,i.encodeLocation?i.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?u:Vt([u,i.encodeLocation?i.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),s,n,r);return t&&E?g.createElement(cs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},E):E}function X0(){let e=ow(),t=H0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:i},n):null,o)}var J0=g.createElement(X0,null),Z0=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Mt.Provider,{value:this.props.routeContext},g.createElement(Ec.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ew({routeContext:e,match:t,children:n}){let r=g.useContext(Gr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Mt.Provider,{value:e},n)}function tw(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let a=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);pe(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,a+1))}let o=!1,l=-1;if(n)for(let a=0;a<i.length;a++){let u=i[a];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=a),u.route.id){let{loaderData:f,errors:c}=n,d=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!c||c[u.route.id]===void 0);if(u.route.lazy||d){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((a,u,f)=>{let c,d=!1,y=null,v=null;n&&(c=s&&u.route.id?s[u.route.id]:void 0,y=u.route.errorElement||J0,o&&(l<0&&f===0?(Jm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,v=null):l===f&&(d=!0,v=u.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,f+1)),E=()=>{let p;return c?p=y:d?p=v:u.route.Component?p=g.createElement(u.route.Component,null):u.route.element?p=u.route.element:p=a,g.createElement(ew,{match:u,routeContext:{outlet:a,matches:x,isDataRoute:n!=null},children:p})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?g.createElement(Z0,{location:n.location,revalidation:n.revalidation,component:y,error:c,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):E()},null)}function Sc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nw(e){let t=g.useContext(Gr);return pe(t,Sc(e)),t}function rw(e){let t=g.useContext(ol);return pe(t,Sc(e)),t}function iw(e){let t=g.useContext(Mt);return pe(t,Sc(e)),t}function kc(e){let t=iw(e),n=t.matches[t.matches.length-1];return pe(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function sw(){return kc("useRouteId")}function ow(){var r;let e=g.useContext(Ec),t=rw("useRouteError"),n=kc("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function lw(){let{router:e}=nw("useNavigate"),t=kc("useNavigate"),n=g.useRef(!1);return Km(()=>{n.current=!0}),g.useCallback(async(i,s={})=>{It(n.current,Ym),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Pf={};function Jm(e,t,n){!t&&!Pf[e]&&(Pf[e]=!0,It(!1,n))}g.memo(aw);function aw({routes:e,future:t,state:n}){return Xm(e,void 0,n,t)}function uw({to:e,replace:t,state:n,relative:r}){pe(Qr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=g.useContext(Rt);It(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(Mt),{pathname:o}=bn(),l=qm(),a=Cc(e,xc(s),o,r==="path"),u=JSON.stringify(a);return g.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:r})},[l,u,r,t,n]),null}function Ks(e){pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cw({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){pe(!Qr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Vr(n));let{pathname:a="/",search:u="",hash:f="",state:c=null,key:d="default"}=n,y=g.useMemo(()=>{let v=Xt(a,o);return v==null?null:{location:{pathname:v,search:u,hash:f,state:c,key:d},navigationType:r}},[o,a,u,f,c,d,r]);return It(y!=null,`<Router basename="${o}"> is not able to match the URL "${a}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:g.createElement(Rt.Provider,{value:l},g.createElement(cs.Provider,{children:t,value:y}))}function dw({children:e,location:t}){return q0(nu(e),t)}function nu(e,t=[]){let n=[];return g.Children.forEach(e,(r,i)=>{if(!g.isValidElement(r))return;let s=[...t,i];if(r.type===g.Fragment){n.push.apply(n,nu(r.props.children,s));return}pe(r.type===Ks,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nu(r.props.children,s)),n.push(o)}),n}var qs="get",Xs="application/x-www-form-urlencoded";function ll(e){return e!=null&&typeof e.tagName=="string"}function fw(e){return ll(e)&&e.tagName.toLowerCase()==="button"}function hw(e){return ll(e)&&e.tagName.toLowerCase()==="form"}function pw(e){return ll(e)&&e.tagName.toLowerCase()==="input"}function mw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gw(e,t){return e.button===0&&(!t||t==="_self")&&!mw(e)}var Ls=null;function yw(){if(Ls===null)try{new FormData(document.createElement("form"),0),Ls=!1}catch{Ls=!0}return Ls}var vw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yl(e){return e!=null&&!vw.has(e)?(It(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xs}"`),null):e}function _w(e,t){let n,r,i,s,o;if(hw(e)){let l=e.getAttribute("action");r=l?Xt(l,t):null,n=e.getAttribute("method")||qs,i=Yl(e.getAttribute("enctype"))||Xs,s=new FormData(e)}else if(fw(e)||pw(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||l.getAttribute("action");if(r=a?Xt(a,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||qs,i=Yl(e.getAttribute("formenctype"))||Yl(l.getAttribute("enctype"))||Xs,s=new FormData(l,e),!yw()){let{name:u,type:f,value:c}=e;if(f==="image"){let d=u?`${u}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else u&&s.append(u,c)}}else{if(ll(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qs,r=null,i=Xs,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Tc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function ww(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Cw(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await ww(s,n);return o.links?o.links():[]}return[]}));return Tw(r.flat(1).filter(xw).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Df(e,t,n,r,i,s){let o=(a,u)=>n[u]?a.route.id!==n[u].route.id:!0,l=(a,u)=>{var f;return n[u].pathname!==a.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==a.params["*"]};return s==="assets"?t.filter((a,u)=>o(a,u)||l(a,u)):s==="data"?t.filter((a,u)=>{var c;let f=r.routes[a.route.id];if(!f||!f.hasLoader)return!1;if(o(a,u)||l(a,u))return!0;if(a.route.shouldRevalidate){let d=a.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((c=n[0])==null?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Ew(e,t,{includeHydrateFallback:n}={}){return Sw(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Sw(e){return[...new Set(e)]}function kw(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Tw(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(kw(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Iw=new Set([100,101,204,205]);function Rw(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Xt(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Zm(){let e=g.useContext(Gr);return Tc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Nw(){let e=g.useContext(ol);return Tc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ic=g.createContext(void 0);Ic.displayName="FrameworkContext";function eg(){let e=g.useContext(Ic);return Tc(e,"You must render this element inside a <HydratedRouter> element"),e}function bw(e,t){let n=g.useContext(Ic),[r,i]=g.useState(!1),[s,o]=g.useState(!1),{onFocus:l,onBlur:a,onMouseEnter:u,onMouseLeave:f,onTouchStart:c}=t,d=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let x=p=>{p.forEach(h=>{o(h.isIntersecting)})},E=new IntersectionObserver(x,{threshold:.5});return d.current&&E.observe(d.current),()=>{E.disconnect()}}},[e]),g.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:oi(l,y),onBlur:oi(a,v),onMouseEnter:oi(u,y),onMouseLeave:oi(f,v),onTouchStart:oi(c,y)}]:[!1,d,{}]}function oi(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Pw({page:e,...t}){let{router:n}=Zm(),r=g.useMemo(()=>Um(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(Aw,{page:e,matches:r,...t}):null}function Dw(e){let{manifest:t,routeModules:n}=eg(),[r,i]=g.useState([]);return g.useEffect(()=>{let s=!1;return Cw(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function Aw({page:e,matches:t,...n}){let r=bn(),{manifest:i,routeModules:s}=eg(),{basename:o}=Zm(),{loaderData:l,matches:a}=Nw(),u=g.useMemo(()=>Df(e,t,a,i,r,"data"),[e,t,a,i,r]),f=g.useMemo(()=>Df(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(t.forEach(p=>{var m;let h=i.routes[p.route.id];!h||!h.hasLoader||(!u.some(_=>_.route.id===p.route.id)&&p.route.id in l&&((m=s[p.route.id])!=null&&m.shouldRevalidate)||h.hasClientLoader?x=!0:v.add(p.route.id))}),v.size===0)return[];let E=Rw(e,o);return x&&v.size>0&&E.searchParams.set("_routes",t.filter(p=>v.has(p.route.id)).map(p=>p.route.id).join(",")),[E.pathname+E.search]},[o,l,r,i,u,t,e,s]),d=g.useMemo(()=>Ew(f,i),[f,i]),y=Dw(f);return g.createElement(g.Fragment,null,c.map(v=>g.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),d.map(v=>g.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),y.map(({key:v,link:x})=>g.createElement("link",{key:v,...x})))}function Lw(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var tg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tg&&(window.__reactRouterVersion="7.6.2")}catch{}function Mw({basename:e,children:t,window:n}){let r=g.useRef();r.current==null&&(r.current=x0({window:n,v5Compat:!0}));let i=r.current,[s,o]=g.useState({action:i.action,location:i.location}),l=g.useCallback(a=>{g.startTransition(()=>o(a))},[o]);return g.useLayoutEffect(()=>i.listen(l),[i,l]),g.createElement(cw,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var ng=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rg=g.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:f,viewTransition:c,...d},y){let{basename:v}=g.useContext(Rt),x=typeof u=="string"&&ng.test(u),E,p=!1;if(typeof u=="string"&&x&&(E=u,tg))try{let z=new URL(window.location.href),b=u.startsWith("//")?new URL(z.protocol+u):new URL(u),M=Xt(b.pathname,v);b.origin===z.origin&&M!=null?u=M+b.search+b.hash:p=!0}catch{It(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let h=Y0(u,{relative:i}),[m,_,S]=bw(r,d),C=zw(u,{replace:o,state:l,target:a,preventScrollReset:f,relative:i,viewTransition:c});function k(z){t&&t(z),z.defaultPrevented||C(z)}let T=g.createElement("a",{...d,...S,href:E||h,onClick:p||s?t:k,ref:Lw(y,_),target:a,"data-discover":!x&&n==="render"?"true":void 0});return m&&!x?g.createElement(g.Fragment,null,T,g.createElement(Pw,{page:h})):T});rg.displayName="Link";var Ow=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:l,children:a,...u},f){let c=ds(o,{relative:u.relative}),d=bn(),y=g.useContext(ol),{navigator:v,basename:x}=g.useContext(Rt),E=y!=null&&Hw(c)&&l===!0,p=v.encodeLocation?v.encodeLocation(c).pathname:c.pathname,h=d.pathname,m=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(h=h.toLowerCase(),m=m?m.toLowerCase():null,p=p.toLowerCase()),m&&x&&(m=Xt(m,x)||m);const _=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let S=h===p||!i&&h.startsWith(p)&&h.charAt(_)==="/",C=m!=null&&(m===p||!i&&m.startsWith(p)&&m.charAt(p.length)==="/"),k={isActive:S,isPending:C,isTransitioning:E},T=S?t:void 0,z;typeof r=="function"?z=r(k):z=[r,S?"active":null,C?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let b=typeof s=="function"?s(k):s;return g.createElement(rg,{...u,"aria-current":T,className:z,ref:f,style:b,to:o,viewTransition:l},typeof a=="function"?a(k):a)});Ow.displayName="NavLink";var Fw=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=qs,action:l,onSubmit:a,relative:u,preventScrollReset:f,viewTransition:c,...d},y)=>{let v=$w(),x=Uw(l,{relative:u}),E=o.toLowerCase()==="get"?"get":"post",p=typeof l=="string"&&ng.test(l),h=m=>{if(a&&a(m),m.defaultPrevented)return;m.preventDefault();let _=m.nativeEvent.submitter,S=(_==null?void 0:_.getAttribute("formmethod"))||o;v(_||m.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:i,state:s,relative:u,preventScrollReset:f,viewTransition:c})};return g.createElement("form",{ref:y,method:E,action:x,onSubmit:r?a:h,...d,"data-discover":!p&&e==="render"?"true":void 0})});Fw.displayName="Form";function jw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ig(e){let t=g.useContext(Gr);return pe(t,jw(e)),t}function zw(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=qm(),a=bn(),u=ds(e,{relative:s});return g.useCallback(f=>{if(gw(f,t)){f.preventDefault();let c=n!==void 0?n:Qi(a)===Qi(u);l(e,{replace:c,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[a,l,u,n,r,t,e,i,s,o])}var Bw=0,Ww=()=>`__${String(++Bw)}__`;function $w(){let{router:e}=ig("useSubmit"),{basename:t}=g.useContext(Rt),n=sw();return g.useCallback(async(r,i={})=>{let{action:s,method:o,encType:l,formData:a,body:u}=_w(r,t);if(i.navigate===!1){let f=i.fetcherKey||Ww();await e.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:a,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:a,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Uw(e,{relative:t}={}){let{basename:n}=g.useContext(Rt),r=g.useContext(Mt);pe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ds(e||".",{relative:t})},o=bn();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search),a=l.getAll("index");if(a.some(f=>f==="")){l.delete("index"),a.filter(c=>c).forEach(c=>l.append("index",c));let f=l.toString();s.search=f?`?${f}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Vt([n,s.pathname])),Qi(s)}function Hw(e,t={}){let n=g.useContext(Qm);pe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ig("useViewTransitionState"),i=ds(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Xt(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xt(n.nextLocation.pathname,r)||n.nextLocation.pathname;return So(i.pathname,o)!=null||So(i.pathname,s)!=null}[...Iw];const Jt=2160,Zt=3840,sg="#000000",og=4,lg=40,Vw="#ffffff",yr="#0066ff",Gw=2e3,Qw="#e0e0e0",Yw=1,Kl=100,Kw=60,jt=16,qw="#4a90e2",Xw=()=>{};var Af={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(e,t){if(!e)throw Yr(t)},Yr=function(e){return new Error("Firebase Database ("+ag.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Jw=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],l=e[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(a&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Rc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,l=o?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0,f=s>>2,c=(s&3)<<4|l>>4;let d=(l&15)<<2|u>>6,y=u&63;a||(y=64,o||(d=64)),r.push(n[f],n[c],n[d],n[y])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ug(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Jw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const c=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new Zw;const d=s<<2|l>>4;if(r.push(d),u!==64){const y=l<<4&240|u>>2;if(r.push(y),c!==64){const v=u<<6&192|c;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cg=function(e){const t=ug(e);return Rc.encodeByteArray(t,!0)},ko=function(e){return cg(e).replace(/\./g,"")},ru=function(e){try{return Rc.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(e){return dg(void 0,e)}function dg(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!t1(n)||(e[n]=dg(e[n],t[n]));return e}function t1(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=()=>n1().__FIREBASE_DEFAULTS__,i1=()=>{if(typeof process>"u"||typeof Af>"u")return;const e=Af.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},s1=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ru(e[1]);return t&&JSON.parse(t)},fg=()=>{try{return Xw()||r1()||i1()||s1()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},o1=e=>{var t,n;return(n=(t=fg())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},l1=e=>{const t=o1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},hg=()=>{var e;return(e=fg())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(e){return e.endsWith(".cloudworkstations.dev")}async function a1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ko(JSON.stringify(n)),ko(JSON.stringify(o)),""].join(".")}const Si={};function c1(){const e={prod:[],emulator:[]};for(const t of Object.keys(Si))Si[t]?e.emulator.push(t):e.prod.push(t);return e}function d1(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Lf=!1;function f1(e,t){if(typeof window>"u"||typeof document>"u"||!Nc(window.location.host)||Si[e]===t||Si[e]||Lf)return;Si[e]=t;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",s=c1().prod.length>0;function o(){const d=document.getElementById(r);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,y){d.setAttribute("width","24"),d.setAttribute("id",y),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Lf=!0,o()},d}function f(d,y){d.setAttribute("id",y),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function c(){const d=d1(r),y=n("text"),v=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),E=document.getElementById(x)||document.createElement("a"),p=n("preprendIcon"),h=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const m=d.element;l(m),f(E,x);const _=u();a(h,p),m.append(h,v,E,_),document.body.appendChild(m)}s?(v.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",c):c()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h1())}function p1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function m1(){return ag.NODE_ADMIN===!0}function g1(){try{return typeof indexedDB=="object"}catch{return!1}}function y1(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="FirebaseError";class fs extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=v1,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mg.prototype.create)}}class mg{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?_1(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new fs(i,l,r)}}function _1(e,t){return e.replace(w1,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const w1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(e){return JSON.parse(e)}function Ne(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Yi(ru(s[0])||""),n=Yi(ru(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},x1=function(e){const t=gg(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},C1=function(e){const t=gg(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fr(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Mf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function To(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Io(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Of(s)&&Of(o)){if(!Io(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Of(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let c=0;c<16;c++)r[c]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,f;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),f=1518500249):(u=s^o^l,f=1859775393):c<60?(u=s&o|l&(s|o),f=2400959708):(u=s^o^l,f=3395469782);const d=(i<<5|i>>>27)+u+a+f+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[o]=t.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=t[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)t[r]=this.chain_[i]>>s&255,++r;return t}}function bc(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,N(r<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},ul=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(e){return e&&e._delegate?e._delegate:e}class Ki{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new al;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(R1(t))try{this.getOrInitializeService({instanceIdentifier:Ln})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Ln){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ln){return this.instances.has(t)}getOptions(t=Ln){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:I1(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ln){return this.component?this.component.multipleInstances?t:Ln:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I1(e){return e===Ln?void 0:e}function R1(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new T1(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(le||(le={}));const b1={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},P1=le.INFO,D1={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},A1=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=D1[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yg{constructor(t){this.name=t,this._logLevel=P1,this._logHandler=A1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in le))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?b1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...t),this._logHandler(this,le.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...t),this._logHandler(this,le.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,le.INFO,...t),this._logHandler(this,le.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,le.WARN,...t),this._logHandler(this,le.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...t),this._logHandler(this,le.ERROR,...t)}}const L1=(e,t)=>t.some(n=>e instanceof n);let Ff,jf;function M1(){return Ff||(Ff=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O1(){return jf||(jf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vg=new WeakMap,iu=new WeakMap,_g=new WeakMap,ql=new WeakMap,Pc=new WeakMap;function F1(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(wn(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&vg.set(n,e)}).catch(()=>{}),Pc.set(t,e),t}function j1(e){if(iu.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});iu.set(e,t)}let su={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return iu.get(e);if(t==="objectStoreNames")return e.objectStoreNames||_g.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function z1(e){su=e(su)}function B1(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Xl(this),t,...n);return _g.set(r,t.sort?t.sort():[t]),wn(r)}:O1().includes(e)?function(...t){return e.apply(Xl(this),t),wn(vg.get(this))}:function(...t){return wn(e.apply(Xl(this),t))}}function W1(e){return typeof e=="function"?B1(e):(e instanceof IDBTransaction&&j1(e),L1(e,M1())?new Proxy(e,su):e)}function wn(e){if(e instanceof IDBRequest)return F1(e);if(ql.has(e))return ql.get(e);const t=W1(e);return t!==e&&(ql.set(e,t),Pc.set(t,e)),t}const Xl=e=>Pc.get(e);function $1(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),l=wn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(wn(o.result),a.oldVersion,a.newVersion,wn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const U1=["get","getKey","getAll","getAllKeys","count"],H1=["put","add","delete","clear"],Jl=new Map;function zf(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Jl.get(t))return Jl.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=H1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||U1.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return Jl.set(t,s),s}z1(e=>({...e,get:(t,n,r)=>zf(t,n)||e.get(t,n,r),has:(t,n)=>!!zf(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(G1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function G1(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ou="@firebase/app",Bf="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new yg("@firebase/app"),Q1="@firebase/app-compat",Y1="@firebase/analytics-compat",K1="@firebase/analytics",q1="@firebase/app-check-compat",X1="@firebase/app-check",J1="@firebase/auth",Z1="@firebase/auth-compat",ex="@firebase/database",tx="@firebase/data-connect",nx="@firebase/database-compat",rx="@firebase/functions",ix="@firebase/functions-compat",sx="@firebase/installations",ox="@firebase/installations-compat",lx="@firebase/messaging",ax="@firebase/messaging-compat",ux="@firebase/performance",cx="@firebase/performance-compat",dx="@firebase/remote-config",fx="@firebase/remote-config-compat",hx="@firebase/storage",px="@firebase/storage-compat",mx="@firebase/firestore",gx="@firebase/ai",yx="@firebase/firestore-compat",vx="firebase",_x="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="[DEFAULT]",wx={[ou]:"fire-core",[Q1]:"fire-core-compat",[K1]:"fire-analytics",[Y1]:"fire-analytics-compat",[X1]:"fire-app-check",[q1]:"fire-app-check-compat",[J1]:"fire-auth",[Z1]:"fire-auth-compat",[ex]:"fire-rtdb",[tx]:"fire-data-connect",[nx]:"fire-rtdb-compat",[rx]:"fire-fn",[ix]:"fire-fn-compat",[sx]:"fire-iid",[ox]:"fire-iid-compat",[lx]:"fire-fcm",[ax]:"fire-fcm-compat",[ux]:"fire-perf",[cx]:"fire-perf-compat",[dx]:"fire-rc",[fx]:"fire-rc-compat",[hx]:"fire-gcs",[px]:"fire-gcs-compat",[mx]:"fire-fst",[yx]:"fire-fst-compat",[gx]:"fire-vertex","fire-js":"fire-js",[vx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Map,xx=new Map,au=new Map;function Wf(e,t){try{e.container.addComponent(t)}catch(n){en.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function No(e){const t=e.name;if(au.has(t))return en.debug(`There were multiple attempts to register component ${t}.`),!1;au.set(t,e);for(const n of Ro.values())Wf(n,e);for(const n of xx.values())Wf(n,e);return!0}function Cx(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ex(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xn=new mg("app","Firebase",Sx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=_x;function wg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:lu,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw xn.create("bad-app-name",{appName:String(i)});if(n||(n=hg()),!n)throw xn.create("no-options");const s=Ro.get(i);if(s){if(Io(n,s.options)&&Io(r,s.config))return s;throw xn.create("duplicate-app",{appName:i})}const o=new N1(i);for(const a of au.values())o.addComponent(a);const l=new kx(n,r,o);return Ro.set(i,l),l}function Ix(e=lu){const t=Ro.get(e);if(!t&&e===lu&&hg())return wg();if(!t)throw xn.create("no-app",{appName:e});return t}function kr(e,t,n){var r;let i=(r=wx[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${t}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),en.warn(l.join(" "));return}No(new Ki(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="firebase-heartbeat-database",Nx=1,qi="firebase-heartbeat-store";let Zl=null;function xg(){return Zl||(Zl=$1(Rx,Nx,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(qi)}catch(n){console.warn(n)}}}}).catch(e=>{throw xn.create("idb-open",{originalErrorMessage:e.message})})),Zl}async function bx(e){try{const n=(await xg()).transaction(qi),r=await n.objectStore(qi).get(Cg(e));return await n.done,r}catch(t){if(t instanceof fs)en.warn(t.message);else{const n=xn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});en.warn(n.message)}}}async function $f(e,t){try{const r=(await xg()).transaction(qi,"readwrite");await r.objectStore(qi).put(t,Cg(e)),await r.done}catch(n){if(n instanceof fs)en.warn(n.message);else{const r=xn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});en.warn(r.message)}}}function Cg(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=1024,Dx=30;class Ax{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Uf();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Dx){const o=Ox(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){en.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uf(),{heartbeatsToSend:r,unsentEntries:i}=Lx(this._heartbeatsCache.heartbeats),s=ko(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return en.warn(n),""}}}function Uf(){return new Date().toISOString().substring(0,10)}function Lx(e,t=Px){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hf(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Mx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g1()?y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $f(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $f(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Hf(e){return ko(JSON.stringify({version:2,heartbeats:e})).length}function Ox(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(e){No(new Ki("platform-logger",t=>new V1(t),"PRIVATE")),No(new Ki("heartbeat",t=>new Ax(t),"PRIVATE")),kr(ou,Bf,e),kr(ou,Bf,"esm2017"),kr("fire-js","")}Fx("");var jx="firebase",zx="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(jx,zx,"app");var Vf={};const Gf="@firebase/database",Qf="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg="";function Bx(e){Eg=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ne(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Yi(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ot(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Wx(t)}}catch{}return new $x},zn=Sg("localStorage"),Ux=Sg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new yg("@firebase/database"),Hx=function(){let e=1;return function(){return e++}}(),kg=function(e){const t=k1(e),n=new S1;n.update(t);const r=n.digest();return Rc.encodeByteArray(r)},hs=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=hs.apply(null,r):typeof r=="object"?t+=Ne(r):t+=r,t+=" "}return t};let ki=null,Yf=!0;const Vx=function(e,t){N(!0,"Can't turn on custom loggers persistently."),Tr.logLevel=le.VERBOSE,ki=Tr.log.bind(Tr)},Ae=function(...e){if(Yf===!0&&(Yf=!1,ki===null&&Ux.get("logging_enabled")===!0&&Vx()),ki){const t=hs.apply(null,e);ki(t)}},ps=function(e){return function(...t){Ae(e,...t)}},uu=function(...e){const t="FIREBASE INTERNAL ERROR: "+hs(...e);Tr.error(t)},tn=function(...e){const t=`FIREBASE FATAL ERROR: ${hs(...e)}`;throw Tr.error(t),new Error(t)},tt=function(...e){const t="FIREBASE WARNING: "+hs(...e);Tr.warn(t)},Gx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Dc=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qx=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},jr="[MIN_NAME]",Kn="[MAX_NAME]",tr=function(e,t){if(e===t)return 0;if(e===jr||t===Kn)return-1;if(t===jr||e===Kn)return 1;{const n=Kf(e),r=Kf(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},Yx=function(e,t){return e===t?0:e<t?-1:1},li=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ne(t))},Ac=function(e){if(typeof e!="object"||e===null)return Ne(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Ne(t[r]),n+=":",n+=Ac(e[t[r]]);return n+="}",n},Tg=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Fe(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ig=function(e){N(!Dc(e),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let i,s,o,l,a;e===0?(s=0,o=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=l+r,o=Math.round(e*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=t;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let c="";for(a=0;a<64;a+=8){let d=parseInt(f.substr(a,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},Kx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Xx(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}const Jx=new RegExp("^-?(0*)\\d{1,10}$"),Zx=-2147483648,eC=2147483647,Kf=function(e){if(Jx.test(e)){const t=Number(e);if(t>=Zx&&t<=eC)return t}return null},Kr=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw tt("Exception was thrown by user callback.",n),t},Math.floor(0))}},tC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ti=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Ex(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ae("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(t)}}class Js{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Js.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="5",Rg="v",Ng="s",bg="r",Pg="f",Dg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ag="ls",Lg="p",cu="ac",Mg="websocket",Og="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,n,r,i,s=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&zn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function iC(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function jg(e,t,n){N(typeof t=="string","typeof type must == string"),N(typeof n=="object","typeof params must == object");let r;if(t===Mg)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Og)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);iC(e)&&(n.ns=e.namespace);const i=[];return Fe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.counters_={}}incrementCounter(t,n=1){Ot(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return e1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea={},ta={};function Mc(e){const t=e.toString();return ea[t]||(ea[t]=new sC),ea[t]}function oC(e,t){const n=e.toString();return ta[n]||(ta[n]=t()),ta[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Kr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="start",aC="close",uC="pLPCommand",cC="pRTLPCB",zg="id",Bg="pw",Wg="ser",dC="cb",fC="seg",hC="ts",pC="d",mC="dframe",$g=1870,Ug=30,gC=$g-Ug,yC=25e3,vC=3e4;class vr{constructor(t,n,r,i,s,o,l){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ps(t),this.stats_=Mc(n),this.urlFn=a=>(this.appCheckToken&&(a[cu]=this.appCheckToken),jg(n,Og,a))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lC(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(vC)),Qx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Oc((...s)=>{const[o,l,a,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===qf)this.id=l,this.password=a;else if(o===aC)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[qf]="t",r[Wg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[dC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Rg]=Lc,this.transportSessionId&&(r[Ng]=this.transportSessionId),this.lastSessionId&&(r[Ag]=this.lastSessionId),this.applicationId&&(r[Lg]=this.applicationId),this.appCheckToken&&(r[cu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Dg.test(location.hostname)&&(r[bg]=Pg);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vr.forceAllow_=!0}static forceDisallow(){vr.forceDisallow_=!0}static isAvailable(){return vr.forceAllow_?!0:!vr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Kx()&&!qx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ne(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cg(n),i=Tg(r,gC);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[mC]="t",r[zg]=t,r[Bg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ne(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Oc{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Hx(),window[uC+this.uniqueCallbackIdentifier]=t,window[cC+this.uniqueCallbackIdentifier]=n,this.myIFrame=Oc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ae("frame writing exception"),l.stack&&Ae(l.stack),Ae(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Ae("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[zg]=this.myID,t[Bg]=this.myPW,t[Wg]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ug+r.length<=$g;){const o=this.pendingSegs.shift();r=r+"&"+fC+i+"="+o.seg+"&"+hC+i+"="+o.ts+"&"+pC+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(yC)),s=()=>{clearTimeout(i),r()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ae("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=16384,wC=45e3;let bo=null;typeof MozWebSocket<"u"?bo=MozWebSocket:typeof WebSocket<"u"&&(bo=WebSocket);class xt{constructor(t,n,r,i,s,o,l){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ps(this.connId),this.stats_=Mc(n),this.connURL=xt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,i,s){const o={};return o[Rg]=Lc,typeof location<"u"&&location.hostname&&Dg.test(location.hostname)&&(o[bg]=Pg),n&&(o[Ng]=n),r&&(o[Ag]=r),i&&(o[cu]=i),s&&(o[Lg]=s),jg(t,Mg,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zn.set("previous_websocket_failure",!0);try{let r;m1(),this.mySock=new bo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){xt.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&bo!==null&&!xt.forceDisallow_}static previouslyFailed(){return zn.isInMemoryStorage||zn.get("previous_websocket_failure")===!0}markConnectionHealthy(){zn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Yi(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(N(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=Ne(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Tg(n,_C);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(wC))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xt.responsesRequiredToBeHealthy=2;xt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{static get ALL_TRANSPORTS(){return[vr,xt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=xt&&xt.isAvailable();let r=n&&!xt.previouslyFailed();if(t.webSocketOnly&&(n||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xt];else{const i=this.transports_=[];for(const s of Xi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Xi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=6e4,CC=5e3,EC=10*1024,SC=100*1024,na="t",Xf="d",kC="s",Jf="r",TC="e",Zf="o",eh="a",th="n",nh="p",IC="h";class RC{constructor(t,n,r,i,s,o,l,a,u,f){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ps("c:"+this.id+":"),this.transportManager_=new Xi(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ti(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>EC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(na in t){const n=t[na];n===eh?this.upgradeIfSecondaryHealthy_():n===Jf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Zf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=li("t",t),r=li("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:eh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:th,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=li("t",t),r=li("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=li(na,t);if(Xf in t){const r=t[Xf];if(n===IC){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===th){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kC?this.onConnectionShutdown_(r):n===Jf?this.onReset_(r):n===TC?uu("Server Error: "+r):n===Zf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uu("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Lc!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ti(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xC))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ti(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nh,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t){this.allowedEvents_=t,this.listeners_={},N(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(t){N(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Vg{static getInstance(){return new Po}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!pg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return N(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=32,ih=768;class ie{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function ne(){return new ie("")}function q(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function kn(e){return e.pieces_.length-e.pieceNum_}function ae(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ie(e.pieces_,t)}function Fc(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function NC(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Ji(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Gg(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ie(t,0)}function _e(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ie)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ie(n,0)}function X(e){return e.pieceNum_>=e.pieces_.length}function qe(e,t){const n=q(e),r=q(t);if(n===null)return t;if(n===r)return qe(ae(e),ae(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function bC(e,t){const n=Ji(e,0),r=Ji(t,0);for(let i=0;i<n.length&&i<r.length;i++){const s=tr(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function jc(e,t){if(kn(e)!==kn(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ht(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(kn(e)>kn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class PC{constructor(t,n){this.errorPrefix_=n,this.parts_=Ji(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ul(this.parts_[r]);Qg(this)}}function DC(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ul(t),Qg(e)}function AC(e){const t=e.parts_.pop();e.byteLength_-=ul(t),e.parts_.length>0&&(e.byteLength_-=1)}function Qg(e){if(e.byteLength_>ih)throw new Error(e.errorPrefix_+"has a key path longer than "+ih+" bytes ("+e.byteLength_+").");if(e.parts_.length>rh)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rh+") or object contains a cycle "+Mn(e))}function Mn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Vg{static getInstance(){return new zc}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return N(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=1e3,LC=60*5*1e3,sh=30*1e3,MC=1.3,OC=3e4,FC="server_kill",oh=3;class Gt extends Hg{constructor(t,n,r,i,s,o,l,a){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Gt.nextPersistentConnectionId_++,this.log_=ps("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ai,this.maxReconnectDelay_=LC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zc.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Po.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const i=++this.requestNumber_,s={r:i,a:t,b:n};this.log_(Ne(s)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(t){this.initConnection_();const n=new al,i={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,r,i){this.initConnection_();const s=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),N(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:t,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Gt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),t.onComplete&&t.onComplete(u,a))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Ot(t,"w")){const r=Fr(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||C1(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sh)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=x1(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),N(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,t._queryObject,n)}sendUnlisten_(t,n,r,i){this.log_("Unlisten on "+t+" for "+n);const s={p:t},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(t,n,r,i){this.putInternal("p",t,n,r,i)}merge(t,n,r,i){this.putInternal("m",t,n,r,i)}putInternal(t,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ne(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):uu("Unrecognized action received from server: "+Ne(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ai,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ai,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>OC&&(this.reconnectDelay_=ai),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*MC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Gt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){N(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?Ae("getToken() completed but was canceled"):(Ae("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,l=new RC(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,y=>{tt(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(FC)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&tt(c),a())}}}interrupt(t){Ae("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ae("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Mf(this.interruptReasons_)&&(this.reconnectDelay_=ai,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(s=>Ac(s)).join("$"):r="default";const i=this.removeListen_(t,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,n){const r=new ie(t).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(t,n){Ae("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oh&&(this.reconnectDelay_=sh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Ae("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+Eg.replace(/\./g,"-")]=1,pg()?t["framework.cordova"]=1:p1()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Po.getInstance().currentlyOnline();return Mf(this.interruptReasons_)&&t}}Gt.nextPersistentConnectionId_=0;Gt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Y(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new Y(jr,t),i=new Y(jr,n);return this.compare(r,i)!==0}minPost(){return Y.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms;class Yg extends dl{static get __EMPTY_NODE(){return Ms}static set __EMPTY_NODE(t){Ms=t}compare(t,n){return tr(t.name,n.name)}isDefinedOn(t){throw Yr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Y.MIN}maxPost(){return new Y(Kn,Ms)}makePost(t,n){return N(typeof t=="string","KeyIndex indexValue must always be a string."),new Y(t,Ms)}toString(){return".key"}}const Ir=new Yg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Re{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Re.RED,this.left=i??Xe.EMPTY_NODE,this.right=s??Xe.EMPTY_NODE}copy(t,n,r,i,s){return new Re(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Xe.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Re.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Re.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Re.RED=!0;Re.BLACK=!1;class jC{copy(t,n,r,i,s){return this}insert(t,n,r){return new Re(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xe{constructor(t,n=Xe.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new Xe(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Re.BLACK,null,null))}remove(t){return new Xe(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Re.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Os(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Os(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Os(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Os(this.root_,null,this.comparator_,!0,t)}}Xe.EMPTY_NODE=new jC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(e,t){return tr(e.name,t.name)}function Bc(e,t){return tr(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du;function BC(e){du=e}const Kg=function(e){return typeof e=="number"?"number:"+Ig(e):"string:"+e},qg=function(e){if(e.isLeafNode()){const t=e.val();N(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ot(t,".sv"),"Priority must be a string or number.")}else N(e===du||e.isEmpty(),"priority of unexpected type.");N(e===du||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh;class ke{static set __childrenNodeConstructor(t){lh=t}static get __childrenNodeConstructor(){return lh}constructor(t,n=ke.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ke(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return X(t)?this:q(t)===".priority"?this.priorityNode_:ke.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:ke.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=q(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(N(r!==".priority"||kn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ke.__childrenNodeConstructor.EMPTY_NODE.updateChild(ae(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kg(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=Ig(this.value_):t+=this.value_,this.lazyHash_=kg(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ke.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ke.__childrenNodeConstructor?-1:(N(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=ke.VALUE_TYPE_ORDER.indexOf(n),s=ke.VALUE_TYPE_ORDER.indexOf(r);return N(i>=0,"Unknown leaf type: "+n),N(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ke.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg,Jg;function WC(e){Xg=e}function $C(e){Jg=e}class UC extends dl{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?tr(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Y.MIN}maxPost(){return new Y(Kn,new ke("[PRIORITY-POST]",Jg))}makePost(t,n){const r=Xg(t);return new Y(n,new ke("[PRIORITY-POST]",r))}toString(){return".priority"}}const we=new UC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=Math.log(2);class VC{constructor(t){const n=s=>parseInt(Math.log(s)/HC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Do=function(e,t,n,r){e.sort(t);const i=function(a,u){const f=u-a;let c,d;if(f===0)return null;if(f===1)return c=e[a],d=n?n(c):c,new Re(d,c.node,Re.BLACK,null,null);{const y=parseInt(f/2,10)+a,v=i(a,y),x=i(y+1,u);return c=e[y],d=n?n(c):c,new Re(d,c.node,Re.BLACK,v,x)}},s=function(a){let u=null,f=null,c=e.length;const d=function(v,x){const E=c-v,p=c;c-=v;const h=i(E+1,p),m=e[E],_=n?n(m):m;y(new Re(_,m.node,x,null,h))},y=function(v){u?(u.left=v,u=v):(f=v,u=v)};for(let v=0;v<a.count;++v){const x=a.nextBitIsOne(),E=Math.pow(2,a.count-(v+1));x?d(E,Re.BLACK):(d(E,Re.BLACK),d(E,Re.RED))}return f},o=new VC(e.length),l=s(o);return new Xe(r||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra;const ir={};class Ut{static get Default(){return N(ir&&we,"ChildrenNode.ts has not been loaded"),ra=ra||new Ut({".priority":ir},{".priority":we}),ra}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Fr(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Xe?n:null}hasIndex(t){return Ot(this.indexSet_,t.toString())}addIndex(t,n){N(t!==Ir,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Y.Wrap);let o=s.getNext();for(;o;)i=i||t.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Do(r,t.getCompare()):l=ir;const a=t.toString(),u=Object.assign({},this.indexSet_);u[a]=t;const f=Object.assign({},this.indexes_);return f[a]=l,new Ut(f,u)}addToIndexes(t,n){const r=To(this.indexes_,(i,s)=>{const o=Fr(this.indexSet_,s);if(N(o,"Missing index implementation for "+s),i===ir)if(o.isDefinedOn(t.node)){const l=[],a=n.getIterator(Y.Wrap);let u=a.getNext();for(;u;)u.name!==t.name&&l.push(u),u=a.getNext();return l.push(t),Do(l,o.getCompare())}else return ir;else{const l=n.get(t.name);let a=i;return l&&(a=a.remove(new Y(t.name,l))),a.insert(t,t.node)}});return new Ut(r,this.indexSet_)}removeFromIndexes(t,n){const r=To(this.indexes_,i=>{if(i===ir)return i;{const s=n.get(t.name);return s?i.remove(new Y(t.name,s)):i}});return new Ut(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui;class H{static get EMPTY_NODE(){return ui||(ui=new H(new Xe(Bc),null,Ut.Default))}constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&qg(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ui}updatePriority(t){return this.children_.isEmpty()?this:new H(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?ui:n}}getChild(t){const n=q(t);return n===null?this:this.getImmediateChild(n).getChild(ae(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(N(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new Y(t,n);let i,s;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ui:this.priorityNode_;return new H(i,o,s)}}updateChild(t,n){const r=q(t);if(r===null)return n;{N(q(t)!==".priority"||kn(t)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ae(t),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(we,(o,l)=>{n[o]=l.val(t),r++,s&&H.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!t&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Kg(this.getPriority().val())+":"),this.forEachChild(we,(n,r)=>{const i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":kg(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Y(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Y(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Y(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,i=>i);{const i=this.children_.getIteratorFrom(t.name,Y.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,i=>i);{const i=this.children_.getReverseIteratorFrom(t.name,Y.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ms?-1:0}withIndex(t){if(t===Ir||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new H(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Ir||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(we),i=n.getIterator(we);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Ir?null:this.indexMap_.get(t.toString())}}H.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class GC extends H{constructor(){super(new Xe(Bc),H.EMPTY_NODE,Ut.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return H.EMPTY_NODE}isEmpty(){return!1}}const ms=new GC;Object.defineProperties(Y,{MIN:{value:new Y(jr,H.EMPTY_NODE)},MAX:{value:new Y(Kn,ms)}});Yg.__EMPTY_NODE=H.EMPTY_NODE;ke.__childrenNodeConstructor=H;BC(ms);$C(ms);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=!0;function Le(e,t=null){if(e===null)return H.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),N(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new ke(n,Le(t))}if(!(e instanceof Array)&&QC){const n=[];let r=!1;if(Fe(e,(o,l)=>{if(o.substring(0,1)!=="."){const a=Le(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new Y(o,a)))}}),n.length===0)return H.EMPTY_NODE;const s=Do(n,zC,o=>o.name,Bc);if(r){const o=Do(n,we.getCompare());return new H(s,Le(t),new Ut({".priority":o},{".priority":we}))}else return new H(s,Le(t),Ut.Default)}else{let n=H.EMPTY_NODE;return Fe(e,(r,i)=>{if(Ot(e,r)&&r.substring(0,1)!=="."){const s=Le(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Le(t))}}WC(Le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC extends dl{constructor(t){super(),this.indexPath_=t,N(!X(t)&&q(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?tr(t.name,n.name):s}makePost(t,n){const r=Le(t),i=H.EMPTY_NODE.updateChild(this.indexPath_,r);return new Y(n,i)}maxPost(){const t=H.EMPTY_NODE.updateChild(this.indexPath_,ms);return new Y(Kn,t)}toString(){return Ji(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC extends dl{compare(t,n){const r=t.node.compareTo(n.node);return r===0?tr(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Y.MIN}maxPost(){return Y.MAX}makePost(t,n){const r=Le(t);return new Y(n,r)}toString(){return".value"}}const qC=new KC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(e){return{type:"value",snapshotNode:e}}function zr(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Zi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function es(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function XC(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t){this.index_=t}updateChild(t,n,r,i,s,o){N(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?t.hasChild(n)?o.trackChildChange(Zi(n,l)):N(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(zr(n,r)):o.trackChildChange(es(n,r,l))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(we,(i,s)=>{n.hasChild(i)||r.trackChildChange(Zi(i,s))}),n.isLeafNode()||n.forEachChild(we,(i,s)=>{if(t.hasChild(i)){const o=t.getImmediateChild(i);o.equals(s)||r.trackChildChange(es(i,s,o))}else r.trackChildChange(zr(i,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?H.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t){this.indexedFilter_=new Wc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ts.getStartPost_(t),this.endPost_=ts.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,s,o){return this.matches(new Y(n,r))||(r=H.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,o)}updateFullNode(t,n,r){n.isLeafNode()&&(n=H.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(H.EMPTY_NODE);const s=this;return n.forEachChild(we,(o,l)=>{s.matches(new Y(o,l))||(i=i.updateImmediateChild(o,H.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ts(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,s,o){return this.rangedFilter_.matches(new Y(n,r))||(r=H.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,o):this.fullLimitUpdateChild_(t,n,r,s,o)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=H.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=H.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(H.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,H.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(d,y)=>c(y,d)}else o=this.index_.getCompare();const l=t;N(l.numChildren()===this.limit_,"");const a=new Y(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(a);if(l.hasChild(n)){const c=l.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||l.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const y=d==null?1:o(d,a);if(f&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(es(n,r,c)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Zi(n,c));const x=l.updateImmediateChild(n,H.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(zr(d.name,d.node)),x.updateImmediateChild(d.name,d.node)):x}}else return r.isEmpty()?t:f&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Zi(u.name,u.node)),s.trackChildChange(zr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,H.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=we}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jr}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===we}copy(){const t=new $c;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function ZC(e){return e.loadsAllData()?new Wc(e.getIndex()):e.hasLimit()?new JC(e):new ts(e)}function ah(e){const t={};if(e.isDefault())return t;let n;if(e.index_===we?n="$priority":e.index_===qC?n="$value":e.index_===Ir?n="$key":(N(e.index_ instanceof YC,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ne(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=Ne(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Ne(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Ne(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Ne(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function uh(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==we&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Hg{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(N(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ps("p:rest:"),this.listens_={}}listen(t,n,r,i){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=Ao.getListenId_(t,r),l={};this.listens_[o]=l;const a=ah(t._queryParams);this.restRequest_(s+".json",a,(u,f)=>{let c=f;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),Fr(this.listens_,o)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(t,n){const r=Ao.getListenId_(t,n);delete this.listens_[r]}get(t){const n=ah(t._queryParams),r=t._path.toString(),i=new al;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+E1(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Yi(l.responseText)}catch{tt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&tt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.rootNode_=H.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return{value:null,children:new Map}}function ey(e,t,n){if(X(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const r=q(t);e.children.has(r)||e.children.set(r,Lo());const i=e.children.get(r);t=ae(t),ey(i,t,n)}}function fu(e,t,n){e.value!==null?n(t,e.value):tE(e,(r,i)=>{const s=new ie(t.toString()+"/"+r);fu(i,s,n)})}function tE(e,t){e.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Fe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=10*1e3,rE=30*1e3,iE=5*60*1e3;class sE{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new nE(t);const r=ch+(rE-ch)*Math.random();Ti(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;Fe(t,(i,s)=>{s>0&&Ot(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ti(this.reportStats_.bind(this),Math.floor(Math.random()*2*iE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ct||(Ct={}));function Uc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Vc(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Ct.ACK_USER_WRITE,this.source=Uc()}operationForChild(t){if(X(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ie(t));return new Mo(ne(),n,this.revert)}}else return N(q(this.path)===t,"operationForChild called for unrelated child."),new Mo(ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t,n){this.source=t,this.path=n,this.type=Ct.LISTEN_COMPLETE}operationForChild(t){return X(this.path)?new ns(this.source,ne()):new ns(this.source,ae(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Ct.OVERWRITE}operationForChild(t){return X(this.path)?new qn(this.source,ne(),this.snap.getImmediateChild(t)):new qn(this.source,ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Ct.MERGE}operationForChild(t){if(X(this.path)){const n=this.children.subtree(new ie(t));return n.isEmpty()?null:n.value?new qn(this.source,ne(),n.value):new Br(this.source,ne(),n)}else return N(q(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Br(this.source,ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(X(t))return this.isFullyInitialized()&&!this.filtered_;const n=q(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function lE(e,t,n,r){const i=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(XC(o.childName,o.snapshotNode))}),ci(e,i,"child_removed",t,r,n),ci(e,i,"child_added",t,r,n),ci(e,i,"child_moved",s,r,n),ci(e,i,"child_changed",t,r,n),ci(e,i,"value",t,r,n),i}function ci(e,t,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>uE(e,l,a)),o.forEach(l=>{const a=aE(e,l,s);i.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(a,e.query_))})})}function aE(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function uE(e,t,n){if(t.childName==null||n.childName==null)throw Yr("Should only compare child_ events.");const r=new Y(t.childName,t.snapshotNode),i=new Y(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(e,t){return{eventCache:e,serverCache:t}}function Ii(e,t,n,r){return fl(new Xn(t,n,r),e.serverCache)}function ty(e,t,n,r){return fl(e.eventCache,new Xn(t,n,r))}function hu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Jn(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia;const cE=()=>(ia||(ia=new Xe(Yx)),ia);class oe{static fromObject(t){let n=new oe(null);return Fe(t,(r,i)=>{n=n.set(new ie(r),i)}),n}constructor(t,n=cE()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:ne(),value:this.value};if(X(t))return null;{const r=q(t),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ae(t),n);return s!=null?{path:_e(new ie(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(X(t))return this;{const n=q(t),r=this.children.get(n);return r!==null?r.subtree(ae(t)):new oe(null)}}set(t,n){if(X(t))return new oe(n,this.children);{const r=q(t),s=(this.children.get(r)||new oe(null)).set(ae(t),n),o=this.children.insert(r,s);return new oe(this.value,o)}}remove(t){if(X(t))return this.children.isEmpty()?new oe(null):new oe(null,this.children);{const n=q(t),r=this.children.get(n);if(r){const i=r.remove(ae(t));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new oe(null):new oe(this.value,s)}else return this}}get(t){if(X(t))return this.value;{const n=q(t),r=this.children.get(n);return r?r.get(ae(t)):null}}setTree(t,n){if(X(t))return n;{const r=q(t),s=(this.children.get(r)||new oe(null)).setTree(ae(t),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new oe(this.value,o)}}fold(t){return this.fold_(ne(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(_e(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,ne(),n)}findOnPath_(t,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(X(t))return null;{const s=q(t),o=this.children.get(s);return o?o.findOnPath_(ae(t),_e(n,s),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ne(),n)}foreachOnPath_(t,n,r){if(X(t))return this;{this.value&&r(n,this.value);const i=q(t),s=this.children.get(i);return s?s.foreachOnPath_(ae(t),_e(n,i),r):new oe(null)}}foreach(t){this.foreach_(ne(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(_e(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t){this.writeTree_=t}static empty(){return new kt(new oe(null))}}function Ri(e,t,n){if(X(t))return new kt(new oe(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){const i=r.path;let s=r.value;const o=qe(i,t);return s=s.updateChild(o,n),new kt(e.writeTree_.set(i,s))}else{const i=new oe(n),s=e.writeTree_.setTree(t,i);return new kt(s)}}}function pu(e,t,n){let r=e;return Fe(n,(i,s)=>{r=Ri(r,_e(t,i),s)}),r}function dh(e,t){if(X(t))return kt.empty();{const n=e.writeTree_.setTree(t,new oe(null));return new kt(n)}}function mu(e,t){return nr(e,t)!=null}function nr(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(qe(n.path,t)):null}function fh(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(we,(r,i)=>{t.push(new Y(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new Y(r,i.value))}),t}function Cn(e,t){if(X(t))return e;{const n=nr(e,t);return n!=null?new kt(new oe(n)):new kt(e.writeTree_.subtree(t))}}function gu(e){return e.writeTree_.isEmpty()}function Wr(e,t){return ny(ne(),e.writeTree_,t)}function ny(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,s)=>{i===".priority"?(N(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=ny(_e(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(_e(e,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(e,t){return oy(t,e)}function dE(e,t,n,r,i){N(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ri(e.visibleWrites,t,n)),e.lastWriteId=r}function fE(e,t,n,r){N(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=pu(e.visibleWrites,t,n),e.lastWriteId=r}function hE(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}function pE(e,t){const n=e.allWrites.findIndex(l=>l.writeId===t);N(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=n&&mE(l,r.path)?i=!1:ht(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return gE(e),!0;if(r.snap)e.visibleWrites=dh(e.visibleWrites,r.path);else{const l=r.children;Fe(l,a=>{e.visibleWrites=dh(e.visibleWrites,_e(r.path,a))})}return!0}else return!1}function mE(e,t){if(e.snap)return ht(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&ht(_e(e.path,n),t))return!0;return!1}function gE(e){e.visibleWrites=ry(e.allWrites,yE,ne()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function yE(e){return e.visible}function ry(e,t,n){let r=kt.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const o=s.path;let l;if(s.snap)ht(n,o)?(l=qe(n,o),r=Ri(r,l,s.snap)):ht(o,n)&&(l=qe(o,n),r=Ri(r,ne(),s.snap.getChild(l)));else if(s.children){if(ht(n,o))l=qe(n,o),r=pu(r,l,s.children);else if(ht(o,n))if(l=qe(o,n),X(l))r=pu(r,ne(),s.children);else{const a=Fr(s.children,q(l));if(a){const u=a.getChild(ae(l));r=Ri(r,ne(),u)}}}else throw Yr("WriteRecord should have .snap or .children")}}return r}function iy(e,t,n,r,i){if(!r&&!i){const s=nr(e.visibleWrites,t);if(s!=null)return s;{const o=Cn(e.visibleWrites,t);if(gu(o))return n;if(n==null&&!mu(o,ne()))return null;{const l=n||H.EMPTY_NODE;return Wr(o,l)}}}else{const s=Cn(e.visibleWrites,t);if(!i&&gu(s))return n;if(!i&&n==null&&!mu(s,ne()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ht(u.path,t)||ht(t,u.path))},l=ry(e.allWrites,o,t),a=n||H.EMPTY_NODE;return Wr(l,a)}}}function vE(e,t,n){let r=H.EMPTY_NODE;const i=nr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(we,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Cn(e.visibleWrites,t);return n.forEachChild(we,(o,l)=>{const a=Wr(Cn(s,new ie(o)),l);r=r.updateImmediateChild(o,a)}),fh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Cn(e.visibleWrites,t);return fh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function _E(e,t,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=_e(t,n);if(mu(e.visibleWrites,s))return null;{const o=Cn(e.visibleWrites,s);return gu(o)?i.getChild(n):Wr(o,i.getChild(n))}}function wE(e,t,n,r){const i=_e(t,n),s=nr(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Cn(e.visibleWrites,i);return Wr(o,r.getNode().getImmediateChild(n))}else return null}function xE(e,t){return nr(e.visibleWrites,t)}function CE(e,t,n,r,i,s,o){let l;const a=Cn(e.visibleWrites,t),u=nr(a,ne());if(u!=null)l=u;else if(n!=null)l=Wr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],c=o.getCompare(),d=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=d.getNext();for(;y&&f.length<i;)c(y,r)!==0&&f.push(y),y=d.getNext();return f}else return[]}function EE(){return{visibleWrites:kt.empty(),allWrites:[],lastWriteId:-1}}function Oo(e,t,n,r){return iy(e.writeTree,e.treePath,t,n,r)}function Qc(e,t){return vE(e.writeTree,e.treePath,t)}function hh(e,t,n,r){return _E(e.writeTree,e.treePath,t,n,r)}function Fo(e,t){return xE(e.writeTree,_e(e.treePath,t))}function SE(e,t,n,r,i,s){return CE(e.writeTree,e.treePath,t,n,r,i,s)}function Yc(e,t,n){return wE(e.writeTree,e.treePath,t,n)}function sy(e,t){return oy(_e(e.treePath,t),e.writeTree)}function oy(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;N(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),N(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,es(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Zi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,zr(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,es(r,t.snapshotNode,i.oldSnap));else throw Yr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const ly=new TE;class Kc{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yc(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jn(this.viewCache_),s=SE(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(e){return{filter:e}}function RE(e,t){N(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),N(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function NE(e,t,n,r,i){const s=new kE;let o,l;if(n.type===Ct.OVERWRITE){const u=n;u.source.fromUser?o=yu(e,t,u.path,u.snap,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!X(u.path),o=jo(e,t,u.path,u.snap,r,i,l,s))}else if(n.type===Ct.MERGE){const u=n;u.source.fromUser?o=PE(e,t,u.path,u.children,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=vu(e,t,u.path,u.children,r,i,l,s))}else if(n.type===Ct.ACK_USER_WRITE){const u=n;u.revert?o=LE(e,t,u.path,r,i,s):o=DE(e,t,u.path,u.affectedTree,r,i,s)}else if(n.type===Ct.LISTEN_COMPLETE)o=AE(e,t,n.path,r,s);else throw Yr("Unknown operation type: "+n.type);const a=s.getChanges();return bE(t,o,a),{viewCache:o,changes:a}}function bE(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=hu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Zg(hu(t)))}}function ay(e,t,n,r,i,s){const o=t.eventCache;if(Fo(r,n)!=null)return t;{let l,a;if(X(n))if(N(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=Jn(t),f=u instanceof H?u:H.EMPTY_NODE,c=Qc(r,f);l=e.filter.updateFullNode(t.eventCache.getNode(),c,s)}else{const u=Oo(r,Jn(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,s)}else{const u=q(n);if(u===".priority"){N(kn(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=t.serverCache.getNode();const c=hh(r,n,f,a);c!=null?l=e.filter.updatePriority(f,c):l=o.getNode()}else{const f=ae(n);let c;if(o.isCompleteForChild(u)){a=t.serverCache.getNode();const d=hh(r,n,o.getNode(),a);d!=null?c=o.getNode().getImmediateChild(u).updateChild(f,d):c=o.getNode().getImmediateChild(u)}else c=Yc(r,u,t.serverCache);c!=null?l=e.filter.updateChild(o.getNode(),u,c,f,i,s):l=o.getNode()}}return Ii(t,l,o.isFullyInitialized()||X(n),e.filter.filtersNodes())}}function jo(e,t,n,r,i,s,o,l){const a=t.serverCache;let u;const f=o?e.filter:e.filter.getIndexedFilter();if(X(n))u=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const y=a.getNode().updateChild(n,r);u=f.updateFullNode(a.getNode(),y,null)}else{const y=q(n);if(!a.isCompleteForPath(n)&&kn(n)>1)return t;const v=ae(n),E=a.getNode().getImmediateChild(y).updateChild(v,r);y===".priority"?u=f.updatePriority(a.getNode(),E):u=f.updateChild(a.getNode(),y,E,v,ly,null)}const c=ty(t,u,a.isFullyInitialized()||X(n),f.filtersNodes()),d=new Kc(i,c,s);return ay(e,c,n,i,d,l)}function yu(e,t,n,r,i,s,o){const l=t.eventCache;let a,u;const f=new Kc(i,t,s);if(X(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),a=Ii(t,u,!0,e.filter.filtersNodes());else{const c=q(n);if(c===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),r),a=Ii(t,u,l.isFullyInitialized(),l.isFiltered());else{const d=ae(n),y=l.getNode().getImmediateChild(c);let v;if(X(d))v=r;else{const x=f.getCompleteChild(c);x!=null?Fc(d)===".priority"&&x.getChild(Gg(d)).isEmpty()?v=x:v=x.updateChild(d,r):v=H.EMPTY_NODE}if(y.equals(v))a=t;else{const x=e.filter.updateChild(l.getNode(),c,v,d,f,o);a=Ii(t,x,l.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function ph(e,t){return e.eventCache.isCompleteForChild(t)}function PE(e,t,n,r,i,s,o){let l=t;return r.foreach((a,u)=>{const f=_e(n,a);ph(t,q(f))&&(l=yu(e,l,f,u,i,s,o))}),r.foreach((a,u)=>{const f=_e(n,a);ph(t,q(f))||(l=yu(e,l,f,u,i,s,o))}),l}function mh(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function vu(e,t,n,r,i,s,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let a=t,u;X(n)?u=r:u=new oe(null).setTree(n,r);const f=t.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(f.hasChild(c)){const y=t.serverCache.getNode().getImmediateChild(c),v=mh(e,y,d);a=jo(e,a,new ie(c),v,i,s,o,l)}}),u.children.inorderTraversal((c,d)=>{const y=!t.serverCache.isCompleteForChild(c)&&d.value===null;if(!f.hasChild(c)&&!y){const v=t.serverCache.getNode().getImmediateChild(c),x=mh(e,v,d);a=jo(e,a,new ie(c),x,i,s,o,l)}}),a}function DE(e,t,n,r,i,s,o){if(Fo(i,n)!=null)return t;const l=t.serverCache.isFiltered(),a=t.serverCache;if(r.value!=null){if(X(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return jo(e,t,n,a.getNode().getChild(n),i,s,l,o);if(X(n)){let u=new oe(null);return a.getNode().forEachChild(Ir,(f,c)=>{u=u.set(new ie(f),c)}),vu(e,t,n,u,i,s,l,o)}else return t}else{let u=new oe(null);return r.foreach((f,c)=>{const d=_e(n,f);a.isCompleteForPath(d)&&(u=u.set(f,a.getNode().getChild(d)))}),vu(e,t,n,u,i,s,l,o)}}function AE(e,t,n,r,i){const s=t.serverCache,o=ty(t,s.getNode(),s.isFullyInitialized()||X(n),s.isFiltered());return ay(e,o,n,r,ly,i)}function LE(e,t,n,r,i,s){let o;if(Fo(r,n)!=null)return t;{const l=new Kc(r,t,i),a=t.eventCache.getNode();let u;if(X(n)||q(n)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=Oo(r,Jn(t));else{const c=t.serverCache.getNode();N(c instanceof H,"serverChildren would be complete if leaf node"),f=Qc(r,c)}f=f,u=e.filter.updateFullNode(a,f,s)}else{const f=q(n);let c=Yc(r,f,t.serverCache);c==null&&t.serverCache.isCompleteForChild(f)&&(c=a.getImmediateChild(f)),c!=null?u=e.filter.updateChild(a,f,c,ae(n),l,s):t.eventCache.getNode().hasChild(f)?u=e.filter.updateChild(a,f,H.EMPTY_NODE,ae(n),l,s):u=a,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Oo(r,Jn(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||Fo(r,ne())!=null,Ii(t,u,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Wc(r.getIndex()),s=ZC(r);this.processor_=IE(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(H.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(H.EMPTY_NODE,l.getNode(),null),f=new Xn(a,o.isFullyInitialized(),i.filtersNodes()),c=new Xn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=fl(c,f),this.eventGenerator_=new oE(this.query_)}get query(){return this.query_}}function OE(e){return e.viewCache_.serverCache.getNode()}function FE(e,t){const n=Jn(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!X(t)&&!n.getImmediateChild(q(t)).isEmpty())?n.getChild(t):null}function gh(e){return e.eventRegistrations_.length===0}function jE(e,t){e.eventRegistrations_.push(t)}function yh(e,t,n){const r=[];if(n){N(t==null,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(t){let i=[];for(let s=0;s<e.eventRegistrations_.length;++s){const o=e.eventRegistrations_[s];if(!o.matches(t))i.push(o);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(s+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function vh(e,t,n,r){t.type===Ct.MERGE&&t.source.queryId!==null&&(N(Jn(e.viewCache_),"We should always have a full cache before handling merges"),N(hu(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=NE(e.processor_,i,t,n,r);return RE(e.processor_,s.viewCache),N(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,uy(e,s.changes,s.viewCache.eventCache.getNode(),null)}function zE(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(we,(s,o)=>{r.push(zr(s,o))}),n.isFullyInitialized()&&r.push(Zg(n.getNode())),uy(e,r,n.getNode(),t)}function uy(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return lE(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo;class BE{constructor(){this.views=new Map}}function WE(e){N(!zo,"__referenceConstructor has already been defined"),zo=e}function $E(){return N(zo,"Reference.ts has not been loaded"),zo}function UE(e){return e.views.size===0}function qc(e,t,n,r){const i=t.source.queryId;if(i!==null){const s=e.views.get(i);return N(s!=null,"SyncTree gave us an op for an invalid query."),vh(s,t,n,r)}else{let s=[];for(const o of e.views.values())s=s.concat(vh(o,t,n,r));return s}}function HE(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let l=Oo(n,i?r:null),a=!1;l?a=!0:r instanceof H?(l=Qc(n,r),a=!1):(l=H.EMPTY_NODE,a=!1);const u=fl(new Xn(l,a,!1),new Xn(r,i,!1));return new ME(t,u)}return o}function VE(e,t,n,r,i,s){const o=HE(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),jE(o,n),zE(o,n)}function GE(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const l=Tn(e);if(i==="default")for(const[a,u]of e.views.entries())o=o.concat(yh(u,n,r)),gh(u)&&(e.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=e.views.get(i);a&&(o=o.concat(yh(a,n,r)),gh(a)&&(e.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!Tn(e)&&s.push(new($E())(t._repo,t._path)),{removed:s,events:o}}function cy(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Rr(e,t){let n=null;for(const r of e.views.values())n=n||FE(r,t);return n}function dy(e,t){if(t._queryParams.loadsAllData())return hl(e);{const r=t._queryIdentifier;return e.views.get(r)}}function fy(e,t){return dy(e,t)!=null}function Tn(e){return hl(e)!=null}function hl(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo;function QE(e){N(!Bo,"__referenceConstructor has already been defined"),Bo=e}function YE(){return N(Bo,"Reference.ts has not been loaded"),Bo}let KE=1;class _h{constructor(t){this.listenProvider_=t,this.syncPointTree_=new oe(null),this.pendingWriteTree_=EE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qE(e,t,n,r,i){return dE(e.pendingWriteTree_,t,n,r,i),i?qr(e,new qn(Uc(),t,n)):[]}function XE(e,t,n,r){fE(e.pendingWriteTree_,t,n,r);const i=oe.fromObject(n);return qr(e,new Br(Uc(),t,i))}function Bn(e,t,n=!1){const r=hE(e.pendingWriteTree_,t);if(pE(e.pendingWriteTree_,t)){let s=new oe(null);return r.snap!=null?s=s.set(ne(),!0):Fe(r.children,o=>{s=s.set(new ie(o),!0)}),qr(e,new Mo(r.path,s,n))}else return[]}function pl(e,t,n){return qr(e,new qn(Hc(),t,n))}function JE(e,t,n){const r=oe.fromObject(n);return qr(e,new Br(Hc(),t,r))}function ZE(e,t){return qr(e,new ns(Hc(),t))}function eS(e,t,n){const r=Xc(e,n);if(r){const i=Jc(r),s=i.path,o=i.queryId,l=qe(s,t),a=new ns(Vc(o),l);return Zc(e,s,a)}else return[]}function _u(e,t,n,r,i=!1){const s=t._path,o=e.syncPointTree_.get(s);let l=[];if(o&&(t._queryIdentifier==="default"||fy(o,t))){const a=GE(o,t,n,r);UE(o)&&(e.syncPointTree_=e.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const f=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,c=e.syncPointTree_.findOnPath(s,(d,y)=>Tn(y));if(f&&!c){const d=e.syncPointTree_.subtree(s);if(!d.isEmpty()){const y=rS(d);for(let v=0;v<y.length;++v){const x=y[v],E=x.query,p=gy(e,x);e.listenProvider_.startListening(Ni(E),Wo(e,E),p.hashFn,p.onComplete)}}}!c&&u.length>0&&!r&&(f?e.listenProvider_.stopListening(Ni(t),null):u.forEach(d=>{const y=e.queryToTagMap.get(ml(d));e.listenProvider_.stopListening(Ni(d),y)}))}iS(e,u)}return l}function tS(e,t,n,r){const i=Xc(e,r);if(i!=null){const s=Jc(i),o=s.path,l=s.queryId,a=qe(o,t),u=new qn(Vc(l),a,n);return Zc(e,o,u)}else return[]}function nS(e,t,n,r){const i=Xc(e,r);if(i){const s=Jc(i),o=s.path,l=s.queryId,a=qe(o,t),u=oe.fromObject(n),f=new Br(Vc(l),a,u);return Zc(e,o,f)}else return[]}function wh(e,t,n,r=!1){const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(d,y)=>{const v=qe(d,i);s=s||Rr(y,v),o=o||Tn(y)});let l=e.syncPointTree_.get(i);l?(o=o||Tn(l),s=s||Rr(l,ne())):(l=new BE,e.syncPointTree_=e.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=H.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((y,v)=>{const x=Rr(v,ne());x&&(s=s.updateImmediateChild(y,x))}));const u=fy(l,t);if(!u&&!t._queryParams.loadsAllData()){const d=ml(t);N(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");const y=sS();e.queryToTagMap.set(d,y),e.tagToQueryMap.set(y,d)}const f=Gc(e.pendingWriteTree_,i);let c=VE(l,t,n,f,s,a);if(!u&&!o&&!r){const d=dy(l,t);c=c.concat(oS(e,t,d))}return c}function hy(e,t,n){const i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,l)=>{const a=qe(o,t),u=Rr(l,a);if(u)return u});return iy(i,t,s,n,!0)}function qr(e,t){return py(t,e.syncPointTree_,null,Gc(e.pendingWriteTree_,ne()))}function py(e,t,n,r){if(X(e.path))return my(e,t,n,r);{const i=t.get(ne());n==null&&i!=null&&(n=Rr(i,ne()));let s=[];const o=q(e.path),l=e.operationForChild(o),a=t.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,f=sy(r,o);s=s.concat(py(l,a,u,f))}return i&&(s=s.concat(qc(i,e,r,n))),s}}function my(e,t,n,r){const i=t.get(ne());n==null&&i!=null&&(n=Rr(i,ne()));let s=[];return t.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=sy(r,o),f=e.operationForChild(o);f&&(s=s.concat(my(f,l,a,u)))}),i&&(s=s.concat(qc(i,e,r,n))),s}function gy(e,t){const n=t.query,r=Wo(e,n);return{hashFn:()=>(OE(t)||H.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?eS(e,n._path,r):ZE(e,n._path);{const s=Xx(i,n);return _u(e,n,null,s)}}}}function Wo(e,t){const n=ml(t);return e.queryToTagMap.get(n)}function ml(e){return e._path.toString()+"$"+e._queryIdentifier}function Xc(e,t){return e.tagToQueryMap.get(t)}function Jc(e){const t=e.indexOf("$");return N(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ie(e.substr(0,t))}}function Zc(e,t,n){const r=e.syncPointTree_.get(t);N(r,"Missing sync point for query tag that we're tracking");const i=Gc(e.pendingWriteTree_,t);return qc(r,n,i,null)}function rS(e){return e.fold((t,n,r)=>{if(n&&Tn(n))return[hl(n)];{let i=[];return n&&(i=cy(n)),Fe(r,(s,o)=>{i=i.concat(o)}),i}})}function Ni(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(YE())(e._repo,e._path):e}function iS(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=ml(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function sS(){return KE++}function oS(e,t,n){const r=t._path,i=Wo(e,t),s=gy(e,n),o=e.listenProvider_.startListening(Ni(t),i,s.hashFn,s.onComplete),l=e.syncPointTree_.subtree(r);if(i)N(!Tn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,f,c)=>{if(!X(u)&&f&&Tn(f))return[hl(f).query];{let d=[];return f&&(d=d.concat(cy(f).map(y=>y.query))),Fe(c,(y,v)=>{d=d.concat(v)}),d}});for(let u=0;u<a.length;++u){const f=a[u];e.listenProvider_.stopListening(Ni(f),Wo(e,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new ed(n)}node(){return this.node_}}class td{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=_e(this.path_,t);return new td(this.syncTree_,n)}node(){return hy(this.syncTree_,this.path_)}}const lS=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},xh=function(e,t,n){if(!e||typeof e!="object")return e;if(N(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return aS(e[".sv"],t,n);if(typeof e[".sv"]=="object")return uS(e[".sv"],t);N(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},aS=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:N(!1,"Unexpected server value: "+e)}},uS=function(e,t,n){e.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;typeof r!="number"&&N(!1,"Unexpected increment value: "+r);const i=t.node();if(N(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},yy=function(e,t,n,r){return nd(t,new td(n,e),r)},cS=function(e,t,n){return nd(e,new ed(t),n)};function nd(e,t,n){const r=e.getPriority().val(),i=xh(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,l=xh(o.getValue(),t,n);return l!==o.getValue()||i!==o.getPriority().val()?new ke(l,Le(i)):e}else{const o=e;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ke(i))),o.forEachChild(we,(l,a)=>{const u=nd(a,t.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function id(e,t){let n=t instanceof ie?t:new ie(t),r=e,i=q(n);for(;i!==null;){const s=Fr(r.node.children,i)||{children:{},childCount:0};r=new rd(i,r,s),n=ae(n),i=q(n)}return r}function Xr(e){return e.node.value}function vy(e,t){e.node.value=t,wu(e)}function _y(e){return e.node.childCount>0}function dS(e){return Xr(e)===void 0&&!_y(e)}function gl(e,t){Fe(e.node.children,(n,r)=>{t(new rd(n,e,r))})}function wy(e,t,n,r){n&&t(e),gl(e,i=>{wy(i,t,!0)})}function fS(e,t,n){let r=e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function gs(e){return new ie(e.parent===null?e.name:gs(e.parent)+"/"+e.name)}function wu(e){e.parent!==null&&hS(e.parent,e.name,e)}function hS(e,t,n){const r=dS(n),i=Ot(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,wu(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,wu(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=/[\[\].#$\/\u0000-\u001F\u007F]/,mS=/[\[\].#$\u0000-\u001F\u007F]/,sa=10*1024*1024,sd=function(e){return typeof e=="string"&&e.length!==0&&!pS.test(e)},xy=function(e){return typeof e=="string"&&e.length!==0&&!mS.test(e)},gS=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xy(e)},yS=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Dc(e)||e&&typeof e=="object"&&Ot(e,".sv")},od=function(e,t,n){const r=n instanceof ie?new PC(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Mn(r));if(typeof t=="function")throw new Error(e+"contains a function "+Mn(r)+" with contents = "+t.toString());if(Dc(t))throw new Error(e+"contains "+t.toString()+" "+Mn(r));if(typeof t=="string"&&t.length>sa/3&&ul(t)>sa)throw new Error(e+"contains a string greater than "+sa+" utf8 bytes "+Mn(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,s=!1;if(Fe(t,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!sd(o)))throw new Error(e+" contains an invalid key ("+o+") "+Mn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);DC(r,o),od(e,l,r),AC(r)}),i&&s)throw new Error(e+' contains ".value" child '+Mn(r)+" in addition to actual children.")}},vS=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const s=Ji(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!sd(s[o]))throw new Error(e+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(bC);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&ht(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},_S=function(e,t,n,r){const i=bc(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Fe(t,(o,l)=>{const a=new ie(o);if(od(i,l,_e(n,a)),Fc(a)===".priority"&&!yS(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),vS(i,s)},Cy=function(e,t,n,r){if(!xy(n))throw new Error(bc(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wS=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Cy(e,t,n)},xS=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!sd(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!gS(n))throw new Error(bc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ld(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();n!==null&&!jc(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Ey(e,t,n){ld(e,n),Sy(e,r=>jc(r,t))}function nn(e,t,n){ld(e,n),Sy(e,r=>ht(r,t)||ht(t,r))}function Sy(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){const s=i.path;t(s)?(ES(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ES(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const r=n.getEventRunner();ki&&Ae("event: "+n.toString()),Kr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="repo_interrupt",kS=25;class TS{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lo(),this.transactionQueueTree_=new rd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IS(e,t,n){if(e.stats_=Mc(e.repoInfo_),e.forceRestClient_||tC())e.server_=new Ao(e.repoInfo_,(r,i,s,o)=>{Ch(e,r,i,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Eh(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ne(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Gt(e.repoInfo_,t,(r,i,s,o)=>{Ch(e,r,i,s,o)},r=>{Eh(e,r)},r=>{NS(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=oC(e.repoInfo_,()=>new sE(e.stats_,e.server_)),e.infoData_=new eE,e.infoSyncTree_=new _h({startListening:(r,i,s,o)=>{let l=[];const a=e.infoData_.getNode(r._path);return a.isEmpty()||(l=pl(e.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),ud(e,"connected",!1),e.serverSyncTree_=new _h({startListening:(r,i,s,o)=>(e.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);nn(e.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function RS(e){const n=e.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ad(e){return lS({timestamp:RS(e)})}function Ch(e,t,n,r,i){e.dataUpdateCount++;const s=new ie(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const a=To(n,u=>Le(u));o=nS(e.serverSyncTree_,s,a,i)}else{const a=Le(n);o=tS(e.serverSyncTree_,s,a,i)}else if(r){const a=To(n,u=>Le(u));o=JE(e.serverSyncTree_,s,a)}else{const a=Le(n);o=pl(e.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=rs(e,s)),nn(e.eventQueue_,l,o)}function Eh(e,t){ud(e,"connected",t),t===!1&&PS(e)}function NS(e,t){Fe(t,(n,r)=>{ud(e,n,r)})}function ud(e,t,n){const r=new ie("/.info/"+t),i=Le(n);e.infoData_.updateSnapshot(r,i);const s=pl(e.infoSyncTree_,r,i);nn(e.eventQueue_,r,s)}function ky(e){return e.nextWriteId_++}function bS(e,t,n,r){cd(e,"update",{path:t.toString(),value:n});let i=!0;const s=ad(e),o={};if(Fe(n,(l,a)=>{i=!1,o[l]=yy(_e(t,l),Le(a),e.serverSyncTree_,s)}),i)Ae("update() called with empty data.  Don't do anything."),Sh(e,r,"ok",void 0);else{const l=ky(e),a=XE(e.serverSyncTree_,t,o,l);ld(e.eventQueue_,a),e.server_.merge(t.toString(),n,(u,f)=>{const c=u==="ok";c||tt("update at "+t+" failed: "+u);const d=Bn(e.serverSyncTree_,l,!c),y=d.length>0?rs(e,t):t;nn(e.eventQueue_,y,d),Sh(e,r,u,f)}),Fe(n,u=>{const f=by(e,_e(t,u));rs(e,f)}),nn(e.eventQueue_,t,[])}}function PS(e){cd(e,"onDisconnectEvents");const t=ad(e),n=Lo();fu(e.onDisconnect_,ne(),(i,s)=>{const o=yy(i,s,e.serverSyncTree_,t);ey(n,i,o)});let r=[];fu(n,ne(),(i,s)=>{r=r.concat(pl(e.serverSyncTree_,i,s));const o=by(e,i);rs(e,o)}),e.onDisconnect_=Lo(),nn(e.eventQueue_,ne(),r)}function DS(e,t,n){let r;q(t._path)===".info"?r=wh(e.infoSyncTree_,t,n):r=wh(e.serverSyncTree_,t,n),Ey(e.eventQueue_,t._path,r)}function xu(e,t,n){let r;q(t._path)===".info"?r=_u(e.infoSyncTree_,t,n):r=_u(e.serverSyncTree_,t,n),Ey(e.eventQueue_,t._path,r)}function AS(e){e.persistentConnection_&&e.persistentConnection_.interrupt(SS)}function cd(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ae(n,...t)}function Sh(e,t,n,r){t&&Kr(()=>{if(n==="ok")t(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,t(o)}})}function Ty(e,t,n){return hy(e.serverSyncTree_,t,n)||H.EMPTY_NODE}function dd(e,t=e.transactionQueueTree_){if(t||yl(e,t),Xr(t)){const n=Ry(e,t);N(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&LS(e,gs(t),n)}else _y(t)&&gl(t,n=>{dd(e,n)})}function LS(e,t,n){const r=n.map(u=>u.currentWriteId),i=Ty(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];N(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const c=qe(t,f.path);s=s.updateChild(c,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=t;e.server_.put(a.toString(),l,u=>{cd(e,"transaction put response",{path:a.toString(),status:u});let f=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,f=f.concat(Bn(e.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();yl(e,id(e.transactionQueueTree_,t)),dd(e,e.transactionQueueTree_),nn(e.eventQueue_,t,f);for(let d=0;d<c.length;d++)Kr(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{tt("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}rs(e,t)}},o)}function rs(e,t){const n=Iy(e,t),r=gs(n),i=Ry(e,n);return MS(e,i,r),r}function MS(e,t,n){if(t.length===0)return;const r=[];let i=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const a=t[l],u=qe(n,a.path);let f=!1,c;if(N(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,c=a.abortReason,i=i.concat(Bn(e.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=kS)f=!0,c="maxretry",i=i.concat(Bn(e.serverSyncTree_,a.currentWriteId,!0));else{const d=Ty(e,a.path,o);a.currentInputSnapshot=d;const y=t[l].update(d.val());if(y!==void 0){od("transaction failed: Data returned ",y,a.path);let v=Le(y);typeof y=="object"&&y!=null&&Ot(y,".priority")||(v=v.updatePriority(d.getPriority()));const E=a.currentWriteId,p=ad(e),h=cS(v,d,p);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=h,a.currentWriteId=ky(e),o.splice(o.indexOf(E),1),i=i.concat(qE(e.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(Bn(e.serverSyncTree_,E,!0))}else f=!0,c="nodata",i=i.concat(Bn(e.serverSyncTree_,a.currentWriteId,!0))}nn(e.eventQueue_,n,i),i=[],f&&(t[l].status=2,function(d){setTimeout(d,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(c==="nodata"?r.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):r.push(()=>t[l].onComplete(new Error(c),!1,null))))}yl(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Kr(r[l]);dd(e,e.transactionQueueTree_)}function Iy(e,t){let n,r=e.transactionQueueTree_;for(n=q(t);n!==null&&Xr(r)===void 0;)r=id(r,n),t=ae(t),n=q(t);return r}function Ry(e,t){const n=[];return Ny(e,t,n),n.sort((r,i)=>r.order-i.order),n}function Ny(e,t,n){const r=Xr(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);gl(t,i=>{Ny(e,i,n)})}function yl(e,t){const n=Xr(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,vy(t,n.length>0?n:void 0)}gl(t,r=>{yl(e,r)})}function by(e,t){const n=gs(Iy(e,t)),r=id(e.transactionQueueTree_,t);return fS(r,i=>{oa(e,i)}),oa(e,r),wy(r,i=>{oa(e,i)}),n}function oa(e,t){const n=Xr(t);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(N(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(N(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Bn(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?vy(t,void 0):n.length=s+1,nn(e.eventQueue_,gs(t),i);for(let o=0;o<r.length;o++)Kr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function FS(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${e}'`)}return t}const kh=function(e,t){const n=jS(e),r=n.namespace;n.domain==="firebase.com"&&tn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&tn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Gx();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Fg(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ie(n.pathString)}},jS=function(e){let t="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let f=e.indexOf("/");f===-1&&(f=e.length);let c=e.indexOf("?");c===-1&&(c=e.length),t=e.substring(0,Math.min(f,c)),f<c&&(i=OS(e.substring(f,c)));const d=FS(e.substring(Math.min(e.length,c)));u=t.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(t.substring(u+1),10)):u=t.length;const y=t.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ne(this.snapshot.exportVal())}}class BS{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:Fc(this._path)}get ref(){return new Pn(this._repo,this._path)}get _queryIdentifier(){const t=uh(this._queryParams),n=Ac(t);return n==="{}"?"default":n}get _queryObject(){return uh(this._queryParams)}isEqual(t){if(t=cl(t),!(t instanceof fd))return!1;const n=this._repo===t._repo,r=jc(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+NC(this._path)}}class Pn extends fd{constructor(t,n){super(t,n,new $c,!1)}get parent(){const t=Gg(this._path);return t===null?null:new Pn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class $o{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new ie(t),r=Cu(this.ref,t);return new $o(this._node.getChild(n),r,we)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new $o(i,Cu(this.ref,r),we)))}hasChild(t){const n=new ie(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Uo(e,t){return e=cl(e),e._checkNotDeleted("ref"),t!==void 0?Cu(e._root,t):e._root}function Cu(e,t){return e=cl(e),q(e._path)===null?wS("child","path",t):Cy("child","path",t),new Pn(e._repo,_e(e._path,t))}function Py(e,t){_S("update",t,e._path);const n=new al;return bS(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}class hd{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new zS("value",this,new $o(t.snapshotNode,new Pn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new BS(this,t,n):null}matches(t){return t instanceof hd?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function $S(e,t,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(f,c)=>{xu(e._repo,e,l),a(f,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new WS(n,s||void 0),l=new hd(o);return DS(e._repo,e,l),()=>xu(e._repo,e,l)}function Th(e,t,n,r){return $S(e,"value",t,n,r)}function Ih(e,t,n){xu(e._repo,e,null)}WE(Pn);QE(Pn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="FIREBASE_DATABASE_EMULATOR_HOST",Eu={};let HS=!1;function VS(e,t,n,r){const i=t.lastIndexOf(":"),s=t.substring(0,i),o=Nc(s);e.repoInfo_=new Fg(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function GS(e,t,n,r,i){let s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||tn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ae("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=kh(s,i),l=o.repoInfo,a;typeof process<"u"&&Vf&&(a=Vf[US]),a?(s=`http://${a}?ns=${l.namespace}`,o=kh(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new rC(e.name,e.options,t);xS("Invalid Firebase Database URL",o),X(o.path)||tn("Database URL must point to the root of a Firebase Database (not including a child path).");const f=YS(l,e,u,new nC(e,n));return new KS(f,e)}function QS(e,t){const n=Eu[t];(!n||n[e.key]!==e)&&tn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),AS(e),delete n[e.key]}function YS(e,t,n,r){let i=Eu[t.name];i||(i={},Eu[t.name]=i);let s=i[e.toURLString()];return s&&tn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new TS(e,HS,n,r),i[e.toURLString()]=s,s}class KS{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pn(this._repo,ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&tn("Cannot call "+t+" on a deleted database.")}}function qS(e=Ix(),t){const n=Cx(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=l1("database");r&&XS(n,...r)}return n}function XS(e,t,n,r={}){e=cl(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Io(r,s.repoInfo_.emulatorOptions))return;tn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&tn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Js(Js.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:u1(r.mockUserToken,e.app.options.projectId);o=new Js(l)}Nc(t)&&(a1(t),f1("Database",!0)),VS(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(e){Bx(Tx),No(new Ki("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return GS(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),kr(Gf,Qf,e),kr(Gf,Qf,"esm2017")}Gt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Gt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};JS();const Su={apiKey:"AIzaSyBF1sBC8tegqpQzlhZDkfRyCkG1N-RqHZM",authDomain:"board6-a2c5a.firebaseapp.com",databaseURL:"https://board6-a2c5a-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"board6-a2c5a",storageBucket:"board6-a2c5a.appspot.com",messagingSenderId:"192957529739",appId:"1:192957529739:web:9c317aa3344e1824d89e8e",measurementId:"G-GS9NWB8PYP"},ZS=wg(Su),is=qS(ZS),He=()=>{const e=!!is&&!!Su.apiKey&&!!Su.databaseURL;return e||console.warn("[firebase.ts] Firebase 사용 불가: 환경변수 누락 또는 db 미초기화"),e},ek=()=>Uo(is,"/sharedBoardData"),Dy=(e,t)=>{const n=Uo(is,"/sharedBoardData/shapes"),r=Uo(is,"/sharedBoardData/strokes"),i=Th(n,o=>{const l=o.val();l&&e({type:"shapes",shapes:Object.values(l)})},o=>{console.error("❌ [firebase.ts] shapes 실시간 구독 오류:",o),t&&t(o)}),s=Th(r,o=>{const l=o.val();l&&e({type:"strokes",strokes:Object.values(l)})},o=>{console.error("❌ [firebase.ts] strokes 실시간 구독 오류:",o),t&&t(o)});return()=>{Ih(n),Ih(r),i(),s()}},pd=async(e,t=[])=>{try{const n={},r=new Set(e.map(s=>s.id)),i=new Set(t.map(s=>s.id));for(const s of i)r.has(s)||(n[`/sharedBoardData/strokes/${s}`]=null);for(const s of e)n[`/sharedBoardData/strokes/${s.id}`]=s;await Py(Uo(is),n),console.log("[firebase.ts] 필기 저장 update (부분, 삭제 포함)",n)}catch(n){console.error("[firebase.ts] 필기 저장 실패:",n)}},Te=async e=>{try{const t={};for(const r in e)if(r.startsWith("shapes/")){const i=e[r];i&&typeof i=="object"&&(i.type==="text"||i.type==="textbox")?t[r]=i:t[r]=e[r]}else t[r]=e[r];const n=ek();console.log("[firebase.ts] 데이터 update",t),await Py(n,t)}catch(t){console.error("[firebase.ts] 데이터 update 실패:",t)}},tk=({setStrokes:e,penColor:t,penSize:n})=>{const r=g.useRef([]),i=g.useCallback((f,c,d)=>{const y=Date.now(),v={id:y.toString(),tool:c,points:[f],color:t,size:n,isErasable:!0,updatedAt:y,updatedBy:d,userId:d};return e(x=>[...Array.isArray(x)?x:[],v]),v.id},[t,n,e]),s=g.useCallback((f,c)=>{e(d=>Array.isArray(d)?d.map(v=>v&&v.id===f?{...v,points:[...v.points,c],updatedAt:Date.now()}:v):d)},[e]),o=g.useCallback((f,c=10)=>{e(d=>{const y=d.filter(x=>x.isErasable?x.points.some(E=>Math.sqrt(Math.pow(E.x-f.x,2)+Math.pow(E.y-f.y,2))<=c):!1);return d.filter(x=>!y.some(E=>E.id===x.id))})},[e]),l=g.useCallback(()=>{e(()=>[])},[e]),a=g.useCallback(()=>{e(f=>f.slice(0,-1))},[e]),u=g.useCallback(f=>{He()&&(pd(f,r.current),r.current=f)},[]);return{startStroke:i,addPointToStroke:s,eraseAtPoint:o,clearAllStrokes:l,removeLastStroke:a,saveStrokesOnDrawEnd:u,prevStrokesRef:r}},Ay=e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height)},nk=(e,t)=>{e.strokeStyle=Qw,e.lineWidth=Yw,e.setLineDash([]);for(let n=0;n<=Jt;n+=t)e.beginPath(),e.moveTo(n,0),e.lineTo(n,Zt),e.stroke();for(let n=0;n<=Zt;n+=t)e.beginPath(),e.moveTo(0,n),e.lineTo(Jt,n),e.stroke()},rk=(e,t)=>{if(!(t.points.length<2)){e.strokeStyle=t.color,e.lineWidth=t.size,e.lineCap="round",e.lineJoin="round",e.setLineDash([]),e.beginPath(),e.moveTo(t.points[0].x,t.points[0].y);for(let n=1;n<t.points.length;n++)e.lineTo(t.points[n].x,t.points[n].y);e.stroke()}},ik=(e,t)=>{t.forEach(n=>rk(e,n))},sk=(e,t)=>{if(t.type!=="rect")return;const{x:n,y:r,width:i=100,height:s=60,fill:o="#ffffff"}=t;e.fillStyle=o,e.fillRect(n,r,i,s),e.strokeStyle=t.selected?yr:"#000000",e.lineWidth=t.selected?3:1,e.setLineDash([]),e.strokeRect(n,r,i,s)},ok=(e,t)=>{if(t.type!=="text")return;const{x:n,y:r,text:i="Text",width:s=100,height:o=60,fontSize:l=16,fontWeight:a="normal",fontStyle:u="normal"}=t;t.fill&&(e.fillStyle=t.fill,e.fillRect(n,r,s,o));const f=u==="italic"?"italic ":"",c=a==="bold"?"bold ":"";e.font=`${f}${c}${l}px Arial`,e.fillStyle="#000000",e.textAlign="left",e.textBaseline="top",e.fillText(i,n+5,r+5),t.selected&&(e.strokeStyle=yr,e.lineWidth=3,e.setLineDash([]),e.strokeRect(n,r,s,o))},Rh=new Map,lk=(e,t)=>{if(t.type!=="image")return;const{x:n,y:r,width:i=100,height:s=100,imageSrc:o}=t;if(o){let l=Rh.get(o);l&&l.complete&&l.naturalWidth>0?(e.drawImage(l,n,r,i,s),t.selected&&(e.strokeStyle=yr,e.lineWidth=3,e.setLineDash([]),e.strokeRect(n,r,i,s))):l||(l=new Image,Rh.set(o,l),l.onload=()=>{},l.onerror=()=>{e.fillStyle="#f0f0f0",e.fillRect(n,r,i,s),e.strokeStyle=t.selected?yr:"#cccccc",e.lineWidth=t.selected?3:1,e.setLineDash([]),e.strokeRect(n,r,i,s),e.fillStyle="#ff0000",e.font="12px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("ERROR",n+i/2,r+s/2)},l.src=o,e.fillStyle="#f8f9fa",e.fillRect(n,r,i,s),e.strokeStyle=t.selected?yr:"#ddd",e.lineWidth=t.selected?3:1,e.setLineDash([]),e.strokeRect(n,r,i,s),e.fillStyle="#666666",e.font="12px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("로딩중...",n+i/2,r+s/2))}else e.fillStyle="#f0f0f0",e.fillRect(n,r,i,s),e.strokeStyle=t.selected?yr:"#cccccc",e.lineWidth=t.selected?3:1,e.setLineDash([]),e.strokeRect(n,r,i,s),e.fillStyle="#666666",e.font="14px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("IMG",n+i/2,r+s/2)},ak=(e,t)=>{t.forEach(n=>{switch(n.type){case"rect":sk(e,n);break;case"text":ok(e,n);break;case"image":lk(e,n);break}})},uk=(e,t)=>{for(let n=e.length-1;n>=0;n--){const r=e[n],{x:i,y:s,width:o=100,height:l=60}=r;if(t.x>=i&&t.x<=i+o&&t.y>=s&&t.y<=s+l)return r}return null},Nh=(e,t)=>Math.round(e/t)*t,Nr=(e,t)=>({x:Nh(e.x,t),y:Nh(e.y,t)}),Ly=({shapes:e,setShapes:t,selectedId:n,setSelectedId:r,gridSize:i})=>{const s=g.useCallback(h=>{const m=Nr(h,i),_=typeof window.userId=="string"?window.userId:"anonymous",S=Date.now(),C={id:S.toString(),type:"rect",x:m.x,y:m.y,width:Kl,height:Kw,fill:Vw,color:"#000000",selected:!0,movable:!0,deletable:!0,resizable:!0,userId:_,updatedAt:S,updatedBy:_,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return t(k=>[...k,C]),Te({[`shapes/${C.id}`]:C}),C.id},[i,t]),o=g.useCallback((h,m="새 텍스트")=>{const _=Nr(h,i),S=typeof window.userId=="string"?window.userId:"anonymous",C=Date.now(),k={id:C.toString(),type:"text",x:_.x,y:_.y,width:150,height:60,content:m,backgroundColor:"#888888",opacity:.5,textAlign:"left",verticalAlign:"top",meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1},updatedAt:C,updatedBy:S};return t(T=>[...T,k]),Te({[`shapes/${k.id}`]:k}),k.id},[i,t]),l=g.useCallback((h,m)=>{const _=Nr(h,i),S=typeof window.userId=="string"?window.userId:"anonymous",C=Date.now(),k={id:C.toString(),type:"image",x:_.x,y:_.y,width:Kl,height:Kl,imageSrc:m,color:"#000000",selected:!0,movable:!0,deletable:!0,resizable:!0,userId:S,updatedAt:C,updatedBy:S,meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}};return t(T=>[...T,k]),Te({[`shapes/${k.id}`]:k}),k.id},[i,t]),a=g.useCallback(h=>{r(h)},[r]),u=g.useCallback(()=>{var S;if(!n)return;const h=e.find(C=>C.id===n);if(!((S=h==null?void 0:h.meta)!=null&&S.isDeletable))return;const m=typeof window.userId=="string"?window.userId:"anonymous",_=Date.now();t(C=>C.filter(k=>k.id!==n)),Te({[`shapes/${n}`]:{id:n,deleted:!0,updatedAt:_,updatedBy:m}}),r(null)},[e,n,r,t]),f=g.useCallback((h,m)=>{t(S=>S.map(C=>C.id===h?{...C,x:m.x,y:m.y}:C));const _=e.find(S=>S.id===h);_&&(_.type==="text"||_.type==="textbox"?Te({[`shapes/${h}`]:{..._,x:m.x,y:m.y,updatedAt:Date.now()}}):Te({[`shapes/${h}/x`]:m.x,[`shapes/${h}/y`]:m.y,[`shapes/${h}/updatedAt`]:Date.now()}))},[t,e]),c=g.useCallback(h=>{const m=e.find(k=>k.id===h);if(!m)return;const _=Date.now(),S=typeof window.userId=="string"?window.userId:"anonymous",C={...m,id:_.toString(),x:m.x+20,y:m.y+20,selected:!0,updatedAt:_,updatedBy:S};t(k=>[...k.map(T=>({...T,selected:!1})),C]),r(C.id),Te({[`shapes/${C.id}`]:{...C,selected:void 0}})},[e,t,r]),d=g.useCallback((h,m,_)=>{t(C=>C.map(k=>k.id===h?{...k,[m]:_}:k));const S=e.find(C=>C.id===h);S&&(S.type==="text"||S.type==="textbox"?Te({[`shapes/${h}`]:{...S,[m]:_,updatedAt:Date.now()}}):Te({[`shapes/${h}/${m}`]:_}))},[t,e]),y=g.useCallback(()=>{t(h=>h.map(m=>({...m,selected:!1}))),r(null)},[t,r]),v=g.useCallback(h=>{t(m=>{const _=m.findIndex(k=>k.id===h);if(_===-1||_===m.length-1)return m;const S=m[_],C=[...m];return C.splice(_,1),C.push(S),C})},[t]),x=g.useCallback(h=>{t(m=>{const _=m.findIndex(k=>k.id===h);if(_===-1||_===0)return m;const S=m[_],C=[...m];return C.splice(_,1),C.unshift(S),C})},[t]),E=g.useCallback(h=>{t(m=>{const _=m.findIndex(k=>k.id===h);if(_===-1||_===m.length-1)return m;const S=[...m],C=S[_];return S[_]=S[_+1],S[_+1]=C,S})},[t]),p=g.useCallback(h=>{t(m=>{const _=m.findIndex(k=>k.id===h);if(_===-1||_===0)return m;const S=[...m],C=S[_];return S[_]=S[_-1],S[_-1]=C,S})},[t]);return{createRect:s,createText:o,createImage:l,selectShape:a,deleteSelectedShape:u,moveShape:f,duplicateShape:c,updateShapeProperty:d,clearSelection:y,bringToFront:v,sendToBack:x,moveForward:E,moveBackward:p}},ck=20,My=({shapes:e,strokes:t,selectedId:n,setShapes:r,setStrokes:i,setSelectedId:s})=>{const[o,l]=g.useState([]),[a,u]=g.useState([]),f=g.useCallback(()=>({shapes:e,strokes:t,selectedId:n}),[e,t,n]),c=g.useCallback((C,k,T)=>{const z={id:Date.now().toString(),type:C,timestamp:Date.now(),beforeState:k,afterState:T};l(b=>{const M=[...b,z];return M.length>ck?M.slice(-20):M}),u([])},[]),d=g.useCallback(C=>{C.shapes!==void 0&&r(()=>C.shapes),C.strokes!==void 0&&i(()=>C.strokes),C.selectedId!==void 0&&s(C.selectedId)},[r,i,s]),y=g.useCallback(()=>{if(o.length===0)return!1;const C=o[o.length-1];return u(k=>[...k,{...C,beforeState:C.afterState,afterState:C.beforeState}]),l(k=>k.slice(0,-1)),d(C.beforeState),!0},[o,d]),v=g.useCallback(()=>{if(a.length===0)return!1;const C=a[a.length-1];return l(k=>[...k,{...C,beforeState:C.afterState,afterState:C.beforeState}]),u(k=>k.slice(0,-1)),d(C.afterState),!0},[a,d]),x=g.useCallback(C=>{c("CREATE_SHAPE",{shapes:e},{shapes:[...e,C]})},[e,c]),E=g.useCallback(C=>{e.find(T=>T.id===C)&&c("DELETE_SHAPE",{shapes:e,selectedId:n},{shapes:e.filter(T=>T.id!==C),selectedId:null})},[e,n,c]),p=g.useCallback((C,k,T)=>{c("UPDATE_SHAPE",{shapes:e},{shapes:e.map(z=>z.id===C?T:z)})},[e,c]),h=g.useCallback(C=>{c("CREATE_STROKE",{strokes:t},{strokes:[...t,C]})},[t,c]),m=g.useCallback(C=>{C.length!==0&&c("DELETE_STROKE",{strokes:t},{strokes:t.filter(k=>!C.some(T=>T.id===k.id))})},[t,c]),_=g.useCallback((C,k)=>{c("BATCH",C,k)},[c]),S=g.useCallback(()=>{l([]),u([])},[]);return{canUndo:o.length>0,canRedo:a.length>0,undoStackSize:o.length,redoStackSize:a.length,undo:y,redo:v,recordCreateShape:x,recordDeleteShape:E,recordUpdateShape:p,recordCreateStroke:h,recordDeleteStrokes:m,recordBatchAction:_,clearHistory:S,getCurrentState:f}},md=({shapes:e,strokes:t,selectedId:n,setShapes:r,setStrokes:i,setSelectedId:s,onClearHistory:o,silent:l=!1})=>{const a=g.useCallback(()=>{const p={shapes:e,strokes:t,selectedId:n,timestamp:Date.now()};return console.log("[useBoardStorage] getCurrentBoardState",p),p},[e,t,n]),u=g.useCallback(p=>{console.log("[useBoardStorage] restoreBoardState",p),r(p.shapes||[]),i(Array.isArray(p.strokes)?p.strokes:p.strokes?Object.values(p.strokes):[]),s(p.selectedId||null),o&&o()},[r,i,s,o]),f=g.useCallback((p,h="board-push-state")=>{try{return localStorage.setItem(h,JSON.stringify(p)),console.log("[useBoardStorage] localStorage 저장 성공",h,p),!0}catch(m){return console.error("[useBoardStorage] localStorage 저장 실패:",m),!1}},[]),c=g.useCallback((p="board-push-state")=>{try{const h=localStorage.getItem(p);if(h){const m=JSON.parse(h);return console.log("[useBoardStorage] localStorage 불러오기 성공",p,m),m}}catch(h){console.error("[useBoardStorage] localStorage 불러오기 실패:",h)}return null},[]),d=g.useCallback(()=>{const p=a(),h=JSON.stringify(p,null,2),m=new Blob([h],{type:"application/json"}),_=document.createElement("a");_.href=URL.createObjectURL(m),_.download=`board-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,_.click(),l||alert("보드가 파일로 저장되었습니다.")},[a,l]),y=g.useCallback(()=>{const p=document.createElement("input");p.type="file",p.accept=".json",p.onchange=h=>{var _;const m=(_=h.target.files)==null?void 0:_[0];if(m){const S=new FileReader;S.onload=C=>{var k;try{const T=JSON.parse((k=C.target)==null?void 0:k.result);u(T),l||alert("보드가 파일에서 불러와졌습니다.")}catch(T){console.error("파일 파싱 실패:",T),alert("올바르지 않은 파일 형식입니다.")}},S.readAsText(m)}},p.click()},[u,l]),v=g.useCallback(async()=>{const p=a();console.log("[useBoardStorage] pushToFirebase 호출",p);try{await Te(p),l||alert("✅ 현장으로 전송되었습니다."),console.log("[useBoardStorage] Firebase 푸시 성공")}catch{f(p,"board-push-state"),l||alert("⚠️ Firebase 연결 실패. 로컬에 임시 저장되었습니다."),console.warn("[useBoardStorage] Firebase 실패, localStorage에 백업")}},[a,l,f]),x=g.useCallback(()=>{const p=a();f(p,"board-push-state"),l||alert("관리자 상태가 저장되었습니다."),console.log("[useBoardStorage] pushToStorage 호출",p)},[a,f,l]),E=g.useCallback(()=>{const p=c("board-push-state");p?(u(p),l||alert("관리자 상태를 불러왔습니다."),console.log("[useBoardStorage] pullFromStorage 성공",p)):(l||alert("저장된 관리자 상태가 없습니다."),console.warn("[useBoardStorage] pullFromStorage: 저장된 상태 없음"))},[c,u,l]);return{saveToFile:d,loadFromFile:y,pushToFirebase:v,pushToStorage:x,pullFromStorage:E,getCurrentBoardState:a,restoreBoardState:u,saveToLocalStorage:f,loadFromLocalStorage:c}},Pe=[];for(let e=0;e<256;++e)Pe.push((e+256).toString(16).slice(1));function dk(e,t=0){return(Pe[e[t+0]]+Pe[e[t+1]]+Pe[e[t+2]]+Pe[e[t+3]]+"-"+Pe[e[t+4]]+Pe[e[t+5]]+"-"+Pe[e[t+6]]+Pe[e[t+7]]+"-"+Pe[e[t+8]]+Pe[e[t+9]]+"-"+Pe[e[t+10]]+Pe[e[t+11]]+Pe[e[t+12]]+Pe[e[t+13]]+Pe[e[t+14]]+Pe[e[t+15]]).toLowerCase()}let la;const fk=new Uint8Array(16);function hk(){if(!la){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");la=crypto.getRandomValues.bind(crypto)}return la(fk)}const pk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bh={randomUUID:pk};function mk(e,t,n){var i;if(bh.randomUUID&&!e)return bh.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??hk();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,dk(r)}const ku=(e,t,n="새 텍스트")=>({id:mk(),type:"text",x:e,y:t,width:150,height:60,content:n,backgroundColor:"#888888",opacity:.5,textAlign:"left",verticalAlign:"top",meta:{isMovable:!0,isDeletable:!0,isResizable:!0,isErasable:!1}}),gk=()=>{const[e,t]=g.useState(null),n=g.useCallback((o,l,a)=>{const u=ku(o,l,a);return t(u),u},[]),r=g.useCallback(o=>{e&&t(l=>l?{...l,...o}:null)},[e]),i=g.useCallback(()=>{t(null)},[]),s=g.useCallback(o=>{var a;const l=(a=o.clipboardData)==null?void 0:a.getData("text");if(l){const u=o.target.getBoundingClientRect(),f=o.clientX-u.left,c=o.clientY-u.top,d=ku(f,c,l);return d.textAlign="left",d.verticalAlign="top",d.opacity=.5,d.backgroundColor="#888888",n(f,c,l)}return null},[n]);return{selectedTextBox:e,createNewTextBox:n,updateTextBox:r,deselectTextBox:i,handlePaste:s}};function yk(e,t){let n=!1,r=null,i=0;return function(...s){n?(r&&clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=t&&(e(...s),i=Date.now())},t-(Date.now()-i))):(e(...s),i=Date.now(),n=!0)}}const vk=({shapes:e,selectedId:t,gridSize:n,showGrid:r,onSyncShapes:i})=>{const s=g.useRef(null),[o,l]=g.useState(null),a=g.useRef(i?yk(i,300):void 0).current;g.useEffect(()=>{const f=new Image;f.src="/floor.png",f.onload=()=>{l(f)}},[]);const u=g.useCallback((f,c,d)=>{f.fillStyle=qw,f.strokeStyle="#ffffff",f.lineWidth=1,f.fillRect(c-jt/2,d-jt/2,jt,jt),f.strokeRect(c-jt/2,d-jt/2,jt,jt)},[]);return g.useEffect(()=>{var y;const f=s.current;if(!f)return;const c=f.getContext("2d");if(!c)return;Ay(c),o&&c.drawImage(o,0,0,Jt,Zt),r&&nk(c,n);const d=e.map(v=>({...v,selected:v.id===t}));if(ak(c,d),t){const v=e.find(x=>x.id===t);if((y=v==null?void 0:v.meta)!=null&&y.isResizable){const{x,y:E,width:p=100,height:h=60}=v;u(c,x+p/2,E),u(c,x,E),u(c,x+p,E),u(c,x,E+h/2),u(c,x+p,E+h/2),u(c,x+p/2,E+h),u(c,x,E+h),u(c,x+p,E+h)}}a&&a(e)},[e,t,n,r,u,a,o]),w.jsx("canvas",{ref:s,width:Jt,height:Zt,style:{position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none"}})},_k=({strokes:e})=>{const t=g.useRef(null);return g.useEffect(()=>{const n=t.current;if(!n)return;const r=n.getContext("2d");r&&(Ay(r),ik(r,e))},[e]),w.jsx("canvas",{ref:t,width:Jt,height:Zt,style:{position:"absolute",top:0,left:0,zIndex:2,pointerEvents:"auto",touchAction:"none"}})},wk=({tool:e,shapes:t,gridSize:n,selectedId:r,onToolChange:i,onStartStroke:s,onAddPointToStroke:o,onFinishStroke:l,onEraseAtPoint:a,onSelectShape:u,onCreateRect:f,currentStrokeId:c,onDeleteSelectedShape:d,onDuplicateSelectedShape:y,onMoveShape:v,onResizeShape:x,onEditEnd:E,setShapes:p,isEditingRef:h})=>{const m=g.useRef(null),_=g.useRef(!1),S=g.useRef(null),C=g.useRef(null),k=g.useRef(!1),T=g.useRef(null),z=g.useRef(null),b=g.useRef(null),M=g.useRef(!1),$=g.useRef(null),A=g.useRef(null),R=g.useRef(null),U=g.useRef(t);g.useEffect(()=>{U.current=t},[t]);const G=g.useCallback((K,V)=>{p&&p(j=>j.map(D=>D.id===K?{...D,x:V.x,y:V.y}:D))},[p]),ce=g.useCallback((K,V)=>{p&&p(j=>j.map(D=>D.id===K?{...D,...V}:D))},[p]),P=g.useCallback(()=>{C.current&&clearTimeout(C.current),(e==="pen"||e==="eraser")&&(C.current=window.setTimeout(()=>{i&&i("select")},Gw))},[e,i]),B=g.useCallback(()=>{C.current&&(clearTimeout(C.current),C.current=null)},[]),W=g.useCallback((K,V)=>{const j=m.current;if(!j)return{x:0,y:0};const D=j.getBoundingClientRect(),O=Jt/D.width,F=Zt/D.height;return{x:(K-D.left)*O,y:(V-D.top)*F}},[]),Z=g.useCallback((K,V)=>{const{x:j,y:D,width:O=100,height:F=60}=V,Q=jt,se={"top-left":{x:j,y:D},top:{x:j+O/2,y:D},"top-right":{x:j+O,y:D},left:{x:j,y:D+F/2},right:{x:j+O,y:D+F/2},"bottom-left":{x:j,y:D+F},bottom:{x:j+O/2,y:D+F},"bottom-right":{x:j+O,y:D+F}};for(const[je,Nt]of Object.entries(se))if(K.x>=Nt.x-Q/2&&K.x<=Nt.x+Q/2&&K.y>=Nt.y-Q/2&&K.y<=Nt.y+Q/2)return je;return null},[]),te=g.useCallback(K=>{u(K),i("select")},[u,i]),ut=g.useCallback(K=>{var j,D;const V=W(K.clientX,K.clientY);switch(e){case"pen":_.current=!0,S.current=V,h&&(h.current=!0),s(V),P();break;case"eraser":_.current=!0,h&&(h.current=!0),a(V),typeof l=="function"&&l(),P();break;case"select":const O=uk(t,V);if(O){if(u(O.id),(j=O.meta)!=null&&j.isResizable){const se=Z(V,O);se&&(M.current=!0,$.current=V,b.current=O,R.current=se,A.current={width:O.width||100,height:O.height||60})}!M.current&&((D=O.meta)==null?void 0:D.isMovable)!==!1&&v&&(k.current=!0,T.current=V,b.current=O,z.current={x:O.x,y:O.y})}else u(null);break;case"rect":const F=Nr(V,n),Q=f(F);te(Q);break;case"text":{const se=Nr(V,n),je=ku(se.x,se.y);p(Nt=>[...Nt,je]),u(je.id),i("select");break}}K.preventDefault()},[e,t,n,s,a,u,f,i,W,P,v,Z,te,h]),nt=g.useCallback(K=>{const V=W(K.clientX,K.clientY);switch(e){case"pen":_.current&&c&&S.current&&Math.sqrt(Math.pow(V.x-S.current.x,2)+Math.pow(V.y-S.current.y,2))>2&&(o(c,V),S.current=V,P());break;case"eraser":_.current&&(a(V),typeof l=="function"&&l(),P());break;case"select":if(M.current&&b.current&&$.current&&A.current){const j=V.x-$.current.x,D=V.y-$.current.y,O=R.current;let F=A.current.width,Q=A.current.height,se=b.current.x,je=b.current.y;switch(O){case"top-left":F=Math.max(50,A.current.width-j),Q=Math.max(50,A.current.height-D),se=b.current.x+(A.current.width-F),je=b.current.y+(A.current.height-Q);break;case"top":Q=Math.max(50,A.current.height-D),je=b.current.y+(A.current.height-Q);break;case"top-right":F=Math.max(50,A.current.width+j),Q=Math.max(50,A.current.height-D),je=b.current.y+(A.current.height-Q);break;case"left":F=Math.max(50,A.current.width-j),se=b.current.x+(A.current.width-F);break;case"right":F=Math.max(50,A.current.width+j);break;case"bottom-left":F=Math.max(50,A.current.width-j),Q=Math.max(50,A.current.height+D),se=b.current.x+(A.current.width-F);break;case"bottom":Q=Math.max(50,A.current.height+D);break;case"bottom-right":F=Math.max(50,A.current.width+j),Q=Math.max(50,A.current.height+D);break}const Nt=Math.round(F/n)*n,vl=Math.round(Q/n)*n,_l=Math.round(se/n)*n,wl=Math.round(je/n)*n;ce(b.current.id,{width:Nt,height:vl,x:_l,y:wl})}else if(k.current&&b.current&&T.current&&z.current){const j=V.x-T.current.x,D=V.y-T.current.y,O={x:z.current.x+j,y:z.current.y+D};G(b.current.id,O)}break}K.preventDefault()},[e,c,o,a,W,P,n,G,ce]),Ft=g.useCallback(K=>{switch(e){case"pen":_.current&&(_.current=!1,S.current=null,h&&(h.current=!1),l(),P());break;case"eraser":_.current&&(_.current=!1,h&&(h.current=!1),typeof l=="function"&&l(),P());break;case"select":if(M.current){if(b.current&&$.current&&A.current&&x){const V=W(K.clientX,K.clientY),j=V.x-$.current.x,D=V.y-$.current.y,O=R.current;let F=A.current.width,Q=A.current.height,se=b.current.x,je=b.current.y;switch(O){case"top-left":F=Math.max(50,A.current.width-j),Q=Math.max(50,A.current.height-D),se=b.current.x+(A.current.width-F),je=b.current.y+(A.current.height-Q);break;case"top":Q=Math.max(50,A.current.height-D),je=b.current.y+(A.current.height-Q);break;case"top-right":F=Math.max(50,A.current.width+j),Q=Math.max(50,A.current.height-D),je=b.current.y+(A.current.height-Q);break;case"left":F=Math.max(50,A.current.width-j),se=b.current.x+(A.current.width-F);break;case"right":F=Math.max(50,A.current.width+j);break;case"bottom-left":F=Math.max(50,A.current.width-j),Q=Math.max(50,A.current.height+D),se=b.current.x+(A.current.width-F);break;case"bottom":Q=Math.max(50,A.current.height+D);break;case"bottom-right":F=Math.max(50,A.current.width+j),Q=Math.max(50,A.current.height+D);break}const Nt=Math.round(F/n)*n,vl=Math.round(Q/n)*n,_l=Math.round(se/n)*n,wl=Math.round(je/n)*n;x(b.current.id,{width:Nt,height:vl,x:_l,y:wl})}M.current=!1,$.current=null,A.current=null,R.current=null,E&&E(U.current)}else if(k.current&&b.current&&v){const V=U.current.find(j=>j.id===b.current.id);if(V){const j=Nr({x:V.x,y:V.y},n);v(b.current.id,j)}k.current=!1,T.current=null,z.current=null,b.current=null,E&&E(U.current)}break}K.preventDefault()},[e,l,P,v,n,E,W,x,h]);return g.useEffect(()=>{const K=j=>{var F;const D=document.activeElement;if(!(D&&(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.getAttribute("contenteditable")==="true"||D.getAttribute("contenteditable")==="")&&(j.key==="Delete"||j.key==="Backspace"))){if(j.ctrlKey||j.metaKey){switch(j.key.toLowerCase()){case"d":j.preventDefault(),r&&y&&y();break}return}switch(j.key){case"Escape":j.preventDefault(),u(null),i("select");break;case"Delete":case"Backspace":if(j.preventDefault(),r&&d){const Q=t.find(se=>se.id===r);((F=Q==null?void 0:Q.meta)==null?void 0:F.isDeletable)!==!1&&d()}break;case"1":j.preventDefault(),i("select");break;case"2":j.preventDefault(),i("pen");break;case"3":j.preventDefault(),i("eraser");break;case"4":j.preventDefault(),i("rect");break}}},V=m.current;return V&&(V.tabIndex=0),window.addEventListener("keydown",K),()=>{window.removeEventListener("keydown",K)}},[r,t,u,i,d,y]),g.useEffect(()=>()=>{B()},[B]),w.jsx("canvas",{ref:m,width:Jt,height:Zt,style:{position:"absolute",top:0,left:0,zIndex:3,pointerEvents:"auto",cursor:e==="pen"?"crosshair":e==="eraser"?"pointer":e==="select"?"default":e==="rect"?"crosshair":"default",outline:"none"},onPointerDown:ut,onPointerMove:nt,onPointerUp:Ft,onPointerLeave:Ft})},xk=({textBox:e,onUpdate:t})=>{const n=l=>{t({content:l.target.value})},r=l=>{t({backgroundColor:l.target.value})},i=l=>{t({opacity:parseFloat(l.target.value)})},s=l=>{t({textAlign:l})},o=l=>{t({verticalAlign:l})};return w.jsxs("div",{className:"text-box-panel",children:[w.jsxs("div",{className:"panel-section",children:[w.jsx("label",{children:"텍스트 내용"}),w.jsx("textarea",{value:e.content??"",onChange:n,rows:3})]}),w.jsxs("div",{className:"panel-section",children:[w.jsx("label",{children:"배경색"}),w.jsx("input",{type:"color",value:e.backgroundColor??"#888888",onChange:r})]}),w.jsxs("div",{className:"panel-section",children:[w.jsx("label",{children:"투명도"}),w.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:typeof e.opacity=="number"&&!isNaN(e.opacity)?e.opacity:.5,onChange:i}),w.jsxs("span",{children:[Math.round((typeof e.opacity=="number"&&!isNaN(e.opacity)?e.opacity:.5)*100),"%"]})]}),w.jsxs("div",{className:"panel-section",children:[w.jsx("label",{children:"수평 정렬"}),w.jsxs("div",{className:"alignment-buttons",children:[w.jsx("button",{onClick:()=>s("left"),className:e.textAlign==="left"?"active":"",title:"왼쪽 정렬",children:"⇤"}),w.jsx("button",{onClick:()=>s("center"),className:e.textAlign==="center"?"active":"",title:"가운데 정렬",children:"⇔"}),w.jsx("button",{onClick:()=>s("right"),className:e.textAlign==="right"?"active":"",title:"오른쪽 정렬",children:"⇥"})]})]}),w.jsxs("div",{className:"panel-section",children:[w.jsx("label",{children:"수직 정렬"}),w.jsxs("div",{className:"alignment-buttons",children:[w.jsx("button",{onClick:()=>o("top"),className:e.verticalAlign==="top"?"active":"",title:"위 정렬",children:"⇧"}),w.jsx("button",{onClick:()=>o("middle"),className:e.verticalAlign==="middle"?"active":"",title:"가운데 정렬",children:"⇕"}),w.jsx("button",{onClick:()=>o("bottom"),className:e.verticalAlign==="bottom"?"active":"",title:"아래 정렬",children:"⇩"})]})]})]})},Oy=({tool:e,shapes:t,strokes:n,penColor:r,penSize:i,gridSize:s,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u,onUndoRedoStateChange:f,onSave:c,onLoad:d,onPushPull:y,onCommand:v,onToolChange:x,showGrid:E=!0,onMoveShape:p,onResizeShape:h,userId:m})=>{const[_,S]=g.useState(null),[C,k]=g.useState(null),T=g.useRef(t),z=g.useRef(l),{selectedTextBox:b,updateTextBox:M,handlePaste:$}=gk();g.useEffect(()=>{T.current=t,z.current=l},[t,l]);const A=g.useCallback((D,O)=>{var F,Q;p&&"x"in O&&"y"in O&&p(D,{x:O.x,y:O.y}),h&&("width"in O||"height"in O)&&h(D,{width:O.width||((F=T.current.find(se=>se.id===D))==null?void 0:F.width)||100,height:O.height||((Q=T.current.find(se=>se.id===D))==null?void 0:Q.height)||60,x:O.x,y:O.y})},[p,h]),R=My({shapes:t,strokes:n,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u}),U=md({shapes:t,strokes:n,selectedId:o,setShapes:l,setStrokes:a,setSelectedId:u,onClearHistory:R.clearHistory}),G=tk({setStrokes:a,penColor:r,penSize:i}),ce=Ly({shapes:t,setShapes:l,selectedId:o,setSelectedId:u,gridSize:s});Wn.useEffect(()=>{f&&f(R.canUndo,R.canRedo)},[R.canUndo,R.canRedo,f]);const P=g.useCallback(D=>{const O=G.startStroke(D,e,m);k(O);const F={id:O,tool:e,points:[D],color:r,size:i,isErasable:!0,updatedAt:Date.now(),updatedBy:m,userId:m};return S(F),O},[G,r,i,e,m]),B=g.useCallback((D,O)=>{G.addPointToStroke(D,O),_&&_.id===D&&S(F=>F?{...F,points:[...F.points,O]}:null)},[G,_]),W=g.useCallback(()=>{_&&R.recordCreateStroke(_),G.saveStrokesOnDrawEnd(n),S(null),k(null)},[_,R,G,n]),Z=g.useCallback(D=>{const O=[...n];G.eraseAtPoint(D),setTimeout(()=>{const F=n,Q=O.filter(se=>!F.some(je=>je.id===se.id));Q.length>0&&R.recordDeleteStrokes(Q)},0)},[n,G,R]),te=g.useCallback(()=>{var O;if(!o)return;const D=t.find(F=>F.id===o);!D||((O=D.meta)==null?void 0:O.isDeletable)===!1||(R.recordDeleteShape(o),ce.deleteSelectedShape())},[o,t,R,ce]),ut=g.useCallback(()=>{o&&(ce.duplicateShape(o),setTimeout(()=>{const D=R.getCurrentState();R.recordBatchAction(R.getCurrentState(),D)},0))},[o,ce,R]),nt=g.useCallback(D=>{const O=ce.createRect(D);return setTimeout(()=>{const F=t.find(Q=>Q.id===O);F&&R.recordCreateShape(F)},0),x&&x("select"),O},[ce,t,R,x]),Ft=g.useCallback(D=>{switch(D){case"save":U.saveToFile(),c&&c();break;case"load":U.loadFromFile(),d&&d();break;case"push":U.pushToStorage(),y&&y("push");break;case"pull":U.pullFromStorage(),y&&y("pull");break;case"undo":R.undo();break;case"redo":R.redo();break}},[U,R,c,d,y]);Wn.useEffect(()=>{v&&typeof v=="string"&&Ft(v)},[v,Ft]);const K=g.useCallback(()=>{const D=window.innerWidth-40,O=window.innerHeight-40,F=D/Jt,Q=O/Zt;return{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${Math.min(F,Q,1)})`,transformOrigin:"center",width:`${Jt}px`,height:`${Zt}px`,border:"1px solid #ccc",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",backgroundColor:"white"}},[]),V=g.useRef(null);g.useEffect(()=>{V.current&&(window.clearTimeout(V.current),V.current=null)},[e]);const j=D=>{if(e==="text"){const O=$(D);O&&(l(F=>[...F,O]),u(O.id))}};return g.useEffect(()=>{const D=O=>{b&&(O.key==="Delete"||O.key==="Backspace")&&O.preventDefault()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[b]),g.useEffect(()=>(document.addEventListener("paste",j),()=>{document.removeEventListener("paste",j)}),[e]),g.useEffect(()=>{console.log("[툴바] 현재 tool 상태:",e)},[e]),w.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#f5f5f5",overflow:"hidden"},children:w.jsxs("div",{style:K(),children:[w.jsx(vk,{shapes:t,selectedId:o,gridSize:s,showGrid:E}),w.jsx(_k,{strokes:n}),w.jsx(wk,{tool:e,shapes:t,penColor:r,penSize:i,gridSize:s,selectedId:o,onToolChange:x,onStartStroke:P,onAddPointToStroke:B,onFinishStroke:W,onEraseAtPoint:Z,onSelectShape:ce.selectShape,onCreateRect:nt,currentStrokeId:C,onDeleteSelectedShape:te,onDuplicateSelectedShape:ut,onMoveShape:A,onResizeShape:A,setShapes:l}),b&&w.jsx("div",{className:"side-panel",children:w.jsx(xk,{textBox:b,onUpdate:D=>{M(D),l(O=>O.map(F=>F.id===b.id?{...F,...D}:F))}})})]})})},Ck=({currentTool:e,onToolChange:t,onCommand:n,gridSize:r,onGridSizeChange:i,penColor:s,onPenColorChange:o,penSize:l,onPenSizeChange:a,showGrid:u=!1,onShowGridChange:f})=>{const[c,d]=g.useState(!1),y=[16,40,64,100,128],v=[[{command:"select",label:"선택",icon:"👆"},{command:"pen",label:"펜",icon:"✏️"},{command:"eraser",label:"지우개",icon:"🧹"}],[{command:"image",label:"이미지",icon:"🖼️"},{command:"text",label:"텍스트",icon:"🅰️"},{command:"rect",label:"사각형",icon:"⬜"}]],x=[{command:"undo",label:"실행취소",icon:"↩️"},{command:"redo",label:"다시실행",icon:"↪️"}],E=[{command:"save",label:"저장",icon:"💾"},{command:"load",label:"불러오기",icon:"📁"}],p=()=>{const h=document.createElement("input");h.type="file",h.accept="image/*",h.onchange=m=>{var S;const _=(S=m.target.files)==null?void 0:S[0];if(_){const C=new FileReader;C.onload=k=>{var z;((z=k.target)==null?void 0:z.result)&&typeof n=="function"&&n("image")},C.readAsDataURL(_)}},h.click()};return w.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},children:w.jsxs("div",{style:{position:"absolute",top:"20px",left:"20px",width:"280px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",padding:"16px",display:"flex",flexDirection:"column",gap:"16px",pointerEvents:"auto"},children:[w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[w.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:"그리기 도구"}),v.map((h,m)=>w.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start",marginBottom:m===0?"6px":0},children:h.map(({command:_,label:S,icon:C})=>w.jsxs("button",{onClick:_==="image"?p:()=>t(_),style:{padding:"14px 0 8px 0",border:e===_?"2px solid #0066ff":"1px solid #ccc",borderRadius:"10px",backgroundColor:e===_?"#f0f8ff":"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"54px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:S,children:[w.jsx("span",{style:{fontSize:"24px"},children:C}),w.jsx("span",{children:S})]},_))},m))]}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[w.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:"펜 설정"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#555",minWidth:"40px"},children:"색상:"}),w.jsx("input",{type:"color",value:s,onChange:h=>o==null?void 0:o(h.target.value),style:{width:"40px",height:"40px",border:"1px solid #ccc",borderRadius:"8px",padding:"2px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#555",minWidth:"40px"},children:"크기:"}),w.jsx("input",{type:"range",min:"1",max:"20",value:l,onChange:h=>a==null?void 0:a(Number(h.target.value)),style:{flex:1}}),w.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"#555",minWidth:"24px",textAlign:"right"},children:l})]})]})]}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[w.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:"명령"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[w.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:x.map(({command:h,label:m,icon:_})=>w.jsxs("button",{onClick:()=>n(h),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:m,children:[w.jsx("span",{style:{fontSize:"22px"},children:_}),w.jsx("span",{children:m})]},h))}),w.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:E.map(({command:h,label:m,icon:_})=>w.jsxs("button",{onClick:()=>n(h),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",boxSizing:"border-box",fontWeight:600},title:m,children:[w.jsx("span",{style:{fontSize:"22px"},children:_}),w.jsx("span",{children:m})]},h))})]})]}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[w.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#555",marginBottom:"2px"},children:"기타"}),w.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start"},children:w.jsxs("div",{style:{position:"relative",flex:1,minWidth:"90px"},children:[w.jsxs("button",{onClick:()=>d(!c),style:{padding:"12px 0 8px 0",border:"1.5px solid #ccc",borderRadius:"10px",backgroundColor:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",fontSize:"14px",minWidth:"62px",minHeight:"62px",width:"100%",boxSizing:"border-box",fontWeight:600},title:`그리드 (현재: ${r}px)`,children:[w.jsx("span",{style:{fontSize:"22px"},children:"⚏"}),w.jsx("span",{children:"그리드"}),w.jsxs("span",{style:{fontSize:"11px",color:"#888"},children:[r,"px"]})]}),c&&w.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1.5px solid #ccc",borderRadius:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:1001,marginTop:"2px"},children:[w.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[w.jsx("span",{style:{fontSize:"14px",color:"#333"},children:"그리드 표시"}),w.jsxs("label",{style:{position:"relative",display:"inline-block",width:"40px",height:"20px"},children:[w.jsx("input",{type:"checkbox",checked:u,onChange:h=>f==null?void 0:f(h.target.checked),style:{opacity:0,width:0,height:0}}),w.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:u?"#0066ff":"#ccc",transition:".4s",borderRadius:"20px"},children:w.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",transition:".4s",borderRadius:"50%",transform:u?"translateX(20px)":"translateX(0)"}})})]})]}),y.map(h=>w.jsxs("button",{onClick:()=>{i==null||i(h),d(!1)},style:{width:"100%",padding:"12px",border:"none",backgroundColor:r===h?"#f0f8ff":"white",color:r===h?"#0066ff":"#333",cursor:"pointer",fontSize:"14px",textAlign:"left",borderBottom:"1px solid #eee"},children:[h,"px"]},h))]})]})})]})]})})},Ek=({selectedShape:e,onUpdateShape:t,onDeleteShape:n,onDuplicateShape:r,onBringToFront:i,onSendToBack:s,onMoveForward:o,onMoveBackward:l})=>{var a,u,f,c,d,y,v,x;return e?w.jsxs("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:1e3,backgroundColor:"white",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",minWidth:"200px"},children:[w.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px",color:"#333"},children:"객체 속성"}),w.jsxs("div",{style:{marginBottom:"15px"},children:[w.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"기본 정보"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"타입:"}),w.jsx("span",{style:{fontSize:"11px",color:"#666"},children:e.type})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"X:"}),w.jsx("input",{type:"number",value:e.x,onChange:E=>t("x",Number(E.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"Y:"}),w.jsx("input",{type:"number",value:e.y,onChange:E=>t("y",Number(E.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"폭:"}),w.jsx("input",{type:"number",value:e.width||100,onChange:E=>t("width",Number(E.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"높이:"}),w.jsx("input",{type:"number",value:e.height||60,onChange:E=>t("height",Number(E.target.value)),style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]})]})]}),e.type==="rect"&&w.jsxs("div",{style:{marginBottom:"15px"},children:[w.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"사각형 설정"}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"배경:"}),w.jsx("input",{type:"color",value:e.fill||"#ffffff",onChange:E=>t("fill",E.target.value),style:{width:"30px",height:"20px",border:"none",borderRadius:"3px"}})]})]}),e.type==="text"&&w.jsxs("div",{style:{marginBottom:"15px"},children:[w.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"텍스트 설정"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"내용:"}),w.jsx("input",{type:"text",value:e.text||"Text",onChange:E=>t("text",E.target.value),style:{flex:1,padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"크기:"}),w.jsx("input",{type:"number",value:e.fontSize||16,onChange:E=>t("fontSize",Number(E.target.value)),min:"8",max:"72",style:{width:"60px",padding:"2px 4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"스타일:"}),w.jsxs("div",{style:{display:"flex",gap:"5px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px"},children:[w.jsx("input",{type:"checkbox",checked:e.fontWeight==="bold",onChange:E=>t("fontWeight",E.target.checked?"bold":"normal")}),"Bold"]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"11px"},children:[w.jsx("input",{type:"checkbox",checked:e.fontStyle==="italic",onChange:E=>t("fontStyle",E.target.checked?"italic":"normal")}),"Italic"]})]})]}),e.fill!==void 0&&w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx("label",{style:{fontSize:"11px",width:"40px"},children:"배경:"}),w.jsx("input",{type:"color",value:e.fill||"#ffffff",onChange:E=>t("fill",E.target.value),style:{width:"30px",height:"20px",border:"none",borderRadius:"3px"}})]})]})]}),w.jsxs("div",{style:{marginBottom:"15px"},children:[w.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"권한 설정"}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[w.jsx("input",{type:"checkbox",checked:((a=e.meta)==null?void 0:a.isMovable)!==!1,onChange:E=>t("meta",{...e.meta,isMovable:E.target.checked})}),"이동 가능"]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[w.jsx("input",{type:"checkbox",checked:((u=e.meta)==null?void 0:u.isDeletable)!==!1,onChange:E=>t("meta",{...e.meta,isDeletable:E.target.checked})}),"삭제 가능"]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[w.jsx("input",{type:"checkbox",checked:((f=e.meta)==null?void 0:f.isResizable)!==!1,onChange:E=>t("meta",{...e.meta,isResizable:E.target.checked})}),"크기 조절 가능"]}),w.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px"},children:[w.jsx("input",{type:"checkbox",checked:((c=e.meta)==null?void 0:c.isErasable)===!0,onChange:E=>t("meta",{...e.meta,isErasable:E.target.checked})}),"지우개로 삭제 가능"]})]})]}),w.jsxs("div",{style:{marginBottom:"15px"},children:[w.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"5px"},children:"레이어 정렬"}),w.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px"},children:[w.jsx("button",{onClick:()=>i==null?void 0:i(e.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"맨 앞으로"}),w.jsx("button",{onClick:()=>s==null?void 0:s(e.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"맨 뒤로"}),w.jsx("button",{onClick:()=>o==null?void 0:o(e.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"앞으로"}),w.jsx("button",{onClick:()=>l==null?void 0:l(e.id),style:{padding:"6px 4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},children:"뒤로"})]})]}),w.jsxs("div",{style:{display:"flex",gap:"8px"},children:[w.jsx("button",{onClick:r,style:{flex:1,padding:"6px 8px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:"복제"}),w.jsx("button",{onClick:n,disabled:((d=e.meta)==null?void 0:d.isDeletable)===!1,style:{flex:1,padding:"6px 8px",fontSize:"11px",border:"1px solid #ff4444",borderRadius:"4px",backgroundColor:((y=e.meta)==null?void 0:y.isDeletable)===!1?"#f5f5f5":"#ffe6e6",color:((v=e.meta)==null?void 0:v.isDeletable)===!1?"#ccc":"#ff4444",cursor:((x=e.meta)==null?void 0:x.isDeletable)===!1?"not-allowed":"pointer"},children:"삭제"})]})]}):null},Fy=e=>({onDrawEnd:e.onDrawEnd,onMoveShape:e.onMoveShape,onResizeShape:e.onResizeShape,onUpdateShape:e.onUpdateShape,onDeleteShape:e.onDeleteShape});function Sk(e,t){const n=new Map;for(const r of e)!r.id||!r.updatedAt||n.set(r.id,r);for(const r of t){if(!r.id||!r.updatedAt)continue;const i=n.get(r.id);if(r.deleted){(!i||r.updatedAt&&(!i.updatedAt||r.updatedAt>i.updatedAt))&&n.delete(r.id);continue}(!i||r.updatedAt&&(!i.updatedAt||r.updatedAt>i.updatedAt))&&n.set(r.id,r)}return Array.from(n.values())}const kk=()=>{const[e,t]=g.useState("select"),[n,r]=g.useState([]),[i,s]=g.useState([]),[o,l]=g.useState(null),[a,u]=g.useState(sg),[f,c]=g.useState(og),[d,y]=g.useState(lg),[v,x]=g.useState(!1),E=n.find(M=>M.id===o)||null,p=My({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l}),h=md({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onClearHistory:p.clearHistory}),m=Ly({shapes:n,setShapes:r,selectedId:o,setSelectedId:l,gridSize:d}),_=Wn.useMemo(()=>Fy({onDrawEnd:()=>{He()&&pd(i)},onMoveShape:(M,$)=>{if(He()){const A="admin";Te({[`shapes/${M}/x`]:$.x,[`shapes/${M}/y`]:$.y,[`shapes/${M}/updatedAt`]:Date.now(),[`shapes/${M}/updatedBy`]:A})}},onResizeShape:(M,$)=>{if(He()){const A="admin";Te({[`shapes/${M}/width`]:$.width,[`shapes/${M}/height`]:$.height,...$.x!==void 0?{[`shapes/${M}/x`]:$.x}:{},...$.y!==void 0?{[`shapes/${M}/y`]:$.y}:{},[`shapes/${M}/updatedAt`]:Date.now(),[`shapes/${M}/updatedBy`]:A})}},onUpdateShape:(M,$,A)=>{if(He()){if($==="selected")return;const R="admin";Te({[`shapes/${M}/${$}`]:A,[`shapes/${M}/updatedAt`]:Date.now(),[`shapes/${M}/updatedBy`]:R})}},onDeleteShape:M=>{if(He()){const $="admin";Te({[`shapes/${M}`]:{id:M,deleted:!0,updatedAt:Date.now(),updatedBy:$}})}}}),[i]),S=g.useCallback(M=>{t(M)},[]),C=g.useCallback(M=>{y(M)},[]),k=g.useCallback(M=>{switch(M){case"text":const $=m.createText({x:1080,y:1920},"새 텍스트");p.recordCreateShape(n.find(G=>G.id===$)),t("select");break;case"image":const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=G=>{var P;const ce=(P=G.target.files)==null?void 0:P[0];if(ce){const B=new FileReader;B.onload=W=>{var te;const Z=(te=W.target)==null?void 0:te.result;if(Z){const ut=m.createImage({x:1080,y:1920},Z);p.recordCreateShape(n.find(nt=>nt.id===ut)),t("select")}},B.readAsDataURL(ce)}},A.click();break;case"save":h.saveToFile();break;case"load":h.loadFromFile();break;case"push":h.pushToFirebase();break;case"pull":h.pullFromStorage();break;case"undo":p.undo();break;case"redo":p.redo();break;case"settings":const R=prompt("펜 색상을 입력하세요 (예: #FF0000):",a);R&&u(R);const U=prompt("펜 크기를 입력하세요 (1-20):",f.toString());if(U){const G=parseInt(U);!isNaN(G)&&G>=1&&G<=20&&c(G)}break}},[m,p,h,n,a,f]),T=g.useCallback((M,$)=>{var R;if(!o)return;const A=n.find(U=>U.id===o);A&&(m.updateShapeProperty(o,M,$),(R=_.onUpdateShape)==null||R.call(_,o,M,$),setTimeout(()=>{const U=n.find(G=>G.id===o);U&&p.recordUpdateShape(o,A,U)},0))},[o,m,n,p,_]),z=g.useCallback(()=>{if(!o)return;p.recordDeleteShape(o),m.deleteSelectedShape();const M=_==null?void 0:_.onDeleteShape;typeof M=="function"&&M(o)},[o,p,m,_]),b=g.useCallback(()=>{if(!o)return;const M=p.getCurrentState();m.duplicateShape(o),setTimeout(()=>{const $=p.getCurrentState();p.recordBatchAction(M,$)},0)},[o,m,p]);return g.useEffect(()=>{if(!He())return;const M=Dy($=>{$.type==="shapes"?r(A=>Sk(A,$.shapes)):$.type==="strokes"&&s($.strokes)},$=>{console.warn("[AdminPage] Firebase 실시간 구독 오류",$)});return()=>M()},[]),w.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",backgroundColor:"#f5f5f5",margin:0,padding:0,overflow:"hidden"},children:[w.jsx("div",{style:{position:"absolute",top:"20px",right:"280px",zIndex:1001,padding:"8px 16px",backgroundColor:"#007acc",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"bold"},children:"관리자 화면"}),w.jsx(Ck,{currentTool:e,onToolChange:S,onCommand:k,gridSize:d,onGridSizeChange:C,penColor:a,onPenColorChange:u,penSize:f,onPenSizeChange:c,showGrid:v,onShowGridChange:x}),w.jsx(Ek,{selectedShape:E,onUpdateShape:T,onDeleteShape:z,onDuplicateShape:b,onBringToFront:m.bringToFront,onSendToBack:m.sendToBack,onMoveForward:m.moveForward,onMoveBackward:m.moveBackward}),w.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"},children:w.jsx(Oy,{tool:e,shapes:n,strokes:i,penColor:a,penSize:f,gridSize:d,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onToolChange:S,showGrid:v,userId:"admin",onMoveShape:_.onMoveShape,onResizeShape:_.onResizeShape})})]})};function Tk(e,t){const n=new Map;for(const r of e)n.set(r.id,r);for(const r of t){const i=n.get(r.id);(!i||r.updatedAt&&(!i.updatedAt||r.updatedAt>i.updatedAt))&&n.set(r.id,r)}return Array.from(n.values())}const Ik=()=>{const[e,t]=g.useState("select"),[n,r]=g.useState([]),[i,s]=g.useState([]),[o,l]=g.useState(null),[a,u]=g.useState(sg),[f,c]=g.useState(og),d=lg,[y,v]=g.useState(()=>{const R=localStorage.getItem("viewpage-toolbar-state");if(R)try{return JSON.parse(R)}catch{console.warn("Failed to parse toolbar state from localStorage")}return{x:50,y:50,width:600,height:80,opacity:.5}}),[x,E]=g.useState(!1),[p,h]=g.useState(!1),[m,_]=g.useState({x:0,y:0}),[S,C]=g.useState({x:0,y:0,width:0,height:0}),k=g.useRef(null),T=md({shapes:n,strokes:i,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,silent:!0});g.useEffect(()=>{localStorage.setItem("viewpage-toolbar-state",JSON.stringify(y))},[y]);const z=g.useCallback(R=>{const ce=window.innerWidth-20,P=window.innerHeight-20;let{x:B,y:W,width:Z,height:te,opacity:ut}=R;return Z=Math.max(200,Math.min(Z,ce)),te=Math.max(100,Math.min(te,P)),B=Math.max(10,Math.min(B,window.innerWidth-Z-10)),W=Math.max(10,Math.min(W,window.innerHeight-te-10)),{x:B,y:W,width:Z,height:te,opacity:ut}},[]),b=g.useCallback(R=>{p||(E(!0),_({x:R.clientX-y.x,y:R.clientY-y.y}),R.preventDefault())},[y.x,y.y,p]),M=g.useCallback(R=>{h(!0),C({x:R.clientX,y:R.clientY,width:y.width,height:y.height}),R.preventDefault(),R.stopPropagation()},[y.width,y.height]);g.useEffect(()=>{const R=G=>{if(x){const ce={...y,x:G.clientX-m.x,y:G.clientY-m.y};v(ce)}else if(p){const ce=G.clientX-S.x,P=G.clientY-S.y,B={...y,width:S.width+ce,height:S.height+P};v(z(B))}},U=()=>{(x||p)&&(v(G=>z(G)),E(!1),h(!1))};if(x||p)return document.addEventListener("mousemove",R),document.addEventListener("mouseup",U),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",U)}},[x,p,m,S,y,z]),Wn.useEffect(()=>{He()||(console.log("[ViewPage] Firebase 미사용, localStorage에서 복원 시도"),T.pullFromStorage())},[T]),Wn.useEffect(()=>{if(!He()){const R=setTimeout(()=>{console.log("[ViewPage] localStorage 자동 저장 실행"),T.pushToStorage()},1e3);return()=>clearTimeout(R)}},[n,i,T]),g.useEffect(()=>{if(!He())return;const R=Dy(U=>{U.type==="shapes"?r(G=>Tk(G,U.shapes)):U.type==="strokes"&&s(U.strokes)},U=>{console.warn("[ViewPage] Firebase 실시간 구독 오류",U)});return()=>R()},[]);const $=g.useCallback(R=>{(R==="pen"||R==="eraser"||R==="select")&&t(R)},[]),A=Wn.useMemo(()=>Fy({onDrawEnd:()=>{He()&&pd(i)},onMoveShape:(R,U)=>{if(He()){const G="viewer";Te({[`shapes/${R}/x`]:U.x,[`shapes/${R}/y`]:U.y,[`shapes/${R}/updatedAt`]:Date.now(),[`shapes/${R}/updatedBy`]:G})}},onResizeShape:(R,U)=>{if(He()){const G="viewer";Te({[`shapes/${R}/width`]:U.width,[`shapes/${R}/height`]:U.height,...U.x!==void 0?{[`shapes/${R}/x`]:U.x}:{},...U.y!==void 0?{[`shapes/${R}/y`]:U.y}:{},[`shapes/${R}/updatedAt`]:Date.now(),[`shapes/${R}/updatedBy`]:G})}},onUpdateShape:(R,U,G)=>{if(He()){if(U==="selected")return;const ce="viewer";Te({[`shapes/${R}/${U}`]:G,[`shapes/${R}/updatedAt`]:Date.now(),[`shapes/${R}/updatedBy`]:ce})}},onDeleteShape:R=>{if(He()){const U="viewer";Te({[`shapes/${R}`]:{id:R,deleted:!0,updatedAt:Date.now(),updatedBy:U}})}}}),[i]);return w.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",backgroundColor:"#f5f5f5",margin:0,padding:0,overflow:"hidden"},children:[w.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"},children:w.jsx(Oy,{tool:e,shapes:n,strokes:i,penColor:a,penSize:f,gridSize:d,selectedId:o,setShapes:r,setStrokes:s,setSelectedId:l,onToolChange:$,showGrid:!1,userId:"viewer",onMoveShape:A.onMoveShape,onResizeShape:A.onResizeShape})}),w.jsxs("div",{ref:k,style:{position:"fixed",left:`${y.x}px`,top:`${y.y}px`,width:`${y.width}px`,height:`${y.height}px`,zIndex:2e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"1px solid rgba(221, 221, 221, 0.8)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",opacity:y.opacity,display:"flex",flexDirection:"column",userSelect:"none"},children:[w.jsx("div",{style:{height:"24px",backgroundColor:"rgba(0, 102, 255, 0.1)",borderRadius:"12px 12px 0 0",cursor:x?"grabbing":"grab",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(221, 221, 221, 0.5)"},onMouseDown:b,children:w.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(0, 102, 255, 0.3)",borderRadius:"2px"}})}),w.jsxs("div",{style:{flex:1,padding:"8px 12px",display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[w.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[w.jsx("button",{onClick:()=>$("select"),style:{padding:"6px",border:e==="select"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:e==="select"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"선택",children:w.jsx("span",{style:{fontSize:"16px"},children:"👆"})}),w.jsx("button",{onClick:()=>$("pen"),style:{padding:"6px",border:e==="pen"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:e==="pen"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"펜",children:w.jsx("span",{style:{fontSize:"16px"},children:"✏️"})}),w.jsx("button",{onClick:()=>$("eraser"),style:{padding:"6px",border:e==="eraser"?"2px solid #0066ff":"1px solid rgba(204, 204, 204, 0.6)",borderRadius:"6px",backgroundColor:e==="eraser"?"rgba(240, 248, 255, 0.9)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"지우개",children:w.jsx("span",{style:{fontSize:"16px"},children:"🧽"})})]}),w.jsx("div",{style:{width:"1px",height:"25px",backgroundColor:"rgba(204, 204, 204, 0.6)"}}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[w.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#666"},children:"색상:"}),w.jsx("input",{type:"color",value:a,onChange:R=>u(R.target.value),style:{width:"28px",height:"20px",border:"none",borderRadius:"3px"}})]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[w.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#666"},children:"크기:"}),w.jsx("input",{type:"range",min:"1",max:"20",value:f,onChange:R=>c(Number(R.target.value)),style:{width:"50px"}}),w.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",minWidth:"18px",color:"#666"},children:f})]}),w.jsx("div",{style:{width:"1px",height:"25px",backgroundColor:"rgba(204, 204, 204, 0.6)"}}),w.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[w.jsx("label",{style:{fontSize:"8px",fontWeight:"bold",color:"#666"},children:"투명도"}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[w.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:y.opacity,onChange:R=>v(U=>({...U,opacity:Number(R.target.value)})),style:{width:"50px"}}),w.jsxs("span",{style:{fontSize:"9px",fontWeight:"bold",minWidth:"25px",color:"#666"},children:[Math.round(y.opacity*100),"%"]})]})]})]}),w.jsx("div",{style:{position:"absolute",bottom:"0",right:"0",width:"16px",height:"16px",cursor:"nw-resize",background:"linear-gradient(-45deg, transparent 30%, rgba(0, 102, 255, 0.3) 30%, rgba(0, 102, 255, 0.3) 70%, transparent 70%)",borderRadius:"0 0 12px 0"},onMouseDown:M,children:w.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"12px",height:"12px",background:"repeating-linear-gradient(-45deg, rgba(0, 102, 255, 0.2) 0px, rgba(0, 102, 255, 0.2) 2px, transparent 2px, transparent 4px)"}})})]})]})},Rk=()=>w.jsx(Mw,{children:w.jsxs(dw,{children:[w.jsx(Ks,{path:"/admin",element:w.jsx(kk,{})}),w.jsx(Ks,{path:"/view",element:w.jsx(Ik,{})}),w.jsx(Ks,{path:"*",element:w.jsx(uw,{to:"/view",replace:!0})})]})}),Nk=aa.createRoot(document.getElementById("root"));Nk.render(w.jsx(Wn.StrictMode,{children:w.jsx(Rk,{})}));
